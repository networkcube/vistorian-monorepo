import{I as b,g as u,m,e as B,h as F,j as h}from"./main-ba7be054.js";function U(e,t,s){const o=e.toLowerCase().split(","),n=new b;for(let i=0;i<o.length;i++)e=o[i].trim(),(!s||s=="node")&&(n.nodeIds=n.nodeIds.concat(t.nodes().filter(c=>c.label().toLowerCase().indexOf(e)>-1||c.nodeType().toLowerCase().indexOf(e)>-1).ids())),(!s||s=="link")&&(n.linkIds=n.linkIds.concat(t.links().filter(c=>c.source.label().toLowerCase().indexOf(e)>-1||c.target.label().toLowerCase().indexOf(e)>-1||c.linkType().indexOf(e)>-1).ids())),(!s||s=="locations")&&(n.locationIds=n.locationIds.concat(t.locations().filter(c=>c.label().toLowerCase().indexOf(e)>-1).ids()));return n}const f="highlight",p="selection",g="timeRange",y="createSelection",T="deleteSelection",I="setCurrentSelectionId",C="setSelectionColor",M="selectionColoring",w="selectionFilter",_="selectionPriority",O="searchResult",A="SET_STATE",x="GET_STATE",G="STATE_CREATED",L="ZOOM_INTERACTION",Z="CENTER_VIEW",R=[f,p,g,y,T,I,M,w,_,O,C,A,x,G,L];class z{}const S=new z;let v=-1;function ue(e,t){S[e]=t}function Se(e){for(let t=0;t<R.length;t++)S[R[t]]=e}window.addEventListener("storage",le,!1);class r{constructor(t){this.id=Math.random(),this.type=t,this.body=null}}function Ee(e,t){const s=new r(e);s.body=t,l(s,!0)}function W(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function he(e,t,s){const o=u(),n=m(t);t!=null&&W(t),!t==null&&(e="reset");const i=new Y(e,n,s);l(i);let c="auto";t&&o.currentSelection_id>0&&(c="url(/networkcube/icons/brush.png),auto");const d=document.querySelector("body");d&&(d.style.cursor=c)}class Y extends r{constructor(t,s,o){super(f),this.action=t,this.idCompound=s!=null?s:new b,this.msg=o!=null?o:""}}function fe(e,t,s){const o=u();s||(s=o.currentSelection_id);const n=m(t),i=new J(e,n,s);l(i)}class J extends r{constructor(t,s,o){super(p),this.action=t,this.idCompound=s,this.selectionId=o!=null?o:0}}function pe(e,t,s,o){const n=new j(e,t);o==null&&(o=!1),o?l(n):k(n)}class j extends r{constructor(t,s){super(g),this.startUnix=t,this.endUnix=s}}function ge(e,t){const o=u().createSelection(e);o.name=t;const n=new q(o);return l(n,!1),o}class q extends r{constructor(t){super(y),this.selection=t}}function ye(e){u();const t=new K(e);l(t)}class K extends r{constructor(t){super(I),this.selectionId=t.id}}function Te(e,t){const s=new Q(e,t);l(s)}class Q extends r{constructor(t,s){super(M),this.selectionId=t.id,this.showColor=s}}function Ie(e,t){const s=new X(e,t);l(s)}class X extends r{constructor(t,s){super(w),this.selectionId=t.id,this.filter=s}}function Ce(e,t){const s=new $(e,t,t.priority,e.priority);l(s)}class $ extends r{constructor(t,s,o,n){super(_),this.selectionId1=t.id,this.selectionId2=s.id,this.priority1=o,this.priority2=n}}function Me(e){const t=new ee(e);l(t)}class ee extends r{constructor(t){super(T),this.selectionId=t.id}}function we(e,t){l(new te(e,t))}class te extends r{constructor(t,s){super(C),this.selectionId=t.id,this.color=s}}function _e(e){l(new se(e))}class se extends r{constructor(t){super(Z),this.selectionId=t.id}}function Oe(e,t){const s=U(e,u(),t);l(new oe(e,s))}class oe extends r{constructor(t,s){super(O),this.idCompound=s,this.searchTerm=t}}class E{constructor(t,s,o){this.networkType=t,this.timeSliderStart=s,this.timeSliderEnd=o}}class Ae extends E{constructor(t,s,o,n,i,c,d,a,H,P,D,V){super(t,s,o),this.globalZoom=n,this.panOffsetGlobal=c,this.panOffsetLocal=i,this.linkOpacity=d,this.nodeOpacity=a,this.nodeSize=H,this.edgeGap=P,this.linkWidth=D,this.labellingType=V}}class xe extends E{constructor(t,s,o,n,i){super(t,s,o),this.zoom=n,this.labellingType=i}}class Ge extends E{constructor(t,s,o,n){super(t,s,o),this.labellingType=n}}class Le extends E{constructor(t,s,o,n,i,c){super(t,s,o),this.nodeOverlap=n,this.linkOpacity=i,this.opacityOfPositionlessNodes=c}}class ne extends r{constructor(t,s){super(A),this.state=t,this.viewType=s}}function Ne(e,t){l(new ne(e,t),!0)}class ie extends r{constructor(t,s,o,n){super(x),this.bookmarkIndex=t,this.viewType=s,this.isNewBookmark=o,this.typeOfMultiView=n}}function ke(e,t,s,o){l(new ie(e,t,s,o),!0)}class ce extends r{constructor(t,s,o,n,i){super(G),this.state=t,this.bookmarkIndex=s,this.viewType=o,this.isNewBookmark=n,this.typeOfMultiView=i}}function Re(e,t,s,o,n){l(new ce(e,t,s,o,n),!0)}class re extends r{constructor(t,s){super(L),this.visType=t,this.ineractionType=s}}function ve(e,t){l(new re(e,t),!0)}const N="networkcube_message";localStorage[N]=void 0;function l(e,t){(t==null||t)&&k(e),localStorage[N]=JSON.stringify(e,function(s,o){return B(s,o)})}function le(){const e=localStorage[N];if(e==null||e=="undefined")return;const t=u(),s=JSON.parse(e,function(o,n){return F(t,o,n)});!s||s.id==v||(v=s.id,k(s))}function k(e){const t=u();if(S[e.type]){if(e.type==f){const s=e;t.highlight(s.action,s.idCompound)}else if(e.type==p){const s=e;t.selection(s.action,s.idCompound,s.selectionId)}else if(e.type!=g)if(e.type==M){const s=e,o=t.getSelection(s.selectionId);o!=null&&(o.showColor=s.showColor)}else if(e.type==_){const s=e,o=t.getSelection(s.selectionId1),n=t.getSelection(s.selectionId2);o!=null&&(o.priority=s.priority1),n!=null&&(n.priority=s.priority2);const i=t.links().selected().toArray();for(let a=0;a<i.length;a++)i[a].getSelections().sort(h);const c=t.nodes().selected().toArray();for(let a=0;a<c.length;a++)c[a].getSelections().sort(h);const d=t.nodePairs().selected().toArray();for(let a=0;a<d.length;a++)d[a].getSelections().sort(h)}else if(e.type==w){const s=e;t.filterSelection(s.selectionId,s.filter)}else if(e.type==y){const s=e;t.addSelection(s.selection.id,s.selection.color,s.selection.acceptedType,s.selection.priority)}else if(e.type==I){const s=e;t.setCurrentSelection(s.selectionId)}else if(e.type==T){const s=e;t.deleteSelection(s.selectionId)}else if(e.type==O){const s=e;t.highlight("set",s.idCompound)}else if(e.type==C){const s=e,o=t.getSelection(s.selectionId);o!=null&&(o.color=s.color)}else e.type==x||e.type==A||e.type==G||e.type==L;ae(e)}}function ae(e){S[e.type]&&S[e.type]!=null&&S[e.type](e)}export{se as CenterViewMessage,q as CreateSelectionMessage,ee as DeleteSelectionMessage,X as FilterSelectionMessage,ie as GetStateMessage,Y as HighlightMessage,Z as MESSAGE_CENTER_VIEW_ON_SELECTION,x as MESSAGE_GET_STATE,f as MESSAGE_HIGHLIGHT,O as MESSAGE_SEARCH_RESULT,p as MESSAGE_SELECTION,C as MESSAGE_SELECTION_COLORING,y as MESSAGE_SELECTION_CREATE,T as MESSAGE_SELECTION_DELETE,w as MESSAGE_SELECTION_FILTER,_ as MESSAGE_SELECTION_PRIORITY,M as MESSAGE_SELECTION_SET_COLORING_VISIBILITY,I as MESSAGE_SELECTION_SET_CURRENT,A as MESSAGE_SET_STATE,G as MESSAGE_STATE_CREATED,g as MESSAGE_TIME_RANGE,L as MESSAGE_ZOOM_INTERACTION,Le as MapControls,xe as MatrixControls,r as Message,E as NetworkControls,Ae as NodeLinkControls,oe as SearchResultMessage,J as SelectionMessage,$ as SelectionPriorityMessage,K as SetCurrentSelectionIdMessage,ne as SetStateMessage,Q as ShowSelectionColorMessage,ce as StateCreatedMessage,Ge as TimeArchsControls,j as TimeRangeMessage,re as ZoomInteractionMessage,ue as addEventListener,_e as centerViewOnSelection,ge as createSelection,Me as deleteSelection,l as distributeMessage,Ie as filterSelection,ke as getState,he as highlight,Oe as search,fe as selection,Ee as sendMessage,ye as setCurrentSelection,Se as setDefaultEventListener,we as setSelectionColor,Ne as setState,Te as showSelectionColor,Re as stateCreated,Ce as swapPriority,pe as timeRange,ve as zoomInteraction};
