!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.map=e():t.map=e()}(window,function(){return r={},i.m=n={128:function(t,e,n){"use strict";n.r(e),n.d(e,"map",function(){return r});var r={};n.r(r),n.d(r,"NodePositionObject",function(){return Cf});var s={value:()=>{}};function i(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new o(r)}function o(t){this._=t}function l(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=s,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}o.prototype=i.prototype={constructor:o,on:function(t,e){var n,r,i=this._,s=(r=i,(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),o=-1,a=s.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=s[o]).type)i[n]=l(i[n],t.name,e);else if(null==e)for(n in i)i[n]=l(i[n],t.name,null);return this}for(;++o<a;)if((n=(t=s[o]).type)&&(n=function(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}(i[n],t.name)))return n},copy:function(){var t,e={},n=this._;for(t in n)e[t]=n[t].slice();return new o(e)},call:function(t,e){if(0<(n=arguments.length-2))for(var n,r,i=new Array(n),s=0;s<n;++s)i[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=0,n=(r=this._[t]).length;s<n;++s)r[s].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};var a=i;function u(){}function d(t){return null==t?u:function(){return this.querySelector(t)}}function c(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function h(){return[]}function y(t){return null==t?h:function(){return this.querySelectorAll(t)}}function f(t){return function(){return this.matches(t)}}function g(e){return function(t){return t.matches(e)}}var p=Array.prototype.find;function m(){return this.firstElementChild}var _=Array.prototype.filter;function v(){return Array.from(this.children)}function w(t){return new Array(t.length)}function x(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}x.prototype={constructor:x,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function A(t,e,n,r,i,s){for(var o,a=0,l=e.length,u=s.length;a<u;++a)(o=e[a])?(o.__data__=s[a],r[a]=o):n[a]=new x(t,s[a]);for(;a<l;++a)(o=e[a])&&(i[a]=o)}function b(t,e,n,r,i,s,o){for(var a,l,u=new Map,h=e.length,c=s.length,f=new Array(h),d=0;d<h;++d)(a=e[d])&&(f[d]=l=o.call(a,a.__data__,d,e)+"",u.has(l)?i[d]=a:u.set(l,a));for(d=0;d<c;++d)l=o.call(t,s[d],d,s)+"",(a=u.get(l))?((r[d]=a).__data__=s[d],u.delete(l)):n[d]=new x(t,s[d]);for(d=0;d<h;++d)(a=e[d])&&u.get(f[d])===a&&(i[d]=a)}function T(t){return t.__data__}function M(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}var k="http://www.w3.org/1999/xhtml",S={svg:"http://www.w3.org/2000/svg",xhtml:k,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},N=function(t){var e=t+="",n=e.indexOf(":");return 0<=n&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),S.hasOwnProperty(e)?{space:S[e],local:t}:t};var E=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function C(t,e){return t.style.getPropertyValue(e)||E(t).getComputedStyle(t,null).getPropertyValue(e)}function O(t){return t.trim().split(/^|\s+/)}function P(t){return t.classList||new D(t)}function D(t){this._node=t,this._names=O(t.getAttribute("class")||"")}function L(t,e){for(var n=P(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function I(t,e){for(var n=P(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}D.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){t=this._names.indexOf(t);0<=t&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return 0<=this._names.indexOf(t)}};function F(){this.textContent=""}function U(){this.innerHTML=""}function H(){this.nextSibling&&this.parentNode.appendChild(this)}function R(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function j(t){return((t=N(t)).local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(n){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===k&&t.documentElement.namespaceURI===k?t.createElement(n):t.createElementNS(e,n)}})(t)}function Y(){return null}function B(){var t=this.parentNode;t&&t.removeChild(this)}function G(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function z(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function X(s){return function(){var t=this.__on;if(t){for(var e,n=0,r=-1,i=t.length;n<i;++n)e=t[n],s.type&&e.type!==s.type||e.name!==s.name?t[++r]=e:this.removeEventListener(e.type,e.listener,e.options);++r?t.length=r:delete this.__on}}}function q(o,a,l){return function(){var t,e,n=this.__on,r=(e=a,function(t){e.call(this,t,this.__data__)});if(n)for(var i=0,s=n.length;i<s;++i)if((t=n[i]).type===o.type&&t.name===o.name)return this.removeEventListener(t.type,t.listener,t.options),this.addEventListener(t.type,t.listener=r,t.options=l),void(t.value=a);this.addEventListener(o.type,r,l),t={type:o.type,name:o.name,value:a,listener:r,options:l},n?n.push(t):this.__on=[t]}}function W(t,e,n){var r=E(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}var V=[null];function Z(t,e){this._groups=t,this._parents=e}function $(){return new Z([[document.documentElement]],V)}Z.prototype=$.prototype={constructor:Z,select:function(t){"function"!=typeof t&&(t=d(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s,o,a=e[i],l=a.length,u=r[i]=new Array(l),h=0;h<l;++h)(s=a[h])&&(o=t.call(s,s.__data__,h,a))&&("__data__"in s&&(o.__data__=s.__data__),u[h]=o);return new Z(r,this._parents)},selectAll:function(t){var e;t="function"==typeof t?(e=t,function(){return c(e.apply(this,arguments))}):y(t);for(var n=this._groups,r=n.length,i=[],s=[],o=0;o<r;++o)for(var a,l=n[o],u=l.length,h=0;h<u;++h)(a=l[h])&&(i.push(t.call(a,a.__data__,h,l)),s.push(a));return new Z(i,s)},selectChild:function(t){return this.select(null==t?m:(e="function"==typeof t?t:g(t),function(){return p.call(this.children,e)}));var e},selectChildren:function(t){return this.selectAll(null==t?v:(e="function"==typeof t?t:g(t),function(){return _.call(this.children,e)}));var e},filter:function(t){"function"!=typeof t&&(t=f(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s,o=e[i],a=o.length,l=r[i]=[],u=0;u<a;++u)(s=o[u])&&t.call(s,s.__data__,u,o)&&l.push(s);return new Z(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,T);var n,r=e?b:A,i=this._parents,s=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var o=s.length,a=new Array(o),l=new Array(o),u=new Array(o),h=0;h<o;++h){var c=i[h],f=s[h],d=f.length,g="object"==typeof(g=t.call(c,c&&c.__data__,h,i))&&"length"in g?g:Array.from(g),p=g.length,m=l[h]=new Array(p),y=a[h]=new Array(p);r(c,f,m,y,u[h]=new Array(d),g,e);for(var _,v,w=0,x=0;w<p;++w)if(_=m[w]){for(x<=w&&(x=w+1);!(v=y[x])&&++x<p;);_._next=v||null}}return(a=new Z(a,i))._enter=l,a._exit=u,a},enter:function(){return new Z(this._enter||this._groups.map(w),this._parents)},exit:function(){return new Z(this._exit||this._groups.map(w),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,s=this.exit(),r="function"==typeof t?(r=t(r))&&r.selection():r.append(t+"");return null!=e&&(i=(i=e(i))&&i.selection()),null==n?s.remove():n(s),r&&i?r.merge(i).order():i},merge:function(t){for(var t=t.selection?t.selection():t,e=this._groups,n=t._groups,r=e.length,t=n.length,i=Math.min(r,t),s=new Array(r),o=0;o<i;++o)for(var a,l=e[o],u=n[o],h=l.length,c=s[o]=new Array(h),f=0;f<h;++f)(a=l[f]||u[f])&&(c[f]=a);for(;o<r;++o)s[o]=e[o];return new Z(s,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],s=i.length-1,o=i[s];0<=--s;)(r=i[s])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(n){function t(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}n=n||M;for(var e=this._groups,r=e.length,i=new Array(r),s=0;s<r;++s){for(var o,a=e[s],l=a.length,u=i[s]=new Array(l),h=0;h<l;++h)(o=a[h])&&(u[h]=o);u.sort(t)}return new Z(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,s=e[n],o=0,a=s.length;o<a;++o)(i=s[o])&&t.call(i,i.__data__,o,s);return this},attr:function(t,e){var n=N(t);if(arguments.length<2){t=this.node();return n.local?t.getAttributeNS(n.space,n.local):t.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}}:function(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){return 1<arguments.length?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(e,n,r){return function(){var t=n.apply(this,arguments);null==t?this.style.removeProperty(e):this.style.setProperty(e,t,r)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):C(this.node(),t)},property:function(t,e){return 1<arguments.length?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(e,n){return function(){var t=n.apply(this,arguments);null==t?delete this[e]:this[e]=t}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=O(t+"");if(arguments.length<2){for(var r=P(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?L:I)(this,t)}}:e?function(t){return function(){L(this,t)}}:function(t){return function(){I(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?F:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?U:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(H)},lower:function(){return this.each(R)},append:function(t){var e="function"==typeof t?t:j(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:j(t),r=null==e?Y:"function"==typeof e?e:d(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(B)},clone:function(t){return this.select(t?z:G)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,s=(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return 0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}),o=s.length;if(!(arguments.length<2)){for(a=e?q:X,r=0;r<o;++r)this.each(a(s[r],e,n));return this}var a=this.node().__on;if(a)for(var l,u=0,h=a.length;u<h;++u)for(r=0,l=a[u];r<o;++r)if((i=s[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return W(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return W(this,t,e)}})(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],s=0,o=i.length;s<o;++s)(r=i[s])&&(yield r)}};var Q=$,J=function(t){return"string"==typeof t?new Z([[document.querySelector(t)]],[document.documentElement]):new Z([[t]],V)};function K(t,e,n){(t.prototype=e.prototype=n).constructor=t}function tt(t,e){var n,r=Object.create(t.prototype);for(n in e)r[n]=e[n];return r}function et(){}var nt="\\s*([+-]?\\d+)\\s*",rt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",it="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",st=/^#([0-9a-f]{3,8})$/,ot=new RegExp("^rgb\\("+[nt,nt,nt]+"\\)$"),at=new RegExp("^rgb\\("+[it,it,it]+"\\)$"),lt=new RegExp("^rgba\\("+[nt,nt,nt,rt]+"\\)$"),ut=new RegExp("^rgba\\("+[it,it,it,rt]+"\\)$"),ht=new RegExp("^hsl\\("+[rt,it,it]+"\\)$"),ct=new RegExp("^hsla\\("+[rt,it,it,rt]+"\\)$"),ft={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function dt(){return this.rgb().formatHex()}function gt(){return this.rgb().formatRgb()}function pt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=st.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?mt(e):3===n?new vt(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?yt(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?yt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=ot.exec(t))?new vt(e[1],e[2],e[3],1):(e=at.exec(t))?new vt(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=lt.exec(t))?yt(e[1],e[2],e[3],e[4]):(e=ut.exec(t))?yt(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=ht.exec(t))?bt(e[1],e[2]/100,e[3]/100,1):(e=ct.exec(t))?bt(e[1],e[2]/100,e[3]/100,e[4]):ft.hasOwnProperty(t)?mt(ft[t]):"transparent"===t?new vt(NaN,NaN,NaN,0):null}function mt(t){return new vt(t>>16&255,t>>8&255,255&t,1)}function yt(t,e,n,r){return new vt(t=r<=0?e=n=NaN:t,e,n,r)}function _t(t,e,n,r){return 1===arguments.length?(i=(i=t)instanceof et?i:pt(i))?new vt((i=i.rgb()).r,i.g,i.b,i.opacity):new vt:new vt(t,e,n,null==r?1:r);var i}function vt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function wt(){return"#"+At(this.r)+At(this.g)+At(this.b)}function xt(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function At(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function bt(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||1<=n?t=e=NaN:e<=0&&(t=NaN),new Mt(t,e,n,r)}function Tt(t){if(t instanceof Mt)return new Mt(t.h,t.s,t.l,t.opacity);if(!(t=!(t instanceof et)?pt(t):t))return new Mt;if(t instanceof Mt)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(o=e===s?(n-r)/a+6*(n<r):n===s?(r-e)/a+2:(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=0<l&&l<1?0:o,new Mt(o,a,l,t.opacity)}function Mt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function kt(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function St(t,e,n,r,i){var s=t*t,o=s*t;return((1-3*t+3*s-o)*e+(4-6*s+3*o)*n+(1+3*t+3*s-3*o)*r+o*i)/6}K(et,pt,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:dt,formatHex:dt,formatHsl:function(){return Tt(this).formatHsl()},formatRgb:gt,toString:gt}),K(vt,_t,tt(et,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new vt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new vt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:wt,formatHex:wt,formatRgb:xt,toString:xt})),K(Mt,function(t,e,n,r){return 1===arguments.length?Tt(t):new Mt(t,e,n,null==r?1:r)},tt(et,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Mt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Mt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,e=n+(n<.5?n:1-n)*e,n=2*n-e;return new vt(kt(240<=t?t-240:120+t,n,e),kt(t,n,e),kt(t<120?240+t:t-120,n,e),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var Nt=t=>()=>t;function Et(e,n){return function(t){return e+t*n}}function Ct(s){return 1==(s=+s)?Ot:function(t,e){return e-t?(n=t,r=e,i=s,n=Math.pow(n,i),r=Math.pow(r,i)-n,i=1/i,function(t){return Math.pow(n+t*r,i)}):Nt(isNaN(t)?e:t);var n,r,i}}function Ot(t,e){var n=e-t;return n?Et(t,n):Nt(isNaN(t)?e:t)}var Pt=function t(e){var o=Ct(e);function n(e,t){var n=o((e=_t(e)).r,(t=_t(t)).r),r=o(e.g,t.g),i=o(e.b,t.b),s=Ot(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=r(t),e.b=i(t),e.opacity=s(t),e+""}}return n.gamma=t,n}(1);function Dt(a){return function(t){for(var e,n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o=0;o<n;++o)e=_t(t[o]),r[o]=e.r||0,i[o]=e.g||0,s[o]=e.b||0;return r=a(r),i=a(i),s=a(s),e.opacity=1,function(t){return e.r=r(t),e.g=i(t),e.b=s(t),e+""}}}Dt(function(o){var a=o.length-1;return function(t){var e=t<=0?t=0:1<=t?a-(t=1):Math.floor(t*a),n=o[e],r=o[e+1],i=0<e?o[e-1]:2*n-r,s=e<a-1?o[e+2]:2*r-n;return St((t-e/a)*a,i,n,r,s)}}),Dt(function(o){var a=o.length;return function(t){var e=Math.floor(((t%=1)<0?++t:t)*a),n=o[(e+a-1)%a],r=o[e%a],i=o[(e+1)%a],s=o[(e+2)%a];return St((t-e/a)*a,n,r,i,s)}});var Lt=function(e,n){n=n||[];var r,i=e?Math.min(n.length,e.length):0,s=n.slice();return function(t){for(r=0;r<i;++r)s[r]=e[r]*(1-t)+n[r]*t;return s}};function It(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ft(t,e){for(var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),o=0;o<r;++o)i[o]=Xt(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(t){for(o=0;o<r;++o)s[o]=i[o](t);return s}}var Ut=function(e,n){var r=new Date;return e=+e,n=+n,function(t){return r.setTime(e*(1-t)+n*t),r}},Ht=function(e,n){return e=+e,n=+n,function(t){return e*(1-t)+n*t}},Rt=function(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),e=null===e||"object"!=typeof e?{}:e)n in t?r[n]=Xt(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},jt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Yt=new RegExp(jt.source,"g");var Bt,Gt,zt=function(t,r){var e,n,i,s,o,a=jt.lastIndex=Yt.lastIndex=0,l=-1,u=[],h=[];for(t+="",r+="";(e=jt.exec(t))&&(n=Yt.exec(r));)(i=n.index)>a&&(i=r.slice(a,i),u[l]?u[l]+=i:u[++l]=i),(e=e[0])===(n=n[0])?u[l]?u[l]+=n:u[++l]=n:(u[++l]=null,h.push({i:l,x:Ht(e,n)})),a=Yt.lastIndex;return a<r.length&&(i=r.slice(a),u[l]?u[l]+=i:u[++l]=i),u.length<2?h[0]?(o=h[0].x,function(t){return o(t)+""}):(s=r,function(){return s}):(r=h.length,function(t){for(var e,n=0;n<r;++n)u[(e=h[n]).i]=e.x(t);return u.join("")})},Xt=function(t,e){var n=typeof e;return null==e||"boolean"==n?Nt(e):("number"==n?Ht:"string"==n?(n=pt(e))?(e=n,Pt):zt:e instanceof pt?Pt:e instanceof Date?Ut:It(e)?Lt:Array.isArray(e)?Ft:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Rt:Ht)(t,e)},qt=0,Wt=0,Vt=0,Zt=1e3,$t=0,Qt=0,Jt=0,Kt="object"==typeof performance&&performance.now?performance:Date,te="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ee(){return Qt||(te(ne),Qt=Kt.now()+Jt)}function ne(){Qt=0}function re(){this._call=this._time=this._next=null}function ie(t,e,n){var r=new re;return r.restart(t,e,n),r}function se(){Qt=($t=Kt.now())+Jt,qt=Wt=0;try{!function(){ee(),++qt;for(var t,e=Bt;e;)0<=(t=Qt-e._time)&&e._call.call(void 0,t),e=e._next;--qt}()}finally{qt=0,function(){var t,e,n=Bt,r=1/0;for(;n;)n=n._call?(r>n._time&&(r=n._time),(t=n)._next):(e=n._next,n._next=null,t?t._next=e:Bt=e);Gt=t,ae(r)}(),Qt=0}}function oe(){var t=Kt.now(),e=t-$t;Zt<e&&(Jt-=e,$t=t)}function ae(t){qt||(Wt=Wt&&clearTimeout(Wt),24<t-Qt?(t<1/0&&(Wt=setTimeout(se,t-Kt.now()-Jt)),Vt=Vt&&clearInterval(Vt)):(Vt||($t=Kt.now(),Vt=setInterval(oe,Zt)),qt=1,te(se)))}re.prototype=ie.prototype={constructor:re,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?ee():+n)+(null==e?0:+e),this._next||Gt===this||(Gt?Gt._next=this:Bt=this,Gt=this),this._call=t,this._time=n,ae()},stop:function(){this._call&&(this._call=null,this._time=1/0,ae())}};function le(e,n,t){var r=new re;return n=null==n?0:+n,r.restart(t=>{r.stop(),e(t+n)},n,t),r}function ue(t,e,n,r,i,s){var o,a,l,u,h,c=t.__transition;if(c){if(n in c)return}else t.__transition={};function f(t){var e,n,r,i;if(l.state!==de)return g();for(e in h)if((i=h[e]).name===l.name){if(i.state===pe)return le(f);i.state===me?(i.state=_e,i.timer.stop(),i.on.call("interrupt",o,o.__data__,i.index,i.group),delete h[e]):+e<a&&(i.state=_e,i.timer.stop(),i.on.call("cancel",o,o.__data__,i.index,i.group),delete h[e])}if(le(function(){l.state===pe&&(l.state=me,l.timer.restart(d,l.delay,l.time),d(t))}),l.state=ge,l.on.call("start",o,o.__data__,l.index,l.group),l.state===ge){for(l.state=pe,u=new Array(r=l.tween.length),e=0,n=-1;e<r;++e)(i=l.tween[e].value.call(o,o.__data__,l.index,l.group))&&(u[++n]=i);u.length=n+1}}function d(t){for(var e=t<l.duration?l.ease.call(null,t/l.duration):(l.timer.restart(g),l.state=ye,1),n=-1,r=u.length;++n<r;)u[n].call(o,e);l.state===ye&&(l.on.call("end",o,o.__data__,l.index,l.group),g())}function g(){for(var t in l.state=_e,l.timer.stop(),delete h[a],h)return;delete o.__transition}o=t,a=n,l={name:e,index:r,group:i,on:he,tween:ce,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:fe},((h=o.__transition)[a]=l).timer=ie(function(t){l.state=de,l.timer.restart(f,l.delay,l.time),l.delay<=t&&f(t-l.delay)},0,l.time)}var he=a("start","end","cancel","interrupt"),ce=[],fe=0,de=1,ge=2,pe=3,me=4,ye=5,_e=6;function ve(t,e){e=xe(t,e);if(e.state>fe)throw new Error("too late; already scheduled");return e}function we(t,e){e=xe(t,e);if(e.state>pe)throw new Error("too late; already running");return e}function xe(t,e){t=t.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function Ae(t,e,n,r,i,s){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*Me,skewX:Math.atan(l)*Me,scaleX:o,scaleY:a}}var be,Te=function(t,e){var n,r,i,s=t.__transition,o=!0;if(s){for(i in e=null==e?null:e+"",s)(n=s[i]).name===e?(r=n.state>ge&&n.state<ye,n.state=_e,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete s[i]):o=!1;o&&delete t.__transition}},Me=180/Math.PI,ke={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Se(c,f,d,g){function p(t){return t.length?t.pop()+" ":""}return function(t,e){var n,r,i,s,o,a,l,u=[],h=[];return t=c(t),e=c(e),i=t.translateX,s=t.translateY,l=e.translateX,a=e.translateY,o=u,n=h,i!==l||s!==a?(r=o.push("translate(",null,f,null,d),n.push({i:r-4,x:Ht(i,l)},{i:r-2,x:Ht(s,a)})):(l||a)&&o.push("translate("+l+f+a+d),n=t.rotate,i=e.rotate,r=u,s=h,n!==i?(180<n-i?i+=360:180<i-n&&(n+=360),s.push({i:r.push(p(r)+"rotate(",null,g)-2,x:Ht(n,i)})):i&&r.push(p(r)+"rotate("+i+g),o=t.skewX,l=e.skewX,a=u,s=h,o!==l?s.push({i:a.push(p(a)+"skewX(",null,g)-2,x:Ht(o,l)}):l&&a.push(p(a)+"skewX("+l+g),n=t.scaleX,r=t.scaleY,i=e.scaleX,s=e.scaleY,o=u,a=h,n!==i||r!==s?(l=o.push(p(o)+"scale(",null,",",null,")"),a.push({i:l-4,x:Ht(n,i)},{i:l-2,x:Ht(r,s)})):1===i&&1===s||o.push(p(o)+"scale("+i+","+s+")"),t=e=null,function(t){for(var e,n=-1,r=h.length;++n<r;)u[(e=h[n]).i]=e.x(t);return u.join("")}}}var Ne=Se(function(t){return(t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"")).isIdentity?ke:Ae(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),Ee=Se(function(t){return null==t?ke:((be=be||document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("transform",t),(t=be.transform.baseVal.consolidate())?(t=t.matrix,Ae(t.a,t.b,t.c,t.d,t.e,t.f)):ke)},", ",")",")");function Ce(t,e,n){var r=t._id;return t.each(function(){var t=we(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return xe(t,r).value[e]}}function Oe(t,e){var n;return("number"==typeof e?Ht:e instanceof pt?Pt:(n=pt(e))?(e=n,Pt):zt)(t,e)}function Pe(r,i){var s,o;function t(){var e,n,t=i.apply(this,arguments);return s=t!==o?(o=t)&&(e=r,n=t,function(t){this.setAttributeNS(e.space,e.local,n.call(this,t))}):s}return t._value=i,t}function De(r,i){var s,o;function t(){var e,n,t=i.apply(this,arguments);return s=t!==o?(o=t)&&(e=r,n=t,function(t){this.setAttribute(e,n.call(this,t))}):s}return t._value=i,t}var Le=Q.prototype.constructor;function Ie(t){return function(){this.style.removeProperty(t)}}function Fe(i,s,o){var a,l;function t(){var e,n,r,t=s.apply(this,arguments);return a=t!==l?(l=t)&&(e=i,n=t,r=o,function(t){this.style.setProperty(e,n.call(this,t),r)}):a}return t._value=s,t}function Ue(n){var r,i;function t(){var e,t=n.apply(this,arguments);return r=t!==i?(i=t)&&(e=t,function(t){this.textContent=e.call(this,t)}):r}return t._value=n,t}var He=0;function Re(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}e=Q.prototype;Re.prototype={constructor:Re,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=d(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a,l,u=r[o],h=u.length,c=s[o]=new Array(h),f=0;f<h;++f)(a=u[f])&&(l=t.call(a,a.__data__,f,u))&&("__data__"in a&&(l.__data__=a.__data__),c[f]=l,ue(c[f],e,n,f,c,xe(a,n)));return new Re(s,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=y(t));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l,u=r[a],h=u.length,c=0;c<h;++c)if(l=u[c]){for(var f,d=t.call(l,l.__data__,c,u),g=xe(l,n),p=0,m=d.length;p<m;++p)(f=d[p])&&ue(f,e,n,p,d,g);s.push(d),o.push(l)}return new Re(s,o,e,n)},selectChild:e.selectChild,selectChildren:e.selectChildren,filter:function(t){"function"!=typeof t&&(t=f(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s,o=e[i],a=o.length,l=r[i]=[],u=0;u<a;++u)(s=o[u])&&t.call(s,s.__data__,u,o)&&l.push(s);return new Re(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,t=n.length,i=Math.min(r,t),s=new Array(r),o=0;o<i;++o)for(var a,l=e[o],u=n[o],h=l.length,c=s[o]=new Array(h),f=0;f<h;++f)(a=l[f]||u[f])&&(c[f]=a);for(;o<r;++o)s[o]=e[o];return new Re(s,this._parents,this._name,this._id)},selection:function(){return new Le(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=++He,r=this._groups,i=r.length,s=0;s<i;++s)for(var o,a,l=r[s],u=l.length,h=0;h<u;++h)(o=l[h])&&(a=xe(o,e),ue(o,t,n,h,l,{time:a.time+a.delay+a.duration,delay:0,duration:a.duration,ease:a.ease}));return new Re(r,this._parents,t,n)},call:e.call,nodes:e.nodes,node:e.node,size:e.size,empty:e.empty,each:e.each,on:function(t,e){var n,r,i,s,o,a,l=this._id;return arguments.length<2?xe(this.node(),l).on.on(t):this.each((n=l,i=e,a=((r=t)+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return!(t=0<=e?t.slice(0,e):t)||"start"===t})?ve:we,function(){var t=a(this,n),e=t.on;e!==s&&(o=(s=e).copy()).on(r,i),t.on=o}))},attr:function(t,e){var n=N(t),r="transform"===n?Ee:Oe;return this.attrTween(t,"function"==typeof e?(n.local?function(r,i,s){var o,a,l;return function(){var t,e,n=s(this);if(null!=n)return(t=this.getAttributeNS(r.space,r.local))===(e=n+"")?null:t===o&&e===a?l:(a=e,l=i(o=t,n));this.removeAttributeNS(r.space,r.local)}}:function(r,i,s){var o,a,l;return function(){var t,e,n=s(this);if(null!=n)return(t=this.getAttribute(r))===(e=n+"")?null:t===o&&e===a?l:(a=e,l=i(o=t,n));this.removeAttribute(r)}})(n,r,Ce(this,"attr."+t,e)):null==e?(n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(n):(n.local?function(e,n,r){var i,s,o=r+"";return function(){var t=this.getAttributeNS(e.space,e.local);return t===o?null:t===i?s:s=n(i=t,r)}}:function(e,n,r){var i,s,o=r+"";return function(){var t=this.getAttribute(e);return t===o?null:t===i?s:s=n(i=t,r)}})(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;t=N(t);return this.tween(n,(t.local?Pe:De)(t,e))},style:function(t,e,n){var r,i,s,o,a,l,u,h,c,f,d,g,p,m,y,_,v,w,x,A,b,T,M,k,S,N="transform"==(t+="")?Ne:Oe;return null==e?this.styleTween(t,(b=t,T=N,function(){var t=C(this,b),e=(this.style.removeProperty(b),C(this,b));return t===e?null:t===M&&e===k?S:S=T(M=t,k=e)})).on("end.style."+t,Ie(t)):"function"==typeof e?this.styleTween(t,(_=N,v=Ce(this,"style."+(y=t),e),function(){var t=C(this,y),e=v(this),n=e+"";return null==e&&(this.style.removeProperty(y),n=e=C(this,y)),t===n?null:t===w&&n===x?A:(x=n,A=_(w=t,e))})).each((u=this._id,m="end."+(p="style."+(h=t)),function(){var t=we(this,u),e=t.on,n=null==t.value[p]?g=g||Ie(h):void 0;e===c&&d===n||(f=(c=e).copy()).on(m,d=n),t.on=f})):this.styleTween(t,(r=t,i=N,l=(s=e)+"",function(){var t=C(this,r);return t===l?null:t===o?a:a=i(o=t,s)}),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,Fe(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?(n=Ce(this,"text",t),function(){var t=n(this);this.textContent=null==t?"":t}):(e=null==t?"":t+"",function(){this.textContent=e}));var e,n},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,Ue(t))},remove:function(){return this.on("end.remove",(n=this._id,function(){var t,e=this.parentNode;for(t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}));var n},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=xe(this.node(),n).tween,s=0,o=i.length;s<o;++s)if((r=i[s]).name===t)return r.value;return null}return this.each((null==e?function(i,s){var o,a;return function(){var t=we(this,i),e=t.tween;if(e!==o)for(var n=0,r=(a=o=e).length;n<r;++n)if(a[n].name===s){(a=a.slice()).splice(n,1);break}t.tween=a}}:function(s,o,a){var l,u;if("function"!=typeof a)throw new Error;return function(){var t=we(this,s),e=t.tween;if(e!==l){u=(l=e).slice();for(var n={name:o,value:a},r=0,i=u.length;r<i;++r)if(u[r].name===o){u[r]=n;break}r===i&&u.push(n)}t.tween=u}})(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){ve(this,t).delay=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){ve(this,t).delay=e}})(e,t)):xe(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){we(this,t).duration=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){we(this,t).duration=e}})(e,t)):xe(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){we(this,t).ease=e}}(e,t)):xe(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each((e=this._id,n=t,function(){var t=n.apply(this,arguments);if("function"!=typeof t)throw new Error;we(this,e).ease=t}));var e,n},end:function(){var i,s,o=this,a=o._id,l=o.size();return new Promise(function(t,e){var n={value:e},r={value:function(){0==--l&&t()}};o.each(function(){var t=we(this,a),e=t.on;e!==i&&((s=(i=e).copy())._.cancel.push(n),s._.interrupt.push(n),s._.end.push(r)),t.on=s}),0===l&&t()})},[Symbol.iterator]:e[Symbol.iterator]};var je={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};Q.prototype.interrupt=function(t){return this.each(function(){Te(this,t)})},Q.prototype.transition=function(t){var e,n;t=t instanceof Re?(e=t._id,t._name):(e=++He,(n=je).time=ee(),null==t?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o,a=r[s],l=a.length,u=0;u<l;++u)(o=a[u])&&ue(o,t,e,u,a,n||function(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}(o,e));return new Re(r,this._parents,t,e)};const{}=Math;["w","e"].map(Ye),["n","s"].map(Ye),["n","w","e","s","nw","ne","sw","se"].map(Ye);function Ye(t){return{type:t}}var Be=Math.sqrt(50),Ge=Math.sqrt(10),ze=Math.sqrt(2);function Xe(t,e,n){t=(e-t)/Math.max(0,n),n=Math.floor(Math.log(t)/Math.LN10),t/=Math.pow(10,n);return 0<=n?(Be<=t?10:Ge<=t?5:ze<=t?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(Be<=t?10:Ge<=t?5:ze<=t?2:1)}function qe(t,e){return null==t||null==e?NaN:t<e?-1:e<t?1:e<=t?0:NaN}function We(n){let i=n,s=n,o=n;function a(t,e,n=0,r=t.length){if(n<r){if(0!==s(e,e))return r;do{var i=n+r>>>1;o(t[i],e)<0?n=1+i:r=i}while(n<r)}return n}return 1===n.length&&(i=(t,e)=>n(t)-e,s=qe,o=(t,e)=>qe(n(t),e)),{left:a,center:function(t,e,n=0,r=t.length){return r=a(t,e,n,r-1),n<r&&i(t[r-1],e)>-i(t[r],e)?r-1:r},right:function(t,e,n=0,r=t.length){if(n<r){if(0!==s(e,e))return r;do{var i=n+r>>>1;o(t[i],e)<=0?n=1+i:r=i}while(n<r)}return n}}}function Ve(e,n){return e=+e,n=+n,function(t){return Math.round(e*(1-t)+n*t)}}var nt=We(qe),it=nt.right,Ze=(nt.left,We(function(t){return null===t?NaN:+t}).center,it);function $e(t){return+t}var Qe=[0,1];function Je(t){return t}function Ke(e,n){return(n-=e=+e)?function(t){return(t-e)/n}:(t=isNaN(n)?NaN:.5,function(){return t});var t}function tn(t,e,n){var r=t[0],t=t[1],i=e[0],e=e[1],i=t<r?(r=Ke(t,r),n(e,i)):(r=Ke(r,t),n(i,e));return function(t){return i(r(t))}}function en(n,t,e){var r=Math.min(n.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=Ke(n[o],n[o+1]),s[o]=e(t[o],t[o+1]);return function(t){var e=Ze(n,t,1,r)-1;return s[e](i[e](t))}}function nn(){var n,r,e,i,s,o,a=Qe,l=Qe,u=Xt,h=Je;function c(){var e,n,t,r=Math.min(a.length,l.length);return h!==Je&&(e=a[0],(n=a[r-1])<e&&(t=e,e=n,n=t),h=function(t){return Math.max(e,Math.min(n,t))}),i=2<r?en:tn,s=o=null,f}function f(t){return null==t||isNaN(t=+t)?e:(s=s||i(a.map(n),l,u))(n(h(t)))}return f.invert=function(t){return h(r((o=o||i(l,a.map(n),Ht))(t)))},f.domain=function(t){return arguments.length?(a=Array.from(t,$e),c()):a.slice()},f.range=function(t){return arguments.length?(l=Array.from(t),c()):l.slice()},f.rangeRound=function(t){return l=Array.from(t),u=Ve,c()},f.clamp=function(t){return arguments.length?(h=!!t||Je,c()):h!==Je},f.interpolate=function(t){return arguments.length?(u=t,c()):u},f.unknown=function(t){return arguments.length?(e=t,f):e},function(t,e){return n=t,r=e,c()}}var rn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function sn(t){if(!(e=rn.exec(t)))throw new Error("invalid format: "+t);var e;return new on({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function on(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}sn.prototype=on.prototype,on.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};function an(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,e=t.slice(0,n);return[1<e.length?e[0]+e.slice(2):e,+t.slice(n+1)]}function ln(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(cn(e)/3)))-cn(Math.abs(t)))}function un(t,e){return(e=an(t,e))?(t=e[0],(e=e[1])<0?"0."+new Array(-e).join("0")+t:t.length>e+1?t.slice(0,e+1)+"."+t.slice(e+1):t+new Array(e-t.length+2).join("0")):t+""}var hn,cn=function(t){return(t=an(Math.abs(t)))?t[1]:NaN},fn=function(a,l){return function(t,e){for(var n=t.length,r=[],i=0,s=a[0],o=0;0<n&&0<s&&(e<o+s+1&&(s=Math.max(1,e-o)),r.push(t.substring(n-=s,n+s)),!((o+=s+1)>e));)s=a[i=(i+1)%a.length];return r.reverse().join(l)}},dn=function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}},gn=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;0<i&&(i=0)}return 0<i?t.slice(0,i)+t.slice(e+1):t},pn={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return 1e21<=Math.abs(t=Math.round(t))?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>un(100*t,e),r:un,s:function(t,e){var n=an(t,e);if(!n)return t+"";var r=n[0],i=n[1],n=i-(hn=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,i=r.length;return n===i?r:i<n?r+new Array(n-i+1).join("0"):0<n?r.slice(0,n)+"."+r.slice(n):"0."+new Array(1-n).join("0")+an(t,Math.max(0,e+n-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)},mn=function(t){return t},yn=Array.prototype.map,_n=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function vn(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,cn(e)-cn(t))+1}function wn(t){return Math.max(0,-cn(Math.abs(t)))}var xn=(rt=function(t){var A=void 0===t.grouping||void 0===t.thousands?mn:fn(yn.call(t.grouping,Number),t.thousands+""),r=void 0===t.currency?"":t.currency[0]+"",i=void 0===t.currency?"":t.currency[1]+"",b=void 0===t.decimal?".":t.decimal+"",T=void 0===t.numerals?mn:dn(yn.call(t.numerals,String)),s=void 0===t.percent?"%":t.percent+"",M=void 0===t.minus?"−":t.minus+"",k=void 0===t.nan?"NaN":t.nan+"";function o(t){var u=(t=sn(t)).fill,h=t.align,c=t.sign,e=t.symbol,f=t.zero,d=t.width,g=t.comma,p=t.precision,m=t.trim,y=t.type;"n"===y?(g=!0,y="g"):pn[y]||(void 0===p&&(p=12),m=!0,y="g"),(f||"0"===u&&"="===h)&&(f=!0,u="0",h="=");var _="$"===e?r:"#"===e&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",v="$"===e?i:/[%p]/.test(y)?s:"",w=pn[y],x=/[defgprs%]/.test(y);function n(t){var e,n,r,i=_,s=v;if("c"===y)s=w(t)+s,t="";else{var o=(t=+t)<0||1/t<0;if(t=isNaN(t)?k:w(Math.abs(t),p),m&&(t=gn(t)),i=((o=o&&0==+t&&"+"!==c?!1:o)?"("===c?c:M:"-"===c||"("===c?"":c)+i,s=("s"===y?_n[8+hn/3]:"")+s+(o&&"("===c?")":""),x)for(e=-1,n=t.length;++e<n;)if((r=t.charCodeAt(e))<48||57<r){s=(46===r?b+t.slice(e+1):t.slice(e))+s,t=t.slice(0,e);break}}g&&!f&&(t=A(t,1/0));var a=i.length+t.length+s.length,l=a<d?new Array(d-a+1).join(u):"";switch(g&&f&&(t=A(l+t,l.length?d-s.length:1/0),l=""),h){case"<":t=i+t+s+l;break;case"=":t=i+l+t+s;break;case"^":t=l.slice(0,a=l.length>>1)+i+t+s+l.slice(a);break;default:t=l+i+t+s}return T(t)}return p=void 0===p?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p)),n.toString=function(){return t+""},n}return{format:o,formatPrefix:function(t,e){var n=o(((t=sn(t)).type="f",t)),e=3*Math.max(-8,Math.min(8,Math.floor(cn(e)/3))),r=Math.pow(10,-e),i=_n[8+e/3];return function(t){return n(r*t)+i}}}}({thousands:",",grouping:[3],currency:["$",""]})).format,An=rt.formatPrefix;function bn(t,e,n,r){var i,s,o,a,l=(s=t,o=e,a=n,n=Math.abs(o-s)/Math.max(0,a),a=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),Be<=(n=n/a)?a*=10:Ge<=n?a*=5:ze<=n&&(a*=2),o<s?-a:a);switch((r=sn(null==r?",f":r)).type){case"s":var u=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=ln(l,u))||(r.precision=i),An(r,u);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=vn(l,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=wn(l))||(r.precision=i-2*("%"===r.type))}return xn(r)}function Tn(u){var h=u.domain;return u.ticks=function(t){var e=h();return function(n,r,t){var e,i,s,o,a=-1;if(t=+t,(n=+n)===(r=+r)&&0<t)return[n];if((e=r<n)&&(i=n,n=r,r=i),0===(o=Xe(n,r,t))||!isFinite(o))return[];if(0<o){let t=Math.round(n/o),e=Math.round(r/o);for(t*o<n&&++t,e*o>r&&--e,s=new Array(i=e-t+1);++a<i;)s[a]=(t+a)*o}else{o=-o;let t=Math.round(n*o),e=Math.round(r*o);for(t/o<n&&++t,e/o>r&&--e,s=new Array(i=e-t+1);++a<i;)s[a]=(t+a)/o}return e&&s.reverse(),s}(e[0],e[e.length-1],null==t?10:t)},u.tickFormat=function(t,e){var n=h();return bn(n[0],n[n.length-1],null==t?10:t,e)},u.nice=function(t){null==t&&(t=10);var e,n,r=h(),i=0,s=r.length-1,o=r[i],a=r[s],l=10;for(a<o&&(n=o,o=a,a=n,n=i,i=s,s=n);0<l--;){if((n=Xe(o,a,t))===e)return r[i]=o,r[s]=a,h(r);if(0<n)o=Math.floor(o/n)*n,a=Math.ceil(a/n)*n;else{if(!(n<0))break;o=Math.ceil(o*n)/n,a=Math.floor(a*n)/n}e=n}return u},u}function Mn(){var e=nn()(Je,Je);return e.copy=function(){return t=e,Mn().domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown());var t},function(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}.apply(e,arguments),Tn(e)}var kn=function(t){return"string"==typeof t?new Z([document.querySelectorAll(t)],[document.documentElement]):new Z([c(t)],V)};const Sn=Math.PI,Nn=2*Sn,En=1e-6,Cn=Nn-En;function On(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Pn(){return new On}On.prototype=Pn.prototype={constructor:On,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,s){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+s)},arcTo:function(t,e,n,r,i){var s,o,a=this._x1,l=this._y1,u=(n=+n)-(t=+t),h=(r=+r)-(e=+e),c=a-t,f=l-e,d=c*c+f*f;if((i=+i)<0)throw new Error("negative radius: "+i);null===this._x1?this._+="M"+(this._x1=t)+","+(this._y1=e):d>En&&(Math.abs(f*u-h*c)>En&&i?(o=u*u+h*h,a=(s=n-a)*s+(n=r-l)*n,r=Math.sqrt(o),l=Math.sqrt(d),l=(a=i*Math.tan((Sn-Math.acos((o+d-a)/(2*r*l)))/2))/l,r=a/r,Math.abs(l-1)>En&&(this._+="L"+(t+l*c)+","+(e+l*f)),this._+="A"+i+","+i+",0,0,"+ +(c*n<f*s)+","+(this._x1=t+r*u)+","+(this._y1=e+r*h)):this._+="L"+(this._x1=t)+","+(this._y1=e))},arc:function(t,e,n,r,i,s){t=+t,e=+e,s=!!s;var o=(n=+n)*Math.cos(r),a=n*Math.sin(r),l=t+o,u=e+a,h=1^s,r=s?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+u:(Math.abs(this._x1-l)>En||Math.abs(this._y1-u)>En)&&(this._+="L"+l+","+u),n&&((r=r<0?r%Nn+Nn:r)>Cn?this._+="A"+n+","+n+",0,1,"+h+","+(t-o)+","+(e-a)+"A"+n+","+n+",0,1,"+h+","+(this._x1=l)+","+(this._y1=u):r>En&&(this._+="A"+n+","+n+",0,"+ +(r>=Sn)+","+h+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var Dn=Pn,Ln=(Array.prototype.slice,function(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}),In=function(t){return function(){return t}};function Fn(t){this._context=t}Fn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var Un=function(t){return new Fn(t)};function Hn(t){return t[0]}function Rn(t){return t[1]}function jn(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Yn(t){this._context=t}Yn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:jn(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:jn(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Bn(t){return new Yn(t)}var Gn=new Date,zn=new Date;function Xn(s,o,n,r){function a(t){return s(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=function(t){return s(t=new Date(+t)),t},a.ceil=function(t){return s(t=new Date(t-1)),o(t,1),s(t),t},a.round=function(t){var e=a(t),n=a.ceil(t);return t-e<n-t?e:n},a.offset=function(t,e){return o(t=new Date(+t),null==e?1:Math.floor(e)),t},a.range=function(t,e,n){var r,i=[];if(t=a.ceil(t),n=null==n?1:Math.floor(n),!(t<e&&0<n))return i;for(;i.push(r=new Date(+t)),o(t,n),s(t),r<t&&t<e;);return i},a.filter=function(n){return Xn(function(t){if(t<=t)for(;s(t),!n(t);)t.setTime(t-1)},function(t,e){if(t<=t)if(e<0)for(;++e<=0;)for(;o(t,-1),!n(t););else for(;0<=--e;)for(;o(t,1),!n(t););})},n&&(a.count=function(t,e){return Gn.setTime(+t),zn.setTime(+e),s(Gn),s(zn),Math.floor(n(Gn,zn))},a.every=function(e){return e=Math.floor(e),isFinite(e)&&0<e?1<e?a.filter(r?function(t){return r(t)%e==0}:function(t){return a.count(0,t)%e==0}):a:null}),a}const qn=864e5;qn;qn,qn;function Wn(e){return Xn(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/6048e5})}var Vn=Wn(0),Zn=Wn(1),a=Wn(2),e=Wn(3),$n=Wn(4),Q=Wn(5),nt=Wn(6),it=(Vn.range,Zn.range,a.range,e.range,$n.range,Q.range,nt.range,Xn(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/qn},function(t){return t.getUTCDate()-1})),Qn=it;it.range;function Jn(e){return Xn(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5})}var Kn=Jn(0),tr=Jn(1),rt=Jn(2),a=Jn(3),er=Jn(4),e=Jn(5),Q=Jn(6),nt=(Kn.range,tr.range,rt.range,a.range,er.range,e.range,Q.range,Xn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/qn,t=>t.getDate()-1)),nr=nt,it=(nt.range,Xn(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()}));it.every=function(n){return isFinite(n=Math.floor(n))&&0<n?Xn(function(t){t.setFullYear(Math.floor(t.getFullYear()/n)*n),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e*n)}):null};var rr=it,rt=(it.range,Xn(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()}));rt.every=function(n){return isFinite(n=Math.floor(n))&&0<n?Xn(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/n)*n),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e*n)}):null};var ir=rt;rt.range;function sr(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function or(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function ar(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function lr(t){var r=t.dateTime,i=t.date,s=t.time,e=t.periods,n=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,u=pr(e),h=mr(e),c=pr(n),f=mr(n),d=pr(o),g=mr(o),p=pr(a),m=mr(a),y=pr(l),_=mr(l),v={a:function(t){return o[t.getDay()]},A:function(t){return n[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return a[t.getMonth()]},c:null,d:Ur,e:Ur,f:Br,g:Kr,G:ei,H:Hr,I:Rr,j:jr,L:Yr,m:Gr,M:zr,p:function(t){return e[+(12<=t.getHours())]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Ti,s:Mi,S:Xr,u:qr,U:Wr,V:Zr,w:$r,W:Qr,x:null,X:null,y:Jr,Y:ti,Z:ni,"%":bi},w={a:function(t){return o[t.getUTCDay()]},A:function(t){return n[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return a[t.getUTCMonth()]},c:null,d:ri,e:ri,f:li,g:vi,G:xi,H:ii,I:si,j:oi,L:ai,m:ui,M:hi,p:function(t){return e[+(12<=t.getUTCHours())]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Ti,s:Mi,S:ci,u:fi,U:di,V:pi,w:mi,W:yi,x:null,X:null,y:_i,Y:wi,Z:Ai,"%":bi},x={a:function(t,e,n){e=d.exec(e.slice(n));return e?(t.w=g.get(e[0].toLowerCase()),n+e[0].length):-1},A:function(t,e,n){e=c.exec(e.slice(n));return e?(t.w=f.get(e[0].toLowerCase()),n+e[0].length):-1},b:function(t,e,n){e=y.exec(e.slice(n));return e?(t.m=_.get(e[0].toLowerCase()),n+e[0].length):-1},B:function(t,e,n){e=p.exec(e.slice(n));return e?(t.m=m.get(e[0].toLowerCase()),n+e[0].length):-1},c:function(t,e,n){return T(t,r,e,n)},d:Sr,e:Sr,f:Dr,g:br,G:Ar,H:Er,I:Er,j:Nr,L:Pr,m:kr,M:Cr,p:function(t,e,n){e=u.exec(e.slice(n));return e?(t.p=h.get(e[0].toLowerCase()),n+e[0].length):-1},q:Mr,Q:Ir,s:Fr,S:Or,u:_r,U:vr,V:wr,w:yr,W:xr,x:function(t,e,n){return T(t,i,e,n)},X:function(t,e,n){return T(t,s,e,n)},y:br,Y:Ar,Z:Tr,"%":Lr};function A(l,u){return function(t){var e,n,r,i=[],s=-1,o=0,a=l.length;for(t instanceof Date||(t=new Date(+t));++s<a;)37===l.charCodeAt(s)&&(i.push(l.slice(o,s)),null!=(n=ur[e=l.charAt(++s)])?e=l.charAt(++s):n="e"===e?" ":"0",(r=u[e])&&(e=r(t,n)),i.push(e),o=s+1);return i.push(l.slice(o,s)),i.join("")}}function b(i,s){return function(t){var e,n,r=ar(1900,void 0,1);if(T(r,i,t+="",0)!=t.length)return null;if("Q"in r)return new Date(r.Q);if("s"in r)return new Date(1e3*r.s+("L"in r?r.L:0));if(!s||"Z"in r||(r.Z=0),"p"in r&&(r.H=r.H%12+12*r.p),void 0===r.m&&(r.m="q"in r?r.q:0),"V"in r){if(r.V<1||53<r.V)return null;"w"in r||(r.w=1),"Z"in r?(e=4<(n=(e=or(ar(r.y,0,1))).getUTCDay())||0===n?Zn.ceil(e):Zn(e),e=Qn.offset(e,7*(r.V-1)),r.y=e.getUTCFullYear(),r.m=e.getUTCMonth(),r.d=e.getUTCDate()+(r.w+6)%7):(e=4<(n=(e=sr(ar(r.y,0,1))).getDay())||0===n?tr.ceil(e):tr(e),e=nr.offset(e,7*(r.V-1)),r.y=e.getFullYear(),r.m=e.getMonth(),r.d=e.getDate()+(r.w+6)%7)}else("W"in r||"U"in r)&&("w"in r||(r.w="u"in r?r.u%7:"W"in r?1:0),n="Z"in r?or(ar(r.y,0,1)).getUTCDay():sr(ar(r.y,0,1)).getDay(),r.m=0,r.d="W"in r?(r.w+6)%7+7*r.W-(n+5)%7:r.w+7*r.U-(n+6)%7);return"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,or(r)):sr(r)}}function T(t,e,n,r){for(var i,s,o=0,a=e.length,l=n.length;o<a;){if(l<=r)return-1;if(37===(i=e.charCodeAt(o++))){if(i=e.charAt(o++),!(s=x[i in ur?e.charAt(o++):i])||(r=s(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return v.x=A(i,v),v.X=A(s,v),v.c=A(r,v),w.x=A(i,w),w.X=A(s,w),w.c=A(r,w),{format:function(t){var e=A(t+="",v);return e.toString=function(){return t},e},parse:function(t){var e=b(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=A(t+="",w);return e.toString=function(){return t},e},utcParse:function(t){var e=b(t+="",!0);return e.toString=function(){return t},e}}}var ur={"-":"",_:" ",0:"0"},hr=/^\s*\d+/,cr=/^%/,fr=/[\\^$*+?|[\]().{}]/g;function dr(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",t=i.length;return r+(t<n?new Array(n-t+1).join(e)+i:i)}function gr(t){return t.replace(fr,"\\$&")}function pr(t){return new RegExp("^(?:"+t.map(gr).join("|")+")","i")}function mr(t){return new Map(t.map((t,e)=>[t.toLowerCase(),e]))}function yr(t,e,n){e=hr.exec(e.slice(n,n+1));return e?(t.w=+e[0],n+e[0].length):-1}function _r(t,e,n){e=hr.exec(e.slice(n,n+1));return e?(t.u=+e[0],n+e[0].length):-1}function vr(t,e,n){e=hr.exec(e.slice(n,n+2));return e?(t.U=+e[0],n+e[0].length):-1}function wr(t,e,n){e=hr.exec(e.slice(n,n+2));return e?(t.V=+e[0],n+e[0].length):-1}function xr(t,e,n){e=hr.exec(e.slice(n,n+2));return e?(t.W=+e[0],n+e[0].length):-1}function Ar(t,e,n){e=hr.exec(e.slice(n,n+4));return e?(t.y=+e[0],n+e[0].length):-1}function br(t,e,n){e=hr.exec(e.slice(n,n+2));return e?(t.y=+e[0]+(68<+e[0]?1900:2e3),n+e[0].length):-1}function Tr(t,e,n){e=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return e?(t.Z=e[1]?0:-(e[2]+(e[3]||"00")),n+e[0].length):-1}function Mr(t,e,n){e=hr.exec(e.slice(n,n+1));return e?(t.q=3*e[0]-3,n+e[0].length):-1}function kr(t,e,n){e=hr.exec(e.slice(n,n+2));return e?(t.m=e[0]-1,n+e[0].length):-1}function Sr(t,e,n){e=hr.exec(e.slice(n,n+2));return e?(t.d=+e[0],n+e[0].length):-1}function Nr(t,e,n){e=hr.exec(e.slice(n,n+3));return e?(t.m=0,t.d=+e[0],n+e[0].length):-1}function Er(t,e,n){e=hr.exec(e.slice(n,n+2));return e?(t.H=+e[0],n+e[0].length):-1}function Cr(t,e,n){e=hr.exec(e.slice(n,n+2));return e?(t.M=+e[0],n+e[0].length):-1}function Or(t,e,n){e=hr.exec(e.slice(n,n+2));return e?(t.S=+e[0],n+e[0].length):-1}function Pr(t,e,n){e=hr.exec(e.slice(n,n+3));return e?(t.L=+e[0],n+e[0].length):-1}function Dr(t,e,n){e=hr.exec(e.slice(n,n+6));return e?(t.L=Math.floor(e[0]/1e3),n+e[0].length):-1}function Lr(t,e,n){e=cr.exec(e.slice(n,n+1));return e?n+e[0].length:-1}function Ir(t,e,n){e=hr.exec(e.slice(n));return e?(t.Q=+e[0],n+e[0].length):-1}function Fr(t,e,n){e=hr.exec(e.slice(n));return e?(t.s=+e[0],n+e[0].length):-1}function Ur(t,e){return dr(t.getDate(),e,2)}function Hr(t,e){return dr(t.getHours(),e,2)}function Rr(t,e){return dr(t.getHours()%12||12,e,2)}function jr(t,e){return dr(1+nr.count(rr(t),t),e,3)}function Yr(t,e){return dr(t.getMilliseconds(),e,3)}function Br(t,e){return Yr(t,e)+"000"}function Gr(t,e){return dr(t.getMonth()+1,e,2)}function zr(t,e){return dr(t.getMinutes(),e,2)}function Xr(t,e){return dr(t.getSeconds(),e,2)}function qr(t){t=t.getDay();return 0===t?7:t}function Wr(t,e){return dr(Kn.count(rr(t)-1,t),e,2)}function Vr(t){var e=t.getDay();return 4<=e||0===e?er(t):er.ceil(t)}function Zr(t,e){return t=Vr(t),dr(er.count(rr(t),t)+(4===rr(t).getDay()),e,2)}function $r(t){return t.getDay()}function Qr(t,e){return dr(tr.count(rr(t)-1,t),e,2)}function Jr(t,e){return dr(t.getFullYear()%100,e,2)}function Kr(t,e){return dr((t=Vr(t)).getFullYear()%100,e,2)}function ti(t,e){return dr(t.getFullYear()%1e4,e,4)}function ei(t,e){var n=t.getDay();return dr((t=4<=n||0===n?er(t):er.ceil(t)).getFullYear()%1e4,e,4)}function ni(t){t=t.getTimezoneOffset();return(0<t?"-":(t*=-1,"+"))+dr(t/60|0,"0",2)+dr(t%60,"0",2)}function ri(t,e){return dr(t.getUTCDate(),e,2)}function ii(t,e){return dr(t.getUTCHours(),e,2)}function si(t,e){return dr(t.getUTCHours()%12||12,e,2)}function oi(t,e){return dr(1+Qn.count(ir(t),t),e,3)}function ai(t,e){return dr(t.getUTCMilliseconds(),e,3)}function li(t,e){return ai(t,e)+"000"}function ui(t,e){return dr(t.getUTCMonth()+1,e,2)}function hi(t,e){return dr(t.getUTCMinutes(),e,2)}function ci(t,e){return dr(t.getUTCSeconds(),e,2)}function fi(t){t=t.getUTCDay();return 0===t?7:t}function di(t,e){return dr(Vn.count(ir(t)-1,t),e,2)}function gi(t){var e=t.getUTCDay();return 4<=e||0===e?$n(t):$n.ceil(t)}function pi(t,e){return t=gi(t),dr($n.count(ir(t),t)+(4===ir(t).getUTCDay()),e,2)}function mi(t){return t.getUTCDay()}function yi(t,e){return dr(Zn.count(ir(t)-1,t),e,2)}function _i(t,e){return dr(t.getUTCFullYear()%100,e,2)}function vi(t,e){return dr((t=gi(t)).getUTCFullYear()%100,e,2)}function wi(t,e){return dr(t.getUTCFullYear()%1e4,e,4)}function xi(t,e){var n=t.getUTCDay();return dr((t=4<=n||0===n?$n(t):$n.ceil(t)).getUTCFullYear()%1e4,e,4)}function Ai(){return"+0000"}function bi(){return"%"}function Ti(t){return+t}function Mi(t){return Math.floor(+t/1e3)}e=(a=lr({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})).format;a.parse,a.utcFormat,a.utcParse;function ki(t){return((t=Math.exp(t))+1/t)/2}(function n(f,d,g){function t(t,e){var r,i,s,n,o=t[0],a=t[1],l=t[2],u=e[0],t=e[1],e=e[2],h=u-o,c=t-a,u=h*h+c*c;return(n=u<1e-12?(s=Math.log(e/l)/f,function(t){return[o+t*h,a+t*c,l*Math.exp(f*t*s)]}):(r=Math.sqrt(u),t=(e*e-l*l+g*u)/(2*l*d*r),n=(e*e-l*l-g*u)/(2*e*d*r),i=Math.log(Math.sqrt(t*t+1)-t),s=(Math.log(Math.sqrt(n*n+1)-n)-i)/f,function(t){var e=t*s,n=ki(i),t=l/(d*r)*(n*(t=f*e+i,((t=Math.exp(2*t))-1)/(t+1))-(t=i,((t=Math.exp(i))-1/t)/2));return[o+t*h,a+t*c,l*n/ki(f*e+i)]})).duration=1e3*s*f/Math.SQRT2,n}return t.rho=function(t){var e=Math.max(.001,+t),t=e*e;return n(e,t,t*t)},t})(Math.SQRT2,2,4);function Si(t){return null!=t&&-1<t}class Ni{constructor(t,e){this.color="#3366cc",this.showColor=!0,this.filter=!1,this.priority=0,this.id=t,this.name="Selection-"+this.id,this.elementIds=[],this.acceptedType=e,this.priority=t}acceptsType(t){return this.acceptedType==t}}var Ei=new Date,Ci=new Date;function Oi(s,o,n,r){function a(t){return s(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=function(t){return s(t=new Date(+t)),t},a.ceil=function(t){return s(t=new Date(t-1)),o(t,1),s(t),t},a.round=function(t){var e=a(t),n=a.ceil(t);return t-e<n-t?e:n},a.offset=function(t,e){return o(t=new Date(+t),null==e?1:Math.floor(e)),t},a.range=function(t,e,n){var r,i=[];if(t=a.ceil(t),n=null==n?1:Math.floor(n),!(t<e&&0<n))return i;for(;i.push(r=new Date(+t)),o(t,n),s(t),r<t&&t<e;);return i},a.filter=function(n){return Oi(function(t){if(t<=t)for(;s(t),!n(t);)t.setTime(t-1)},function(t,e){if(t<=t)if(e<0)for(;++e<=0;)for(;o(t,-1),!n(t););else for(;0<=--e;)for(;o(t,1),!n(t););})},n&&(a.count=function(t,e){return Ei.setTime(+t),Ci.setTime(+e),s(Ei),s(Ci),Math.floor(n(Ei,Ci))},a.every=function(e){return e=Math.floor(e),isFinite(e)&&0<e?1<e?a.filter(r?function(t){return r(t)%e==0}:function(t){return a.count(0,t)%e==0}):a:null}),a}const Pi=1e3,Di=6e4,Li=36e5,Ii=864e5,Fi=7*Ii,Ui=(Ii,365*Ii);function Hi(e){return Oi(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/Fi})}var Ri=Hi(0),ji=Hi(1),Q=Hi(2),nt=Hi(3),Yi=Hi(4),it=Hi(5),rt=Hi(6),a=(Ri.range,ji.range,Q.range,nt.range,Yi.range,it.range,rt.range,Oi(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/Ii},function(t){return t.getUTCDate()-1})),Bi=a;a.range;function Gi(e){return Oi(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Di)/Fi})}var zi=Gi(0),Xi=Gi(1),Q=Gi(2),nt=Gi(3),qi=Gi(4),it=Gi(5),rt=Gi(6),a=(zi.range,Xi.range,Q.range,nt.range,qi.range,it.range,rt.range,Oi(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Di)/Ii,t=>t.getDate()-1)),Wi=a,Q=(a.range,Oi(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()}));Q.every=function(n){return isFinite(n=Math.floor(n))&&0<n?Oi(function(t){t.setFullYear(Math.floor(t.getFullYear()/n)*n),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e*n)}):null};var Vi=Q,nt=(Q.range,Oi(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()}));nt.every=function(n){return isFinite(n=Math.floor(n))&&0<n?Oi(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/n)*n),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e*n)}):null};var Zi=nt;nt.range;function $i(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Qi(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Ji(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Ki(t){var r=t.dateTime,i=t.date,s=t.time,e=t.periods,n=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,u=os(e),h=as(e),c=os(n),f=as(n),d=os(o),g=as(o),p=os(a),m=as(a),y=os(l),_=as(l),v={a:function(t){return o[t.getDay()]},A:function(t){return n[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return a[t.getMonth()]},c:null,d:Ns,e:Ns,f:Ds,g:zs,G:qs,H:Es,I:Cs,j:Os,L:Ps,m:Ls,M:Is,p:function(t){return e[+(12<=t.getHours())]},q:function(t){return 1+~~(t.getMonth()/3)},Q:mo,s:yo,S:Fs,u:Us,U:Hs,V:js,w:Ys,W:Bs,x:null,X:null,y:Gs,Y:Xs,Z:Ws,"%":po},w={a:function(t){return o[t.getUTCDay()]},A:function(t){return n[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return a[t.getUTCMonth()]},c:null,d:Vs,e:Vs,f:Ks,g:ho,G:fo,H:Zs,I:$s,j:Qs,L:Js,m:to,M:eo,p:function(t){return e[+(12<=t.getUTCHours())]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:mo,s:yo,S:no,u:ro,U:io,V:oo,w:ao,W:lo,x:null,X:null,y:uo,Y:co,Z:go,"%":po},x={a:function(t,e,n){e=d.exec(e.slice(n));return e?(t.w=g.get(e[0].toLowerCase()),n+e[0].length):-1},A:function(t,e,n){e=c.exec(e.slice(n));return e?(t.w=f.get(e[0].toLowerCase()),n+e[0].length):-1},b:function(t,e,n){e=y.exec(e.slice(n));return e?(t.m=_.get(e[0].toLowerCase()),n+e[0].length):-1},B:function(t,e,n){e=p.exec(e.slice(n));return e?(t.m=m.get(e[0].toLowerCase()),n+e[0].length):-1},c:function(t,e,n){return T(t,r,e,n)},d:_s,e:_s,f:Ts,g:gs,G:ds,H:ws,I:ws,j:vs,L:bs,m:ys,M:xs,p:function(t,e,n){e=u.exec(e.slice(n));return e?(t.p=h.get(e[0].toLowerCase()),n+e[0].length):-1},q:ms,Q:ks,s:Ss,S:As,u:us,U:hs,V:cs,w:ls,W:fs,x:function(t,e,n){return T(t,i,e,n)},X:function(t,e,n){return T(t,s,e,n)},y:gs,Y:ds,Z:ps,"%":Ms};function A(l,u){return function(t){var e,n,r,i=[],s=-1,o=0,a=l.length;for(t instanceof Date||(t=new Date(+t));++s<a;)37===l.charCodeAt(s)&&(i.push(l.slice(o,s)),null!=(n=ts[e=l.charAt(++s)])?e=l.charAt(++s):n="e"===e?" ":"0",(r=u[e])&&(e=r(t,n)),i.push(e),o=s+1);return i.push(l.slice(o,s)),i.join("")}}function b(i,s){return function(t){var e,n,r=Ji(1900,void 0,1);if(T(r,i,t+="",0)!=t.length)return null;if("Q"in r)return new Date(r.Q);if("s"in r)return new Date(1e3*r.s+("L"in r?r.L:0));if(!s||"Z"in r||(r.Z=0),"p"in r&&(r.H=r.H%12+12*r.p),void 0===r.m&&(r.m="q"in r?r.q:0),"V"in r){if(r.V<1||53<r.V)return null;"w"in r||(r.w=1),"Z"in r?(e=4<(n=(e=Qi(Ji(r.y,0,1))).getUTCDay())||0===n?ji.ceil(e):ji(e),e=Bi.offset(e,7*(r.V-1)),r.y=e.getUTCFullYear(),r.m=e.getUTCMonth(),r.d=e.getUTCDate()+(r.w+6)%7):(e=4<(n=(e=$i(Ji(r.y,0,1))).getDay())||0===n?Xi.ceil(e):Xi(e),e=Wi.offset(e,7*(r.V-1)),r.y=e.getFullYear(),r.m=e.getMonth(),r.d=e.getDate()+(r.w+6)%7)}else("W"in r||"U"in r)&&("w"in r||(r.w="u"in r?r.u%7:"W"in r?1:0),n="Z"in r?Qi(Ji(r.y,0,1)).getUTCDay():$i(Ji(r.y,0,1)).getDay(),r.m=0,r.d="W"in r?(r.w+6)%7+7*r.W-(n+5)%7:r.w+7*r.U-(n+6)%7);return"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,Qi(r)):$i(r)}}function T(t,e,n,r){for(var i,s,o=0,a=e.length,l=n.length;o<a;){if(l<=r)return-1;if(37===(i=e.charCodeAt(o++))){if(i=e.charAt(o++),!(s=x[i in ts?e.charAt(o++):i])||(r=s(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return v.x=A(i,v),v.X=A(s,v),v.c=A(r,v),w.x=A(i,w),w.X=A(s,w),w.c=A(r,w),{format:function(t){var e=A(t+="",v);return e.toString=function(){return t},e},parse:function(t){var e=b(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=A(t+="",w);return e.toString=function(){return t},e},utcParse:function(t){var e=b(t+="",!0);return e.toString=function(){return t},e}}}var ts={"-":"",_:" ",0:"0"},es=/^\s*\d+/,ns=/^%/,rs=/[\\^$*+?|[\]().{}]/g;function is(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",t=i.length;return r+(t<n?new Array(n-t+1).join(e)+i:i)}function ss(t){return t.replace(rs,"\\$&")}function os(t){return new RegExp("^(?:"+t.map(ss).join("|")+")","i")}function as(t){return new Map(t.map((t,e)=>[t.toLowerCase(),e]))}function ls(t,e,n){e=es.exec(e.slice(n,n+1));return e?(t.w=+e[0],n+e[0].length):-1}function us(t,e,n){e=es.exec(e.slice(n,n+1));return e?(t.u=+e[0],n+e[0].length):-1}function hs(t,e,n){e=es.exec(e.slice(n,n+2));return e?(t.U=+e[0],n+e[0].length):-1}function cs(t,e,n){e=es.exec(e.slice(n,n+2));return e?(t.V=+e[0],n+e[0].length):-1}function fs(t,e,n){e=es.exec(e.slice(n,n+2));return e?(t.W=+e[0],n+e[0].length):-1}function ds(t,e,n){e=es.exec(e.slice(n,n+4));return e?(t.y=+e[0],n+e[0].length):-1}function gs(t,e,n){e=es.exec(e.slice(n,n+2));return e?(t.y=+e[0]+(68<+e[0]?1900:2e3),n+e[0].length):-1}function ps(t,e,n){e=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return e?(t.Z=e[1]?0:-(e[2]+(e[3]||"00")),n+e[0].length):-1}function ms(t,e,n){e=es.exec(e.slice(n,n+1));return e?(t.q=3*e[0]-3,n+e[0].length):-1}function ys(t,e,n){e=es.exec(e.slice(n,n+2));return e?(t.m=e[0]-1,n+e[0].length):-1}function _s(t,e,n){e=es.exec(e.slice(n,n+2));return e?(t.d=+e[0],n+e[0].length):-1}function vs(t,e,n){e=es.exec(e.slice(n,n+3));return e?(t.m=0,t.d=+e[0],n+e[0].length):-1}function ws(t,e,n){e=es.exec(e.slice(n,n+2));return e?(t.H=+e[0],n+e[0].length):-1}function xs(t,e,n){e=es.exec(e.slice(n,n+2));return e?(t.M=+e[0],n+e[0].length):-1}function As(t,e,n){e=es.exec(e.slice(n,n+2));return e?(t.S=+e[0],n+e[0].length):-1}function bs(t,e,n){e=es.exec(e.slice(n,n+3));return e?(t.L=+e[0],n+e[0].length):-1}function Ts(t,e,n){e=es.exec(e.slice(n,n+6));return e?(t.L=Math.floor(e[0]/1e3),n+e[0].length):-1}function Ms(t,e,n){e=ns.exec(e.slice(n,n+1));return e?n+e[0].length:-1}function ks(t,e,n){e=es.exec(e.slice(n));return e?(t.Q=+e[0],n+e[0].length):-1}function Ss(t,e,n){e=es.exec(e.slice(n));return e?(t.s=+e[0],n+e[0].length):-1}function Ns(t,e){return is(t.getDate(),e,2)}function Es(t,e){return is(t.getHours(),e,2)}function Cs(t,e){return is(t.getHours()%12||12,e,2)}function Os(t,e){return is(1+Wi.count(Vi(t),t),e,3)}function Ps(t,e){return is(t.getMilliseconds(),e,3)}function Ds(t,e){return Ps(t,e)+"000"}function Ls(t,e){return is(t.getMonth()+1,e,2)}function Is(t,e){return is(t.getMinutes(),e,2)}function Fs(t,e){return is(t.getSeconds(),e,2)}function Us(t){t=t.getDay();return 0===t?7:t}function Hs(t,e){return is(zi.count(Vi(t)-1,t),e,2)}function Rs(t){var e=t.getDay();return 4<=e||0===e?qi(t):qi.ceil(t)}function js(t,e){return t=Rs(t),is(qi.count(Vi(t),t)+(4===Vi(t).getDay()),e,2)}function Ys(t){return t.getDay()}function Bs(t,e){return is(Xi.count(Vi(t)-1,t),e,2)}function Gs(t,e){return is(t.getFullYear()%100,e,2)}function zs(t,e){return is((t=Rs(t)).getFullYear()%100,e,2)}function Xs(t,e){return is(t.getFullYear()%1e4,e,4)}function qs(t,e){var n=t.getDay();return is((t=4<=n||0===n?qi(t):qi.ceil(t)).getFullYear()%1e4,e,4)}function Ws(t){t=t.getTimezoneOffset();return(0<t?"-":(t*=-1,"+"))+is(t/60|0,"0",2)+is(t%60,"0",2)}function Vs(t,e){return is(t.getUTCDate(),e,2)}function Zs(t,e){return is(t.getUTCHours(),e,2)}function $s(t,e){return is(t.getUTCHours()%12||12,e,2)}function Qs(t,e){return is(1+Bi.count(Zi(t),t),e,3)}function Js(t,e){return is(t.getUTCMilliseconds(),e,3)}function Ks(t,e){return Js(t,e)+"000"}function to(t,e){return is(t.getUTCMonth()+1,e,2)}function eo(t,e){return is(t.getUTCMinutes(),e,2)}function no(t,e){return is(t.getUTCSeconds(),e,2)}function ro(t){t=t.getUTCDay();return 0===t?7:t}function io(t,e){return is(Ri.count(Zi(t)-1,t),e,2)}function so(t){var e=t.getUTCDay();return 4<=e||0===e?Yi(t):Yi.ceil(t)}function oo(t,e){return t=so(t),is(Yi.count(Zi(t),t)+(4===Zi(t).getUTCDay()),e,2)}function ao(t){return t.getUTCDay()}function lo(t,e){return is(ji.count(Zi(t)-1,t),e,2)}function uo(t,e){return is(t.getUTCFullYear()%100,e,2)}function ho(t,e){return is((t=so(t)).getUTCFullYear()%100,e,2)}function co(t,e){return is(t.getUTCFullYear()%1e4,e,4)}function fo(t,e){var n=t.getUTCDay();return is((t=4<=n||0===n?Yi(t):Yi.ceil(t)).getUTCFullYear()%1e4,e,4)}function go(){return"+0000"}function po(){return"%"}function mo(t){return+t}function yo(t){return Math.floor(+t/1e3)}var _o=(it=Ki({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})).format,rt=it.parse,vo=it.utcFormat,wo=(it.utcParse,function(t){return t}),xo=1,Ao=2,bo=3,To=4,Mo=1e-6;function ko(t){return"translate("+t+",0)"}function So(t){return"translate(0,"+t+")"}function No(e){return t=>+e(t)}function Eo(e,n){return n=Math.max(0,e.bandwidth()-2*n)/2,e.round()&&(n=Math.round(n)),t=>+e(t)+n}function Co(){return!this.__axis}function Oo(d,g){var p=[],m=null,y=null,_=6,v=6,w=3,x="undefined"!=typeof window&&1<window.devicePixelRatio?0:.5,A=d===xo||d===To?-1:1,b=d===To||d===Ao?"x":"y",T=d===xo||d===bo?ko:So;function e(t){var e=null==m?g.ticks?g.ticks.apply(g,p):g.domain():m,n=null==y?g.tickFormat?g.tickFormat.apply(g,p):wo:y,r=Math.max(_,0)+w,i=g.range(),s=+i[0]+x,o=+i[i.length-1]+x,a=(g.bandwidth?Eo:No)(g.copy(),x),l=t.selection?t.selection():t,u=l.selectAll(".domain").data([null]),h=(f=l.selectAll(".tick").data(e,g).order()).exit(),c=f.enter().append("g").attr("class","tick"),i=f.select("line"),e=f.select("text"),u=u.merge(u.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),f=f.merge(c),i=i.merge(c.append("line").attr("stroke","currentColor").attr(b+"2",A*_)),e=e.merge(c.append("text").attr("fill","currentColor").attr(b,A*r).attr("dy",d===xo?"0em":d===bo?"0.71em":"0.32em"));t!==l&&(u=u.transition(t),f=f.transition(t),i=i.transition(t),e=e.transition(t),h=h.transition(t).attr("opacity",Mo).attr("transform",function(t){return isFinite(t=a(t))?T(t+x):this.getAttribute("transform")}),c.attr("opacity",Mo).attr("transform",function(t){var e=this.parentNode.__axis;return T((e&&isFinite(e=e(t))?e:a(t))+x)})),h.remove(),u.attr("d",d===To||d===Ao?v?"M"+A*v+","+s+"H"+x+"V"+o+"H"+A*v:"M"+x+","+s+"V"+o:v?"M"+s+","+A*v+"V"+x+"H"+o+"V"+A*v:"M"+s+","+x+"H"+o),f.attr("opacity",1).attr("transform",function(t){return T(a(t)+x)}),i.attr(b+"2",A*_),e.attr(b,A*r).text(n),l.filter(Co).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",d===Ao?"start":d===To?"end":"middle"),l.each(function(){this.__axis=a})}return e.scale=function(t){return arguments.length?(g=t,e):g},e.ticks=function(){return p=Array.from(arguments),e},e.tickArguments=function(t){return arguments.length?(p=null==t?[]:Array.from(t),e):p.slice()},e.tickValues=function(t){return arguments.length?(m=null==t?null:Array.from(t),e):m&&m.slice()},e.tickFormat=function(t){return arguments.length?(y=t,e):y},e.tickSize=function(t){return arguments.length?(_=v=+t,e):_},e.tickSizeInner=function(t){return arguments.length?(_=+t,e):_},e.tickSizeOuter=function(t){return arguments.length?(v=+t,e):v},e.tickPadding=function(t){return arguments.length?(w=+t,e):w},e.offset=function(t){return arguments.length?(x=+t,e):x},e}var Po={value:()=>{}};function Do(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new Lo(r)}function Lo(t){this._=t}function Io(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Po,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}Lo.prototype=Do.prototype={constructor:Lo,on:function(t,e){var n,r,i=this._,s=(r=i,(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),o=-1,a=s.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=s[o]).type)i[n]=Io(i[n],t.name,e);else if(null==e)for(n in i)i[n]=Io(i[n],t.name,null);return this}for(;++o<a;)if((n=(t=s[o]).type)&&(n=function(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}(i[n],t.name)))return n},copy:function(){var t,e={},n=this._;for(t in n)e[t]=n[t].slice();return new Lo(e)},call:function(t,e){if(0<(n=arguments.length-2))for(var n,r,i=new Array(n),s=0;s<n;++s)i[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=0,n=(r=this._[t]).length;s<n;++s)r[s].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};var Fo=Do;function Uo(){}function Ho(t){return null==t?Uo:function(){return this.querySelector(t)}}function Ro(){return[]}function jo(t){return null==t?Ro:function(){return this.querySelectorAll(t)}}function Yo(e){return function(){return null==(t=e.apply(this,arguments))?[]:Array.isArray(t)?t:Array.from(t);var t}}function Bo(t){return function(){return this.matches(t)}}function Go(e){return function(t){return t.matches(e)}}var zo=Array.prototype.find;function Xo(){return this.firstElementChild}var qo=Array.prototype.filter;function Wo(){return Array.from(this.children)}function Vo(t){return new Array(t.length)}function Zo(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Zo.prototype={constructor:Zo,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function $o(t,e,n,r,i,s){for(var o,a=0,l=e.length,u=s.length;a<u;++a)(o=e[a])?(o.__data__=s[a],r[a]=o):n[a]=new Zo(t,s[a]);for(;a<l;++a)(o=e[a])&&(i[a]=o)}function Qo(t,e,n,r,i,s,o){for(var a,l,u=new Map,h=e.length,c=s.length,f=new Array(h),d=0;d<h;++d)(a=e[d])&&(f[d]=l=o.call(a,a.__data__,d,e)+"",u.has(l)?i[d]=a:u.set(l,a));for(d=0;d<c;++d)l=o.call(t,s[d],d,s)+"",(a=u.get(l))?((r[d]=a).__data__=s[d],u.delete(l)):n[d]=new Zo(t,s[d]);for(d=0;d<h;++d)(a=e[d])&&u.get(f[d])===a&&(i[d]=a)}function Jo(t){return t.__data__}function Ko(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}var ta="http://www.w3.org/1999/xhtml",ea={svg:"http://www.w3.org/2000/svg",xhtml:ta,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},na=function(t){var e=t+="",n=e.indexOf(":");return 0<=n&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),ea.hasOwnProperty(e)?{space:ea[e],local:t}:t};var ra=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function ia(t,e){return t.style.getPropertyValue(e)||ra(t).getComputedStyle(t,null).getPropertyValue(e)}function sa(t){return t.trim().split(/^|\s+/)}function oa(t){return t.classList||new aa(t)}function aa(t){this._node=t,this._names=sa(t.getAttribute("class")||"")}function la(t,e){for(var n=oa(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function ua(t,e){for(var n=oa(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}aa.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){t=this._names.indexOf(t);0<=t&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return 0<=this._names.indexOf(t)}};function ha(){this.textContent=""}function ca(){this.innerHTML=""}function fa(){this.nextSibling&&this.parentNode.appendChild(this)}function da(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ga(t){return((t=na(t)).local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(n){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===ta&&t.documentElement.namespaceURI===ta?t.createElement(n):t.createElementNS(e,n)}})(t)}function pa(){return null}function ma(){var t=this.parentNode;t&&t.removeChild(this)}function ya(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function _a(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function va(s){return function(){var t=this.__on;if(t){for(var e,n=0,r=-1,i=t.length;n<i;++n)e=t[n],s.type&&e.type!==s.type||e.name!==s.name?t[++r]=e:this.removeEventListener(e.type,e.listener,e.options);++r?t.length=r:delete this.__on}}}function wa(o,a,l){return function(){var t,e,n=this.__on,r=(e=a,function(t){e.call(this,t,this.__data__)});if(n)for(var i=0,s=n.length;i<s;++i)if((t=n[i]).type===o.type&&t.name===o.name)return this.removeEventListener(t.type,t.listener,t.options),this.addEventListener(t.type,t.listener=r,t.options=l),void(t.value=a);this.addEventListener(o.type,r,l),t={type:o.type,name:o.name,value:a,listener:r,options:l},n?n.push(t):this.__on=[t]}}function xa(t,e,n){var r=ra(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}var Aa=[null];function ba(t,e){this._groups=t,this._parents=e}function Ta(){return new ba([[document.documentElement]],Aa)}ba.prototype=Ta.prototype={constructor:ba,select:function(t){"function"!=typeof t&&(t=Ho(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s,o,a=e[i],l=a.length,u=r[i]=new Array(l),h=0;h<l;++h)(s=a[h])&&(o=t.call(s,s.__data__,h,a))&&("__data__"in s&&(o.__data__=s.__data__),u[h]=o);return new ba(r,this._parents)},selectAll:function(t){t=("function"==typeof t?Yo:jo)(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o,a=e[s],l=a.length,u=0;u<l;++u)(o=a[u])&&(r.push(t.call(o,o.__data__,u,a)),i.push(o));return new ba(r,i)},selectChild:function(t){return this.select(null==t?Xo:(e="function"==typeof t?t:Go(t),function(){return zo.call(this.children,e)}));var e},selectChildren:function(t){return this.selectAll(null==t?Wo:(e="function"==typeof t?t:Go(t),function(){return qo.call(this.children,e)}));var e},filter:function(t){"function"!=typeof t&&(t=Bo(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s,o=e[i],a=o.length,l=r[i]=[],u=0;u<a;++u)(s=o[u])&&t.call(s,s.__data__,u,o)&&l.push(s);return new ba(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,Jo);var n,r=e?Qo:$o,i=this._parents,s=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var o=s.length,a=new Array(o),l=new Array(o),u=new Array(o),h=0;h<o;++h){var c=i[h],f=s[h],d=f.length,g="object"==typeof(g=t.call(c,c&&c.__data__,h,i))&&"length"in g?g:Array.from(g),p=g.length,m=l[h]=new Array(p),y=a[h]=new Array(p);r(c,f,m,y,u[h]=new Array(d),g,e);for(var _,v,w=0,x=0;w<p;++w)if(_=m[w]){for(x<=w&&(x=w+1);!(v=y[x])&&++x<p;);_._next=v||null}}return(a=new ba(a,i))._enter=l,a._exit=u,a},enter:function(){return new ba(this._enter||this._groups.map(Vo),this._parents)},exit:function(){return new ba(this._exit||this._groups.map(Vo),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,s=this.exit(),r="function"==typeof t?(r=t(r))&&r.selection():r.append(t+"");return null!=e&&(i=(i=e(i))&&i.selection()),null==n?s.remove():n(s),r&&i?r.merge(i).order():i},merge:function(t){for(var t=t.selection?t.selection():t,e=this._groups,n=t._groups,r=e.length,t=n.length,i=Math.min(r,t),s=new Array(r),o=0;o<i;++o)for(var a,l=e[o],u=n[o],h=l.length,c=s[o]=new Array(h),f=0;f<h;++f)(a=l[f]||u[f])&&(c[f]=a);for(;o<r;++o)s[o]=e[o];return new ba(s,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],s=i.length-1,o=i[s];0<=--s;)(r=i[s])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(n){function t(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}n=n||Ko;for(var e=this._groups,r=e.length,i=new Array(r),s=0;s<r;++s){for(var o,a=e[s],l=a.length,u=i[s]=new Array(l),h=0;h<l;++h)(o=a[h])&&(u[h]=o);u.sort(t)}return new ba(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,s=e[n],o=0,a=s.length;o<a;++o)(i=s[o])&&t.call(i,i.__data__,o,s);return this},attr:function(t,e){var n=na(t);if(arguments.length<2){t=this.node();return n.local?t.getAttributeNS(n.space,n.local):t.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}}:function(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){return 1<arguments.length?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(e,n,r){return function(){var t=n.apply(this,arguments);null==t?this.style.removeProperty(e):this.style.setProperty(e,t,r)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):ia(this.node(),t)},property:function(t,e){return 1<arguments.length?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(e,n){return function(){var t=n.apply(this,arguments);null==t?delete this[e]:this[e]=t}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=sa(t+"");if(arguments.length<2){for(var r=oa(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?la:ua)(this,t)}}:e?function(t){return function(){la(this,t)}}:function(t){return function(){ua(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?ha:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?ca:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(fa)},lower:function(){return this.each(da)},append:function(t){var e="function"==typeof t?t:ga(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:ga(t),r=null==e?pa:"function"==typeof e?e:Ho(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(ma)},clone:function(t){return this.select(t?_a:ya)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,s=(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return 0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}),o=s.length;if(!(arguments.length<2)){for(a=e?wa:va,r=0;r<o;++r)this.each(a(s[r],e,n));return this}var a=this.node().__on;if(a)for(var l,u=0,h=a.length;u<h;++u)for(r=0,l=a[u];r<o;++r)if((i=s[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return xa(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return xa(this,t,e)}})(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],s=0,o=i.length;s<o;++s)(r=i[s])&&(yield r)}};var a=Ta,Ma=function(t){return"string"==typeof t?new ba([[document.querySelector(t)]],[document.documentElement]):new ba([[t]],Aa)};const ka={passive:!1},Sa={capture:!0,passive:!1};function Na(t){t.stopImmediatePropagation()}var Ea=function(t){t.preventDefault(),t.stopImmediatePropagation()},Ca=function(t){var e=t.document.documentElement,t=Ma(t).on("dragstart.drag",Ea,Sa);"onselectstart"in e?t.on("selectstart.drag",Ea,Sa):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")};function Oa(t,e){var n=t.document.documentElement,r=Ma(t).on("dragstart.drag",null);e&&(r.on("click.drag",Ea,Sa),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Pa(t,e,n){(t.prototype=e.prototype=n).constructor=t}function Da(t,e){var n,r=Object.create(t.prototype);for(n in e)r[n]=e[n];return r}function La(){}var Q="\\s*([+-]?\\d+)\\s*",nt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",it="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ia=/^#([0-9a-f]{3,8})$/,Fa=new RegExp("^rgb\\("+[Q,Q,Q]+"\\)$"),Ua=new RegExp("^rgb\\("+[it,it,it]+"\\)$"),Ha=new RegExp("^rgba\\("+[Q,Q,Q,nt]+"\\)$"),Ra=new RegExp("^rgba\\("+[it,it,it,nt]+"\\)$"),ja=new RegExp("^hsl\\("+[nt,it,it]+"\\)$"),Ya=new RegExp("^hsla\\("+[nt,it,it,nt]+"\\)$"),Ba={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ga(){return this.rgb().formatHex()}function za(){return this.rgb().formatRgb()}function Xa(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ia.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?qa(e):3===n?new Za(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Wa(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Wa(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Fa.exec(t))?new Za(e[1],e[2],e[3],1):(e=Ua.exec(t))?new Za(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Ha.exec(t))?Wa(e[1],e[2],e[3],e[4]):(e=Ra.exec(t))?Wa(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=ja.exec(t))?Ka(e[1],e[2]/100,e[3]/100,1):(e=Ya.exec(t))?Ka(e[1],e[2]/100,e[3]/100,e[4]):Ba.hasOwnProperty(t)?qa(Ba[t]):"transparent"===t?new Za(NaN,NaN,NaN,0):null}function qa(t){return new Za(t>>16&255,t>>8&255,255&t,1)}function Wa(t,e,n,r){return new Za(t=r<=0?e=n=NaN:t,e,n,r)}function Va(t,e,n,r){return 1===arguments.length?(i=(i=t)instanceof La?i:Xa(i))?new Za((i=i.rgb()).r,i.g,i.b,i.opacity):new Za:new Za(t,e,n,null==r?1:r);var i}function Za(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function $a(){return"#"+Ja(this.r)+Ja(this.g)+Ja(this.b)}function Qa(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Ja(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Ka(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||1<=n?t=e=NaN:e<=0&&(t=NaN),new el(t,e,n,r)}function tl(t){if(t instanceof el)return new el(t.h,t.s,t.l,t.opacity);if(!(t=!(t instanceof La)?Xa(t):t))return new el;if(t instanceof el)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(o=e===s?(n-r)/a+6*(n<r):n===s?(r-e)/a+2:(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=0<l&&l<1?0:o,new el(o,a,l,t.opacity)}function el(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function nl(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function rl(t,e,n,r,i){var s=t*t,o=s*t;return((1-3*t+3*s-o)*e+(4-6*s+3*o)*n+(1+3*t+3*s-3*o)*r+o*i)/6}Pa(La,Xa,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Ga,formatHex:Ga,formatHsl:function(){return tl(this).formatHsl()},formatRgb:za,toString:za}),Pa(Za,Va,Da(La,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Za(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Za(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$a,formatHex:$a,formatRgb:Qa,toString:Qa})),Pa(el,function(t,e,n,r){return 1===arguments.length?tl(t):new el(t,e,n,null==r?1:r)},Da(La,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new el(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new el(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,e=n+(n<.5?n:1-n)*e,n=2*n-e;return new Za(nl(240<=t?t-240:120+t,n,e),nl(t,n,e),nl(t<120?240+t:t-120,n,e),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var il=t=>()=>t;function sl(e,n){return function(t){return e+t*n}}function ol(s){return 1==(s=+s)?al:function(t,e){return e-t?(n=t,r=e,i=s,n=Math.pow(n,i),r=Math.pow(r,i)-n,i=1/i,function(t){return Math.pow(n+t*r,i)}):il(isNaN(t)?e:t);var n,r,i}}function al(t,e){var n=e-t;return n?sl(t,n):il(isNaN(t)?e:t)}var ll=function t(e){var o=ol(e);function n(e,t){var n=o((e=Va(e)).r,(t=Va(t)).r),r=o(e.g,t.g),i=o(e.b,t.b),s=al(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=r(t),e.b=i(t),e.opacity=s(t),e+""}}return n.gamma=t,n}(1);function ul(a){return function(t){for(var e,n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o=0;o<n;++o)e=Va(t[o]),r[o]=e.r||0,i[o]=e.g||0,s[o]=e.b||0;return r=a(r),i=a(i),s=a(s),e.opacity=1,function(t){return e.r=r(t),e.g=i(t),e.b=s(t),e+""}}}ul(function(o){var a=o.length-1;return function(t){var e=t<=0?t=0:1<=t?a-(t=1):Math.floor(t*a),n=o[e],r=o[e+1],i=0<e?o[e-1]:2*n-r,s=e<a-1?o[e+2]:2*r-n;return rl((t-e/a)*a,i,n,r,s)}}),ul(function(o){var a=o.length;return function(t){var e=Math.floor(((t%=1)<0?++t:t)*a),n=o[(e+a-1)%a],r=o[e%a],i=o[(e+1)%a],s=o[(e+2)%a];return rl((t-e/a)*a,n,r,i,s)}});var hl=function(e,n){n=n||[];var r,i=e?Math.min(n.length,e.length):0,s=n.slice();return function(t){for(r=0;r<i;++r)s[r]=e[r]*(1-t)+n[r]*t;return s}};function cl(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function fl(t,e){for(var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),o=0;o<r;++o)i[o]=xl(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(t){for(o=0;o<r;++o)s[o]=i[o](t);return s}}var dl=function(e,n){var r=new Date;return e=+e,n=+n,function(t){return r.setTime(e*(1-t)+n*t),r}},gl=function(e,n){return e=+e,n=+n,function(t){return e*(1-t)+n*t}},pl=function(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),e=null===e||"object"!=typeof e?{}:e)n in t?r[n]=xl(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},ml=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,yl=new RegExp(ml.source,"g");var _l,vl,wl=function(t,r){var e,n,i,s,o,a=ml.lastIndex=yl.lastIndex=0,l=-1,u=[],h=[];for(t+="",r+="";(e=ml.exec(t))&&(n=yl.exec(r));)(i=n.index)>a&&(i=r.slice(a,i),u[l]?u[l]+=i:u[++l]=i),(e=e[0])===(n=n[0])?u[l]?u[l]+=n:u[++l]=n:(u[++l]=null,h.push({i:l,x:gl(e,n)})),a=yl.lastIndex;return a<r.length&&(i=r.slice(a),u[l]?u[l]+=i:u[++l]=i),u.length<2?h[0]?(o=h[0].x,function(t){return o(t)+""}):(s=r,function(){return s}):(r=h.length,function(t){for(var e,n=0;n<r;++n)u[(e=h[n]).i]=e.x(t);return u.join("")})},xl=function(t,e){var n=typeof e;return null==e||"boolean"==n?il(e):("number"==n?gl:"string"==n?(n=Xa(e))?(e=n,ll):wl:e instanceof Xa?ll:e instanceof Date?dl:cl(e)?hl:Array.isArray(e)?fl:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?pl:gl)(t,e)},Al=function(t){for(var e;e=t.sourceEvent;)t=e;return t},bl=function(t,e){if(t=Al(t),e=void 0===e?t.currentTarget:e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}if(e.getBoundingClientRect){r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]},Tl=0,Ml=0,kl=0,Sl=1e3,Nl=0,El=0,Cl=0,Ol="object"==typeof performance&&performance.now?performance:Date,Pl="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Dl(){return El||(Pl(Ll),El=Ol.now()+Cl)}function Ll(){El=0}function Il(){this._call=this._time=this._next=null}function Fl(t,e,n){var r=new Il;return r.restart(t,e,n),r}function Ul(){El=(Nl=Ol.now())+Cl,Tl=Ml=0;try{!function(){Dl(),++Tl;for(var t,e=_l;e;)0<=(t=El-e._time)&&e._call.call(void 0,t),e=e._next;--Tl}()}finally{Tl=0,function(){var t,e,n=_l,r=1/0;for(;n;)n=n._call?(r>n._time&&(r=n._time),(t=n)._next):(e=n._next,n._next=null,t?t._next=e:_l=e);vl=t,Rl(r)}(),El=0}}function Hl(){var t=Ol.now(),e=t-Nl;Sl<e&&(Cl-=e,Nl=t)}function Rl(t){Tl||(Ml=Ml&&clearTimeout(Ml),24<t-El?(t<1/0&&(Ml=setTimeout(Ul,t-Ol.now()-Cl)),kl=kl&&clearInterval(kl)):(kl||(Nl=Ol.now(),kl=setInterval(Hl,Sl)),Tl=1,Pl(Ul)))}Il.prototype=Fl.prototype={constructor:Il,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Dl():+n)+(null==e?0:+e),this._next||vl===this||(vl?vl._next=this:_l=this,vl=this),this._call=t,this._time=n,Rl()},stop:function(){this._call&&(this._call=null,this._time=1/0,Rl())}};function jl(e,n,t){var r=new Il;return n=null==n?0:+n,r.restart(t=>{r.stop(),e(t+n)},n,t),r}function Yl(t,e,n,r,i,s){var o,a,l,u,h,c=t.__transition;if(c){if(n in c)return}else t.__transition={};function f(t){var e,n,r,i;if(l.state!==Xl)return g();for(e in h)if((i=h[e]).name===l.name){if(i.state===Wl)return jl(f);i.state===Vl?(i.state=$l,i.timer.stop(),i.on.call("interrupt",o,o.__data__,i.index,i.group),delete h[e]):+e<a&&(i.state=$l,i.timer.stop(),i.on.call("cancel",o,o.__data__,i.index,i.group),delete h[e])}if(jl(function(){l.state===Wl&&(l.state=Vl,l.timer.restart(d,l.delay,l.time),d(t))}),l.state=ql,l.on.call("start",o,o.__data__,l.index,l.group),l.state===ql){for(l.state=Wl,u=new Array(r=l.tween.length),e=0,n=-1;e<r;++e)(i=l.tween[e].value.call(o,o.__data__,l.index,l.group))&&(u[++n]=i);u.length=n+1}}function d(t){for(var e=t<l.duration?l.ease.call(null,t/l.duration):(l.timer.restart(g),l.state=Zl,1),n=-1,r=u.length;++n<r;)u[n].call(o,e);l.state===Zl&&(l.on.call("end",o,o.__data__,l.index,l.group),g())}function g(){for(var t in l.state=$l,l.timer.stop(),delete h[a],h)return;delete o.__transition}o=t,a=n,l={name:e,index:r,group:i,on:Bl,tween:Gl,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:zl},((h=o.__transition)[a]=l).timer=Fl(function(t){l.state=Xl,l.timer.restart(f,l.delay,l.time),l.delay<=t&&f(t-l.delay)},0,l.time)}var Bl=Fo("start","end","cancel","interrupt"),Gl=[],zl=0,Xl=1,ql=2,Wl=3,Vl=4,Zl=5,$l=6;function Ql(t,e){e=Kl(t,e);if(e.state>zl)throw new Error("too late; already scheduled");return e}function Jl(t,e){e=Kl(t,e);if(e.state>Wl)throw new Error("too late; already running");return e}function Kl(t,e){t=t.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function tu(t,e,n,r,i,s){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*ru,skewX:Math.atan(l)*ru,scaleX:o,scaleY:a}}var eu,nu=function(t,e){var n,r,i,s=t.__transition,o=!0;if(s){for(i in e=null==e?null:e+"",s)(n=s[i]).name===e?(r=n.state>ql&&n.state<Zl,n.state=$l,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete s[i]):o=!1;o&&delete t.__transition}},ru=180/Math.PI,iu={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function su(c,f,d,g){function p(t){return t.length?t.pop()+" ":""}return function(t,e){var n,r,i,s,o,a,l,u=[],h=[];return t=c(t),e=c(e),i=t.translateX,s=t.translateY,l=e.translateX,a=e.translateY,o=u,n=h,i!==l||s!==a?(r=o.push("translate(",null,f,null,d),n.push({i:r-4,x:gl(i,l)},{i:r-2,x:gl(s,a)})):(l||a)&&o.push("translate("+l+f+a+d),n=t.rotate,i=e.rotate,r=u,s=h,n!==i?(180<n-i?i+=360:180<i-n&&(n+=360),s.push({i:r.push(p(r)+"rotate(",null,g)-2,x:gl(n,i)})):i&&r.push(p(r)+"rotate("+i+g),o=t.skewX,l=e.skewX,a=u,s=h,o!==l?s.push({i:a.push(p(a)+"skewX(",null,g)-2,x:gl(o,l)}):l&&a.push(p(a)+"skewX("+l+g),n=t.scaleX,r=t.scaleY,i=e.scaleX,s=e.scaleY,o=u,a=h,n!==i||r!==s?(l=o.push(p(o)+"scale(",null,",",null,")"),a.push({i:l-4,x:gl(n,i)},{i:l-2,x:gl(r,s)})):1===i&&1===s||o.push(p(o)+"scale("+i+","+s+")"),t=e=null,function(t){for(var e,n=-1,r=h.length;++n<r;)u[(e=h[n]).i]=e.x(t);return u.join("")}}}var ou=su(function(t){return(t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"")).isIdentity?iu:tu(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),au=su(function(t){return null==t?iu:((eu=eu||document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("transform",t),(t=eu.transform.baseVal.consolidate())?(t=t.matrix,tu(t.a,t.b,t.c,t.d,t.e,t.f)):iu)},", ",")",")");function lu(t,e,n){var r=t._id;return t.each(function(){var t=Jl(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return Kl(t,r).value[e]}}function uu(t,e){var n;return("number"==typeof e?gl:e instanceof Xa?ll:(n=Xa(e))?(e=n,ll):wl)(t,e)}function hu(r,i){var s,o;function t(){var e,n,t=i.apply(this,arguments);return s=t!==o?(o=t)&&(e=r,n=t,function(t){this.setAttributeNS(e.space,e.local,n.call(this,t))}):s}return t._value=i,t}function cu(r,i){var s,o;function t(){var e,n,t=i.apply(this,arguments);return s=t!==o?(o=t)&&(e=r,n=t,function(t){this.setAttribute(e,n.call(this,t))}):s}return t._value=i,t}var fu=a.prototype.constructor;function du(t){return function(){this.style.removeProperty(t)}}function gu(i,s,o){var a,l;function t(){var e,n,r,t=s.apply(this,arguments);return a=t!==l?(l=t)&&(e=i,n=t,r=o,function(t){this.style.setProperty(e,n.call(this,t),r)}):a}return t._value=s,t}function pu(n){var r,i;function t(){var e,t=n.apply(this,arguments);return r=t!==i?(i=t)&&(e=t,function(t){this.textContent=e.call(this,t)}):r}return t._value=n,t}var mu=0;function yu(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}Q=a.prototype;yu.prototype={constructor:yu,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Ho(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a,l,u=r[o],h=u.length,c=s[o]=new Array(h),f=0;f<h;++f)(a=u[f])&&(l=t.call(a,a.__data__,f,u))&&("__data__"in a&&(l.__data__=a.__data__),c[f]=l,Yl(c[f],e,n,f,c,Kl(a,n)));return new yu(s,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=jo(t));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l,u=r[a],h=u.length,c=0;c<h;++c)if(l=u[c]){for(var f,d=t.call(l,l.__data__,c,u),g=Kl(l,n),p=0,m=d.length;p<m;++p)(f=d[p])&&Yl(f,e,n,p,d,g);s.push(d),o.push(l)}return new yu(s,o,e,n)},selectChild:Q.selectChild,selectChildren:Q.selectChildren,filter:function(t){"function"!=typeof t&&(t=Bo(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s,o=e[i],a=o.length,l=r[i]=[],u=0;u<a;++u)(s=o[u])&&t.call(s,s.__data__,u,o)&&l.push(s);return new yu(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,t=n.length,i=Math.min(r,t),s=new Array(r),o=0;o<i;++o)for(var a,l=e[o],u=n[o],h=l.length,c=s[o]=new Array(h),f=0;f<h;++f)(a=l[f]||u[f])&&(c[f]=a);for(;o<r;++o)s[o]=e[o];return new yu(s,this._parents,this._name,this._id)},selection:function(){return new fu(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=++mu,r=this._groups,i=r.length,s=0;s<i;++s)for(var o,a,l=r[s],u=l.length,h=0;h<u;++h)(o=l[h])&&(a=Kl(o,e),Yl(o,t,n,h,l,{time:a.time+a.delay+a.duration,delay:0,duration:a.duration,ease:a.ease}));return new yu(r,this._parents,t,n)},call:Q.call,nodes:Q.nodes,node:Q.node,size:Q.size,empty:Q.empty,each:Q.each,on:function(t,e){var n,r,i,s,o,a,l=this._id;return arguments.length<2?Kl(this.node(),l).on.on(t):this.each((n=l,i=e,a=((r=t)+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return!(t=0<=e?t.slice(0,e):t)||"start"===t})?Ql:Jl,function(){var t=a(this,n),e=t.on;e!==s&&(o=(s=e).copy()).on(r,i),t.on=o}))},attr:function(t,e){var n=na(t),r="transform"===n?au:uu;return this.attrTween(t,"function"==typeof e?(n.local?function(r,i,s){var o,a,l;return function(){var t,e,n=s(this);if(null!=n)return(t=this.getAttributeNS(r.space,r.local))===(e=n+"")?null:t===o&&e===a?l:(a=e,l=i(o=t,n));this.removeAttributeNS(r.space,r.local)}}:function(r,i,s){var o,a,l;return function(){var t,e,n=s(this);if(null!=n)return(t=this.getAttribute(r))===(e=n+"")?null:t===o&&e===a?l:(a=e,l=i(o=t,n));this.removeAttribute(r)}})(n,r,lu(this,"attr."+t,e)):null==e?(n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(n):(n.local?function(e,n,r){var i,s,o=r+"";return function(){var t=this.getAttributeNS(e.space,e.local);return t===o?null:t===i?s:s=n(i=t,r)}}:function(e,n,r){var i,s,o=r+"";return function(){var t=this.getAttribute(e);return t===o?null:t===i?s:s=n(i=t,r)}})(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;t=na(t);return this.tween(n,(t.local?hu:cu)(t,e))},style:function(t,e,n){var r,i,s,o,a,l,u,h,c,f,d,g,p,m,y,_,v,w,x,A,b,T,M,k,S,N="transform"==(t+="")?ou:uu;return null==e?this.styleTween(t,(b=t,T=N,function(){var t=ia(this,b),e=(this.style.removeProperty(b),ia(this,b));return t===e?null:t===M&&e===k?S:S=T(M=t,k=e)})).on("end.style."+t,du(t)):"function"==typeof e?this.styleTween(t,(_=N,v=lu(this,"style."+(y=t),e),function(){var t=ia(this,y),e=v(this),n=e+"";return null==e&&(this.style.removeProperty(y),n=e=ia(this,y)),t===n?null:t===w&&n===x?A:(x=n,A=_(w=t,e))})).each((u=this._id,m="end."+(p="style."+(h=t)),function(){var t=Jl(this,u),e=t.on,n=null==t.value[p]?g=g||du(h):void 0;e===c&&d===n||(f=(c=e).copy()).on(m,d=n),t.on=f})):this.styleTween(t,(r=t,i=N,l=(s=e)+"",function(){var t=ia(this,r);return t===l?null:t===o?a:a=i(o=t,s)}),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,gu(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?(n=lu(this,"text",t),function(){var t=n(this);this.textContent=null==t?"":t}):(e=null==t?"":t+"",function(){this.textContent=e}));var e,n},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,pu(t))},remove:function(){return this.on("end.remove",(n=this._id,function(){var t,e=this.parentNode;for(t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}));var n},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=Kl(this.node(),n).tween,s=0,o=i.length;s<o;++s)if((r=i[s]).name===t)return r.value;return null}return this.each((null==e?function(i,s){var o,a;return function(){var t=Jl(this,i),e=t.tween;if(e!==o)for(var n=0,r=(a=o=e).length;n<r;++n)if(a[n].name===s){(a=a.slice()).splice(n,1);break}t.tween=a}}:function(s,o,a){var l,u;if("function"!=typeof a)throw new Error;return function(){var t=Jl(this,s),e=t.tween;if(e!==l){u=(l=e).slice();for(var n={name:o,value:a},r=0,i=u.length;r<i;++r)if(u[r].name===o){u[r]=n;break}r===i&&u.push(n)}t.tween=u}})(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){Ql(this,t).delay=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){Ql(this,t).delay=e}})(e,t)):Kl(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){Jl(this,t).duration=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){Jl(this,t).duration=e}})(e,t)):Kl(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){Jl(this,t).ease=e}}(e,t)):Kl(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each((e=this._id,n=t,function(){var t=n.apply(this,arguments);if("function"!=typeof t)throw new Error;Jl(this,e).ease=t}));var e,n},end:function(){var i,s,o=this,a=o._id,l=o.size();return new Promise(function(t,e){var n={value:e},r={value:function(){0==--l&&t()}};o.each(function(){var t=Jl(this,a),e=t.on;e!==i&&((s=(i=e).copy())._.cancel.push(n),s._.interrupt.push(n),s._.end.push(r)),t.on=s}),0===l&&t()})},[Symbol.iterator]:Q[Symbol.iterator]};var _u={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};a.prototype.interrupt=function(t){return this.each(function(){nu(this,t)})},a.prototype.transition=function(t){var e,n;t=t instanceof yu?(e=t._id,t._name):(e=++mu,(n=_u).time=Dl(),null==t?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o,a=r[s],l=a.length,u=0;u<l;++u)(o=a[u])&&Yl(o,t,e,u,a,n||function(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}(o,e));return new yu(r,this._parents,t,e)};const{}=Math;["w","e"].map(vu),["n","s"].map(vu),["n","w","e","s","nw","ne","sw","se"].map(vu);function vu(t){return{type:t}}var wu=t=>()=>t;function xu(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:s,x:o,y:a,dx:l,dy:u,dispatch:h}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:h}})}function Au(t){return!t.ctrlKey&&!t.button}function bu(){return this.parentNode}function Tu(t,e){return null==e?{x:t.x,y:t.y}:e}function Mu(){return navigator.maxTouchPoints||"ontouchstart"in this}xu.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function ku(){var r,i,s,o,a=Au,l=bu,n=Tu,e=Mu,p={},m=Fo("start","drag","end"),y=0,u=0;function _(t){t.on("mousedown.drag",h).filter(e).on("touchstart.drag",d).on("touchmove.drag",g,ka).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(t,e){o||!a.call(this,t,e)||(e=w(this,l.call(this,t,e),t,e,"mouse"))&&(Ma(t.view).on("mousemove.drag",c,Sa).on("mouseup.drag",f,Sa),Ca(t.view),Na(t),s=!1,r=t.clientX,i=t.clientY,e("start",t))}function c(t){var e,n;Ea(t),s||(e=t.clientX-r,n=t.clientY-i,s=u<e*e+n*n),p.mouse("drag",t)}function f(t){Ma(t.view).on("mousemove.drag mouseup.drag",null),Oa(t.view,s),Ea(t),p.mouse("end",t)}function d(t,e){if(a.call(this,t,e))for(var n,r=t.changedTouches,i=l.call(this,t,e),s=r.length,o=0;o<s;++o)(n=w(this,i,t,e,r[o].identifier,r[o]))&&(Na(t),n("start",t,r[o]))}function g(t){for(var e,n=t.changedTouches,r=n.length,i=0;i<r;++i)(e=p[n[i].identifier])&&(Ea(t),e("drag",t,n[i]))}function v(t){var e,n,r=t.changedTouches,i=r.length;for(o&&clearTimeout(o),o=setTimeout(function(){o=null},500),e=0;e<i;++e)(n=p[r[e].identifier])&&(Na(t),n("end",t,r[e]))}function w(o,a,t,l,u,e){var h,c,f,d=m.copy(),g=bl(e||t,a);if(null!=(f=n.call(o,new xu("beforestart",{sourceEvent:t,target:_,identifier:u,active:y,x:g[0],y:g[1],dx:0,dy:0,dispatch:d}),l)))return h=f.x-g[0]||0,c=f.y-g[1]||0,function t(e,n,r){var i,s=g;switch(e){case"start":p[u]=t,i=y++;break;case"end":delete p[u],--y;case"drag":g=bl(r||n,a),i=y}d.call(e,o,new xu(e,{sourceEvent:n,subject:f,target:_,identifier:u,active:i,x:g[0]+h,y:g[1]+c,dx:g[0]-s[0],dy:g[1]-s[1],dispatch:d}),l)}}return _.filter=function(t){return arguments.length?(a="function"==typeof t?t:wu(!!t),_):a},_.container=function(t){return arguments.length?(l="function"==typeof t?t:wu(t),_):l},_.subject=function(t){return arguments.length?(n="function"==typeof t?t:wu(t),_):n},_.touchable=function(t){return arguments.length?(e="function"==typeof t?t:wu(!!t),_):e},_.on=function(){var t=m.on.apply(m,arguments);return t===m?_:t},_.clickDistance=function(t){return arguments.length?(u=(t=+t)*t,_):Math.sqrt(u)},_}var Su=Math.sqrt(50),Nu=Math.sqrt(10),Eu=Math.sqrt(2);function Cu(t,e,n){t=(e-t)/Math.max(0,n),n=Math.floor(Math.log(t)/Math.LN10),t/=Math.pow(10,n);return 0<=n?(Su<=t?10:Nu<=t?5:Eu<=t?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(Su<=t?10:Nu<=t?5:Eu<=t?2:1)}function Ou(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),n=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),r=r/n;return Su<=r?n*=10:Nu<=r?n*=5:Eu<=r&&(n*=2),e<t?-n:n}function Pu(t,e){return null==t||null==e?NaN:t<e?-1:e<t?1:e<=t?0:NaN}function Du(n){let i=n,s=n,o=n;function a(t,e,n=0,r=t.length){if(n<r){if(0!==s(e,e))return r;do{var i=n+r>>>1;o(t[i],e)<0?n=1+i:r=i}while(n<r)}return n}return 1===n.length&&(i=(t,e)=>n(t)-e,s=Pu,o=(t,e)=>Pu(n(t),e)),{left:a,center:function(t,e,n=0,r=t.length){return r=a(t,e,n,r-1),n<r&&i(t[r-1],e)>-i(t[r],e)?r-1:r},right:function(t,e,n=0,r=t.length){if(n<r){if(0!==s(e,e))return r;do{var i=n+r>>>1;o(t[i],e)<=0?n=1+i:r=i}while(n<r)}return n}}}function Lu(e,n){return e=+e,n=+n,function(t){return Math.round(e*(1-t)+n*t)}}var it=Du(Pu),nt=it.right,Iu=(it.left,Du(function(t){return null===t?NaN:+t}).center,nt);function Fu(t){return+t}var Uu=[0,1];function Hu(t){return t}function Ru(e,n){return(n-=e=+e)?function(t){return(t-e)/n}:(t=isNaN(n)?NaN:.5,function(){return t});var t}function ju(t,e,n){var r=t[0],t=t[1],i=e[0],e=e[1],i=t<r?(r=Ru(t,r),n(e,i)):(r=Ru(r,t),n(i,e));return function(t){return i(r(t))}}function Yu(n,t,e){var r=Math.min(n.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=Ru(n[o],n[o+1]),s[o]=e(t[o],t[o+1]);return function(t){var e=Iu(n,t,1,r)-1;return s[e](i[e](t))}}function Bu(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Gu(){var n,r,e,i,s,o,a=Uu,l=Uu,u=xl,h=Hu;function c(){var e,n,t,r=Math.min(a.length,l.length);return h!==Hu&&(e=a[0],(n=a[r-1])<e&&(t=e,e=n,n=t),h=function(t){return Math.max(e,Math.min(n,t))}),i=2<r?Yu:ju,s=o=null,f}function f(t){return null==t||isNaN(t=+t)?e:(s=s||i(a.map(n),l,u))(n(h(t)))}return f.invert=function(t){return h(r((o=o||i(l,a.map(n),gl))(t)))},f.domain=function(t){return arguments.length?(a=Array.from(t,Fu),c()):a.slice()},f.range=function(t){return arguments.length?(l=Array.from(t),c()):l.slice()},f.rangeRound=function(t){return l=Array.from(t),u=Lu,c()},f.clamp=function(t){return arguments.length?(h=!!t||Hu,c()):h!==Hu},f.interpolate=function(t){return arguments.length?(u=t,c()):u},f.unknown=function(t){return arguments.length?(e=t,f):e},function(t,e){return n=t,r=e,c()}}function zu(){return Gu()(Hu,Hu)}function Xu(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}var qu=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Wu(t){if(!(e=qu.exec(t)))throw new Error("invalid format: "+t);var e;return new Vu({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Vu(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}Wu.prototype=Vu.prototype,Vu.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};function Zu(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,e=t.slice(0,n);return[1<e.length?e[0]+e.slice(2):e,+t.slice(n+1)]}function $u(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Ku(e)/3)))-Ku(Math.abs(t)))}function Qu(t,e){return(e=Zu(t,e))?(t=e[0],(e=e[1])<0?"0."+new Array(-e).join("0")+t:t.length>e+1?t.slice(0,e+1)+"."+t.slice(e+1):t+new Array(e-t.length+2).join("0")):t+""}var Ju,Ku=function(t){return(t=Zu(Math.abs(t)))?t[1]:NaN},th=function(a,l){return function(t,e){for(var n=t.length,r=[],i=0,s=a[0],o=0;0<n&&0<s&&(e<o+s+1&&(s=Math.max(1,e-o)),r.push(t.substring(n-=s,n+s)),!((o+=s+1)>e));)s=a[i=(i+1)%a.length];return r.reverse().join(l)}},eh=function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}},nh=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;0<i&&(i=0)}return 0<i?t.slice(0,i)+t.slice(e+1):t},rh={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return 1e21<=Math.abs(t=Math.round(t))?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Qu(100*t,e),r:Qu,s:function(t,e){var n=Zu(t,e);if(!n)return t+"";var r=n[0],i=n[1],n=i-(Ju=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,i=r.length;return n===i?r:i<n?r+new Array(n-i+1).join("0"):0<n?r.slice(0,n)+"."+r.slice(n):"0."+new Array(1-n).join("0")+Zu(t,Math.max(0,e+n-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)},ih=function(t){return t},sh=Array.prototype.map,oh=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ah(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ku(e)-Ku(t))+1}function lh(t){return Math.max(0,-Ku(Math.abs(t)))}var uh=(Q=function(t){var A=void 0===t.grouping||void 0===t.thousands?ih:th(sh.call(t.grouping,Number),t.thousands+""),r=void 0===t.currency?"":t.currency[0]+"",i=void 0===t.currency?"":t.currency[1]+"",b=void 0===t.decimal?".":t.decimal+"",T=void 0===t.numerals?ih:eh(sh.call(t.numerals,String)),s=void 0===t.percent?"%":t.percent+"",M=void 0===t.minus?"−":t.minus+"",k=void 0===t.nan?"NaN":t.nan+"";function o(t){var u=(t=Wu(t)).fill,h=t.align,c=t.sign,e=t.symbol,f=t.zero,d=t.width,g=t.comma,p=t.precision,m=t.trim,y=t.type;"n"===y?(g=!0,y="g"):rh[y]||(void 0===p&&(p=12),m=!0,y="g"),(f||"0"===u&&"="===h)&&(f=!0,u="0",h="=");var _="$"===e?r:"#"===e&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",v="$"===e?i:/[%p]/.test(y)?s:"",w=rh[y],x=/[defgprs%]/.test(y);function n(t){var e,n,r,i=_,s=v;if("c"===y)s=w(t)+s,t="";else{var o=(t=+t)<0||1/t<0;if(t=isNaN(t)?k:w(Math.abs(t),p),m&&(t=nh(t)),i=((o=o&&0==+t&&"+"!==c?!1:o)?"("===c?c:M:"-"===c||"("===c?"":c)+i,s=("s"===y?oh[8+Ju/3]:"")+s+(o&&"("===c?")":""),x)for(e=-1,n=t.length;++e<n;)if((r=t.charCodeAt(e))<48||57<r){s=(46===r?b+t.slice(e+1):t.slice(e))+s,t=t.slice(0,e);break}}g&&!f&&(t=A(t,1/0));var a=i.length+t.length+s.length,l=a<d?new Array(d-a+1).join(u):"";switch(g&&f&&(t=A(l+t,l.length?d-s.length:1/0),l=""),h){case"<":t=i+t+s+l;break;case"=":t=i+l+t+s;break;case"^":t=l.slice(0,a=l.length>>1)+i+t+s+l.slice(a);break;default:t=l+i+t+s}return T(t)}return p=void 0===p?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p)),n.toString=function(){return t+""},n}return{format:o,formatPrefix:function(t,e){var n=o(((t=Wu(t)).type="f",t)),e=3*Math.max(-8,Math.min(8,Math.floor(Ku(e)/3))),r=Math.pow(10,-e),i=oh[8+e/3];return function(t){return n(r*t)+i}}}}({thousands:",",grouping:[3],currency:["$",""]})).format,hh=Q.formatPrefix;function ch(u){var h=u.domain;return u.ticks=function(t){var e=h();return function(n,r,t){var e,i,s,o,a=-1;if(t=+t,(n=+n)===(r=+r)&&0<t)return[n];if((e=r<n)&&(i=n,n=r,r=i),0===(o=Cu(n,r,t))||!isFinite(o))return[];if(0<o){let t=Math.round(n/o),e=Math.round(r/o);for(t*o<n&&++t,e*o>r&&--e,s=new Array(i=e-t+1);++a<i;)s[a]=(t+a)*o}else{o=-o;let t=Math.round(n*o),e=Math.round(r*o);for(t/o<n&&++t,e/o>r&&--e,s=new Array(i=e-t+1);++a<i;)s[a]=(t+a)/o}return e&&s.reverse(),s}(e[0],e[e.length-1],null==t?10:t)},u.tickFormat=function(t,e){var n=h();return function(t,e,n,r){var i,s=Ou(t,e,n);switch((r=Wu(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=$u(s,o))||(r.precision=i),hh(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=ah(s,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=lh(s))||(r.precision=i-2*("%"===r.type))}return uh(r)}(n[0],n[n.length-1],null==t?10:t,e)},u.nice=function(t){null==t&&(t=10);var e,n,r=h(),i=0,s=r.length-1,o=r[i],a=r[s],l=10;for(a<o&&(n=o,o=a,a=n,n=i,i=s,s=n);0<l--;){if((n=Cu(o,a,t))===e)return r[i]=o,r[s]=a,h(r);if(0<n)o=Math.floor(o/n)*n,a=Math.ceil(a/n)*n;else{if(!(n<0))break;o=Math.ceil(o*n)/n,a=Math.floor(a*n)/n}e=n}return u},u}function fh(){var t=zu();return t.copy=function(){return Bu(t,fh())},Xu.apply(t,arguments),ch(t)}var dh=Oi(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});dh.every=function(n){return n=Math.floor(n),isFinite(n)&&0<n?1<n?Oi(function(t){t.setTime(Math.floor(t/n)*n)},function(t,e){t.setTime(+t+e*n)},function(t,e){return(e-t)/n}):dh:null};var gh=dh,a=(dh.range,Oi(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+e*Pi)},function(t,e){return(e-t)/Pi},function(t){return t.getUTCSeconds()})),ph=a,it=(a.range,Oi(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Pi)},function(t,e){t.setTime(+t+e*Di)},function(t,e){return(e-t)/Di},function(t){return t.getMinutes()})),nt=it,Q=(it.range,Oi(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Pi-t.getMinutes()*Di)},function(t,e){t.setTime(+t+e*Li)},function(t,e){return(e-t)/Li},function(t){return t.getHours()})),a=Q,it=(Q.range,Oi(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()})),Q=it,it=(it.range,Oi(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*Di)},function(t,e){return(e-t)/Di},function(t){return t.getUTCMinutes()})),mh=it,it=(it.range,Oi(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*Li)},function(t,e){return(e-t)/Li},function(t){return t.getUTCHours()})),yh=it,it=(it.range,Oi(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()})),_h=it;it.range;function vh(a,t,e,n,r,i){const l=[[ph,1,Pi],[ph,5,5e3],[ph,15,15e3],[ph,30,3e4],[i,1,Di],[i,5,3e5],[i,15,9e5],[i,30,18e5],[r,1,Li],[r,3,3*Li],[r,6,6*Li],[r,12,432e5],[n,1,Ii],[n,2,2*Ii],[e,1,Fi],[t,1,2592e6],[t,3,7776e6],[a,1,Ui]];function o(t,e,n){var r=Math.abs(e-t)/n,i=Du(([,,t])=>t).right(l,r);if(i===l.length)return a.every(Ou(t/Ui,e/Ui,n));if(0===i)return gh.every(Math.max(Ou(t,e,n),1));const[s,o]=l[r/l[i-1][2]<l[i][2]/r?i-1:i];return s.every(o)}return[function(t,e,n){var r=e<t;r&&([t,e]=[e,t]);const i=n&&"function"==typeof n.range?n:o(t,e,n),s=i?i.range(t,+e+1):[];return r?s.reverse():s},o]}const[wh,xh]=vh(Zi,_h,Ri,Bi,yh,mh),[]=vh(Vi,Q,zi,Wi,a,nt);function Ah(t){return new Date(t)}function bh(t){return t instanceof Date?+t:+new Date(+t)}function Th(n,a,e,r,i,s,o,l,u,h){var c=zu(),f=c.invert,d=c.domain,g=h(".%L"),p=h(":%S"),m=h("%I:%M"),y=h("%I %p"),_=h("%a %d"),v=h("%b %d"),w=h("%B"),x=h("%Y");function A(t){return(u(t)<t?g:l(t)<t?p:o(t)<t?m:s(t)<t?y:r(t)<t?i(t)<t?_:v:e(t)<t?w:x)(t)}return c.invert=function(t){return new Date(f(t))},c.domain=function(t){return arguments.length?d(Array.from(t,bh)):d().map(Ah)},c.ticks=function(t){var e=d();return n(e[0],e[e.length-1],null==t?10:t)},c.tickFormat=function(t,e){return null==e?A:h(e)},c.nice=function(t){var e,n,r,i,s,o=d();return(t=!t||"function"!=typeof t.range?a(o[0],o[o.length-1],null==t?10:t):t)?d((n=t,r=0,i=(e=(e=o).slice()).length-1,s=e[r],(t=e[i])<s&&(o=r,r=i,i=o,o=s,s=t,t=o),e[r]=n.floor(s),e[i]=n.ceil(t),e)):c},c.copy=function(){return Bu(c,Th(n,a,e,r,i,s,o,l,u,h))},c}function Mh(t){return((t=Math.exp(t))+1/t)/2}(function n(f,d,g){function t(t,e){var r,i,s,n,o=t[0],a=t[1],l=t[2],u=e[0],t=e[1],e=e[2],h=u-o,c=t-a,u=h*h+c*c;return(n=u<1e-12?(s=Math.log(e/l)/f,function(t){return[o+t*h,a+t*c,l*Math.exp(f*t*s)]}):(r=Math.sqrt(u),t=(e*e-l*l+g*u)/(2*l*d*r),n=(e*e-l*l-g*u)/(2*e*d*r),i=Math.log(Math.sqrt(t*t+1)-t),s=(Math.log(Math.sqrt(n*n+1)-n)-i)/f,function(t){var e=t*s,n=Mh(i),t=l/(d*r)*(n*(t=f*e+i,((t=Math.exp(2*t))-1)/(t+1))-(t=i,((t=Math.exp(i))-1/t)/2));return[o+t*h,a+t*c,l*n/Mh(f*e+i)]})).duration=1e3*s*f/Math.SQRT2,n}return t.rho=function(t){var e=Math.max(.001,+t),t=e*e;return n(e,t,t*t)},t})(Math.SQRT2,2,4);_o("%m/%d/%Y"),_o("%d/%m/%Y");const kh="%Y-%m-%d %H:%M:%S",Sh=rt(kh),Nh=_o(kh),Eh={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6,milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:2592e6,years:31536e6};_o("%w");function Ch(t,e){const n=_o("%V"),r=new Date(t);switch(e){case 0:return r.getUTCMilliseconds();case 1:return r.getUTCSeconds();case 2:return r.getUTCMinutes();case 3:return r.getUTCHours();case 4:return r.getUTCDay();case 5:return parseInt(n(r));case 6:return r.getUTCMonth()+1;default:return r.getUTCFullYear()}}const Oh=["millisecond","second","minute","hour","day","week","month","year","decade","century","millenium"],Ph="[*dgraph*]",Dh=!1;function Lh(t,e,n){return n==Ph?t:n}class Ih{constructor(){this.BOOKMARK_COLORS=this.default_colors,this.selectionColor_pointer=0,this.name="",this.gran_min=0,this.gran_max=Number.MAX_VALUE,this.minWeight=1e7,this.maxWeight=-1e7,this._nodes=[],this._links=[],this.directed=!1,this._nodePairs=[],this._locations=[],this._times=[],this.timeObjects=[],this.nodeOrders=[],this.matrix=[],this.selections=[],this.nodeArrays=new Uh,this.linkArrays=new Hh,this.nodePairArrays=new Rh,this.timeArrays=new jh,this.linkTypeArrays=new Yh,this.nodeTypeArrays=new Bh,this.locationArrays=new Gh,this.attributeArrays={node:this.nodeArrays,link:this.linkArrays,time:this.timeArrays,nodePair:this.nodePairArrays,linkType:this.linkTypeArrays,nodeType:this.nodeTypeArrays,location:this.locationArrays},this.highlightArrays=new uc,this.highlightFreezeArrays=new uc,this.currentSelection_id=0,this.defaultLinkSelection=this.createSelection("link"),this.defaultNodeSelection=this.createSelection("node"),this.gran_min_NAME="gran_min",this.gran_max_NAME="gran_max_NAME",this.directed_NAME="directed_NAME",this.minWeight_NAME="minWeight_NAME",this.maxWeight_NAME="maxWeight_NAME",this.matrix_NAME="matrix_NAME",this.nodeArrays_NAME="nodeArrays_NAME",this.linkArrays_NAME="linkArrays_NAME",this.nodePairArrays_NAME="nodePairArrays_NAME",this.timeArrays_NAME="timeArrays_NAME",this.linkTypeArrays_NAME="linkTypeArrays_NAME",this.nodeTypeArrays_NAME="nodeTypeArrays_NAME",this.locationArrays_NAME="locationArrays_NAME"}default_colors(t){var e=["#3366cc","#dc3912","#ff9900","#109618","#990099","#0099c6","#dd4477","#66aa00","#b82e2e","#316395","#994499","#22aa99","#aaaa11","#6633cc","#e67300","#8b0707","#651067","#329262","#5574a6","#3b3eac"];return e[t%e.length]}attr(t,e,n){let r;try{r=this.attributeArrays[n][t][e]}catch(t){r=void 0}return r}standardArrayReplacer(t,e){return e instanceof Ih?(console.log("standardReplacer found a DynamicGraph property",t),Ph):"selections"!=t?e:void 0}static timeReviver(t,e,n){return""==t?hc(e,new Qh(e.id,n)):Lh(n,0,e)}static nodeArrayReviver(t,e,n){switch(t){case"":return hc(e,new Uh);case"outLinks":case"inLinks":case"links":return cc(e,function(){return new Zh});case"outNeighbors":case"inNeighbors":case"neighbors":return cc(e,function(){return new Zh});case"locations":return cc(e,function(){return new Vh});default:return e}}static linkArrayReviver(t,e,n){switch(t){case"":return hc(e,new Hh);case"weights":return cc(e,function(){return new Vh});default:return e}}static nodePairArrayReviver(t,e,n){return""!==t?e:hc(e,new Rh)}static timeArrayReviver(t,e,n){switch(t){case"":return hc(e,new jh);case"time":return e.map(function(t,e){return new Date(t)});default:return e}}static linkTypeArrayReviver(t,e,n){return""!==t?e:hc(e,new Yh)}static nodeTypeArrayReviver(t,e,n){return""!==t?e:hc(e,new Bh)}static locationArrayReviver(t,e,n){return""!==t?e:hc(e,new Gh)}loadDynamicGraph(t,e){this.clearSelections(),this.name=e;e=t.getFromStorage(this.name,this.gran_min_NAME);null!=e&&(this.gran_min=e);e=t.getFromStorage(this.name,this.gran_max_NAME);null!=e&&(this.gran_max=e);e=t.getFromStorage(this.name,this.directed_NAME);null!=e&&(this.directed=e);e=t.getFromStorage(this.name,this.minWeight_NAME);null!=e&&(this.minWeight=e);e=t.getFromStorage(this.name,this.maxWeight_NAME);null!=e&&(this.maxWeight=e);e=t.getFromStorage(this.name,this.matrix_NAME);null!=e&&(this.matrix=e);e=t.getFromStorage(this.name,this.nodeArrays_NAME,Ih.nodeArrayReviver);null!=e&&(this.nodeArrays=e);e=t.getFromStorage(this.name,this.linkArrays_NAME,Ih.linkArrayReviver);null!=e&&(this.linkArrays=e);e=t.getFromStorage(this.name,this.nodePairArrays_NAME,Ih.nodePairArrayReviver);null!=e&&(this.nodePairArrays=e);e=t.getFromStorage(this.name,this.timeArrays_NAME,Ih.timeArrayReviver);if(null!=e&&(this.timeArrays=e),"timeArrays"in this&&this.timeArrays)if("momentTime"in this.timeArrays&&"unixTime"in this.timeArrays){const n=this.timeArrays.momentTime;for(let t=0;t<n.length;t++)n[t]=new Date(this.timeArrays.unixTime[t])}else"unixTime"in this.timeArrays?(console.log("No time in timeArrays"),this.timeArrays.momentTime=this.timeArrays.unixTime.map(new Date)):(console.log("No time or unixTime in timeArrays"),this.timeArrays.momentTime=[]);else console.log("No timeArrays"),this.timeArrays=new jh;e=t.getFromStorage(this.name,this.linkTypeArrays_NAME,Ih.linkTypeArrayReviver);null!=e&&(this.linkTypeArrays=e);e=t.getFromStorage(this.name,this.nodeTypeArrays_NAME,Ih.nodeTypeArrayReviver);null!=e&&(this.nodeTypeArrays=e);t=t.getFromStorage(this.name,this.locationArrays_NAME,Ih.locationArrayReviver);null!=t&&(this.locationArrays=t),this.attributeArrays={node:this.nodeArrays,link:this.linkArrays,time:this.timeArrays,nodePair:this.nodePairArrays,linkType:this.linkTypeArrays,nodeType:this.nodeTypeArrays,location:this.locationArrays},this.createGraphObjects(!0,!0),this.createSelections(!0)}saveDynamicGraph(t){t.saveToStorage(this.name,this.gran_min_NAME,this.gran_min),t.saveToStorage(this.name,this.gran_max_NAME,this.gran_max),t.saveToStorage(this.name,this.directed_NAME,this.directed),t.saveToStorage(this.name,this.minWeight_NAME,this.minWeight),t.saveToStorage(this.name,this.maxWeight_NAME,this.maxWeight),t.saveToStorage(this.name,this.matrix_NAME,this.matrix),t.saveToStorage(this.name,this.nodeArrays_NAME,this.nodeArrays,this.standardArrayReplacer),t.saveToStorage(this.name,this.linkArrays_NAME,this.linkArrays,this.standardArrayReplacer),t.saveToStorage(this.name,this.nodePairArrays_NAME,this.nodePairArrays,this.standardArrayReplacer),t.saveToStorage(this.name,this.timeArrays_NAME,this.timeArrays,this.standardArrayReplacer),t.saveToStorage(this.name,this.linkTypeArrays_NAME,this.linkTypeArrays,this.standardArrayReplacer),t.saveToStorage(this.name,this.nodeTypeArrays_NAME,this.nodeTypeArrays,this.standardArrayReplacer),t.saveToStorage(this.name,this.locationArrays_NAME,this.locationArrays,this.standardArrayReplacer)}delete(t){t.removeFromStorage(this.name,this.gran_min_NAME),t.removeFromStorage(this.name,this.gran_max_NAME),t.removeFromStorage(this.name,this.directed_NAME),t.removeFromStorage(this.name,this.minWeight_NAME),t.removeFromStorage(this.name,this.maxWeight_NAME),t.removeFromStorage(this.name,this.matrix_NAME),t.removeFromStorage(this.name,this.nodeArrays_NAME),t.removeFromStorage(this.name,this.linkArrays_NAME),t.removeFromStorage(this.name,this.nodePairArrays_NAME),t.removeFromStorage(this.name,this.timeArrays_NAME),t.removeFromStorage(this.name,this.linkTypeArrays_NAME),t.removeFromStorage(this.name,this.nodeTypeArrays_NAME),t.removeFromStorage(this.name,this.locationArrays_NAME)}debugCompareTo(t){let e=!0;return this.name!=t.name&&(console.log("name different"),e=!1),this.gran_min!=t.gran_min&&(console.log("gran_min different",this.gran_min,t.gran_min),e=!1),this.gran_max!=t.gran_max&&(console.log("gran_max different",this.gran_max,t.gran_max),e=!1),this.directed!=t.directed&&(console.log("directed different",this.directed,t.directed),e=!1),this._nodes.length==t._nodes.length&&fc(this._nodes,t._nodes,2)||(console.log("nodes different"),e=!1),this._links.length==t._links.length&&fc(this._links,t._links,2)||(console.log("links different"),e=!1),this._nodePairs.length==t._nodePairs.length&&fc(this._nodePairs,t._nodePairs,2)||(console.log("nodePairs different"),e=!1),this._locations.length==t._locations.length&&fc(this._locations,t._locations,2)||(console.log("locations different"),e=!1),this._times.length==t._times.length&&fc(this._times,t._times,2)||(console.log("times different"),e=!1),(this.nodeOrders&&this.nodeOrders.length!=t.nodeOrders.length||!fc(this.nodeOrders,t.nodeOrders,2))&&(console.log("nodeOrders different",this.nodeOrders,t.nodeOrders),e=!1),this.matrix.length==t.matrix.length&&fc(this.matrix,t.matrix,2)||(console.log("matrix different",this.matrix,t.matrix),e=!1),this.nodeArrays.length==t.nodeArrays.length&&fc(this.nodeArrays,t.nodeArrays,2)||(console.log("nodeArrays different",this.nodeArrays,t.nodeArrays),e=!1),this.linkArrays.length==t.linkArrays.length&&fc(this.linkArrays,t.linkArrays,2)||(console.log("linkArrays different",this.linkArrays,t.linkArrays),e=!1),this.nodePairArrays.length==t.nodePairArrays.length&&fc(this.nodePairArrays,t.nodePairArrays,2)||(console.log("nodePairArrays different",this.nodePairArrays,t.nodePairArrays),e=!1),this.timeArrays.length==t.timeArrays.length&&fc(this.timeArrays,t.timeArrays,2)||(console.log("timeArrays different",this.timeArrays,t.timeArrays),e=!1),this.linkTypeArrays.length==t.linkTypeArrays.length&&fc(this.linkTypeArrays,t.linkTypeArrays,2)||(console.log("linkTypeArrays different",this.linkTypeArrays,t.linkTypeArrays),e=!1),this.nodeTypeArrays.length==t.nodeTypeArrays.length&&fc(this.nodeTypeArrays,t.nodeTypeArrays,2)||(console.log("nodeTypeArrays different",this.nodeTypeArrays,t.nodeTypeArrays),e=!1),this.locationArrays.length==t.locationArrays.length&&fc(this.locationArrays,t.locationArrays,2)||(console.log("locationArrays different",this.locationArrays,t.locationArrays),e=!1),this.defaultLinkSelection.elementIds.length==t.defaultLinkSelection.elementIds.length&&fc(this.defaultLinkSelection,t.defaultLinkSelection,2)||(console.log("defaultLinkSelection different",this.defaultLinkSelection,t.defaultLinkSelection),e=!1),this.defaultNodeSelection.elementIds.length==t.defaultNodeSelection.elementIds.length&&fc(this.defaultNodeSelection,t.defaultNodeSelection,2)||(console.log("defaultNodeSelection different",this.defaultNodeSelection,t.defaultNodeSelection),e=!1),this.selections.length==t.selections.length&&fc(this.selections,t.selections,2)||(console.log("selections different",this.selections,t.selections),e=!1),e}initDynamicGraph(n){var r,e,i,s,o,a;this.clearSelections(),console.log("[dynamicgraph.ts] Create dynamic graph for ",n.name,n),this.name=n.name,this.directed=n.directed,this.gran_min=0,this.gran_max=0;let l;const u=[];let h;if(Si(n.linkSchema.time)){console.log("GEtting unix times for all times - linktable"),console.log(n.linkTable);for(let t=0;t<n.linkTable.length;t++)l=n.linkTable[t][n.linkSchema.time],console.log(n.linkTable[t]),h=null===(r=Sh(l))||void 0===r?void 0:r.getTime(),null!=h&&-1==u.indexOf(h)&&u.push(h);u.sort(dc);let e=99999999999999;for(let t=0;t<u.length-2;t++)e=Math.min(e,u[t+1]-u[t]);1e3<=e&&(this.gran_min=1),6e4<=e&&(this.gran_min=2),36e5<=e&&(this.gran_min=3),864e5<=e&&(this.gran_min=4),6048e5<=e&&(this.gran_min=5),2592e6<=e&&(this.gran_min=6),31104e6<=e&&(this.gran_min=7),31104e7<=e&&(this.gran_min=8),31104e8<=e&&(this.gran_min=9),31104e9<=e&&(this.gran_min=10),e=u[u.length-1]-u[0],this.gran_max=0,1e3<=e&&(this.gran_max=1),6e4<=e&&(this.gran_max=2),36e5<=e&&(this.gran_max=3),864e5<=e&&(this.gran_max=4),6048e5<=e&&(this.gran_max=5),2592e6<=e&&(this.gran_max=6),31104e6<=e&&(this.gran_max=7),31104e7<=e&&(this.gran_max=8),31104e8<=e&&(this.gran_max=9),31104e9<=e&&(this.gran_max=10),console.log("[Dynamic Graph] Minimal granularity",Oh[this.gran_min]),console.log("[Dynamic Graph] Maximal granularity",Oh[this.gran_max]);for(let t=0;t<u.length;t++)this.timeArrays.id.push(t),this.timeArrays.momentTime.push(new Date(u[t])),this.timeArrays.label.push(Nh(this.timeArrays.momentTime[t])),this.timeArrays.unixTime.push(u[t]),this.timeArrays.selections.push([]),this.timeArrays.filter.push(!1),this.timeArrays.links.push([]),this._times.push(new Qh(t,this));for(let t=0;t<=Oh.length;t++)this.timeObjects.push([])}if(0==this.timeArrays.length&&(this.timeArrays.id.push(0),this.timeArrays.momentTime.push(new Date(0)),this.timeArrays.unixTime.push(0),this.timeArrays.selections.push([]),this.timeArrays.filter.push(!1),this.timeArrays.links.push([]),this._times.push(new Qh(0,this))),console.assert(!n.locationTable||Si(n.locationSchema.id)),n.locationTable)for(let t=0;t<n.locationTable.length;t++)this.locationArrays.id.push(n.locationTable[t][n.locationSchema.id]),this.locationArrays.label.push(n.locationTable[t][n.locationSchema.label]),this.locationArrays.longitude.push(n.locationTable[t][n.locationSchema.longitude]),this.locationArrays.latitude.push(n.locationTable[t][n.locationSchema.latitude]),this.locationArrays.x.push(n.locationTable[t][n.locationSchema.x]),this.locationArrays.y.push(n.locationTable[t][n.locationSchema.y]),this.locationArrays.z.push(n.locationTable[t][n.locationSchema.z]),this.locationArrays.radius.push(n.locationTable[t][n.locationSchema.radius]);"id"in this.locationArrays&&console.log("locations",this.locationArrays.id.length);let c,f,d;console.assert(0==n.nodeTable.length||Si(n.nodeSchema.id),"either there is no nodeTable data, or we have a schema for the nodetable");let g,p;const m=[];for(const t in n.nodeSchema)Object.prototype.hasOwnProperty.call(n.nodeSchema,t)&&"id"!=t&&"label"!=t&&"time"!=t&&"name"!=t&&"nodeType"!=t&&"location"!=t&&"constructor"!=t&&(m.push(t),this.nodeArrays[t]=[]);for(let t=0;t<n.nodeTable.length;t++){if(c=n.nodeTable[t],e=c[n.nodeSchema.id],f=this.nodeArrays.id.indexOf(e),-1==f&&(f=this.nodeArrays.id.length,this.nodeArrays.id.push(e),this.nodeArrays.nodeType.push(""),this.nodeArrays.outLinks.push(new Zh),this.nodeArrays.inLinks.push(new Zh),this.nodeArrays.links.push(new Zh),this.nodeArrays.outNeighbors.push(new Zh),this.nodeArrays.inNeighbors.push(new Zh),this.nodeArrays.neighbors.push(new Zh),this.nodeArrays.selections.push([]),this.nodeArrays.filter.push(!1),this.nodeArrays.locations.push(new Vh),this.nodeArrays.attributes.push(new Object),this.nodeArrays.color.push(""),this.nodeArrays.shape.push(""),Si(n.nodeSchema.label)?this.nodeArrays.label.push(c[n.nodeSchema.label]):this.nodeArrays.label.push(c[n.nodeSchema.id])),d=Si(n.nodeSchema.time)?(l=c[n.nodeSchema.time],console.log("params"),console.log(l),console.log(kh),console.log(null===(i=Sh(l))||void 0===i?void 0:i.toUTCString()),console.log(null===(i=Sh(l))||void 0===i?void 0:i.getTime()),i=this.getTimeIdForUnixTime(null===(i=Sh(l))||void 0===i?void 0:i.getTime()),null==l||null==i?this._times[0]:this._times[i]):this._times[0],null==d&&(d=this._times[0]),Si(n.nodeSchema.location)){var y=c[n.nodeSchema.location];if(null==y)continue;this.nodeArrays.locations[e].set(d,y)}Si(n.nodeSchema.shape)&&(y=c[n.nodeSchema.shape],this.nodeArrays.shape.push(y)),Si(n.nodeSchema.nodeType)&&(g=n.nodeTable[t][n.nodeSchema.nodeType],p=this.nodeTypeArrays.name.indexOf(g),p<0&&(p=this.nodeTypeArrays.length,this.nodeTypeArrays.id.push(p),this.nodeTypeArrays.name.push(g)),this.nodeArrays.nodeType[f]=g,n.nodeTable[t][n.nodeSchema.nodeType]=p);for(let t=0;t<m.length;t++){var _=m[t];this.nodeArrays[_].push(c[n.nodeSchema[_]])}}if("id"in this.nodeArrays)for(let t=0;t<this.nodeArrays.id.length;t++)this.matrix.push(function(t,e){const n=[];for(;e--;)n[e]=t;return n}(void 0,this.nodeArrays.id.length));let v,w;const x=[];for(const S in n.linkSchema)Object.prototype.hasOwnProperty.call(n.linkSchema,S)&&"id"!=S&&"linkType"!=S&&"time"!=S&&"name"!=S&&"source"!=S&&"target"!=S&&"weight"!=S&&"directed"!=S&&(x.push(S),this.linkArrays[S]=[]);console.log("linkUserProperties",x),console.assert(0==n.linkTable.length||Si(n.linkSchema.id)&&Si(n.linkSchema.source)&&Si(n.linkSchema.target),"either there are no links, or the linkschema is defined");for(let t=0;t<n.linkTable.length;t++){c=n.linkTable[t],o=c[n.linkSchema.id],this.linkArrays.directed.push(!1),-1==this.linkArrays.id.indexOf(o)&&(this.linkArrays.id[o]=o,this.linkArrays.source[o]=c[n.linkSchema.source],this.linkArrays.target[o]=c[n.linkSchema.target],this.linkArrays.linkType[o]=c[n.linkSchema.linkType],this.linkArrays.directed[o]=c[n.linkSchema.directed],this.linkArrays.weights[o]=new Vh,this.linkArrays.presence[o]=[],this.linkArrays.selections.push([]),this.linkArrays.nodePair.push(void 0),this.linkArrays.filter.push(!1)),v=Si(n.linkSchema.time)?(l=n.linkTable[t][n.linkSchema.time],h=null===(s=Sh(l))||void 0===s?void 0:s.getTime(),null!=(a=h?this.getTimeIdForUnixTime(h):void 0)?a:0):0,d=this._times[v],this.linkArrays.presence[o].push(v),Si(n.linkSchema.weight)&&null!=n.linkTable[t][n.linkSchema.weight]?(this.linkArrays.weights[o].set(d,n.linkTable[t][n.linkSchema.weight]),this.minWeight=Math.min(this.minWeight,n.linkTable[t][n.linkSchema.weight]),this.maxWeight=Math.max(this.maxWeight,n.linkTable[t][n.linkSchema.weight])):(this.minWeight=0,this.maxWeight=1,this.linkArrays.weights[o].set(d,1)),s=this.nodeArrays.id.indexOf(c[n.linkSchema.source]),a=this.nodeArrays.id.indexOf(c[n.linkSchema.target]),this.nodeArrays.neighbors[s].add(d,a),this.nodeArrays.neighbors[a].add(d,s),this.nodeArrays.links[s].add(d,o),this.nodeArrays.links[a].add(d,o),this.linkArrays.directed[t]&&(this.nodeArrays.outNeighbors[s].add(d,a),this.nodeArrays.inNeighbors[a].add(d,s),this.nodeArrays.outLinks[s].add(d,o),this.nodeArrays.inLinks[a].add(d,o)),w=this.matrix[s][a],Si(w)||(w=this.nodePairArrays.length,this.matrix[s][a]=w,this.nodePairArrays.id.push(w),this.nodePairArrays.source.push(s),this.nodePairArrays.target.push(a),this.nodePairArrays.links.push([]),this.nodePairArrays.selections.push([]),this.nodePairArrays.filter.push(!1)),-1==this.nodePairArrays.links[w].indexOf(o)&&(this.nodePairArrays.links[w].push(o),this.linkArrays.nodePair[o]=w),Si(n.linkSchema.linkType)&&(g=n.linkTable[t][n.linkSchema.linkType],p=this.linkTypeArrays.name.indexOf(g),p<0&&(p=this.linkTypeArrays.length,this.linkTypeArrays.id.push(p),this.linkTypeArrays.name.push(g)),n.linkTable[t][n.linkSchema.linkType]=p);for(let t=0;t<x.length;t++){var A=x[t];this.linkArrays[A].push(c[n.linkSchema[A]])}}for(let e=0;e<this.linkArrays.length;e++)for(let t=0;t<this.timeArrays.length;t++)this.linkArrays.weights[e]&&Object.prototype.hasOwnProperty.call(this.linkArrays.weights[e].toArray(),this.timeArrays.id[t].toString())&&this.timeArrays.links[t].push(this.linkArrays.id[e]);const b=new Set(["#e4549b","#a33a36","#bd6221","#dfba47","#b5b867","#479b7f","#335b8e","#78387d"]),T={};this.nodeArrays.color.forEach(function(t){var e;T[t]||(e=(e=Array.from(b))[Math.floor(Math.random()*e.length)],T[t]=e,b.delete(e))});const M=new Set(["cross","diamond","square","triangle"]),k={};this.nodeArrays.shape.forEach(function(t){var e;k[t]||(e=(e=Array.from(M))[Math.floor(Math.random()*e.length)],k[t]=e,M.delete(e))}),console.log("[Dynamic Graph] Dynamic Graph created: ",this.nodeArrays.length),console.log("[Dynamic Graph]    - Nodes: ",this.nodeArrays.length),console.log("[Dynamic Graph]    - Edges: ",this.linkArrays.length),console.log("[Dynamic Graph]    - Times: ",this.timeArrays.length),console.log("[Dynamic Graph]    - Link types: ",this.linkTypeArrays.length),console.log("[Dynamic Graph]    - Node Pairs: ",this.nodePairArrays.length),console.log('>>>this.nodeArrays["neighbors"][0]',this.nodeArrays.neighbors[0]),this.createGraphObjects(!0,!0),this.createSelections(!1)}createSelections(t){if(t){"nodeArrays"in this&&this.nodeArrays||(this.nodeArrays=new Uh,this.linkArrays=new Hh,this.timeArrays=new jh,this.nodePairArrays=new Rh),this.nodeArrays.selections=new Array(this.nodeArrays.length);for(let t=0;t<this.nodeArrays.selections.length;t++)this.nodeArrays.selections[t]=[];this.linkArrays.selections=new Array(this.linkArrays.length);for(let t=0;t<this.linkArrays.selections.length;t++)this.linkArrays.selections[t]=[];this.timeArrays.selections=new Array(this.timeArrays.length);for(let t=0;t<this.timeArrays.selections.length;t++)this.timeArrays.selections[t]=[];this.nodePairArrays.selections=new Array(this.nodePairArrays.length);for(let t=0;t<this.nodePairArrays.selections.length;t++)this.nodePairArrays.selections[t]=[]}this.defaultNodeSelection=this.createSelection("node"),this.defaultNodeSelection.name="Unselected";for(let t=0;t<this._nodes.length;t++)this.defaultNodeSelection.elementIds.push(t),this.addToAttributeArraysSelection(this.defaultNodeSelection,"node",this._nodes[t].id());this.defaultNodeSelection.color="#000000",this.defaultNodeSelection.showColor=!1,this.defaultNodeSelection.priority=1e4,this.selectionColor_pointer--,this.defaultLinkSelection=this.createSelection("link"),this.defaultLinkSelection.name="Unselected";for(let t=0;t<this._links.length;t++)this.defaultLinkSelection.elementIds.push(t),this.addToAttributeArraysSelection(this.defaultLinkSelection,"link",this._links[t].id());this.defaultLinkSelection.color="#000000",this.defaultLinkSelection.showColor=!1,this.defaultLinkSelection.priority=1e4,this.selectionColor_pointer--;let e=[],n,r,i;const s=[];for(let t=0;t<this.nodeArrays.nodeType.length;t++)n=this.nodeArrays.nodeType[t],null!=n&&0!=n.length&&"undefined"!=n&&(r=e.indexOf(n),-1==r?(i=this.createSelection("node"),i.name=n,s.push(i),e.push(n)):i=s[r],this.addElementToSelection(i,this._nodes[t]));1==s.length&&(console.log("nodeSelections[0]:",s[0]),s[0].color="#444"),e=[];const o=[];for(let t=0;t<this.linkArrays.linkType.length;t++)n=this.linkArrays.linkType[t],n&&"undefined"!=n&&(r=e.indexOf(n),-1==r?(i=this.createSelection("link"),i.name=n,o.push(i),e.push(n)):i=o[r],this.addElementToSelection(i,this._links[t]));1==o.length&&(o[0].color="#444"),this.currentSelection_id=0}createGraphObjects(t,e){console.log("[DynamicNetwork:createGraph()] >>> ");var n,r=Date.now();if(this.locationArrays&&"id"in this.locationArrays)for(let t=0;t<this.locationArrays.id.length;t++)this._locations.push(new tc(this.locationArrays.id[t],this));else this.locationArrays=new Gh;const i=[];if("nodeArrays"in this&&this.nodeArrays)for(let t=0;t<this.nodeArrays.id.length;t++)i.push(new oc(t,this));const s=[];if("linkArrays"in this&&this.linkArrays)for(let t=0;t<this.linkArrays.source.length;t++)n=new lc(t,this),s.push(n);if("nodePairArrays"in this&&this.nodePairArrays)for(let t=0;t<this.nodePairArrays.length;t++)this.nodePairArrays.links[t],this._nodePairs.push(new nc(t,this));if(this._nodes=i,this._links=s,t){this._times=[];for(let t=0;t<this.timeArrays.length;t++)this._times.push(new Qh(t,this))}console.log("[DynamicNetwork:getGraph()] <<< ",Date.now()-r,"msec")}nodeAttr(t,e){return this.attr(t,e,"node")}linkAttr(t,e){return this.attr(t,e,"link")}pairAttr(t,e){return this.attr(t,e,"nodePair")}timeAttr(t,e){return this.attr(t,e,"time")}get startTime(){return this._times[0]}get endTime(){return this._times[this._times.length-1]}highlight(t,e){if("freeze"==t)return this.highlight("resetFreeze"),void this.highlight("addFreeze",e);if("resetFreeze"==t)return this.highlightFreezeArrays.nodeIds=[],this.highlightFreezeArrays.linkIds=[],this.highlightFreezeArrays.nodePairIds=[],void(this.highlightFreezeArrays.timeIds=[]);if("reset"==t)return this.highlightArrays.nodeIds=[],this.highlightArrays.linkIds=[],this.highlightArrays.nodePairIds=[],void(this.highlightArrays.timeIds=[]);if(e){if("set"==t)return this.highlight("reset"),void this.highlight("add",e);if("add"==t)for(const i in e)for(let t=0;t<e[i].length;t++)this.highlightArrays[i].push(e[i][t]);else if("remove"==t){var n;for(const s in e)for(let t=0;t<e[s].length;t++)0<=(n=this.highlightArrays[s].indexOf(e[s][t]))&&this.highlightArrays[s].splice(n,1)}if("addFreeze"==t)for(const o in e)for(let t=0;t<e[o].length;t++)this.highlightFreezeArrays[o].push(e[o][t]);else if("removeFreeze"==t){var r;for(const a in e)for(let t=0;t<e[a].length;t++)0<=(r=this.highlightFreezeArrays[a].indexOf(e[a][t]))&&this.highlightFreezeArrays[a].splice(r,1)}}else console.error("[DynamicGraph] highlight: idCompound not set!")}selection(t,e,n){null==n&&(n=this.currentSelection_id);const r=this.getSelection(n);if(r)if("set"==t){const i=new uc;i[r.acceptedType+"s"]=r.elementIds,this.selection("remove",i,n),this.selection("add",e,n)}else"add"==t?(e.linkIds.forEach(t=>this.addToSelectionByTypeAndId(r,"link",t)),e.nodeIds.forEach(t=>this.addToSelectionByTypeAndId(r,"node",t)),e.timeIds.forEach(t=>this.addToSelectionByTypeAndId(r,"time",t)),e.nodePairIds.forEach(t=>this.addToSelectionByTypeAndId(r,"nodePair",t))):"remove"==t&&(e.linkIds.forEach(t=>this.removeFromSelectionByTypeAndId(r,"link",t)),e.nodeIds.forEach(t=>this.removeFromSelectionByTypeAndId(r,"node",t)),e.timeIds.forEach(t=>this.removeFromSelectionByTypeAndId(r,"time",t)),e.nodePairIds.forEach(t=>this.removeFromSelectionByTypeAndId(r,"nodePair",t)));else console.error("[DynamicGraph] Selection with ",n,"not found in ",this.selections)}addToAttributeArraysSelection(e,n,r){var i=this.attributeArrays[n].selections[r];for(let t=0;t<i.length;t++)if(i[t].priority>e.priority)return void this.attributeArrays[n].selections[r].splice(t,0,e);this.attributeArrays[n].selections[r].push(e)}removeFromAttributeArraysSelection(e,n,r){var i=this.attributeArrays[n].selections[r];for(let t=0;t<i.length;t++)i[t]==e&&this.attributeArrays[n].selections[r].splice(t,1)}addElementToSelection(t,e){this.addToSelectionByTypeAndId(t,e.type,e.id())}addToSelectionByTypeAndId(e,n,r){if(n==e.acceptedType){e.elementIds.push(r),this.addToAttributeArraysSelection(e,n,r);let t;"node"==n?(t=this.defaultNodeSelection.elementIds.indexOf(r),-1<t&&(this.removeFromAttributeArraysSelection(this.defaultNodeSelection,n,r),this.defaultNodeSelection.elementIds.splice(t,1))):"link"==n&&(t=this.defaultLinkSelection.elementIds.indexOf(r),-1<t&&(this.removeFromAttributeArraysSelection(this.defaultLinkSelection,n,r),this.defaultLinkSelection.elementIds.splice(t,1)))}else console.log("attempting to put object of the wrong type into a selection. "+n+" !="+e.acceptedType)}removeElementFromSelection(t,e){this.removeFromSelectionByTypeAndId(t,e.type,e.id())}removeFromSelectionByTypeAndId(t,e,n){var r=t.elementIds.indexOf(n);-1!=r&&(t.elementIds.splice(r,1),this.removeFromAttributeArraysSelection(t,e,n),0==this.getSelectionsByTypeAndId(e,n).length&&("node"==e?(this.defaultNodeSelection.elementIds.push(n),this.addToAttributeArraysSelection(this.defaultNodeSelection,e,n)):"link"==e&&(this.defaultLinkSelection.elementIds.push(n),this.addToAttributeArraysSelection(this.defaultLinkSelection,e,n))))}getSelectionsByTypeAndId(t,e){return this.attributeArrays[t].selections[e]}filterSelection(t,e){const n=this.getSelection(t);null!=n&&(n.filter=e)}isFiltered(t,e){return this.attributeArrays[e+"s"].filter}isHighlighted(t,e){return-1<this.highlightArrays[e+"Ids"].indexOf(t)||-1<this.highlightFreezeArrays[e+"Ids"].indexOf(t)}isFrozen(t,e){return-1<this.highlightFreezeArrays[e+"Ids"].indexOf(t)}getHighlightedIds(t){return this.highlightArrays[t+"Ids"]}setCurrentSelection(t){console.log("[DynamicGraph] setCurrentSelectionId ",t),this.currentSelection_id=t}getCurrentSelection(){return this.getSelection(this.currentSelection_id)}addSelection(t,e,n,r){const i=this.createSelection(n);i.id=t,i.color=e,i.priority=r}createSelection(t){const e=new Ni(this.selections.length,t);return e.color=this.BOOKMARK_COLORS(this.selectionColor_pointer%10),this.selectionColor_pointer++,this.selections.push(e),e}deleteSelection(t){const e=this.getSelection(t);if(null!=e){const n=new uc;n[e.acceptedType+"Ids"]=e.elementIds.slice(0),console.log("Delete selection->remove elemeents",e.elementIds.slice(0)),this.selection("remove",n,e.id),this.selections.splice(this.selections.indexOf(e),1)}}setSelectionColor(t,e){const n=this.getSelection(t);n&&(n.color=e)}getSelections(e){const n=[];if(e){for(let t=0;t<this.selections.length;t++)this.selections[t].acceptsType(e)&&n.push(this.selections[t]);return n}return this.selections}getSelection(e){for(let t=0;t<this.selections.length;t++)if(e==this.selections[t].id)return this.selections[t];console.error("[DynamicGraph] No selection with id ",e,"found!")}clearSelections(){this.selections=[]}getTimeIdForUnixTime(t){let e;for(console.log("unixTime: "),console.log(t),e=0;e<this.timeArrays.length;e++)if(t==this.timeArrays.unixTime[e])return e;console.error("Time object for unix time",t,"not found!")}addNodeOrdering(e,t){for(let t=0;t<this.nodeOrders.length;t++)if(this.nodeOrders[t].name==e)return void console.error("Ordering",e,"already exists");t=new zh(e,t);this.nodeOrders.push(t)}setNodeOrdering(e,n){for(let t=0;t<this.nodeOrders.length;t++)if(this.nodeOrders[t].name==e)return void(this.nodeOrders[t].order=n);console.error("Ordering",e,"does not exist")}removeNodeOrdering(e,t){for(let t=0;t<this.nodeOrders.length;t++)this.nodeOrders[t].name==e&&this.nodeOrders.splice(t,1)}getNodeOrder(e){for(let t=0;t<this.nodeOrders.length;t++)if(this.nodeOrders[t].name==e)return this.nodeOrders[t];console.error("Ordering",e,"not found!")}nodes(){return new sc(this.nodeArrays.id,this)}links(){return new ac(this.linkArrays.id,this)}times(){return new $h(this.timeArrays.id,this)}locations(){return new Jh(this.locationArrays.id,this)}nodePairs(){return new ec(this.nodePairArrays.id,this)}linksBetween(t,e){let n=this.matrix[t.id()][e.id()];if(null==n&&(n=this.matrix[e.id()][t.id()]),null==n)return new ac([],this);const r=this.nodePair(n);return null!=r?new ac(r.links().toArray(),this):new ac([],this)}get(t,e){return-1<t.indexOf("nodePair")?this.nodePair(e):-1<t.indexOf("node")?this.node(e):-1<t.indexOf("link")?this.link(e):-1<t.indexOf("time")?this.time(e):-1<t.indexOf("locations")?this.location(e):void 0}getAll(t){return"nodes"==t?this.nodes():"links"==t?this.links():"times"==t?this.times():"nodePairs"==t?this.nodePairs():this.locations()}node(e){for(let t=0;t<this._nodes.length;t++)if(this._nodes[t].id()==e)return this._nodes[t]}link(e){for(let t=0;t<this._links.length;t++)if(this._links[t].id()==e)return this._links[t]}time(e){for(let t=0;t<this._times.length;t++)if(this._times[t].id()==e)return this._times[t]}location(e){for(let t=0;t<this._locations.length;t++)if(this._locations[t].id()==e)return this._locations[t]}nodePair(e){for(let t=0;t<this._nodePairs.length;t++)if(this._nodePairs[t].id()==e)return this._nodePairs[t]}getMinGranularity(){return this.gran_min}getMaxGranularity(){return this.gran_max}}class Fh{constructor(){this.id=[]}get length(){return this.id.length}}class Uh extends Fh{constructor(){super(...arguments),this.id=[],this.label=[],this.outLinks=[],this.inLinks=[],this.links=[],this.outNeighbors=[],this.inNeighbors=[],this.neighbors=[],this.selections=[],this.attributes=[],this.locations=[],this.filter=[],this.nodeType=[],this.color=[],this.shape=[]}}class Hh extends Fh{constructor(){super(...arguments),this.source=[],this.target=[],this.linkType=[],this.directed=[],this.nodePair=[],this.presence=[],this.weights=[],this.selections=[],this.filter=[],this.attributes=new Object}}class Rh extends Fh{constructor(){super(...arguments),this.source=[],this.target=[],this.links=[],this.selections=[],this.filter=[]}}class jh extends Fh{constructor(){super(...arguments),this.id=[],this.momentTime=[],this.label=[],this.unixTime=[],this.selections=[],this.filter=[],this.links=[]}}class Yh extends Fh{constructor(){super(...arguments),this.name=[],this.count=[],this.color=[],this.filter=[]}}class Bh extends Fh{constructor(){super(...arguments),this.name=[],this.count=[],this.color=[],this.filter=[]}}class Gh extends Fh{constructor(){super(...arguments),this.id=[],this.label=[],this.longitude=[],this.latitude=[],this.x=[],this.y=[],this.z=[],this.radius=[]}}class zh{constructor(t,e){this.order=[],this.name=t,this.order=e}}class Xh{constructor(e){if(this._elements=[],e)for(let t=0;t<e.length;t++)null!=e[t]&&this._elements.push(e[t])}addUnique(t){-1==this._elements.indexOf(t)&&this._elements.push(t)}add(t){this._elements.push(t)}addAll(e){for(let t=0;t<e.length;t++)null!=e[t]&&this._elements.push(e[t])}addAllUnique(e){for(let t=0;t<e.length;t++)this.addUnique(e[t])}get length(){return this._elements.length}size(){return this._elements.length}ids(){return this._elements}removeDuplicates(){var e=this._elements.slice(0);this._elements=[];for(let t=0;t<e.length;t++)-1==this._elements.indexOf(e[t])&&this._elements.push(e[t]);return this}generic_intersection(n){const r=[];for(let e=0;e<this._elements.length;e++)for(let t=0;t<n._elements.length;t++)this._elements[e]==n._elements[t]&&r.push(this._elements[e]);return new Xh(r)}}class qh extends Xh{constructor(t,e,n){super(t),this.g=e,this.elementType=n}generic_filter(e){const n=[];for(let t=0;t<this._elements.length;t++)try{e(this.g.get(this.elementType,this._elements[t]))&&n.push(this._elements[t])}catch(t){}return n}generic_selected(){const e=[];for(let t=0;t<this._elements.length;t++){const n=this.g.get(this.elementType,this._elements[t]);null!=n&&n.isSelected()&&e.push(this._elements[t])}return e}generic_visible(){const e=[];for(let t=0;t<this._elements.length;t++){const n=this.g.get(this.elementType,this._elements[t]);null!=n&&n.isVisible()&&e.push(this._elements[t])}return e}generic_highlighted(){const e=[];for(let t=0;t<this._elements.length;t++){const n=this.g.get(this.elementType,this._elements[t]);null!=n&&n.isHighlighted()&&e.push(this._elements[t])}return e}generic_presentIn(e,n){const r=[];for(let t=0;t<this._elements.length;t++){const i=this.g.get(this.elementType,this._elements[t]);null!=i&&i.presentIn(e,n)&&r.push(this._elements[t])}return r}generic_sort(n,r){if(0==this._elements.length)return this;const t=this._elements.slice(0);return t.sort((t,e)=>{t=this.g.get(this.elementType,t),e=this.g.get(this.elementType,e);return null!=t&&null!=e?function(t,e,n,r){var i=t.attr(n);let s;s="string"==typeof i?t.attr(n).localeCompare(e.attr(n)):"number"==typeof i?e.attr(n)-t.attr(n):0;0==r&&(s=-s);return s}(t,e,n,r):null==t&&null==e?0:null==t?1:-1}),this._elements=t,this}generic_removeDuplicates(){const e=[];for(let t=0;t<this._elements.length;t++)-1==e.indexOf(this._elements[t])&&e.push(this._elements[t]);return this._elements=e,this}}class Wh{constructor(t,e,n){this._id=t,this.type=e,this.g=n}id(){return this._id}attr(t){return this.g.attr(t,this._id,this.type)}getSelections(){return this.g.attributeArrays[this.type].selections[this._id]}addToSelection(t){this.g.attributeArrays[this.type].selections[this._id].push(t)}removeFromSelection(e){var n=this.g.attributeArrays[this.type].selections[this._id];for(let t=0;t<n.length;t++)n[t]==e&&this.g.attributeArrays[this.type].selections[this._id].splice(t,1)}inSelection(t){return-1<this.getSelections().indexOf(t)}isSelected(e){if(!e)return 0<this.getSelections().length;var n=this.g.attributeArrays[this.type].selections[this._id];for(let t=0;t<n.length;t++)if(n[t]!=this.g.defaultNodeSelection&&n[t]!=this.g.defaultLinkSelection&&n[t]==e)return!0;return!1}isHighlighted(){return this.g.isHighlighted(this._id,this.type)}isFrozen(){return this.g.isFrozen(this._id,this.type)}isFiltered(){return this.g.isFiltered(this._id,this.type)}isVisible(){var e=this.getSelections();if(0==e.length)return!0;for(let t=0;t<e.length;t++)if(e[t].filter)return!1;return!0}presentIn(e,n){const r=this.attr("presence");n=n||e;for(let t=e._id;t<=n._id;t++)if(-1<r.indexOf(t))return!0;return!1}}class Vh{constructor(){this.serie={}}period(t,e){var n=t.id(),r=e.id();const i=new Vh;for(const s in this.serie)parseInt(s)>=n&&parseInt(s)<=r&&(i.serie[s]=this.serie[s]);return i}set(t,e){this.serie[t.id()]=e}get(t){if(null!=this.serie[t.id()])return this.serie[t.id()]}size(){return this.toArray().length}getSerie(){return this.serie}toArray(t){const e=[];if(t=null==t?!1:t)for(const n in this.serie)e.push(this.serie[n]);else for(const r in this.serie)-1==e.indexOf(this.serie[r])&&e.push(this.serie[r]);return e}}class Zh{constructor(){this.serie={}}period(t,e){var n=t.id();t.id();const r=new Zh;for(const i in this.serie)parseInt(i)>=n&&parseInt(i)<=n&&(r.serie[i]=this.serie[i]);return r}add(t,e){null!=t&&(this.serie[t._id]||(this.serie[t._id]=[]),this.serie[t._id].push(e))}get(t){return this.serie[t._id]}toArray(){const t=[];for(const e in this.serie)t.push(this.serie[e]);return t}toFlatArray(e){null==e&&(e=!1);const n=[];for(const r in this.serie)for(let t=0;t<this.serie[r].length;t++)e&&-1!=n.indexOf(this.serie[r])||n.push(this.serie[r][t]);return n}}class $h extends qh{constructor(e,t){if(super(e,t,"time"),0<e.length&&e[0]instanceof Qh){this._elements=[];for(let t=0;t<e.length;t++)this._elements.push(e[t].id())}if(0<e.length&&"number"==typeof e[0]){this._elements=[];for(let t=0;t<e.length;t++)this._elements.push(e[t])}}contains(t){return-1<this._elements.indexOf(t.id())}highlighted(){return new $h(super.generic_highlighted(),this.g)}visible(){return new $h(super.generic_visible(),this.g)}selected(){return new $h(super.generic_selected(),this.g)}filter(t){return new $h(super.generic_filter(t),this.g)}presentIn(t,e){return new $h(super.generic_presentIn(t,e),this.g)}sort(t){return super.generic_sort(t)}links(){let e=[];for(let t=0;t<this._elements.length;t++)e=e.concat(this.g.attr("links",this._elements[t],"time"));return new ac(e,this.g)}get(t){return this.g._times[this._elements[t]]}last(){return this.g._times[this._elements[this._elements.length-1]]}toArray(){const e=[];var n=this.g._times;for(let t=0;t<this._elements.length;t++)e.push(n[this._elements[t]]);return e}createAttribute(e,n){if(null==this.g.timeArrays[e]){this.g.timeArrays[e]=[];for(let t=0;t<this.g._times.length;t++)this.g.timeArrays[e].push()}for(let t=0;t<this._elements.length;t++)this.g.timeArrays[e][this._elements[t]]=n(this.g._times[this._elements[t]]);return this}unixTimes(){const e=[];for(let t=0;t<this._elements.length;t++){const n=this.g.time(this._elements[t]);null!=n&&e.push(n.unixTime())}return e}intersection(t){return new $h(this.generic_intersection(t)._elements,this.g)}forEach(e){for(let t=0;t<this._elements.length;t++)e(this.g.time(this._elements[t]),t);return this}}class Qh extends Wh{constructor(t,e){super(t,"time",e),this.getWeek=_o("%V")}time(){return this.attr("momentTime")}moment(){return this.attr("momentTime")}label(){return this.attr("label")}unixTime(){return this.attr("unixTime")}links(){return new ac(this.attr("links"),this.g)}year(){return this.time().getUTCFullYear()}month(){return this.time().getUTCMonth()}week(){return parseInt(this.getWeek(this.time()))}day(){return this.time().getUTCDay()}hour(){return this.time().getUTCHours()}minute(){return this.time().getUTCMinutes()}second(){return this.time().getUTCSeconds()}millisecond(){return this.time().getMilliseconds()}format(t){const e=_o(t);return e(this.time())}}class Jh extends qh{constructor(e,t){if(super(e,t,"location"),0<e.length&&e[0]instanceof tc){this._elements=[];for(let t=0;t<e.length;t++)this._elements=e[t].id()}if(0<e.length&&"number"==typeof e[0]){this._elements=[];for(let t=0;t<e.length;t++)this._elements.push(e[t])}}contains(t){return-1<this._elements.indexOf(t.id())}highlighted(){return new Jh(super.generic_highlighted(),this.g)}visible(){return new Jh(super.generic_visible(),this.g)}selected(){return new Jh(super.generic_selected(),this.g)}filter(t){return new Jh(super.generic_filter(t),this.g)}presentIn(t,e){return new Jh(super.generic_presentIn(t,e),this.g)}sort(t){return super.generic_sort(t)}get(t){return this.g._locations[this._elements[t]]}last(){return this.g._locations[this._elements[this._elements.length-1]]}toArray(){const e=[];for(let t=0;t<this._elements.length;t++)e.push(this.g._locations[this._elements[t]]);return e}createAttribute(e,n){if(null==this.g.locationArrays[e]){this.g.locationArrays[e]=[];for(let t=0;t<this.g._locations.length;t++)this.g.locationArrays[e].push()}for(let t=0;t<this._elements.length;t++)this.g.locationArrays[e][this._elements[t]]=n(this.g._locations[this._elements[t]]);return this}intersection(t){return new Jh(this.generic_intersection(t)._elements,this.g)}removeDuplicates(){return new Jh(this.generic_removeDuplicates()._elements,this.g)}forEach(e){for(let t=0;t<this._elements.length;t++)e(this.g.location(this._elements[t]),t);return this}}class Kh extends Xh{clone(){return this._elements.slice(0)}min(){this._elements=this.makeNumbers(this._elements);let e=parseInt(this._elements[0]+"");for(let t=1;t<this._elements.length;t++)null!=this._elements[t]&&(e=Math.min(e,parseInt(this._elements[t]+"")));return e}max(){let e=parseInt(this._elements[0]+"");for(let t=1;t<this._elements.length;t++)null!=this._elements[t]&&(e=Math.max(e,parseInt(this._elements[t]+"")));return e}mean(){this._elements=this.makeNumbers(this._elements);let e=0,n=0;for(let t=0;t<this._elements.length;t++)"number"==typeof this._elements[t]&&(e+=parseInt(this._elements[t]+""),n++);return e/n}sum(){let e=0;for(let t=0;t<this._elements.length;t++)"number"==typeof this._elements[t]&&(e+=parseInt(this._elements[t]+""));return e}toArray(){return this._elements.slice(0)}get(t){return this._elements[t]}forEach(e){for(let t=0;t<this._elements.length;t++)e(this._elements[t],t);return this}makeNumbers(e){if(e&&0<e.length&&"string"==typeof e[0]){const n=[];for(let t=0;t<e.length;t++)n.push(parseFloat(e[t]+""));return console.log("string array converted",n),n}return e}}class tc extends Wh{constructor(t,e){super(t,"location",e)}label(){return this.attr("label")+""}longitude(){return this.attr("longitude")}latitude(){return this.attr("latitude")}x(){return this.attr("x")}y(){return this.attr("y")}z(){return this.attr("z")}radius(){return this.attr("radius")}}class ec extends qh{constructor(e,t){if(super(e,t,"nodePair"),0<e.length&&e[0]instanceof nc){this._elements=[];for(let t=0;t<e.length;t++)this._elements.push(e[t].id())}if(0<e.length&&"number"==typeof e[0]){this._elements=[];for(let t=0;t<e.length;t++)this._elements.push(e[t])}}contains(t){return-1<this._elements.indexOf(t.id())}highlighted(){return new ec(super.generic_highlighted(),this.g)}visible(){return new ec(super.generic_visible(),this.g)}selected(){return new ec(super.generic_selected(),this.g)}filter(t){return new ec(super.generic_filter(t),this.g)}presentIn(t,e){return new ec(super.generic_presentIn(t,e),this.g)}sort(t){return super.generic_sort(t)}get(t){return this.g._nodePairs[this._elements[t]]}last(){return this.g._links[this._elements[this._elements.length-1]]}toArray(){const e=[];for(let t=0;t<this._elements.length;t++)e.push(this.g._nodePairs[this._elements[t]]);return e}createAttribute(e,n){if(null==this.g.nodePairArrays[e]){this.g.nodePairArrays[e]=[];for(let t=0;t<this.g._nodePairs.length;t++)this.g.nodePairArrays[e].push()}for(let t=0;t<this._elements.length;t++)this.g.nodePairArrays[e][this._elements[t]]=n(this.g._nodePairs[this._elements[t]]);return this}intersection(t){return new ec(this.generic_intersection(t)._elements,this.g)}removeDuplicates(){return new ec(this.generic_removeDuplicates()._elements,this.g)}forEach(e){for(let t=0;t<this._elements.length;t++)e(this.g.nodePair(this._elements[t]),t);return this}}class nc extends Wh{constructor(t,e){super(t,"nodePair",e)}get source(){return this.g._nodes[this.attr("source")]}get target(){return this.g._nodes[this.attr("target")]}links(){return new ac(this.attr("links"),this.g)}nodeType(){return this.attr("nodeType")}presentIn(e,n){for(let t=0;t<this.links.length;t++)if(this.links[t].presentIn(e,n))return!0;return!1}}class rc{constructor(t){this._elements=t?t.slice(0):[]}contains(t){return-1<this._elements.indexOf(t)}addUnique(t){-1==this._elements.indexOf(t)&&this._elements.push(t)}add(t){this._elements.push(t)}addAll(e){for(let t=0;t<e.length;t++)null!=e[t]&&this._elements.push(e[t])}addAllUnique(e){for(let t=0;t<e.length;t++)this.addUnique(e[t])}get length(){return this._elements.length}size(){return this._elements.length}toArray(){return this._elements.slice(0)}forEach(e){for(let t=0;t<this._elements.length;t++)e(this._elements[t],t);return this}}function ic(e,n,r,i,s,o){let a=[],l;for(let t=0;t<n.length;t++){l=null!=o&&null!=s?i.attr(e,n[t],r).period(s,o).toArray():null!=s?[i.attr(e,n[t],r).get(s)]:i.attr(e,n[t],r).toArray();for(let t=0;t<l.length;t++)l[t]instanceof Array?a=a.concat(l[t]):-1==a.indexOf(l[t])&&a.push(l[t])}return a}class sc extends qh{constructor(e,t){if(super(e,t,"node"),0<e.length&&e[0]instanceof oc){this._elements=[];for(let t=0;t<e.length;t++)this._elements.push(e[t].id())}else if(0<e.length&&"number"==typeof e[0]){this._elements=[];for(let t=0;t<e.length;t++)this._elements.push(e[t])}}contains(t){return-1<this._elements.indexOf(t.id())}highlighted(){return new sc(super.generic_highlighted(),this.g)}visible(){return new sc(super.generic_visible(),this.g)}selected(){return new sc(super.generic_selected(),this.g)}filter(t){return new sc(super.generic_filter(t),this.g)}presentIn(t,e){return new sc(super.generic_presentIn(t,e),this.g)}sort(t,e){return super.generic_sort(t,e)}label(){const e=new rc;for(let t=0;t<this._elements.length;t++)e.add(""+this.g.attr("label",this._elements[t],"node"));return e}neighbors(t,e){return new sc(ic("neighbors",this._elements,"node",this.g,t,e),this.g)}links(t,e){return new ac(ic("links",this._elements,"node",this.g,t,e),this.g)}locations(t,e){return new Jh(ic("locations",this._elements,"node",this.g,t,e),this.g)}nodeTypes(){const e=new rc;for(let t=0;t<this._elements.length;t++)e.add(this.g.attr("nodeType",this._elements[t],"node"));return e}get(t){return this.g._nodes[this._elements[t]]}last(){return this.g._nodes[this._elements[this._elements.length-1]]}toArray(){const e=[];for(let t=0;t<this._elements.length;t++)e.push(this.g._nodes[this._elements[t]]);return e}createAttribute(e,n){if(null==this.g.nodeArrays[e]){this.g.nodeArrays[e]=[];for(let t=0;t<this.g._nodes.length;t++)this.g.nodeArrays[e].push()}for(let t=0;t<this._elements.length;t++)this.g.nodeArrays[e][this._elements[t]]=n(this.g._nodes[this._elements[t]]);return this}intersection(t){return new sc(this.generic_intersection(t)._elements,this.g)}removeDuplicates(){return new sc(this.generic_removeDuplicates()._elements,this.g)}forEach(e){for(let t=0;t<this._elements.length;t++)e(this.g.node(this._elements[t]),t);return this}}class oc extends Wh{constructor(t,e){super(t,"node",e)}label(){return""+this.attr("label")}shape(){return""+this.attr("shape")}color(){return""+this.attr("color")}nodeType(){return this.attr("nodeType")}neighbors(t,e){return null!=e&&null!=t?new sc(this.attr("neighbors").period(t,e).toFlatArray(!0),this.g):null!=t?new sc(this.attr("neighbors").get(t),this.g):new sc(this.attr("neighbors").toFlatArray(),this.g)}inNeighbors(t,e){return null!=e&&null!=t?new sc(this.attr("inNeighbors").period(t,e).toFlatArray(!0),this.g):null!=t?new sc(this.attr("inNeighbors").get(t),this.g):new sc(this.attr("inNeighbors").toFlatArray(!0),this.g)}outNeighbors(t,e){return null!=e&&null!=t?new sc(this.attr("outNeighbors").period(t,e).toFlatArray(!0),this.g):null!=t?new sc(this.attr("outNeighbors").get(t),this.g):new sc(this.attr("outNeighbors").toFlatArray(),this.g)}links(t,e){return null!=e&&null!=t?new ac(this.attr("links").period(t,e).toFlatArray(!0),this.g):null!=t?new ac(this.attr("links").get(t),this.g):new ac(this.attr("links").toFlatArray(!0),this.g)}inLinks(t,e){return null!=e&&null!=t?new ac(this.attr("inLinks").period(t,e).toFlatArray(!0),this.g):null!=t?new ac(this.attr("inLinks").get(t),this.g):new ac(this.attr("inLinks").toFlatArray(!0),this.g)}outLinks(t,e){return null!=e&&null!=t?new ac(this.attr("outLinks").period(t,e).toFlatArray(!0),this.g):null!=t?new ac(this.attr("outLinks").get(t),this.g):new ac(this.attr("outLinks").toFlatArray(!0),this.g)}locations(t,e){return null!=e&&null!=t?new Jh(this.attr("locations").period(t,e).toArray(),this.g):null!=t?new Jh([this.attr("locations").get(t)],this.g):new Jh(this.attr("locations").toArray(),this.g)}locationSerie(t,e){let n;n=null!=e&&null!=t?this.attr("locations").period(t,e):null!=t?this.attr("locations").get(t):this.attr("locations");var r=n.getSerie();const i=new Vh;for(const a in r){var s=this.g.time(parseInt(a)),o=this.g.location(r[a]);null!=s&&null!=o&&i.set(s,o)}return i}linksBetween(e){var n,r=this.links().toArray();const i=[];for(let t=0;t<r.length;t++)(n=r[t]).source!=e&&n.target!=e||i.push(n);return new ac(i,this.g)}}class ac extends qh{constructor(e,t){if(super(e,t,"link"),0<e.length&&e[0]instanceof lc){this._elements=[];for(let t=0;t<e.length;t++)this._elements.push(e[t].id())}if(0<e.length&&"number"==typeof e[0]){this._elements=[];for(let t=0;t<e.length;t++)this._elements.push(e[t])}}contains(t){return-1<this._elements.indexOf(t.id())}highlighted(){return new ac(super.generic_highlighted(),this.g)}visible(){return new ac(super.generic_visible(),this.g)}selected(){return new ac(super.generic_selected(),this.g)}filter(t){return new ac(super.generic_filter(t),this.g)}presentIn(t,e){return new ac(super.generic_presentIn(t,e),this.g)}sort(t){return super.generic_sort(t)}get(t){return this.g._links[this._elements[t]]}last(){return this.g._links[this._elements[this._elements.length-1]]}toArray(){const e=[];for(let t=0;t<this._elements.length;t++)e.push(this.g._links[this._elements[t]]);return e}weights(e,n){const r=new Kh;for(let t=0;t<this._elements.length;t++){const i=this.g.link(t);null!=i&&r.addAll(i.weights(e,n).toArray())}return r}createAttribute(e,n){if(null==this.g.linkArrays[e]){this.g.linkArrays[e]=[];for(let t=0;t<this.g._links.length;t++)this.g.linkArrays[e].push()}for(let t=0;t<this._elements.length;t++)this.g.linkArrays[e][this._elements[t]]=n(this.g._links[this._elements[t]]);return this}linkTypes(){const e=[];var n;for(let t=0;t<this._elements.length;t++){const r=this.g.link(this._elements[t]);null!=r&&(n=r.linkType(),-1==e.indexOf(n)&&e.push(n))}return e}sources(){const e=[];let n;for(let t=0;t<this._elements.length;t++)n=this.g.link(this._elements[t]),null!=n&&-1==e.indexOf(n.source.id())&&e.push(n.source.id());return new sc(e,this.g)}targets(){const e=[];let n;for(let t=0;t<this._elements.length;t++)n=this.g.link(this._elements[t]),null!=n&&-1==e.indexOf(n.target.id())&&e.push(n.target.id());return new sc(e,this.g)}intersection(t){return new ac(this.generic_intersection(t)._elements,this.g)}removeDuplicates(){return new ac(this.generic_removeDuplicates()._elements,this.g)}forEach(e){for(let t=0;t<this._elements.length;t++)e(this.g.link(this._elements[t]),t);return this}}class lc extends Wh{constructor(t,e){super(t,"link",e),this.targetNPO=void 0,this.sourceNPO=void 0}linkType(){return this.attr("linkType")}get source(){return this.g._nodes[this.attr("source")]}get target(){return this.g._nodes[this.attr("target")]}nodePair(){return this.g._nodePairs[this.attr("nodePair")]}directed(){return this.attr("directed")}other(t){return this.source==t?this.target:this.source}weights(t,e){return null==t?new Kh(this.attr("weights").toArray()):null==e?new Kh([this.attr("weights").get(t)]):new Kh(this.attr("weights").period(t,e).toArray())}presentIn(t,e){return 0<this.weights(t,e).toArray().length}times(){return new $h(this.attr("presence"),this.g)}}class uc{constructor(){this.nodeIds=[],this.linkIds=[],this.timeIds=[],this.nodePairIds=[],this.locationIds=[]}}function hc(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function cc(t,e){const n=[];for(const r in t)n.push(function(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n))for(const r in t[n])Object.prototype.hasOwnProperty.call(t[n],r)&&(e[n][r]=t[n][r]);return e}(t[r],e()));return n}function fc(t,e,n){let r=!0;if(null==t||null==e)return t==e;if(typeof t==typeof e){if("object"!=typeof t)return 1;if(t.constructor===e.constructor){if(0<n)for(const i in t)i in e&&Object.prototype.hasOwnProperty.call(t,i)&&Object.prototype.hasOwnProperty.call(e,i)&&!fc(t[i],e[i],n-1)&&(console.log("compareFailed for key",i,t[i],e[i]),r=!1);return r}}}function dc(t,e){return t-e}class gc{constructor(){this.nodes=[],this.links=[],this.times=[],this.nodePairs=[],this.locations=[]}}function pc(t){let e=0;for(var n=t.getSelections();!n[e].showColor;)if(e++,e==n.length)return void(e=-1);return t.getSelections()[e].color}function mc(t,e){return t.priority-e.priority}function yc(t){const e=new uc;return null!=t&&(t.nodes&&(e.nodeIds=t.nodes.map(t=>t.id())),t.links&&(e.linkIds=t.links.map(t=>t.id())),t.times&&(e.timeIds=t.times.map(t=>t.id())),t.nodePairs&&(e.nodePairIds=t.nodePairs.map(t=>t.id()))),e}var _c=n(18);let vc;"undefined"!=typeof window&&(window.dataManager||(window.dataManager=new class{constructor(t){this.keepOnlyOneSession=!1,this.session="",this.sessionDataPrefix="ncubesession",this.SEP="_",t?t.keepOnlyOneSession&&this.setOptions(t):this.keepOnlyOneSession=!1}setOptions(t){this.keepOnlyOneSession=t.keepOnlyOneSession}clearSessionData(t){var e=this.sessionDataPrefix+this.SEP+t;const n=[];for(let t=0;t<localStorage.length;t++){const i=localStorage.key(t);!i||0!=i.indexOf(e)&&0!=i.indexOf("connectoscope1")||n.push(i)}for(let t=0;t<n.length;t++){var r=n[t];localStorage.removeItem(r)}}clearAllSessionData(){this.clearSessionData("")}isSessionCached(t,e){var n=this.sessionDataPrefix+this.SEP+t+this.SEP+e;for(let t=0;t<localStorage.length;t++){const r=localStorage.key(t);if(r&&0==r.indexOf(n))return!0}return!1}importData(t,n){if(this.session=t,n.nodeTable||n.linkTable){n.nodeTable||console.log("[n3] Node table missing!"),n.linkTable||console.log("[n3] Link table missing!"),n.nodeSchema||console.log("[n3] Node schema missing!"),n.linkSchema||console.log("[n3] Link schema missing!");for(let e=0;e<n.nodeTable.length;e++)for(let t=0;t<n.nodeTable[e].length;t++)"string"==typeof n.nodeTable[e][t]&&(n.nodeTable[e][t]=n.nodeTable[e][t].trim());for(let e=0;e<n.linkTable.length;e++)for(let t=0;t<n.linkTable[e].length;t++)"string"==typeof n.linkTable[e][t]&&(n.linkTable[e][t]=n.linkTable[e][t].trim());if(this.isSchemaWellDefined(n)){console.log("data is well-schematized, caching dynamicGraph"),this.keepOnlyOneSession&&this.clearAllSessionData();const e=new Ih;e.initDynamicGraph(n),e.saveDynamicGraph(this)}else console.log("data is not well-schematized, so not caching dynamicGraph")}else console.log("Empty tables. No data imported.")}saveToStorage(e,n,r,i){if(null!=r){i=JSON.stringify(r,i);let t;t=4194304<i.length?_c.compress(i):i,localStorage[this.sessionDataPrefix+this.SEP+this.session+this.SEP+e+this.SEP+n]=t}else console.log("attempting to save undefined value. aborting",e,n)}getFromStorage(t,e,n,r){console.assert(""!=this.session);let i;i=n?function(t,e){return n(t,e,r)}:void 0;e=localStorage[this.sessionDataPrefix+this.SEP+this.session+this.SEP+t+this.SEP+e];if(e&&"undefined"!=e){let t;return t="true"==e||"false"!=e&&(0<="\"'[{0123456789".indexOf(e[0])?e:_c.decompress(e)),JSON.parse(t,i)}}removeFromStorage(t,e){localStorage.removeItem(this.sessionDataPrefix+this.SEP+this.session+this.SEP+t+this.SEP+e)}getGraph(t,e){return this.session=t,this.dynamicGraph&&this.dynamicGraph.name==e||(this.dynamicGraph=new Ih,this.dynamicGraph.loadDynamicGraph(this,e)),this.dynamicGraph}isSchemaWellDefined(t){return console.log("isSchemaWellDefined"),!(t.locationTable&&!Si(t.locationSchema.id))&&(!(0<t.nodeTable.length&&!Si(t.nodeSchema.id))&&!(0<t.linkTable.length&&!(Si(t.linkSchema.id)&&Si(t.linkSchema.source)&&Si(t.linkSchema.target))))}}),vc=window.dataManager);let wc;function xc(t,e){var n=function(){const e={},t=window.location.search.replace("?","").split("&");let n,r;return t.forEach(function(t){n=t.split("="),r=decodeURIComponent(n[1]),e[n[0]]=r}),e}();return t=t||n.datasetName,wc=e||n.session,vc.getGraph(wc,t)}const Ac="highlight",bc="selection",Tc="timeRange",Mc="createSelection",kc="deleteSelection",Sc="setCurrentSelectionId",Nc="setSelectionColor",Ec="selectionColoring",Cc="selectionFilter",Oc="selectionPriority",Pc="searchResult",Dc="SET_STATE",Lc="GET_STATE",Ic="STATE_CREATED",Fc="ZOOM_INTERACTION",Uc=!0,Hc=[Ac,bc,Tc,Mc,kc,Sc,Ec,Cc,Oc,Pc,Nc,Dc,Lc,Ic,Fc];const Rc=new class{};let jc=-1;function Yc(t,e){Rc[t]=e}window.addEventListener("storage",function(){var t=localStorage[Jc];if(null!=t&&"undefined"!=t){const n=xc();t=JSON.parse(t,function(t,e){return Lh(n,0,e)});t&&t.id!=jc&&(jc=t.id,tf(t))}},!1);class Bc{constructor(t){this.id=Math.random(),this.type=t,this.body=null}}function Gc(t,e,n){var r=xc(),i=yc(e);null!=e&&function(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return}(e),null==!e&&(t="reset"),Kc(new zc(t,i,n));let s="auto";e&&0<r.currentSelection_id&&(s="url(/networkcube/icons/brush.png),auto");const o=document.querySelector("body");o&&(o.style.cursor=s)}class zc extends Bc{constructor(t,e,n){super(Ac),this.action=t,this.idCompound=null!=e?e:new uc,this.msg=null!=n?n:""}}Bc;function Xc(t,e,n,r){e=new qc(t,e);((r=null==r?!1:r)?Kc:tf)(e)}class qc extends Bc{constructor(t,e){super(Tc),this.startUnix=t,this.endUnix=e}}Bc;Bc;Bc;Bc;Bc;Bc;Bc;Bc;Bc;class Wc{constructor(t,e,n){this.networkType=t,this.timeSliderStart=e,this.timeSliderEnd=n}}class Vc extends Wc{constructor(t,e,n,r,i,s){super(t,e,n),this.nodeOverlap=r,this.linkOpacity=i,this.opacityOfPositionlessNodes=s}}Bc;Bc;class Zc extends Bc{constructor(t,e,n,r,i){super(Ic),this.state=t,this.bookmarkIndex=e,this.viewType=n,this.isNewBookmark=r,this.typeOfMultiView=i}}class $c extends Bc{constructor(t,e){super(Fc),this.visType=t,this.ineractionType=e}}function Qc(t,e){Kc(new $c(t,e),!0)}const Jc="networkcube_message";function Kc(t,e){null!=e&&!e||tf(t),Uc&&(localStorage[Jc]=JSON.stringify(t,function(t,e){return t=t,e=e,Dh&&console.log("dgraphReplacer",t,e),e instanceof Ih?(console.log("dgraphReplacer found a DynamicGraph property",t),Ph):e}))}function tf(t){const e=xc();if(Rc[t.type]){if(t.type==Ac)e.highlight(t.action,t.idCompound);else if(t.type==bc)e.selection(t.action,t.idCompound,t.selectionId);else if(t.type!=Tc)if(t.type==Ec){var n=t;const i=e.getSelection(n.selectionId);null!=i&&(i.showColor=n.showColor)}else if(t.type==Oc){var r=t;const s=e.getSelection(r.selectionId1),o=e.getSelection(r.selectionId2);null!=s&&(s.priority=r.priority1),null!=o&&(o.priority=r.priority2);const a=e.links().selected().toArray();for(let t=0;t<a.length;t++)a[t].getSelections().sort(mc);const l=e.nodes().selected().toArray();for(let t=0;t<l.length;t++)l[t].getSelections().sort(mc);const u=e.nodePairs().selected().toArray();for(let t=0;t<u.length;t++)u[t].getSelections().sort(mc)}else if(t.type==Cc)e.filterSelection(t.selectionId,t.filter);else if(t.type==Mc)e.addSelection(t.selection.id,t.selection.color,t.selection.acceptedType,t.selection.priority);else if(t.type==Sc)e.setCurrentSelection(t.selectionId);else if(t.type==kc)e.deleteSelection(t.selectionId);else if(t.type==Pc)e.highlight("set",t.idCompound);else if(t.type==Nc){r=t;const h=e.getSelection(r.selectionId);null!=h&&(h.color=r.color)}else t.type==Lc||t.type==Dc||t.type==Ic||(t.type,Fc);t=t,Rc[t.type]&&null!=Rc[t.type]&&Rc[t.type](t)}}localStorage[Jc]=void 0;class ef{constructor(t,e,n,r,i,s){this.BAR_WIDTH=5,this.RADIUS_HANDLE=5,this.LEFT=this.RADIUS_HANDLE,this.RIGHT=this.RADIUS_HANDLE,this.HEIGHT=10,this.TOP=0,this.dragEndCallBackFn=t=>null,this.x=t,this.y=e,this.width=n,this.min=r,this.max=i,this.value=this.min,this.stepWidth=s}setDragEndCallBack(t){this.dragEndCallBackFn=t}appendTo(t){this.svg=t,this.rect=this.svg._groups[0][0].getBoundingClientRect(),this.valueRange=fh().domain([0,this.width]).range([this.min,this.max]),this.drag=ku().on("start",t=>{this.dragStart(t.sourceEvent)}).on("drag",t=>{this.dragMove(t.sourceEvent)}),this.svg=t,this.g=t.append("g").attr("height",this.HEIGHT).attr("width",this.width).attr("transform","translate("+this.x+","+this.y+")"),this.g.append("line").attr("x1",this.LEFT).attr("y1",this.TOP).attr("x2",this.width-this.RIGHT-this.LEFT).attr("y2",this.TOP).style("stroke","#aaa"),this.knob=this.g.append("circle").attr("id","#sliderKnob").attr("r",this.RADIUS_HANDLE).attr("cx",this.LEFT).attr("cy",this.TOP).attr("fill","#777").attr("onchange","trace.event('vis_4',document.location.pathname,this.parentElement.previousElementSibling.innerHTML ,'cx' + this.getAttribute('cx'))").attr("onmouseup","trace.event('vis_4',document.location.pathname,this.parentElement.previousElementSibling.innerHTML ,'cx' + this.getAttribute('cx'))").call(this.drag)}dragStart(t){this.dragStartXMouse=Math.max(this.LEFT,Math.min(this.width-this.RIGHT,this.getRelX(t))),this.dragObj=t?t.target:void 0}dragMove(t){Ma(this.dragObj).attr("cx",Math.max(this.LEFT,Math.min(this.width-this.RIGHT,this.getRelX(t)))),this.dragEnd()}dragEnd(){this.value=this.valueRange(this.knob.attr("cx")),this.dragEndCallBackFn(this.value)}getRelX(t){return(t?t.pageX:0)-this.LEFT-this.x-this.rect.left}set(t){this.knob.attr("cx",this.valueRange.invert(t))}}function nf(t,e,n,r,i,s,o,a){const l=new ef(5,r-5,n,s,o,.01),u=t.append("svg").attr("width",n+20).attr("height",r);u.append("text").attr("x",10).attr("y",r-15).text(e).style("user-select","none").attr("class","sliderLabel"),l.appendTo(u),l.set(i),l.setDragEndCallBack(a)}class rf{constructor(t,e){this.checked=!1,this.text="",this.RADIUS=7,this.clickHandler=()=>null,this.color=t,e&&(this.text=e)}appendTo(t,e,n){const r=n.append("g").attr("transform","translate("+t+","+e+")");this.circle=r.append("circle").attr("r",this.RADIUS).attr("fill","#ffffff").attr("stroke",this.color).attr("stroke-width",1).attr("cx",2*this.RADIUS).attr("cy",0).attr("oninput","trace.event('vis_4',document.location.pathname,this.parentElement.previousElementSibling.innerHTML ,'cx' + this.getAttribute('cx'))").attr("onmouseup","trace.event('vis_4',document.location.pathname,this.parentElement.previousElementSibling.innerHTML ,'cx' + this.getAttribute('cx'))"),this.text&&(this.label=r.append("text").attr("x",1.4*this.RADIUS).attr("y",5).style("font-family","Helvetica").style("font-size","9pt").style("user-select","none").text(this.text[0]).on("click",()=>{this.checked=!this.checked,this.checked?(this.circle.attr("fill",this.color),this.label.attr("fill","#ffffff")):(this.circle.attr("fill","#ffffff"),this.label.attr("fill",this.color)),this.clickHandler&&this.clickHandler()}))}isChecked(){return this.checked}addClickHandler(t){this.clickHandler=t}}class sf{constructor(t,e,n,r,i,s,o){this.BAR_WIDTH=15,this.RADIUS_HANDLE=5,this.LEFT=0,this.RIGHT=0,this.HEIGHT=10,this.TOP=0,this.isInverted=!1,this.dragEndCallBackFn=()=>null,this.singleTimeStepX=0,this.dragStartXMouse=0,this.dragStartXBar=0,this.currentBarLength=0,this.x=t,this.y=e,this.width=n,this.min=r,this.max=i,this.stepWidth=s,this.hasTickmarks=null!=o&&o}setDragEndCallBack(t){this.dragEndCallBackFn=t}appendTo(t){if(this.svg=t,this.rect=this.svg._groups[0][0].getBoundingClientRect(),this.valueRange=fh().domain([0,this.width]).range([this.min,this.max]),this.svg=t,this.g=t.append("g").attr("height",this.HEIGHT).attr("width",this.width).attr("transform","translate("+this.x+","+this.y+")"),this.drag=ku().on("start",t=>{this.dragStart(t.sourceEvent)}).on("drag",t=>{this.dragMove(t.sourceEvent)}),this.g.append("line").attr("x1",this.LEFT).attr("y1",this.TOP).attr("x2",this.width-this.RIGHT-this.LEFT).attr("y2",this.TOP).style("stroke","#aaa"),this.hasTickmarks){this.val2spaceScale=fh().domain([this.min,this.max]).range([this.LEFT,this.width-this.RIGHT-this.LEFT]);for(let t=this.min;t<=this.max;t+=this.stepWidth){var e=this.val2spaceScale(t);this.g.append("line").attr("class","rangeTick").attr("x1",e).attr("y1",this.TOP).attr("x2",e).attr("y2",this.TOP+20).style("stroke","#bbb"),this.g.append("text").attr("class","rangeTickText").attr("x",e).attr("y",this.TOP+20).text(t.toFixed(1)).style("opacity",.5).style("font-family","Helvetica").style("font-weigth","100").style("font-size","7pt")}}this.isInverted?(this.bar0=this.g.append("rect").attr("x",this.LEFT).attr("y",this.TOP).attr("height",this.BAR_WIDTH).attr("width",0).style("fill","#bbb").call(this.drag).attr("id","bar0").attr("onmouseup","trace.event('vis_43',document.location.pathname,'Time Slider','x' + this.getAttribute('x') + 'width' + this.getAttribute('width'))").attr("oninput","trace.event('vis_43',document.location.pathname,'Time Slider','x' + this.getAttribute('x') + 'width' + this.getAttribute('width'))"),this.bar1=this.g.append("rect").attr("x",this.RIGHT).attr("y",this.TOP).attr("height",this.BAR_WIDTH).attr("width",0).style("fill","#bbb").call(this.drag).attr("id","bar1").attr("onmouseup","trace.event('vis_43',document.location.pathname,'Time Slider','x' + this.getAttribute('x') + 'width' + this.getAttribute('width'))").attr("oninput","trace.event('vis_43',document.location.pathname,'Time Slider','x' + this.getAttribute('x') + 'width' + this.getAttribute('width'))")):(this.bar0=this.g.append("rect").attr("x",this.LEFT).attr("y",this.TOP).attr("height",this.BAR_WIDTH).attr("width",this.width-this.RIGHT-this.LEFT).style("fill","#bbb").call(this.drag).attr("id","bar0").attr("onmouseup","trace.event('vis_43',document.location.pathname,'Time Slider','x' + this.getAttribute('x') + 'width' + this.getAttribute('width'))").attr("oninput","trace.event('vis_43',document.location.pathname,'Time Slider','x' + this.getAttribute('x') + 'width' + this.getAttribute('width'))"),this.bar1=null),this.circleMin=this.g.append("circle").attr("id","sliderKnobMin").attr("r",this.RADIUS_HANDLE).attr("cx",this.LEFT).attr("cy",this.TOP+this.BAR_WIDTH).attr("fill","#777").attr("onchange","trace.event('vis_27',document.location.pathname,'Time Sliden Min','cx' + this.getAttribute('cx'))").attr("onmouseup","trace.event('vis_27',document.location.pathname,'Time Sliden Min','cx' + this.getAttribute('cx'))").attr("oninput","trace.event('vis_27',document.location.pathname,'Time Sliden Min','cx' + this.getAttribute('cx'))").call(this.drag),this.circleMax=this.g.append("circle").attr("id","sliderKnobMax").attr("r",this.RADIUS_HANDLE).attr("cx",this.width-this.RIGHT).attr("cy",this.TOP+this.BAR_WIDTH).attr("fill","#777").attr("onchange","trace.event('vis_28',document.location.pathname,'Time Sliden Max','cx' + this.getAttribute('cx'))").attr("onmouseup","trace.event('vis_28',document.location.pathname,'Time Sliden Max','cx' + this.getAttribute('cx'))").attr("oninput","trace.event('vis_28',document.location.pathname,'Time Sliden Max','cx' + this.getAttribute('cx'))").call(this.drag)}dragStart(t){var e;this.dragStartXMouse=Math.max(this.LEFT,Math.min(this.width-this.RIGHT,this.getRelX(t))),this.dragObj=t?t.target:void 0,this.isInverted?(e=parseInt(this.circleMin.attr("cx")),t=parseInt(this.circleMax.attr("cx")),this.dragStartXMouse<e?(this.dragStartXBar=this.LEFT,this.currentBarLength=e-this.LEFT):this.dragStartXMouse<t?(this.dragStartXBar=e,this.currentBarLength=t-e):(this.dragStartXBar=t,this.currentBarLength=this.width-this.RIGHT-t)):(this.dragStartXBar=parseInt(this.bar0.attr("x")),this.currentBarLength=parseInt(this.bar0.attr("width")))}dragMove(t){if(this.isInverted||this.dragObj.id!=this.bar0.attr("id")){if(this.isInverted&&(this.dragObj.id==this.bar0.attr("id")||this.dragObj.id==this.bar1.attr("id")))return;this.dragObj==this.circleSingle?(this.singleTimeStepX=Math.max(this.LEFT,Math.min(this.width-this.RIGHT,this.getRelX(t))),Ma(this.dragObj).attr("transform","translate("+this.singleTimeStepX+", 0)")):(Ma(this.dragObj).attr("cx",Math.max(this.LEFT,Math.min(this.width-this.RIGHT,this.getRelX(t)))),this.isInverted?(this.bar0.attr("x",this.LEFT).attr("width",this.circleMin.attr("cx")-this.LEFT),this.bar1.attr("x",this.circleMax.attr("cx")).attr("width",this.width-2*this.RIGHT-this.circleMax.attr("cx"))):this.bar0.attr("x",this.circleMin.attr("cx")).attr("width",this.circleMax.attr("cx")-this.circleMin.attr("cx")))}else{t=Math.max(this.LEFT,Math.min(this.width-this.RIGHT,this.getRelX(t)))-this.dragStartXMouse,t=Math.max(this.LEFT,Math.min(this.width-this.RIGHT-this.currentBarLength,this.dragStartXBar+t));this.bar0.attr("x",t),this.circleMin.attr("cx",t),this.circleMax.attr("cx",t+this.currentBarLength)}this.dragEnd()}dragEnd(){this.min=this.valueRange(this.circleMin.attr("cx")),this.max=this.valueRange(this.circleMax.attr("cx")),this.dragEndCallBackFn(this.min,this.max,this.valueRange(this.singleTimeStepX))}getRelX(t){return(t?t.pageX:0)-this.LEFT-this.x-this.rect.left}set(t,e){this.circleMin.attr("cx",this.valueRange.invert(t)),this.circleMax.attr("cx",this.valueRange.invert(e)),this.isInverted?(this.bar0.attr("x",this.LEFT).attr("width",this.circleMin.attr("cx")),this.bar1.attr("x",this.circleMax.attr("cx")).attr("width",this.width-2*this.RIGHT-this.circleMax.attr("cx"))):this.bar0.attr("x",this.circleMin.attr("cx")).attr("width",this.circleMax.attr("cx")-this.circleMin.attr("cx"))}setIsInverted(t){t!=this.isInverted&&(this.isInverted=t,this.isInverted?this.bar1=this.g.insert("rect","#bar0").attr("x",this.RIGHT).attr("y",this.TOP).attr("height",this.BAR_WIDTH).attr("width",0).style("fill","#bbb").call(this.drag).attr("id","bar1"):this.bar1.remove(),this.set(this.min,this.max))}}class of{constructor(t,e,n){this.MARGIN_SLIDER_RIGHT=30,this.MARGIN_SLIDER_LEFT=10,this.TICK_GAP=2,this.TICK_LABEL_GAP=40,this.SLIDER_TOP=25,this.HEIGHT=200,this.callBack=void 0,this.propagateButton=new rf("#000000"),this.dgraph=t,this.times=t.times().toArray(),this.widgetWidth=e;const r=new Qh(0,this.dgraph);this.sliderWidth=e-this.MARGIN_SLIDER_RIGHT+5-this.MARGIN_SLIDER_LEFT-5;let i=(0!=this.times.length?this.times[this.times.length-1]:r).moment();var s,o=function(t){let e="milliseconds";switch(t){case 0:e="milliseconds";break;case 1:e="seconds";break;case 2:e="minutes";break;case 3:e="hours";break;case 4:e="days";break;case 5:e="weeks";break;case 6:e="months";break;case 7:e="years"}return e}(t.gran_min);i=i||new Date(0),i=(s=i,e=1,o=o,new Date(s.getTime()+e*Eh[o]));o=0!=this.times.length?this.times[0].unixTime():0;this.slider=new sf(this.MARGIN_SLIDER_LEFT,this.SLIDER_TOP,this.sliderWidth,o,i.valueOf(),1),n&&(this.callBack=n),this.tickScale=function(){return Xu.apply(Th(wh,xh,Zi,_h,Ri,Bi,yh,mh,ph,vo).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}().range([this.MARGIN_SLIDER_LEFT,this.MARGIN_SLIDER_LEFT+this.sliderWidth]).domain([o,i.valueOf()]),this.tickHeightFunction=fh().range([4,this.SLIDER_TOP-10]).domain([t.gran_min,t.gran_max])}appendTo(t,e,n){e=e||0,n=n||0;const r=t.append("g").attr("transform","translate("+e+","+n+")");r.append("g").attr("transform","translate(0,"+this.SLIDER_TOP+")").attr("class","x axis").call((n=this.tickScale,Oo(xo,n))),this.labelStart=r.append("text").attr("y",this.SLIDER_TOP+20).style("opacity",0).style("font-family","Helvetica").style("font-weigth","100").style("font-size","8pt").style("text-anchor","end").text("").style("user-select","none").style("-webkit-user-select","none").style("-khtml-user-select","none").style("-moz-user-select","none").style("-o-user-select","none").style("user-select","none"),this.labelEnd=r.append("text").style("opacity",0).attr("y",this.SLIDER_TOP+20).style("font-family","Helvetica").style("font-weigth","100").style("font-size","8pt").style("text-anchor","start").text("").style("user-select","none").style("-webkit-user-select","none").style("-khtml-user-select","none").style("-moz-user-select","none").style("-o-user-select","none").style("user-select","none"),this.slider.appendTo(r),this.slider.setDragEndCallBack((t,e,n)=>this.updateTime(t,e,n)),this.propagateButton=new rf("#000000","Syncronize Time"),this.propagateButton.appendTo(this.sliderWidth+15,this.SLIDER_TOP+8,r)}drawTickmarks(e,n,r){let i=1;for(;Math.floor(this.sliderWidth/this.TICK_LABEL_GAP)<n.length/i&&i<100;)i++;for(let t=0;t<n.length;t++)t%i==0&&(r.append("text").attr("x",this.tickScale(n[t].unixTime())).attr("y",this.SLIDER_TOP-this.tickHeightFunction(e)).text(Ch(n[t].time(),e)).attr("id","timelabel_"+e+"_"+t).attr("class","timelabel").style("opacity",.5).style("font-family","Helvetica").style("font-weigth","100").style("font-size","7pt"),r.append("line").attr("x1",this.tickScale(n[t].unixTime())).attr("x2",this.tickScale(n[t].unixTime())).attr("y1",this.SLIDER_TOP).attr("y2",this.SLIDER_TOP-this.tickHeightFunction(e)).style("stroke","#bbb"))}formatForGranularities(t,e,n){let r="";for(;e<=n;)r+=function(t,e){switch(t){case 0:return"%S";case 1:return"%S"+(e?".":"");case 2:return"%M"+(e?":":"");case 3:return"%H";case 4:return"%D"+(e?" ":"");case 6:return"%m"+(e?"-":"");default:return"%Y"+(e?"-":"")}}(n,e<n),n--;return t.format(r.trim())}updateTime(t,e,n){function r(t){return t.toDateString()}n=Math.round(n),this.labelStart.attr("x",this.slider.valueRange.invert(t)+10).style("opacity",1).text(r(new Date(t))),this.labelEnd.attr("x",this.slider.valueRange.invert(e)+10).style("opacity",1).text(r(new Date(e))),null!=this.callBack?this.callBack(t,e,this.propagateButton.isChecked()):Xc(t,e,this.times[n],this.propagateButton.isChecked())}set(t,e){this.slider.set(t,e)}}const af="#999999",lf="#999999",uf="#ff8800";let hf=.4,cf=.4,ff=1;let df=.3;const gf=4,pf=0,mf=20;let yf=2;n=window.innerWidth;const _f=xc(),vf=_f.links().toArray(),wf=_f.times().toArray(),xf=_f.locations().toArray();for(let t=0;t<xf.length;t++)xf[t].npos=[];let Af=_f.time(0),bf=_f.times().last();const Tf=J("#visDiv").node();Tf.style.width="100%",Tf.style.height=(window.innerHeight-60).toString()+"px";const Mf={},kf=[],Sf=[];let Nf=[];class Ef{constructor(){this.links=[]}numLinks(){return this.links.length}addLink(t){-1==this.links.indexOf(t)&&(this.links.push(t),t.geoMultiLink=this)}getLinks(){return this.links}linkIndex(t){return this.links.indexOf(t)}}class Cf{constructor(){this.timeIds=[],this.x=0,this.y=0,this.xOrig=0,this.yOrig=0,this.geoPos=new google.maps.LatLng(0,0),this.displaced=!1,this.displacementVector=[],this.fixedPosition=!0,this.inLinks=[],this.outLinks=[],this.inNeighbors=[],this.outNeighbors=[]}}let Of,Pf;const Df=Mn().range([0,2]);Df.domain([0,_f.links().weights().max()]),function(e){for(let t=0;t<Hc.length;t++)Rc[Hc[t]]=e}(function(t){t&&"timeRange"==t.type&&1<_f.times().size()&&rd.set(t.startUnix,t.endUnix);Kf(),ed()}),_f.nodes().toArray().forEach(t=>{t.width=5*t.attr("label").length+10,t.height=10});const Lf=Mn().domain([0,100]).range([gf,gf]);let If,Ff,Uf,Hf,Rf,jf,Yf,Bf,Gf;let zf,Xf,qf,Wf;const Vf=1e3;Yc(Dc,function(t){"map"==t.viewType&&(t=t.state,df=t.nodeOverlap,id(),hf=t.linkOpacity,Kf(),cf=t.opacityOfPositionlessNodes,ed(),Af=t.timeSliderStart,bf=t.timeSliderEnd,Xc(t.timeSliderStart,t.timeSliderEnd,wf[0],!0))}),Yc(Lc,function(t){"map"==t.viewType&&function(t,e,n,r,i){Kc(new Zc(t,e,n,r,i),!0)}(new Vc("map",Af.unixTime(),bf.unixTime(),df,hf,cf),t.bookmarkIndex,t.viewType,t.isNewBookmark,t.typeOfMultiView)});const Zf=e("%m/%d/%Y");function $f(t){let e="";null!=t.location&&null!=t.location.label()&&(e=", "+t.location.label());const n=_f.time(t.timeIds[0]);let r="";return n&&(r=" ("+Zf(new Date(n.unixTime()))+")"),t.node.label()+e+r}let Qf=new google.maps.LatLngBounds;const Jf=20;function Kf(r){Hf.transition().duration(100).style("stroke",function(t){let e=pc(t);return r&&r==t._id?"orange":(e=e||af,e)}).attr("opacity",t=>{return r&&r==t._id?1:t.isVisible()&&t.presentIn(Af,bf)?null!=qf?qf==t?1:.3*hf:t.isHighlighted()||t.source.isHighlighted()||t.target.isHighlighted()?Math.min(1,hf):hf:0}).attr("stroke-width",function(t){let e=Df(t.weights(Af,bf).mean())*ff;const n=J(this);return e<0?(e=-e,n.attr("stroke-dasharray","1,2")):n.attr("stroke-dasharray","0"),r&&r==t._id?e*=3:t.isHighlighted()&&(e*=2),e})}let td=[];function ed(n){td=[],Uf.attr("opacity",t=>t.node.isVisible()?t.timeIds[0]<=bf.id()&&t.timeIds[t.timeIds.length-1]>=Af.id()?1:pf:0),If.selectAll(".nodeCircle").classed("highlighted",t=>t.node.isHighlighted()||0<t.node.links().highlighted().length||0<t.node.neighbors().highlighted().length).style("fill",t=>{let e;if(t.node.isHighlighted())e=uf;else{if(n&&n==t.node._id)return"orange";e=pc(t.node)}return e=e||lf,e}).style("opacity",t=>n&&n==t.node._id?1:t.node.isVisible()?t.timeIds[0]<=bf.id()&&t.timeIds[t.timeIds.length-1]>=Af.id()?t.fixedPosition?1:cf:pf:0),Rf.attr("visibility",e=>{let r=e.node.isHighlighted()||qf&&e==qf.sourceNPO||qf&&e==qf.targetNPO,i,s;if(r)for(let t=0;t<td.length;t++){i=e,s=td[t];var o=i.x+mf,n=i.x+mf+8*i.node.label().length,a=i.y-7,l=i.y+7,u=s.x+mf,h=s.x+mf+8*s.node.label().length,c=s.y-7,f=s.y+7;if(r=n<u||h<o||f<a||l<c,!r){if(i.node==s.node)break;{let e=i,n=s;u<o&&(n=i,e=s),Rf.filter(t=>t==n).attr("x",mf).attr("text-anchor","start"),Rf.filter(t=>t==e).attr("x",-mf).attr("text-anchor","end"),jf.filter(t=>t==n).attr("x",mf).attr("text-anchor","start").attr("visibility","visible"),jf.filter(t=>t==e).attr("x",t=>-mf-ud($f(t))).attr("text-anchor","end").attr("visibility","visible"),r=!0}}}return r&&td.push(e),r?"visible":"hidden"}),jf.filter(t=>-1<td.indexOf(t)).attr("visibility","visible"),jf.filter(t=>-1==td.indexOf(t)).attr("visibility","hidden")}function nd(){var e,n;let r,i,s,o;var a,l;let u,h,c,f;Nf=[];let d;for(let t=0;t<_f.links().length;t++)r=_f.link(t),r.geoMultiLink=void 0;for(let e=0;e<_f.links().length;e++){r=_f.link(e),s=r?r.sourceNPO:void 0,null==s&&(s={x:0,y:0}),o=r?r.targetNPO:void 0,null==o&&(o={x:0,y:0}),r.sourceNPO=s,r.targetNPO=o;for(let t=0;t<e;t++)i=_f.link(t),a=r,l=i,(a.sourceNPO==l.sourceNPO&&a.targetNPO==l.targetNPO||a.sourceNPO==l.targetNPO&&a.targetNPO==l.sourceNPO)&&(i.geoMultiLink?(d=i.geoMultiLink,d.addLink(r)):(d=new Ef,Nf.push(d),d.addLink(r),d.addLink(i)))}console.log(">> TOTAL MULTILINKS:",Nf.length);for(let t=0;t<_f.links().length;t++)if(r=_f.link(t),s=null===r||void 0===r?void 0:r.sourceNPO,o=null===r||void 0===r?void 0:r.targetNPO,e=function(e,n){let r=0;for(let t=0;t<e.length;t++)r+=Math.pow(e[t],2);r=Math.sqrt(r);for(let t=0;t<e.length;t++)e[t]=e[t]/r*n;return e}([-(g={x:o.x-s.x,y:o.y-s.y}).y,g.x],5),n={x:s.x+g.x/2,y:s.y+g.y/2},s.x==o.x&&s.y==o.y)u=n.x+30+30*Math.random(),h=n.y-10+30*Math.random(),c=n.x+10+30*Math.random(),f=n.y-30+30*Math.random(),r.path=[{x:s.x,y:s.y},{x:u,y:h},{x:c,y:f},{x:o.x,y:o.y}];else{u=n.x,h=n.y;let t=0;if(r.geoMultiLink){const p=r.geoMultiLink;t=p.linkIndex(r)}var g=t*yf;r.path=[{x:s.x,y:s.y},{x:n.x+e[0]*g,y:n.y+e[1]*g},{x:o.x,y:o.y}]}Hf.attr("d",function(t){return Ff(t.path)})}e=J("#timelineDiv").append("svg").attr("width",n).attr("height",50);let rd;1<_f.times().size()&&(rd=new of(_f,n-100-20),rd.appendTo(e),Yc("timeRange",function(t){Af=wf[0],bf=wf[wf.length-1];let e=0;for(e;e<wf.length;e++)if(wf[e].unixTime()>t.startUnix){Af=wf[e-1];break}for(e;e<wf.length;e++)if(wf[e].unixTime()>t.endUnix){bf=wf[e-1];break}rd.set(t.startUnix,t.endUnix),sd(),id(),ed(),Kf()}));e=J("#menuDiv");function id(){let e;for(let t=0;t<kf.length;t++)e=kf[t],e.x=e.xOrig+e.displacementVector[0]*df,e.y=e.yOrig+e.displacementVector[1]*df;for(let t=0;t<kf.length;t++)kf[t].fixedPosition||(e.x=0,e.y=0);Uf.attr("transform",function(t){return"translate("+t.x+","+t.y+")"}),nd()}function sd(){var e;let n;for(let t=0;t<xf.length;t++){e=xf[t],n=[];for(let t=0;t<e.npos.length;t++)e.npos[t].timeIds[0]<=bf.id()&&e.npos[t].timeIds[e.npos[t].timeIds.length-1]>=Af.id()&&n.push(e.npos[t]);if(1==n.length)n[0].displacementVector[0]=0,n[0].displacementVector[1]=0;else{var r=2*Math.PI/n.length;let e;var i=n.length*gf/Math.PI;for(let t=0;t<n.length;t++)e=n[t],e.displacementVector[0]=Math.sin(r*t)*i,e.displacementVector[1]=Math.cos(r*t)*i}}}function od(t,e){var n=Sf[t.id()];let r;return null==n.serie[e]?null!=Mf[t.id()]?r=Mf[t.id()]:(r=new Cf,r.x=0,r.y=0,r.timeIds.push(e),r.xOrig=0,r.yOrig=0,r.node=t,r.geoPos=new google.maps.LatLng(0,0),r.displaced=!1,r.displacementVector=[0,0],r.fixedPosition=!1,kf.push(r),Mf[t.id()]=r):r=n.serie[e],r}function ad(t){return t*t}function ld(t,e){return ad(t.x-e.x)+ad(t.y-e.y)}function ud(t){return 8.8*t.length}nf(e,"Node Overlap",100,50,df,-.05,3,function(t){df=t,id()}),nf(e,"Edge Gap",100,50,yf,0,10,function(t){yf=t,nd()}),nf(e=J("#menuDiv"),"Link Opacity",100,50,hf,0,1,function(t){hf=t,Kf()}),nf(e,"Link Width",100,50,ff,0,10,function(t){ff=t,Kf()}),nf(J("#menuDiv"),"Positionless Nodes",150,50,hf,0,1,function(t){cf=t,ed()}),document.addEventListener("DOMContentLoaded",function(){var t={center:new google.maps.LatLng(48.8588589,2.3470599),zoom:5,zoomControl:!0,mapTypeControl:!0,scaleControl:!0,streetViewControl:!1,rotateControl:!0,fullscreenControl:!0,draggableCursor:"cooperative",styles:[{featureType:"landscape",stylers:[{visibility:"off"}]},{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"road.highway",stylers:[{visibility:"off"}]},{featureType:"road.arterial",stylers:[{visibility:"off"}]},{featureType:"road.local",stylers:[{visibility:"off"}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"administrative.province",stylers:[{visibility:"off"}]},{featureType:"administrative.locality",stylers:[{visibility:"off"}]},{featureType:"administrative.country",elementType:"geometry.stroke",stylers:[{lightness:60}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"geometry",stylers:[{lightness:100}]},{featureType:"administrative.country",elementType:"labels",stylers:[{visibility:"off"}]}]};Pf=new google.maps.Map(Tf,t),Pf.addListener("zoom_changed",function(){var t;const e=document.getElementById("weirdDiv");if(e){e.style.width=window.innerWidth*Math.random()+"px";const n=null===(t=null===e||void 0===e?void 0:e.parentElement)||void 0===t?void 0:t.parentElement;n&&(n.style.width=window.innerWidth*Math.random()+"px"),Qc("map","zoom")}});const e=new BroadcastChannel("row_hovered_over_node");e.onmessage=function(t){ed(t.data.id)};const n=new BroadcastChannel("row_hovered_over_link");n.onmessage=function(t){Kf(t.data.id)},Pf.addListener("center_changed",function(){var t;const e=document.getElementById("weirdDiv");if(e){e.style.width=window.innerWidth*Math.random()+"px";const n=null===(t=null===e||void 0===e?void 0:e.parentElement)||void 0===t?void 0:t.parentElement;n&&(n.style.width=window.innerWidth*Math.random()+"px"),Qc("map","span")}}),Of=new google.maps.OverlayView,Of.onAdd=function(){Bf=document.createElement("div"),Bf.id="weirdDiv",Bf.style.width="100%",Gf=document.createElement("div"),Gf.id="locationsPanel",Gf.classList.add("hidden"),this.getPanes().overlayLayer.appendChild(Bf),this.getPanes().overlayLayer.appendChild(Gf),Pf.addListener("mouseout",function(){Gf.classList.add("hidden"),Gf.classList.remove("shown")}),Yf=this.getProjection(),If=J(Bf).append("svg:svg").attr("id","svgOverlay").style("overflow","visible");const t=If.selectAll(".locationMarker").data(xf).enter().append("g").attr("class","locationMarker");t.append("rect").attr("width",10).attr("height",10).attr("x",-5).attr("y",-5).style("opacity",.4);const e=If.append("svg:defs");e.append("svg:marker").attr("id","end-arrow").attr("viewBox","0 -5 10 10").attr("refX",6).attr("markerWidth",10).attr("markerHeight",10).attr("orient","auto").append("svg:path").attr("d","M0,-3L10,0L0,3L2,0").attr("stroke-width","0px").attr("fill","#555").attr("opacity",.5).attr("transform","translate(-5, 0)");const n=e.append("svg:linearGradient").attr("id","line-gradient");function r(t){var e,n,r,i=(t=Ln(t)).length,s=!1;for(null==u&&(c=h(r=Dn())),e=0;e<=i;++e)!(e<i&&l(n=t[e],e,t))===s&&((s=!s)?c.lineStart():c.lineEnd()),s&&c.point(+o(n,e,t),+a(n,e,t));if(r)return c=null,r+""||null}var o,a,l,u,h,c;n.append("svg:stop").attr("offset",0).attr("stop-color","#000"),n.append("svg:stop").attr("offset",.5).attr("stop-color","#000"),n.append("svg:stop").attr("offset",1).attr("stop-color","#eee"),If=If.append("g"),Ff=(l=In(!0),h=Un,c=u=null,o="function"==typeof o?o:void 0===o?Hn:In(o),a="function"==typeof a?a:void 0===a?Rn:In(a),r.x=function(t){return arguments.length?(o="function"==typeof t?t:In(+t),r):o},r.y=function(t){return arguments.length?(a="function"==typeof t?t:In(+t),r):a},r.defined=function(t){return arguments.length?(l="function"==typeof t?t:In(!!t),r):l},r.curve=function(t){return arguments.length?(h=t,null!=u&&(c=h(u)),r):h},r.context=function(t){return arguments.length?(null==t?u=c=null:c=h(u=t),r):u},r.x(function(t){return t.x}).y(function(t){return t.y}).curve(Bn)),Hf=If.selectAll(".link").data(_f.links().toArray()).enter().append("path").attr("class","link").style("fill","none").on("mouseover",(t,e)=>{Gc("set",{links:[e]})}).on("mouseout",()=>{Gc("reset")}).attr("marker-end",function(e){if(e.directed){let t=pc(e);return t=t||af,e=t,If.append("svg:defs").append("svg:marker").attr("id",e.replace("#","")).attr("viewBox","0 -5 10 10").attr("refX",12).attr("refY",0).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("svg:path").attr("d","M0,-5L10,0L0,5").style("fill",e),"url("+e+")"}});let i=new Cf;var s,f=_f.nodes().toArray();let d,g,p;for(let t=0;t<f.length;t++){d=f[t],g=d.locationSerie().getSerie(),p=new Vh,Sf.push(p);for(const m in g)s=new google.maps.LatLng(g[parseInt(m)].latitude(),g[parseInt(m)].longitude()),i=function(t,e,n){const r=Sf[t.id()];e=Math.round(100*e)/100,n=Math.round(100*n)/100;var i,s;if(null!=r)for(const a in r.serie)if(i=Math.round(100*r.serie[a].geoPos.lng())/100,s=Math.round(100*r.serie[a].geoPos.lat())/100,i==e&&s==n)return r.serie[a];const o=new Cf;return o.node=t,o.x=0,o.y=0,o.xOrig=0,o.yOrig=0,o.displaced=!1,o.displacementVector=[0,0],kf.push(o),o}(d,g[m].longitude(),g[m].latitude()),i.location=g[m],-1==g[m].npos.indexOf(i)&&g[m].npos.push(i),i.geoPos=s,i.timeIds.push(parseInt(m)),p.set(_f.time(parseInt(m)),i)}Hf.each(t=>{t.sourceNPO=od(t.source,t.times().get(0).id()),t.sourceNPO.outLinks.push(t),t.targetNPO=od(t.target,t.times().get(0).id()),t.targetNPO.inLinks.push(t),t.sourceNPO.outNeighbors.push(t.targetNPO),t.targetNPO.inNeighbors.push(t.sourceNPO)}),Uf=If.selectAll(".node").data(kf).enter().append("g"),Uf.append("circle").attr("class","nodeCircle").attr("r",function(t){return Lf(t.node.neighbors().length)}),jf=Uf.append("rect").attr("class","nodeLabelBackground").attr("rx",2).attr("ry",2).attr("x",mf).attr("y",-7).attr("width",t=>ud($f(t))).attr("height",18).attr("visibility","hidden"),Rf=Uf.append("text").text(t=>$f(t)).attr("x",mf+2).attr("y",7).attr("class","nodeLabel").attr("visibility","hidden"),sd(),id(),Kf(),ed()},Pf.addListener("mousemove",t=>{let i=500;var s,o={x:t.latLng.lng()*Vf,y:t.latLng.lat()*Vf};let e;Wf=void 0;const a=Of.getProjection();let l;for(let t=0;t<kf.length;t++)e=a.fromDivPixelToLatLng({x:kf[t].x,y:kf[t].y}),e={x:e.lng()*Vf,y:e.lat()*Vf},l=Math.hypot(o.x-e.x,o.y-e.y),isNaN(l)||l<i&&(Wf=kf[t].node,i=l);if(qf=void 0,null==Wf){let e;let n=new google.maps.Point(0,0),r=new google.maps.Point(0,0);for(let t=0;t<vf.length;t++)e=vf[t],e.isVisible()&&(s=e.sourceNPO,n=null==s?new google.maps.Point(0,0):(n=a.fromDivPixelToLatLng({x:s.x,y:s.y}),new google.maps.Point(n.y*Vf,n.x*Vf)),s=e.targetNPO,r=null==s?new google.maps.Point(0,0):(r=a.fromDivPixelToLatLng({x:s.x,y:s.y}),new google.maps.Point(r.y*Vf,r.x*Vf)),l=function(t,e,n){var r=ld(e,n);if(0==r)return ld(t,e);r=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/r;return ld(t,r<0?e:1<r?n:{x:e.x+r*(n.x-e.x),y:e.y+r*(n.y-e.y)})}(o,n,r),isNaN(l)||l<i&&(qf=e,i=l))}if(Xf!=Wf&&(Gc("reset"),null!=Wf)){const n=new gc;n.nodes=[Wf],Gc("set",n)}if(Xf=Wf,zf!=qf&&(Gc("reset"),null!=qf)){Wf;const r=new gc;r.nodes=[qf],Gc("set",r)}zf=qf,null==qf&&null==Wf&&t.pixel&&function(t,e,n){const r=t;Qf.isEmpty()||Qf.contains(r.fromContainerPixelToLatLng(e))||(Gf.classList.add("hidden"),Gf.classList.remove("shown"));t=new google.maps.Point(e.x-Jf,e.y+Jf),e=new google.maps.Point(e.x+Jf,e.y-Jf);Qf=new google.maps.LatLngBounds(r.fromContainerPixelToLatLng(t),r.fromContainerPixelToLatLng(e));const i=[];xf.forEach(function(t){var e=new google.maps.LatLng(t.latitude(),t.longitude());Qf.contains(e)&&i.push(t)});let s;{if(!(0<i.length))return;s=function(e){const n=[];let r,i,s;for(let t=0;t<_f.nodes().length;t++)if(r=_f.node(t),r){i=r.locations(Af,bf).toArray();for(let t=0;t<i.length;t++)s=new google.maps.LatLng(i[t].latitude(),i[t].longitude()),e.contains(s)&&n.push(r)}return n}(Qf)}const o=[];i.forEach(function(n){o.push({loc:n,nodes:s.filter(function(t){const e=0==(t=t).locations().length?null:t.locations().last();return null!==e&&e.label()==n.label()})})}),Gf.innerHTML="";const a=J(Gf).selectAll(".locListItem").data(o).enter().append("div").attr("class","locListItem");a.append("p").attr("class","locpara").append("nobr").text(function(t){return t.loc.label()}),a.selectAll(".nodeListItem").data(function(t){return t.nodes}).enter().append("p").attr("class","nodeListItem").append("nobr").text(function(t){return t.label()});const l=r.fromLatLngToDivPixel(n);l.x+=20,l.y-=30,Gf.style.left=l.x.toString()+"px",Gf.style.top=l.y.toString()+"px",Gf.classList.add("shown"),Gf.classList.remove("hidden")}(Of.getProjection(),t.pixel,t.latLng)}),Of.draw=function(){!function(){let e,n;for(let t=0;t<kf.length;t++)n=kf[t],null==(e=Yf.fromLatLngToDivPixel(n.geoPos)).x?(n.xOrig=0,n.yOrig=0):(n.xOrig=e.x,n.yOrig=e.y)}(),id(),kn(".locationMarker").attr("transform",function(t){t=new google.maps.LatLng(t.latitude(),t.longitude()),t=Yf.fromLatLngToDivPixel(t);return"translate("+t.x+","+t.y+")"})},Of.setMap(Pf)})},18:function(t,e,n){var y,r,i,s,o,a=(y=String.fromCharCode,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",s={},o={compressToBase64:function(t){if(null==t)return"";var e=o._compress(t,6,function(t){return r.charAt(t)});switch(e.length%4){default:case 0:return e;case 1:return e+"===";case 2:return e+"==";case 3:return e+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:o._decompress(e.length,32,function(t){return l(r,e.charAt(t))})},compressToUTF16:function(t){return null==t?"":o._compress(t,15,function(t){return y(t+32)})+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:o._decompress(e.length,16384,function(t){return e.charCodeAt(t)-32})},compressToUint8Array:function(t){for(var e=o.compress(t),n=new Uint8Array(2*e.length),r=0,i=e.length;r<i;r++){var s=e.charCodeAt(r);n[2*r]=s>>>8,n[2*r+1]=s%256}return n},decompressFromUint8Array:function(t){if(null==t)return o.decompress(t);for(var e=new Array(t.length/2),n=0,r=e.length;n<r;n++)e[n]=256*t[2*n]+t[2*n+1];var i=[];return e.forEach(function(t){i.push(y(t))}),o.decompress(i.join(""))},compressToEncodedURIComponent:function(t){return null==t?"":o._compress(t,6,function(t){return i.charAt(t)})},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),o._decompress(e.length,32,function(t){return l(i,e.charAt(t))}))},compress:function(t){return o._compress(t,16,function(t){return y(t)})},_compress:function(t,e,n){if(null==t)return"";for(var r,i,s,o,a={},l={},u="",h=2,c=3,f=2,d=[],g=0,p=0,m=0;m<t.length;m+=1)if(s=t.charAt(m),Object.prototype.hasOwnProperty.call(a,s)||(a[s]=c++,l[s]=!0),o=u+s,Object.prototype.hasOwnProperty.call(a,o))u=o;else{if(Object.prototype.hasOwnProperty.call(l,u)){if(u.charCodeAt(0)<256){for(r=0;r<f;r++)g<<=1,p==e-1?(p=0,d.push(n(g)),g=0):p++;for(i=u.charCodeAt(0),r=0;r<8;r++)g=g<<1|1&i,p==e-1?(p=0,d.push(n(g)),g=0):p++,i>>=1}else{for(i=1,r=0;r<f;r++)g=g<<1|i,p==e-1?(p=0,d.push(n(g)),g=0):p++,i=0;for(i=u.charCodeAt(0),r=0;r<16;r++)g=g<<1|1&i,p==e-1?(p=0,d.push(n(g)),g=0):p++,i>>=1}0==--h&&(h=Math.pow(2,f),f++),delete l[u]}else for(i=a[u],r=0;r<f;r++)g=g<<1|1&i,p==e-1?(p=0,d.push(n(g)),g=0):p++,i>>=1;0==--h&&(h=Math.pow(2,f),f++),a[o]=c++,u=String(s)}if(""!==u){if(Object.prototype.hasOwnProperty.call(l,u)){if(u.charCodeAt(0)<256){for(r=0;r<f;r++)g<<=1,p==e-1?(p=0,d.push(n(g)),g=0):p++;for(i=u.charCodeAt(0),r=0;r<8;r++)g=g<<1|1&i,p==e-1?(p=0,d.push(n(g)),g=0):p++,i>>=1}else{for(i=1,r=0;r<f;r++)g=g<<1|i,p==e-1?(p=0,d.push(n(g)),g=0):p++,i=0;for(i=u.charCodeAt(0),r=0;r<16;r++)g=g<<1|1&i,p==e-1?(p=0,d.push(n(g)),g=0):p++,i>>=1}0==--h&&(h=Math.pow(2,f),f++),delete l[u]}else for(i=a[u],r=0;r<f;r++)g=g<<1|1&i,p==e-1?(p=0,d.push(n(g)),g=0):p++,i>>=1;0==--h&&(h=Math.pow(2,f),f++)}for(i=2,r=0;r<f;r++)g=g<<1|1&i,p==e-1?(p=0,d.push(n(g)),g=0):p++,i>>=1;for(;;){if(g<<=1,p==e-1){d.push(n(g));break}p++}return d.join("")},decompress:function(e){return null==e?"":""==e?null:o._decompress(e.length,32768,function(t){return e.charCodeAt(t)})},_decompress:function(t,e,n){for(var r,i,s,o,a,l,u=[],h=4,c=4,f=3,d="",g=[],p={val:n(0),position:e,index:1},m=0;m<3;m+=1)u[m]=m;for(i=0,o=Math.pow(2,2),a=1;a!=o;)s=p.val&p.position,p.position>>=1,0==p.position&&(p.position=e,p.val=n(p.index++)),i|=(0<s?1:0)*a,a<<=1;switch(i){case 0:for(i=0,o=Math.pow(2,8),a=1;a!=o;)s=p.val&p.position,p.position>>=1,0==p.position&&(p.position=e,p.val=n(p.index++)),i|=(0<s?1:0)*a,a<<=1;l=y(i);break;case 1:for(i=0,o=Math.pow(2,16),a=1;a!=o;)s=p.val&p.position,p.position>>=1,0==p.position&&(p.position=e,p.val=n(p.index++)),i|=(0<s?1:0)*a,a<<=1;l=y(i);break;case 2:return""}for(r=u[3]=l,g.push(l);;){if(p.index>t)return"";for(i=0,o=Math.pow(2,f),a=1;a!=o;)s=p.val&p.position,p.position>>=1,0==p.position&&(p.position=e,p.val=n(p.index++)),i|=(0<s?1:0)*a,a<<=1;switch(l=i){case 0:for(i=0,o=Math.pow(2,8),a=1;a!=o;)s=p.val&p.position,p.position>>=1,0==p.position&&(p.position=e,p.val=n(p.index++)),i|=(0<s?1:0)*a,a<<=1;u[c++]=y(i),l=c-1,h--;break;case 1:for(i=0,o=Math.pow(2,16),a=1;a!=o;)s=p.val&p.position,p.position>>=1,0==p.position&&(p.position=e,p.val=n(p.index++)),i|=(0<s?1:0)*a,a<<=1;u[c++]=y(i),l=c-1,h--;break;case 2:return g.join("")}if(0==h&&(h=Math.pow(2,f),f++),u[l])d=u[l];else{if(l!==c)return null;d=r+r.charAt(0)}g.push(d),u[c++]=r+d.charAt(0),r=d,0==--h&&(h=Math.pow(2,f),f++)}}});function l(t,e){if(!s[t]){s[t]={};for(var n=0;n<t.length;n++)s[t][t.charAt(n)]=n}return s[t][e]}void 0===(e=function(){return a}.call(e,n,e,t))||(t.exports=e)}},i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=128);function i(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}var n,r});