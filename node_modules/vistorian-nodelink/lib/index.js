!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.nodelink=e():t.nodelink=e()}(window,function(){return n={124:function(e,t,n){"use strict";var r=n(35),i=n(125),s=n(126),o=n(128),n=11102230246251565e-32;function a(r,i,t,s){return function(t,e,n){e=r(r(i(e[1],n[0]),i(-n[1],e[0])),r(i(t[1],e[0]),i(-e[1],t[0]))),t=r(i(t[1],n[0]),i(-n[1],t[0])),t=s(e,t);return t[t.length-1]}}function l(s,o,a,l){return function(t,e,n,r){var i=s(s(a(s(o(n[1],r[0]),o(-r[1],n[0])),e[2]),s(a(s(o(e[1],r[0]),o(-r[1],e[0])),-n[2]),a(s(o(e[1],n[0]),o(-n[1],e[0])),r[2]))),s(a(s(o(e[1],r[0]),o(-r[1],e[0])),t[2]),s(a(s(o(t[1],r[0]),o(-r[1],t[0])),-e[2]),a(s(o(t[1],e[0]),o(-e[1],t[0])),r[2])))),n=s(s(a(s(o(n[1],r[0]),o(-r[1],n[0])),t[2]),s(a(s(o(t[1],r[0]),o(-r[1],t[0])),-n[2]),a(s(o(t[1],n[0]),o(-n[1],t[0])),r[2]))),s(a(s(o(e[1],n[0]),o(-n[1],e[0])),t[2]),s(a(s(o(t[1],n[0]),o(-n[1],t[0])),-e[2]),a(s(o(t[1],e[0]),o(-e[1],t[0])),n[2])))),n=l(i,n);return n[n.length-1]}}function h(o,a,l,h){return function(t,e,n,r,i){var s=o(o(o(l(o(l(o(a(r[1],i[0]),a(-i[1],r[0])),n[2]),o(l(o(a(n[1],i[0]),a(-i[1],n[0])),-r[2]),l(o(a(n[1],r[0]),a(-r[1],n[0])),i[2]))),e[3]),o(l(o(l(o(a(r[1],i[0]),a(-i[1],r[0])),e[2]),o(l(o(a(e[1],i[0]),a(-i[1],e[0])),-r[2]),l(o(a(e[1],r[0]),a(-r[1],e[0])),i[2]))),-n[3]),l(o(l(o(a(n[1],i[0]),a(-i[1],n[0])),e[2]),o(l(o(a(e[1],i[0]),a(-i[1],e[0])),-n[2]),l(o(a(e[1],n[0]),a(-n[1],e[0])),i[2]))),r[3]))),o(l(o(l(o(a(n[1],r[0]),a(-r[1],n[0])),e[2]),o(l(o(a(e[1],r[0]),a(-r[1],e[0])),-n[2]),l(o(a(e[1],n[0]),a(-n[1],e[0])),r[2]))),-i[3]),o(l(o(l(o(a(r[1],i[0]),a(-i[1],r[0])),e[2]),o(l(o(a(e[1],i[0]),a(-i[1],e[0])),-r[2]),l(o(a(e[1],r[0]),a(-r[1],e[0])),i[2]))),t[3]),l(o(l(o(a(r[1],i[0]),a(-i[1],r[0])),t[2]),o(l(o(a(t[1],i[0]),a(-i[1],t[0])),-r[2]),l(o(a(t[1],r[0]),a(-r[1],t[0])),i[2]))),-e[3])))),o(o(l(o(l(o(a(e[1],i[0]),a(-i[1],e[0])),t[2]),o(l(o(a(t[1],i[0]),a(-i[1],t[0])),-e[2]),l(o(a(t[1],e[0]),a(-e[1],t[0])),i[2]))),r[3]),o(l(o(l(o(a(e[1],r[0]),a(-r[1],e[0])),t[2]),o(l(o(a(t[1],r[0]),a(-r[1],t[0])),-e[2]),l(o(a(t[1],e[0]),a(-e[1],t[0])),r[2]))),-i[3]),l(o(l(o(a(n[1],r[0]),a(-r[1],n[0])),e[2]),o(l(o(a(e[1],r[0]),a(-r[1],e[0])),-n[2]),l(o(a(e[1],n[0]),a(-n[1],e[0])),r[2]))),t[3]))),o(l(o(l(o(a(n[1],r[0]),a(-r[1],n[0])),t[2]),o(l(o(a(t[1],r[0]),a(-r[1],t[0])),-n[2]),l(o(a(t[1],n[0]),a(-n[1],t[0])),r[2]))),-e[3]),o(l(o(l(o(a(e[1],r[0]),a(-r[1],e[0])),t[2]),o(l(o(a(t[1],r[0]),a(-r[1],t[0])),-e[2]),l(o(a(t[1],e[0]),a(-e[1],t[0])),r[2]))),n[3]),l(o(l(o(a(e[1],n[0]),a(-n[1],e[0])),t[2]),o(l(o(a(t[1],n[0]),a(-n[1],t[0])),-e[2]),l(o(a(t[1],e[0]),a(-e[1],t[0])),n[2]))),-r[3]))))),i=o(o(o(l(o(l(o(a(r[1],i[0]),a(-i[1],r[0])),n[2]),o(l(o(a(n[1],i[0]),a(-i[1],n[0])),-r[2]),l(o(a(n[1],r[0]),a(-r[1],n[0])),i[2]))),t[3]),l(o(l(o(a(r[1],i[0]),a(-i[1],r[0])),t[2]),o(l(o(a(t[1],i[0]),a(-i[1],t[0])),-r[2]),l(o(a(t[1],r[0]),a(-r[1],t[0])),i[2]))),-n[3])),o(l(o(l(o(a(n[1],i[0]),a(-i[1],n[0])),t[2]),o(l(o(a(t[1],i[0]),a(-i[1],t[0])),-n[2]),l(o(a(t[1],n[0]),a(-n[1],t[0])),i[2]))),r[3]),l(o(l(o(a(n[1],r[0]),a(-r[1],n[0])),t[2]),o(l(o(a(t[1],r[0]),a(-r[1],t[0])),-n[2]),l(o(a(t[1],n[0]),a(-n[1],t[0])),r[2]))),-i[3]))),o(o(l(o(l(o(a(n[1],i[0]),a(-i[1],n[0])),e[2]),o(l(o(a(e[1],i[0]),a(-i[1],e[0])),-n[2]),l(o(a(e[1],n[0]),a(-n[1],e[0])),i[2]))),t[3]),l(o(l(o(a(n[1],i[0]),a(-i[1],n[0])),t[2]),o(l(o(a(t[1],i[0]),a(-i[1],t[0])),-n[2]),l(o(a(t[1],n[0]),a(-n[1],t[0])),i[2]))),-e[3])),o(l(o(l(o(a(e[1],i[0]),a(-i[1],e[0])),t[2]),o(l(o(a(t[1],i[0]),a(-i[1],t[0])),-e[2]),l(o(a(t[1],e[0]),a(-e[1],t[0])),i[2]))),n[3]),l(o(l(o(a(e[1],n[0]),a(-n[1],e[0])),t[2]),o(l(o(a(t[1],n[0]),a(-n[1],t[0])),-e[2]),l(o(a(t[1],e[0]),a(-e[1],t[0])),n[2]))),-i[3])))),i=h(s,i);return i[i.length-1]}}function u(t){return(3===t?a:4===t?l:h)(i,r,s,o)}var c=u(3),p=u(4),f=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var r=(t[1]-n[1])*(e[0]-n[0]),i=(t[0]-n[0])*(e[1]-n[1]),s=r-i;if(0<r){if(i<=0)return s;o=r+i}else{if(!(r<0))return s;if(0<=i)return s;o=-(r+i)}var o=33306690738754716e-32*o;return o<=s||s<=-o?s:c(t,e,n)},function(t,e,n,r){var i=t[0]-r[0],s=e[0]-r[0],o=n[0]-r[0],a=t[1]-r[1],l=e[1]-r[1],h=n[1]-r[1],u=t[2]-r[2],c=e[2]-r[2],f=n[2]-r[2],d=s*h,g=o*l,o=o*a,h=i*h,l=i*l,s=s*a,a=u*(d-g)+c*(o-h)+f*(l-s),f=7771561172376103e-31*((Math.abs(d)+Math.abs(g))*Math.abs(u)+(Math.abs(o)+Math.abs(h))*Math.abs(c)+(Math.abs(l)+Math.abs(s))*Math.abs(f));return f<a||f<-a?a:p(t,e,n,r)}];!function(){for(;f.length<=5;)f.push(u(f.length));e.exports=function(a,t,e,l,h,u,c){return function(t,e,n,r,i){switch(arguments.length){case 0:case 1:return 0;case 2:return l(t,e);case 3:return h(t,e,n);case 4:return u(t,e,n,r);case 5:return c(t,e,n,r,i)}for(var s=new Array(arguments.length),o=0;o<arguments.length;++o)s[o]=arguments[o];return a(s)}}.apply(void 0,[function(t){return(f[t.length]||(f[t.length]=u(t.length))).apply(void 0,t)}].concat(f));for(var t=0;t<=5;++t)e.exports[t]=f[t]}()},125:function(t,e,n){"use strict";t.exports=function(t,e){var n=0|t.length,r=0|e.length;if(1==n&&1==r)return function(t,e){var n=t+e,r=n-t,r=t-(n-r)+(e-r);if(r)return[r,n];return[n]}(t[0],e[0]);var i,s,o=new Array(n+r),a=0,l=0,h=0,u=Math.abs,c=t[l],f=u(c),d=e[h],g=u(d);f<g?(s=c,(l+=1)<n&&(c=t[l],f=u(c))):(s=d,(h+=1)<r&&(d=e[h],g=u(d)));l<n&&f<g||r<=h?(i=c,(l+=1)<n&&(c=t[l],f=u(c))):(i=d,(h+=1)<r&&(d=e[h],g=u(d)));var p,m,y=i+s,_=y-i,v=s-_,w=v,x=y;for(;l<n&&h<r;)f<g?(i=c,(l+=1)<n&&(c=t[l],f=u(c))):(i=d,(h+=1)<r&&(d=e[h],g=u(d))),(v=(s=w)-(_=(y=i+s)-i))&&(o[a++]=v),w=x-((p=x+y)-(m=p-x))+(y-m),x=p;for(;l<n;)(v=(s=w)-(_=(y=(i=c)+s)-i))&&(o[a++]=v),w=x-((p=x+y)-(m=p-x))+(y-m),x=p,(l+=1)<n&&(c=t[l]);for(;h<r;)(v=(s=w)-(_=(y=(i=d)+s)-i))&&(o[a++]=v),w=x-((p=x+y)-(m=p-x))+(y-m),x=p,(h+=1)<r&&(d=e[h]);w&&(o[a++]=w);x&&(o[a++]=x);a||(o[a++]=0);return o.length=a,o}},126:function(t,e,n){"use strict";var f=n(35),d=n(127);t.exports=function(t,e){var n=t.length;if(1===n){var r=f(t[0],e);return r[0]?r:[r[1]]}var i=new Array(2*n),s=[.1,.1],o=[.1,.1],a=0;f(t[0],e,s),s[0]&&(i[a++]=s[0]);for(var l=1;l<n;++l){f(t[l],e,o);var h=s[1];d(h,o[0],s),s[0]&&(i[a++]=s[0]);var u=o[1],c=s[1],h=u+c,u=c-(h-u);s[1]=h,u&&(i[a++]=u)}s[1]&&(i[a++]=s[1]);0===a&&(i[a++]=0);return i.length=a,i}},127:function(t,e,n){"use strict";t.exports=function(t,e,n){var r=t+e,i=r-t,e=e-i,i=t-(r-i);if(n)return n[0]=i+e,n[1]=r,n;return[i+e,r]}},128:function(t,e,n){"use strict";t.exports=function(t,e){var n=0|t.length,r=0|e.length;if(1==n&&1==r)return function(t,e){var n=t+e,r=n-t,r=t-(n-r)+(e-r);if(r)return[r,n];return[n]}(t[0],-e[0]);var i,s,o=new Array(n+r),a=0,l=0,h=0,u=Math.abs,c=t[l],f=u(c),d=-e[h],g=u(d);f<g?(s=c,(l+=1)<n&&(c=t[l],f=u(c))):(s=d,(h+=1)<r&&(d=-e[h],g=u(d)));l<n&&f<g||r<=h?(i=c,(l+=1)<n&&(c=t[l],f=u(c))):(i=d,(h+=1)<r&&(d=-e[h],g=u(d)));var p,m,y=i+s,_=y-i,v=s-_,w=v,x=y;for(;l<n&&h<r;)f<g?(i=c,(l+=1)<n&&(c=t[l],f=u(c))):(i=d,(h+=1)<r&&(d=-e[h],g=u(d))),(v=(s=w)-(_=(y=i+s)-i))&&(o[a++]=v),w=x-((p=x+y)-(m=p-x))+(y-m),x=p;for(;l<n;)(v=(s=w)-(_=(y=(i=c)+s)-i))&&(o[a++]=v),w=x-((p=x+y)-(m=p-x))+(y-m),x=p,(l+=1)<n&&(c=t[l]);for(;h<r;)(v=(s=w)-(_=(y=(i=d)+s)-i))&&(o[a++]=v),w=x-((p=x+y)-(m=p-x))+(y-m),x=p,(h+=1)<r&&(d=-e[h]);w&&(o[a++]=w);x&&(o[a++]=x);a||(o[a++]=0);return o.length=a,o}},129:function(t,e,n){"use strict";n.r(e),n.d(e,"nodelink",function(){return r});var r={};n.r(r);var s={value:()=>{}};function i(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new o(r)}function o(t){this._=t}function l(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=s,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}o.prototype=i.prototype={constructor:o,on:function(t,e){var n,r,i=this._,s=(r=i,(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),o=-1,a=s.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=s[o]).type)i[n]=l(i[n],t.name,e);else if(null==e)for(n in i)i[n]=l(i[n],t.name,null);return this}for(;++o<a;)if((n=(t=s[o]).type)&&(n=function(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}(i[n],t.name)))return n},copy:function(){var t,e={},n=this._;for(t in n)e[t]=n[t].slice();return new o(e)},call:function(t,e){if(0<(n=arguments.length-2))for(var n,r,i=new Array(n),s=0;s<n;++s)i[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=0,n=(r=this._[t]).length;s<n;++s)r[s].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};var x=i;function a(){}function d(t){return null==t?a:function(){return this.querySelector(t)}}function h(){return[]}function y(t){return null==t?h:function(){return this.querySelectorAll(t)}}function u(e){return function(){return null==(t=e.apply(this,arguments))?[]:Array.isArray(t)?t:Array.from(t);var t}}function c(t){return function(){return this.matches(t)}}function f(e){return function(t){return t.matches(e)}}var g=Array.prototype.find;function p(){return this.firstElementChild}var m=Array.prototype.filter;function _(){return Array.from(this.children)}function v(t){return new Array(t.length)}function w(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}w.prototype={constructor:w,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function A(t,e,n,r,i,s){for(var o,a=0,l=e.length,h=s.length;a<h;++a)(o=e[a])?(o.__data__=s[a],r[a]=o):n[a]=new w(t,s[a]);for(;a<l;++a)(o=e[a])&&(i[a]=o)}function b(t,e,n,r,i,s,o){for(var a,l,h=new Map,u=e.length,c=s.length,f=new Array(u),d=0;d<u;++d)(a=e[d])&&(f[d]=l=o.call(a,a.__data__,d,e)+"",h.has(l)?i[d]=a:h.set(l,a));for(d=0;d<c;++d)l=o.call(t,s[d],d,s)+"",(a=h.get(l))?((r[d]=a).__data__=s[d],h.delete(l)):n[d]=new w(t,s[d]);for(d=0;d<u;++d)(a=e[d])&&h.get(f[d])===a&&(i[d]=a)}function M(t){return t.__data__}function k(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}var T="http://www.w3.org/1999/xhtml",S={svg:"http://www.w3.org/2000/svg",xhtml:T,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},N=function(t){var e=t+="",n=e.indexOf(":");return 0<=n&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),S.hasOwnProperty(e)?{space:S[e],local:t}:t};var E=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function O(t,e){return t.style.getPropertyValue(e)||E(t).getComputedStyle(t,null).getPropertyValue(e)}function I(t){return t.trim().split(/^|\s+/)}function C(t){return t.classList||new P(t)}function P(t){this._node=t,this._names=I(t.getAttribute("class")||"")}function D(t,e){for(var n=C(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function L(t,e){for(var n=C(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}P.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){t=this._names.indexOf(t);0<=t&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return 0<=this._names.indexOf(t)}};function F(){this.textContent=""}function R(){this.innerHTML=""}function U(){this.nextSibling&&this.parentNode.appendChild(this)}function H(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function B(t){return((t=N(t)).local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(n){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===T&&t.documentElement.namespaceURI===T?t.createElement(n):t.createElementNS(e,n)}})(t)}function j(){return null}function z(){var t=this.parentNode;t&&t.removeChild(this)}function q(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function G(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function X(s){return function(){var t=this.__on;if(t){for(var e,n=0,r=-1,i=t.length;n<i;++n)e=t[n],s.type&&e.type!==s.type||e.name!==s.name?t[++r]=e:this.removeEventListener(e.type,e.listener,e.options);++r?t.length=r:delete this.__on}}}function Y(o,a,l){return function(){var t,e,n=this.__on,r=(e=a,function(t){e.call(this,t,this.__data__)});if(n)for(var i=0,s=n.length;i<s;++i)if((t=n[i]).type===o.type&&t.name===o.name)return this.removeEventListener(t.type,t.listener,t.options),this.addEventListener(t.type,t.listener=r,t.options=l),void(t.value=a);this.addEventListener(o.type,r,l),t={type:o.type,name:o.name,value:a,listener:r,options:l},n?n.push(t):this.__on=[t]}}function W(t,e,n){var r=E(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}var V=[null];function $(t,e){this._groups=t,this._parents=e}function K(){return new $([[document.documentElement]],V)}$.prototype=K.prototype={constructor:$,select:function(t){"function"!=typeof t&&(t=d(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s,o,a=e[i],l=a.length,h=r[i]=new Array(l),u=0;u<l;++u)(s=a[u])&&(o=t.call(s,s.__data__,u,a))&&("__data__"in s&&(o.__data__=s.__data__),h[u]=o);return new $(r,this._parents)},selectAll:function(t){t=("function"==typeof t?u:y)(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o,a=e[s],l=a.length,h=0;h<l;++h)(o=a[h])&&(r.push(t.call(o,o.__data__,h,a)),i.push(o));return new $(r,i)},selectChild:function(t){return this.select(null==t?p:(e="function"==typeof t?t:f(t),function(){return g.call(this.children,e)}));var e},selectChildren:function(t){return this.selectAll(null==t?_:(e="function"==typeof t?t:f(t),function(){return m.call(this.children,e)}));var e},filter:function(t){"function"!=typeof t&&(t=c(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s,o=e[i],a=o.length,l=r[i]=[],h=0;h<a;++h)(s=o[h])&&t.call(s,s.__data__,h,o)&&l.push(s);return new $(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,M);var n,r=e?b:A,i=this._parents,s=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var o=s.length,a=new Array(o),l=new Array(o),h=new Array(o),u=0;u<o;++u){var c=i[u],f=s[u],d=f.length,g="object"==typeof(g=t.call(c,c&&c.__data__,u,i))&&"length"in g?g:Array.from(g),p=g.length,m=l[u]=new Array(p),y=a[u]=new Array(p);r(c,f,m,y,h[u]=new Array(d),g,e);for(var _,v,w=0,x=0;w<p;++w)if(_=m[w]){for(x<=w&&(x=w+1);!(v=y[x])&&++x<p;);_._next=v||null}}return(a=new $(a,i))._enter=l,a._exit=h,a},enter:function(){return new $(this._enter||this._groups.map(v),this._parents)},exit:function(){return new $(this._exit||this._groups.map(v),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,s=this.exit(),r="function"==typeof t?(r=t(r))&&r.selection():r.append(t+"");return null!=e&&(i=(i=e(i))&&i.selection()),null==n?s.remove():n(s),r&&i?r.merge(i).order():i},merge:function(t){for(var t=t.selection?t.selection():t,e=this._groups,n=t._groups,r=e.length,t=n.length,i=Math.min(r,t),s=new Array(r),o=0;o<i;++o)for(var a,l=e[o],h=n[o],u=l.length,c=s[o]=new Array(u),f=0;f<u;++f)(a=l[f]||h[f])&&(c[f]=a);for(;o<r;++o)s[o]=e[o];return new $(s,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],s=i.length-1,o=i[s];0<=--s;)(r=i[s])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(n){function t(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}n=n||k;for(var e=this._groups,r=e.length,i=new Array(r),s=0;s<r;++s){for(var o,a=e[s],l=a.length,h=i[s]=new Array(l),u=0;u<l;++u)(o=a[u])&&(h[u]=o);h.sort(t)}return new $(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,s=e[n],o=0,a=s.length;o<a;++o)(i=s[o])&&t.call(i,i.__data__,o,s);return this},attr:function(t,e){var n=N(t);if(arguments.length<2){t=this.node();return n.local?t.getAttributeNS(n.space,n.local):t.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}}:function(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){return 1<arguments.length?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(e,n,r){return function(){var t=n.apply(this,arguments);null==t?this.style.removeProperty(e):this.style.setProperty(e,t,r)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):O(this.node(),t)},property:function(t,e){return 1<arguments.length?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(e,n){return function(){var t=n.apply(this,arguments);null==t?delete this[e]:this[e]=t}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=I(t+"");if(arguments.length<2){for(var r=C(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?D:L)(this,t)}}:e?function(t){return function(){D(this,t)}}:function(t){return function(){L(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?F:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?R:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(U)},lower:function(){return this.each(H)},append:function(t){var e="function"==typeof t?t:B(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:B(t),r=null==e?j:"function"==typeof e?e:d(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(z)},clone:function(t){return this.select(t?G:q)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,s=(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return 0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}),o=s.length;if(!(arguments.length<2)){for(a=e?Y:X,r=0;r<o;++r)this.each(a(s[r],e,n));return this}var a=this.node().__on;if(a)for(var l,h=0,u=a.length;h<u;++h)for(r=0,l=a[h];r<o;++r)if((i=s[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return W(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return W(this,t,e)}})(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],s=0,o=i.length;s<o;++s)(r=i[s])&&(yield r)}};var Z=K,Q=function(t){return"string"==typeof t?new $([[document.querySelector(t)]],[document.documentElement]):new $([[t]],V)};const J={passive:!1},tt={capture:!0,passive:!1};function et(t){t.stopImmediatePropagation()}var nt=function(t){t.preventDefault(),t.stopImmediatePropagation()},rt=function(t){var e=t.document.documentElement,t=Q(t).on("dragstart.drag",nt,tt);"onselectstart"in e?t.on("selectstart.drag",nt,tt):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")};function it(t,e){var n=t.document.documentElement,r=Q(t).on("dragstart.drag",null);e&&(r.on("click.drag",nt,tt),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var st=function(t,e,n){(t.prototype=e.prototype=n).constructor=t};function ot(t,e){var n,r=Object.create(t.prototype);for(n in e)r[n]=e[n];return r}function at(){}var lt="\\s*([+-]?\\d+)\\s*",ht="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ut="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ct=/^#([0-9a-f]{3,8})$/,ft=new RegExp("^rgb\\("+[lt,lt,lt]+"\\)$"),dt=new RegExp("^rgb\\("+[ut,ut,ut]+"\\)$"),gt=new RegExp("^rgba\\("+[lt,lt,lt,ht]+"\\)$"),pt=new RegExp("^rgba\\("+[ut,ut,ut,ht]+"\\)$"),mt=new RegExp("^hsl\\("+[ht,ut,ut]+"\\)$"),yt=new RegExp("^hsla\\("+[ht,ut,ut,ht]+"\\)$"),_t={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function vt(){return this.rgb().formatHex()}function wt(){return this.rgb().formatRgb()}function xt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ct.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?At(e):3===n?new kt(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?bt(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?bt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=ft.exec(t))?new kt(e[1],e[2],e[3],1):(e=dt.exec(t))?new kt(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=gt.exec(t))?bt(e[1],e[2],e[3],e[4]):(e=pt.exec(t))?bt(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=mt.exec(t))?Et(e[1],e[2]/100,e[3]/100,1):(e=yt.exec(t))?Et(e[1],e[2]/100,e[3]/100,e[4]):_t.hasOwnProperty(t)?At(_t[t]):"transparent"===t?new kt(NaN,NaN,NaN,0):null}function At(t){return new kt(t>>16&255,t>>8&255,255&t,1)}function bt(t,e,n,r){return new kt(t=r<=0?e=n=NaN:t,e,n,r)}function Mt(t,e,n,r){return 1===arguments.length?(i=(i=t)instanceof at?i:xt(i))?new kt((i=i.rgb()).r,i.g,i.b,i.opacity):new kt:new kt(t,e,n,null==r?1:r);var i}function kt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Tt(){return"#"+Nt(this.r)+Nt(this.g)+Nt(this.b)}function St(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Nt(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Et(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||1<=n?t=e=NaN:e<=0&&(t=NaN),new It(t,e,n,r)}function Ot(t){if(t instanceof It)return new It(t.h,t.s,t.l,t.opacity);if(!(t=!(t instanceof at)?xt(t):t))return new It;if(t instanceof It)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(o=e===s?(n-r)/a+6*(n<r):n===s?(r-e)/a+2:(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=0<l&&l<1?0:o,new It(o,a,l,t.opacity)}function It(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Ct(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Pt(t,e,n,r,i){var s=t*t,o=s*t;return((1-3*t+3*s-o)*e+(4-6*s+3*o)*n+(1+3*t+3*s-3*o)*r+o*i)/6}st(at,xt,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:vt,formatHex:vt,formatHsl:function(){return Ot(this).formatHsl()},formatRgb:wt,toString:wt}),st(kt,Mt,ot(at,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new kt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new kt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Tt,formatHex:Tt,formatRgb:St,toString:St})),st(It,function(t,e,n,r){return 1===arguments.length?Ot(t):new It(t,e,n,null==r?1:r)},ot(at,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new It(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new It(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,e=n+(n<.5?n:1-n)*e,n=2*n-e;return new kt(Ct(240<=t?t-240:120+t,n,e),Ct(t,n,e),Ct(t<120?240+t:t-120,n,e),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var Dt=t=>()=>t;function Lt(e,n){return function(t){return e+t*n}}function Ft(s){return 1==(s=+s)?Rt:function(t,e){return e-t?(n=t,r=e,i=s,n=Math.pow(n,i),r=Math.pow(r,i)-n,i=1/i,function(t){return Math.pow(n+t*r,i)}):Dt(isNaN(t)?e:t);var n,r,i}}function Rt(t,e){var n=e-t;return n?Lt(t,n):Dt(isNaN(t)?e:t)}var Ut=function t(e){var o=Ft(e);function n(e,t){var n=o((e=Mt(e)).r,(t=Mt(t)).r),r=o(e.g,t.g),i=o(e.b,t.b),s=Rt(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=r(t),e.b=i(t),e.opacity=s(t),e+""}}return n.gamma=t,n}(1);function Ht(a){return function(t){for(var e,n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o=0;o<n;++o)e=Mt(t[o]),r[o]=e.r||0,i[o]=e.g||0,s[o]=e.b||0;return r=a(r),i=a(i),s=a(s),e.opacity=1,function(t){return e.r=r(t),e.g=i(t),e.b=s(t),e+""}}}Ht(function(o){var a=o.length-1;return function(t){var e=t<=0?t=0:1<=t?a-(t=1):Math.floor(t*a),n=o[e],r=o[e+1],i=0<e?o[e-1]:2*n-r,s=e<a-1?o[e+2]:2*r-n;return Pt((t-e/a)*a,i,n,r,s)}}),Ht(function(o){var a=o.length;return function(t){var e=Math.floor(((t%=1)<0?++t:t)*a),n=o[(e+a-1)%a],r=o[e%a],i=o[(e+1)%a],s=o[(e+2)%a];return Pt((t-e/a)*a,n,r,i,s)}});var Bt=function(e,n){n=n||[];var r,i=e?Math.min(n.length,e.length):0,s=n.slice();return function(t){for(r=0;r<i;++r)s[r]=e[r]*(1-t)+n[r]*t;return s}};function jt(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function zt(t,e){for(var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),o=0;o<r;++o)i[o]=Zt(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(t){for(o=0;o<r;++o)s[o]=i[o](t);return s}}var qt=function(e,n){var r=new Date;return e=+e,n=+n,function(t){return r.setTime(e*(1-t)+n*t),r}},Gt=function(e,n){return e=+e,n=+n,function(t){return e*(1-t)+n*t}},Xt=function(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),e=null===e||"object"!=typeof e?{}:e)n in t?r[n]=Zt(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},Yt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Wt=new RegExp(Yt.source,"g");var Vt,$t,Kt=function(t,r){var e,n,i,s,o,a=Yt.lastIndex=Wt.lastIndex=0,l=-1,h=[],u=[];for(t+="",r+="";(e=Yt.exec(t))&&(n=Wt.exec(r));)(i=n.index)>a&&(i=r.slice(a,i),h[l]?h[l]+=i:h[++l]=i),(e=e[0])===(n=n[0])?h[l]?h[l]+=n:h[++l]=n:(h[++l]=null,u.push({i:l,x:Gt(e,n)})),a=Wt.lastIndex;return a<r.length&&(i=r.slice(a),h[l]?h[l]+=i:h[++l]=i),h.length<2?u[0]?(o=u[0].x,function(t){return o(t)+""}):(s=r,function(){return s}):(r=u.length,function(t){for(var e,n=0;n<r;++n)h[(e=u[n]).i]=e.x(t);return h.join("")})},Zt=function(t,e){var n=typeof e;return null==e||"boolean"==n?Dt(e):("number"==n?Gt:"string"==n?(n=xt(e))?(e=n,Ut):Kt:e instanceof xt?Ut:e instanceof Date?qt:jt(e)?Bt:Array.isArray(e)?zt:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Xt:Gt)(t,e)},Qt=function(t){for(var e;e=t.sourceEvent;)t=e;return t},Jt=function(t,e){if(t=Qt(t),e=void 0===e?t.currentTarget:e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}if(e.getBoundingClientRect){r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]},te=0,ee=0,ne=0,re=1e3,ie=0,se=0,oe=0,ae="object"==typeof performance&&performance.now?performance:Date,le="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function he(){return se||(le(ue),se=ae.now()+oe)}function ue(){se=0}function ce(){this._call=this._time=this._next=null}function fe(t,e,n){var r=new ce;return r.restart(t,e,n),r}function de(){se=(ie=ae.now())+oe,te=ee=0;try{!function(){he(),++te;for(var t,e=Vt;e;)0<=(t=se-e._time)&&e._call.call(void 0,t),e=e._next;--te}()}finally{te=0,function(){var t,e,n=Vt,r=1/0;for(;n;)n=n._call?(r>n._time&&(r=n._time),(t=n)._next):(e=n._next,n._next=null,t?t._next=e:Vt=e);$t=t,pe(r)}(),se=0}}function ge(){var t=ae.now(),e=t-ie;re<e&&(oe-=e,ie=t)}function pe(t){te||(ee=ee&&clearTimeout(ee),24<t-se?(t<1/0&&(ee=setTimeout(de,t-ae.now()-oe)),ne=ne&&clearInterval(ne)):(ne||(ie=ae.now(),ne=setInterval(ge,re)),te=1,le(de)))}ce.prototype=fe.prototype={constructor:ce,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?he():+n)+(null==e?0:+e),this._next||$t===this||($t?$t._next=this:Vt=this,$t=this),this._call=t,this._time=n,pe()},stop:function(){this._call&&(this._call=null,this._time=1/0,pe())}};function me(e,n,t){var r=new ce;return n=null==n?0:+n,r.restart(t=>{r.stop(),e(t+n)},n,t),r}function ye(t,e,n,r,i,s){var o,a,l,h,u,c=t.__transition;if(c){if(n in c)return}else t.__transition={};function f(t){var e,n,r,i;if(l.state!==xe)return g();for(e in u)if((i=u[e]).name===l.name){if(i.state===be)return me(f);i.state===Me?(i.state=Te,i.timer.stop(),i.on.call("interrupt",o,o.__data__,i.index,i.group),delete u[e]):+e<a&&(i.state=Te,i.timer.stop(),i.on.call("cancel",o,o.__data__,i.index,i.group),delete u[e])}if(me(function(){l.state===be&&(l.state=Me,l.timer.restart(d,l.delay,l.time),d(t))}),l.state=Ae,l.on.call("start",o,o.__data__,l.index,l.group),l.state===Ae){for(l.state=be,h=new Array(r=l.tween.length),e=0,n=-1;e<r;++e)(i=l.tween[e].value.call(o,o.__data__,l.index,l.group))&&(h[++n]=i);h.length=n+1}}function d(t){for(var e=t<l.duration?l.ease.call(null,t/l.duration):(l.timer.restart(g),l.state=ke,1),n=-1,r=h.length;++n<r;)h[n].call(o,e);l.state===ke&&(l.on.call("end",o,o.__data__,l.index,l.group),g())}function g(){for(var t in l.state=Te,l.timer.stop(),delete u[a],u)return;delete o.__transition}o=t,a=n,l={name:e,index:r,group:i,on:_e,tween:ve,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:we},((u=o.__transition)[a]=l).timer=fe(function(t){l.state=xe,l.timer.restart(f,l.delay,l.time),l.delay<=t&&f(t-l.delay)},0,l.time)}var _e=x("start","end","cancel","interrupt"),ve=[],we=0,xe=1,Ae=2,be=3,Me=4,ke=5,Te=6;function Se(t,e){e=Ee(t,e);if(e.state>we)throw new Error("too late; already scheduled");return e}function Ne(t,e){e=Ee(t,e);if(e.state>be)throw new Error("too late; already running");return e}function Ee(t,e){t=t.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function Oe(t,e,n,r,i,s){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*Pe,skewX:Math.atan(l)*Pe,scaleX:o,scaleY:a}}var Ie,Ce=function(t,e){var n,r,i,s=t.__transition,o=!0;if(s){for(i in e=null==e?null:e+"",s)(n=s[i]).name===e?(r=n.state>Ae&&n.state<ke,n.state=Te,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete s[i]):o=!1;o&&delete t.__transition}},Pe=180/Math.PI,De={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Le(c,f,d,g){function p(t){return t.length?t.pop()+" ":""}return function(t,e){var n,r,i,s,o,a,l,h=[],u=[];return t=c(t),e=c(e),i=t.translateX,s=t.translateY,l=e.translateX,a=e.translateY,o=h,n=u,i!==l||s!==a?(r=o.push("translate(",null,f,null,d),n.push({i:r-4,x:Gt(i,l)},{i:r-2,x:Gt(s,a)})):(l||a)&&o.push("translate("+l+f+a+d),n=t.rotate,i=e.rotate,r=h,s=u,n!==i?(180<n-i?i+=360:180<i-n&&(n+=360),s.push({i:r.push(p(r)+"rotate(",null,g)-2,x:Gt(n,i)})):i&&r.push(p(r)+"rotate("+i+g),o=t.skewX,l=e.skewX,a=h,s=u,o!==l?s.push({i:a.push(p(a)+"skewX(",null,g)-2,x:Gt(o,l)}):l&&a.push(p(a)+"skewX("+l+g),n=t.scaleX,r=t.scaleY,i=e.scaleX,s=e.scaleY,o=h,a=u,n!==i||r!==s?(l=o.push(p(o)+"scale(",null,",",null,")"),a.push({i:l-4,x:Gt(n,i)},{i:l-2,x:Gt(r,s)})):1===i&&1===s||o.push(p(o)+"scale("+i+","+s+")"),t=e=null,function(t){for(var e,n=-1,r=u.length;++n<r;)h[(e=u[n]).i]=e.x(t);return h.join("")}}}var Fe=Le(function(t){return(t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"")).isIdentity?De:Oe(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),Re=Le(function(t){return null==t?De:((Ie=Ie||document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("transform",t),(t=Ie.transform.baseVal.consolidate())?(t=t.matrix,Oe(t.a,t.b,t.c,t.d,t.e,t.f)):De)},", ",")",")");function Ue(t,e,n){var r=t._id;return t.each(function(){var t=Ne(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return Ee(t,r).value[e]}}function He(t,e){var n;return("number"==typeof e?Gt:e instanceof xt?Ut:(n=xt(e))?(e=n,Ut):Kt)(t,e)}function Be(r,i){var s,o;function t(){var e,n,t=i.apply(this,arguments);return s=t!==o?(o=t)&&(e=r,n=t,function(t){this.setAttributeNS(e.space,e.local,n.call(this,t))}):s}return t._value=i,t}function je(r,i){var s,o;function t(){var e,n,t=i.apply(this,arguments);return s=t!==o?(o=t)&&(e=r,n=t,function(t){this.setAttribute(e,n.call(this,t))}):s}return t._value=i,t}var ze=Z.prototype.constructor;function qe(t){return function(){this.style.removeProperty(t)}}function Ge(i,s,o){var a,l;function t(){var e,n,r,t=s.apply(this,arguments);return a=t!==l?(l=t)&&(e=i,n=t,r=o,function(t){this.style.setProperty(e,n.call(this,t),r)}):a}return t._value=s,t}function Xe(n){var r,i;function t(){var e,t=n.apply(this,arguments);return r=t!==i?(i=t)&&(e=t,function(t){this.textContent=e.call(this,t)}):r}return t._value=n,t}var Ye=0;function We(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}e=Z.prototype;We.prototype={constructor:We,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=d(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a,l,h=r[o],u=h.length,c=s[o]=new Array(u),f=0;f<u;++f)(a=h[f])&&(l=t.call(a,a.__data__,f,h))&&("__data__"in a&&(l.__data__=a.__data__),c[f]=l,ye(c[f],e,n,f,c,Ee(a,n)));return new We(s,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=y(t));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l,h=r[a],u=h.length,c=0;c<u;++c)if(l=h[c]){for(var f,d=t.call(l,l.__data__,c,h),g=Ee(l,n),p=0,m=d.length;p<m;++p)(f=d[p])&&ye(f,e,n,p,d,g);s.push(d),o.push(l)}return new We(s,o,e,n)},selectChild:e.selectChild,selectChildren:e.selectChildren,filter:function(t){"function"!=typeof t&&(t=c(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s,o=e[i],a=o.length,l=r[i]=[],h=0;h<a;++h)(s=o[h])&&t.call(s,s.__data__,h,o)&&l.push(s);return new We(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,t=n.length,i=Math.min(r,t),s=new Array(r),o=0;o<i;++o)for(var a,l=e[o],h=n[o],u=l.length,c=s[o]=new Array(u),f=0;f<u;++f)(a=l[f]||h[f])&&(c[f]=a);for(;o<r;++o)s[o]=e[o];return new We(s,this._parents,this._name,this._id)},selection:function(){return new ze(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=++Ye,r=this._groups,i=r.length,s=0;s<i;++s)for(var o,a,l=r[s],h=l.length,u=0;u<h;++u)(o=l[u])&&(a=Ee(o,e),ye(o,t,n,u,l,{time:a.time+a.delay+a.duration,delay:0,duration:a.duration,ease:a.ease}));return new We(r,this._parents,t,n)},call:e.call,nodes:e.nodes,node:e.node,size:e.size,empty:e.empty,each:e.each,on:function(t,e){var n,r,i,s,o,a,l=this._id;return arguments.length<2?Ee(this.node(),l).on.on(t):this.each((n=l,i=e,a=((r=t)+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return!(t=0<=e?t.slice(0,e):t)||"start"===t})?Se:Ne,function(){var t=a(this,n),e=t.on;e!==s&&(o=(s=e).copy()).on(r,i),t.on=o}))},attr:function(t,e){var n=N(t),r="transform"===n?Re:He;return this.attrTween(t,"function"==typeof e?(n.local?function(r,i,s){var o,a,l;return function(){var t,e,n=s(this);if(null!=n)return(t=this.getAttributeNS(r.space,r.local))===(e=n+"")?null:t===o&&e===a?l:(a=e,l=i(o=t,n));this.removeAttributeNS(r.space,r.local)}}:function(r,i,s){var o,a,l;return function(){var t,e,n=s(this);if(null!=n)return(t=this.getAttribute(r))===(e=n+"")?null:t===o&&e===a?l:(a=e,l=i(o=t,n));this.removeAttribute(r)}})(n,r,Ue(this,"attr."+t,e)):null==e?(n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(n):(n.local?function(e,n,r){var i,s,o=r+"";return function(){var t=this.getAttributeNS(e.space,e.local);return t===o?null:t===i?s:s=n(i=t,r)}}:function(e,n,r){var i,s,o=r+"";return function(){var t=this.getAttribute(e);return t===o?null:t===i?s:s=n(i=t,r)}})(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;t=N(t);return this.tween(n,(t.local?Be:je)(t,e))},style:function(t,e,n){var r,i,s,o,a,l,h,u,c,f,d,g,p,m,y,_,v,w,x,A,b,M,k,T,S,N="transform"==(t+="")?Fe:He;return null==e?this.styleTween(t,(b=t,M=N,function(){var t=O(this,b),e=(this.style.removeProperty(b),O(this,b));return t===e?null:t===k&&e===T?S:S=M(k=t,T=e)})).on("end.style."+t,qe(t)):"function"==typeof e?this.styleTween(t,(_=N,v=Ue(this,"style."+(y=t),e),function(){var t=O(this,y),e=v(this),n=e+"";return null==e&&(this.style.removeProperty(y),n=e=O(this,y)),t===n?null:t===w&&n===x?A:(x=n,A=_(w=t,e))})).each((h=this._id,m="end."+(p="style."+(u=t)),function(){var t=Ne(this,h),e=t.on,n=null==t.value[p]?g=g||qe(u):void 0;e===c&&d===n||(f=(c=e).copy()).on(m,d=n),t.on=f})):this.styleTween(t,(r=t,i=N,l=(s=e)+"",function(){var t=O(this,r);return t===l?null:t===o?a:a=i(o=t,s)}),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,Ge(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?(n=Ue(this,"text",t),function(){var t=n(this);this.textContent=null==t?"":t}):(e=null==t?"":t+"",function(){this.textContent=e}));var e,n},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,Xe(t))},remove:function(){return this.on("end.remove",(n=this._id,function(){var t,e=this.parentNode;for(t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}));var n},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=Ee(this.node(),n).tween,s=0,o=i.length;s<o;++s)if((r=i[s]).name===t)return r.value;return null}return this.each((null==e?function(i,s){var o,a;return function(){var t=Ne(this,i),e=t.tween;if(e!==o)for(var n=0,r=(a=o=e).length;n<r;++n)if(a[n].name===s){(a=a.slice()).splice(n,1);break}t.tween=a}}:function(s,o,a){var l,h;if("function"!=typeof a)throw new Error;return function(){var t=Ne(this,s),e=t.tween;if(e!==l){h=(l=e).slice();for(var n={name:o,value:a},r=0,i=h.length;r<i;++r)if(h[r].name===o){h[r]=n;break}r===i&&h.push(n)}t.tween=h}})(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){Se(this,t).delay=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){Se(this,t).delay=e}})(e,t)):Ee(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){Ne(this,t).duration=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){Ne(this,t).duration=e}})(e,t)):Ee(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){Ne(this,t).ease=e}}(e,t)):Ee(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each((e=this._id,n=t,function(){var t=n.apply(this,arguments);if("function"!=typeof t)throw new Error;Ne(this,e).ease=t}));var e,n},end:function(){var i,s,o=this,a=o._id,l=o.size();return new Promise(function(t,e){var n={value:e},r={value:function(){0==--l&&t()}};o.each(function(){var t=Ne(this,a),e=t.on;e!==i&&((s=(i=e).copy())._.cancel.push(n),s._.interrupt.push(n),s._.end.push(r)),t.on=s}),0===l&&t()})},[Symbol.iterator]:e[Symbol.iterator]};var Ve={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};Z.prototype.interrupt=function(t){return this.each(function(){Ce(this,t)})},Z.prototype.transition=function(t){var e,n;t=t instanceof We?(e=t._id,t._name):(e=++Ye,(n=Ve).time=he(),null==t?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o,a=r[s],l=a.length,h=0;h<l;++h)(o=a[h])&&ye(o,t,e,h,a,n||function(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}(o,e));return new We(r,this._parents,t,e)};const{}=Math;function $e(t){return[+t[0],+t[1]]}function Ke(t){return[$e(t[0]),$e(t[1])]}["w","e"].map(Ze),["n","s"].map(Ze),["n","w","e","s","nw","ne","sw","se"].map(Ze);function Ze(t){return{type:t}}function Qe(t){return function(){return t}}function Je(t){return 1e-6*(t()-.5)}function tn(t){return t.index}function en(t,e){t=t.get(e);if(!t)throw new Error("node not found: "+e);return t}function nn(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,s,o,a,l,h,u,c,f,d=t._root,g={data:r},p=t._x0,m=t._y0,y=t._x1,_=t._y1;if(!d)return t._root=g,t;for(;d.length;)if((h=e>=(s=(p+y)/2))?p=s:y=s,(u=n>=(o=(m+_)/2))?m=o:_=o,!(d=(i=d)[c=u<<1|h]))return i[c]=g,t;if(a=+t._x.call(null,d.data),l=+t._y.call(null,d.data),e===a&&n===l)return g.next=d,i?i[c]=g:t._root=g,t;for(;i=i?i[c]=new Array(4):t._root=new Array(4),(h=e>=(s=(p+y)/2))?p=s:y=s,(u=n>=(o=(m+_)/2))?m=o:_=o,(c=u<<1|h)==(f=(o<=l)<<1|s<=a););return i[f]=d,i[c]=g,t}function rn(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function sn(t){return t[0]}function on(t){return t[1]}function an(t,e,n){n=new ln(null==e?sn:e,null==n?on:n,NaN,NaN,NaN,NaN);return null==t?n:n.addAll(t)}function ln(t,e,n,r,i,s){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function hn(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}lt=an.prototype=ln.prototype;lt.copy=function(){var t,e,n=new ln(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=hn(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=hn(e));return n},lt.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return nn(this.cover(e,n),e,n,t)},lt.addAll=function(t){for(var e,n,r,i=t.length,s=new Array(i),o=new Array(i),a=1/0,l=1/0,h=-1/0,u=-1/0,c=0;c<i;++c)isNaN(n=+this._x.call(null,e=t[c]))||isNaN(r=+this._y.call(null,e))||((s[c]=n)<a&&(a=n),h<n&&(h=n),(o[c]=r)<l&&(l=r),u<r&&(u=r));if(h<a||u<l)return this;for(this.cover(a,l).cover(h,u),c=0;c<i;++c)nn(this,s[c],o[c],t[c]);return this},lt.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,s=(r=Math.floor(e))+1;else{for(var o,a,l=i-n||1,h=this._root;t<n||i<=t||e<r||s<=e;)switch(a=(e<r)<<1|t<n,(o=new Array(4))[a]=h,h=o,l*=2,a){case 0:i=n+l,s=r+l;break;case 1:n=i-l,s=r+l;break;case 2:i=n+l,r=s-l;break;case 3:n=i-l,r=s-l}this._root&&this._root.length&&(this._root=h)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this},lt.data=function(){var e=[];return this.visit(function(t){if(!t.length)for(;e.push(t.data),t=t.next;);}),e},lt.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},lt.find=function(t,e,n){var r,i,s,o,a,l,h,u,c=this._x0,f=this._y0,d=this._x1,g=this._y1,p=[],m=this._root;for(m&&p.push(new rn(m,c,f,d,g)),null==n?n=1/0:(c=t-n,f=e-n,d=t+n,g=e+n,n*=n);h=p.pop();)!(m=h.node)||(r=h.x0)>d||(i=h.y0)>g||(s=h.x1)<c||(o=h.y1)<f||(m.length?(p.push(new rn(m[3],a=(r+s)/2,l=(i+o)/2,s,o),new rn(m[2],r,l,a,o),new rn(m[1],a,i,s,l),new rn(m[0],r,i,a,l)),(a=(l<=e)<<1|a<=t)&&(h=p[p.length-1],p[p.length-1]=p[p.length-1-a],p[p.length-1-a]=h)):(h=(h=t-+this._x.call(null,m.data))*h+(h=e-+this._y.call(null,m.data))*h)<n&&(c=t-(h=Math.sqrt(n=h)),f=e-h,d=t+h,g=e+h,u=m.data));return u},lt.remove=function(t){if(isNaN(s=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var e,n,r,i,s,o,a,l,h,u,c,f=this._root,d=this._x0,g=this._y0,p=this._x1,m=this._y1;if(!f)return this;if(f.length)for(;;){if((l=s>=(h=(d+p)/2))?d=h:p=h,(h=o>=(a=(g+m)/2))?g=a:m=a,!(f=(e=f)[u=h<<1|l]))return this;if(!f.length)break;(e[u+1&3]||e[u+2&3]||e[u+3&3])&&(n=e,c=u)}for(;f.data!==t;)if(!(f=(r=f).next))return this;return(i=f.next)&&delete f.next,r?i?r.next=i:delete r.next:e?(i?e[u]=i:delete e[u],(f=e[0]||e[1]||e[2]||e[3])&&f===(e[3]||e[2]||e[1]||e[0])&&!f.length&&(n?n[c]=f:this._root=f)):this._root=i,this},lt.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},lt.root=function(){return this._root},lt.size=function(){var e=0;return this.visit(function(t){if(!t.length)for(;++e,t=t.next;);}),e},lt.visit=function(t){var e,n,r,i,s,o,a,l=[],h=this._root;for(h&&l.push(new rn(h,this._x0,this._y0,this._x1,this._y1));e=l.pop();)!t(h=e.node,n=e.x0,r=e.y0,i=e.x1,s=e.y1)&&h.length&&(o=(n+i)/2,a=(r+s)/2,(e=h[3])&&l.push(new rn(e,o,a,i,s)),(e=h[2])&&l.push(new rn(e,n,a,o,s)),(e=h[1])&&l.push(new rn(e,o,r,i,a)),(e=h[0])&&l.push(new rn(e,n,r,o,a)));return this},lt.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new rn(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i,s,o,a,l,h,u,c=e.node;c.length&&(s=e.x0,o=e.y0,h=(s+(a=e.x1))/2,u=(o+(l=e.y1))/2,(i=c[0])&&n.push(new rn(i,s,o,h,u)),(i=c[1])&&n.push(new rn(i,h,o,a,u)),(i=c[2])&&n.push(new rn(i,s,u,h,l)),(i=c[3])&&n.push(new rn(i,h,u,a,l))),r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},lt.x=function(t){return arguments.length?(this._x=t,this):this._x},lt.y=function(t){return arguments.length?(this._y=t,this):this._y};const un=1664525,cn=1013904223,fn=4294967296;function dn(t){return t.x}function gn(t){return t.y}var pn=Math.PI*(3-Math.sqrt(5)),mn=Math.sqrt(50),yn=Math.sqrt(10),_n=Math.sqrt(2);function vn(t,e,n){t=(e-t)/Math.max(0,n),n=Math.floor(Math.log(t)/Math.LN10),t/=Math.pow(10,n);return 0<=n?(mn<=t?10:yn<=t?5:_n<=t?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(mn<=t?10:yn<=t?5:_n<=t?2:1)}function wn(t,e){return null==t||null==e?NaN:t<e?-1:e<t?1:e<=t?0:NaN}function xn(n){let i=n,s=n,o=n;function a(t,e,n=0,r=t.length){if(n<r){if(0!==s(e,e))return r;do{var i=n+r>>>1;o(t[i],e)<0?n=1+i:r=i}while(n<r)}return n}return 1===n.length&&(i=(t,e)=>n(t)-e,s=wn,o=(t,e)=>wn(n(t),e)),{left:a,center:function(t,e,n=0,r=t.length){return r=a(t,e,n,r-1),n<r&&i(t[r-1],e)>-i(t[r],e)?r-1:r},right:function(t,e,n=0,r=t.length){if(n<r){if(0!==s(e,e))return r;do{var i=n+r>>>1;o(t[i],e)<=0?n=1+i:r=i}while(n<r)}return n}}}function An(e,n){return e=+e,n=+n,function(t){return Math.round(e*(1-t)+n*t)}}var ut=xn(wn),ht=ut.right,bn=(ut.left,xn(function(t){return null===t?NaN:+t}).center,ht);function Mn(t){return+t}var kn=[0,1];function Tn(t){return t}function Sn(e,n){return(n-=e=+e)?function(t){return(t-e)/n}:(t=isNaN(n)?NaN:.5,function(){return t});var t}function Nn(t,e,n){var r=t[0],t=t[1],i=e[0],e=e[1],i=t<r?(r=Sn(t,r),n(e,i)):(r=Sn(r,t),n(i,e));return function(t){return i(r(t))}}function En(n,t,e){var r=Math.min(n.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=Sn(n[o],n[o+1]),s[o]=e(t[o],t[o+1]);return function(t){var e=bn(n,t,1,r)-1;return s[e](i[e](t))}}function On(){var n,r,e,i,s,o,a=kn,l=kn,h=Zt,u=Tn;function c(){var e,n,t,r=Math.min(a.length,l.length);return u!==Tn&&(e=a[0],(n=a[r-1])<e&&(t=e,e=n,n=t),u=function(t){return Math.max(e,Math.min(n,t))}),i=2<r?En:Nn,s=o=null,f}function f(t){return null==t||isNaN(t=+t)?e:(s=s||i(a.map(n),l,h))(n(u(t)))}return f.invert=function(t){return u(r((o=o||i(l,a.map(n),Gt))(t)))},f.domain=function(t){return arguments.length?(a=Array.from(t,Mn),c()):a.slice()},f.range=function(t){return arguments.length?(l=Array.from(t),c()):l.slice()},f.rangeRound=function(t){return l=Array.from(t),h=An,c()},f.clamp=function(t){return arguments.length?(u=!!t||Tn,c()):u!==Tn},f.interpolate=function(t){return arguments.length?(h=t,c()):h},f.unknown=function(t){return arguments.length?(e=t,f):e},function(t,e){return n=t,r=e,c()}}var In=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Cn(t){if(!(e=In.exec(t)))throw new Error("invalid format: "+t);var e;return new Pn({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Pn(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}Cn.prototype=Pn.prototype,Pn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};function Dn(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,e=t.slice(0,n);return[1<e.length?e[0]+e.slice(2):e,+t.slice(n+1)]}function Ln(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Un(e)/3)))-Un(Math.abs(t)))}function Fn(t,e){return(e=Dn(t,e))?(t=e[0],(e=e[1])<0?"0."+new Array(-e).join("0")+t:t.length>e+1?t.slice(0,e+1)+"."+t.slice(e+1):t+new Array(e-t.length+2).join("0")):t+""}var Rn,Un=function(t){return(t=Dn(Math.abs(t)))?t[1]:NaN},Hn=function(a,l){return function(t,e){for(var n=t.length,r=[],i=0,s=a[0],o=0;0<n&&0<s&&(e<o+s+1&&(s=Math.max(1,e-o)),r.push(t.substring(n-=s,n+s)),!((o+=s+1)>e));)s=a[i=(i+1)%a.length];return r.reverse().join(l)}},Bn=function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}},jn=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;0<i&&(i=0)}return 0<i?t.slice(0,i)+t.slice(e+1):t},zn={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return 1e21<=Math.abs(t=Math.round(t))?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Fn(100*t,e),r:Fn,s:function(t,e){var n=Dn(t,e);if(!n)return t+"";var r=n[0],i=n[1],n=i-(Rn=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,i=r.length;return n===i?r:i<n?r+new Array(n-i+1).join("0"):0<n?r.slice(0,n)+"."+r.slice(n):"0."+new Array(1-n).join("0")+Dn(t,Math.max(0,e+n-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)},qn=function(t){return t},Gn=Array.prototype.map,Xn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Yn(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Un(e)-Un(t))+1}function Wn(t){return Math.max(0,-Un(Math.abs(t)))}var Vn,$n=(Vn=function(t){var A=void 0===t.grouping||void 0===t.thousands?qn:Hn(Gn.call(t.grouping,Number),t.thousands+""),r=void 0===t.currency?"":t.currency[0]+"",i=void 0===t.currency?"":t.currency[1]+"",b=void 0===t.decimal?".":t.decimal+"",M=void 0===t.numerals?qn:Bn(Gn.call(t.numerals,String)),s=void 0===t.percent?"%":t.percent+"",k=void 0===t.minus?"−":t.minus+"",T=void 0===t.nan?"NaN":t.nan+"";function o(t){var h=(t=Cn(t)).fill,u=t.align,c=t.sign,e=t.symbol,f=t.zero,d=t.width,g=t.comma,p=t.precision,m=t.trim,y=t.type;"n"===y?(g=!0,y="g"):zn[y]||(void 0===p&&(p=12),m=!0,y="g"),(f||"0"===h&&"="===u)&&(f=!0,h="0",u="=");var _="$"===e?r:"#"===e&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",v="$"===e?i:/[%p]/.test(y)?s:"",w=zn[y],x=/[defgprs%]/.test(y);function n(t){var e,n,r,i=_,s=v;if("c"===y)s=w(t)+s,t="";else{var o=(t=+t)<0||1/t<0;if(t=isNaN(t)?T:w(Math.abs(t),p),m&&(t=jn(t)),i=((o=o&&0==+t&&"+"!==c?!1:o)?"("===c?c:k:"-"===c||"("===c?"":c)+i,s=("s"===y?Xn[8+Rn/3]:"")+s+(o&&"("===c?")":""),x)for(e=-1,n=t.length;++e<n;)if((r=t.charCodeAt(e))<48||57<r){s=(46===r?b+t.slice(e+1):t.slice(e))+s,t=t.slice(0,e);break}}g&&!f&&(t=A(t,1/0));var a=i.length+t.length+s.length,l=a<d?new Array(d-a+1).join(h):"";switch(g&&f&&(t=A(l+t,l.length?d-s.length:1/0),l=""),u){case"<":t=i+t+s+l;break;case"=":t=i+l+t+s;break;case"^":t=l.slice(0,a=l.length>>1)+i+t+s+l.slice(a);break;default:t=l+i+t+s}return M(t)}return p=void 0===p?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p)),n.toString=function(){return t+""},n}return{format:o,formatPrefix:function(t,e){var n=o(((t=Cn(t)).type="f",t)),e=3*Math.max(-8,Math.min(8,Math.floor(Un(e)/3))),r=Math.pow(10,-e),i=Xn[8+e/3];return function(t){return n(r*t)+i}}}}({thousands:",",grouping:[3],currency:["$",""]})).format,Kn=Vn.formatPrefix;function Zn(t,e,n,r){var i,s,o,a,l=(s=t,o=e,a=n,n=Math.abs(o-s)/Math.max(0,a),a=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),mn<=(n=n/a)?a*=10:yn<=n?a*=5:_n<=n&&(a*=2),o<s?-a:a);switch((r=Cn(null==r?",f":r)).type){case"s":var h=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=Ln(l,h))||(r.precision=i),Kn(r,h);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=Yn(l,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=Wn(l))||(r.precision=i-2*("%"===r.type))}return $n(r)}function Qn(h){var u=h.domain;return h.ticks=function(t){var e=u();return function(n,r,t){var e,i,s,o,a=-1;if(t=+t,(n=+n)===(r=+r)&&0<t)return[n];if((e=r<n)&&(i=n,n=r,r=i),0===(o=vn(n,r,t))||!isFinite(o))return[];if(0<o){let t=Math.round(n/o),e=Math.round(r/o);for(t*o<n&&++t,e*o>r&&--e,s=new Array(i=e-t+1);++a<i;)s[a]=(t+a)*o}else{o=-o;let t=Math.round(n*o),e=Math.round(r*o);for(t/o<n&&++t,e/o>r&&--e,s=new Array(i=e-t+1);++a<i;)s[a]=(t+a)/o}return e&&s.reverse(),s}(e[0],e[e.length-1],null==t?10:t)},h.tickFormat=function(t,e){var n=u();return Zn(n[0],n[n.length-1],null==t?10:t,e)},h.nice=function(t){null==t&&(t=10);var e,n,r=u(),i=0,s=r.length-1,o=r[i],a=r[s],l=10;for(a<o&&(n=o,o=a,a=n,n=i,i=s,s=n);0<l--;){if((n=vn(o,a,t))===e)return r[i]=o,r[s]=a,u(r);if(0<n)o=Math.floor(o/n)*n,a=Math.ceil(a/n)*n;else{if(!(n<0))break;o=Math.ceil(o*n)/n,a=Math.floor(a*n)/n}e=n}return h},h}const Jn=Math.PI,tr=2*Jn,er=1e-6,nr=tr-er;function rr(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function ir(){return new rr}rr.prototype=ir.prototype={constructor:rr,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,s){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+s)},arcTo:function(t,e,n,r,i){var s,o,a=this._x1,l=this._y1,h=(n=+n)-(t=+t),u=(r=+r)-(e=+e),c=a-t,f=l-e,d=c*c+f*f;if((i=+i)<0)throw new Error("negative radius: "+i);null===this._x1?this._+="M"+(this._x1=t)+","+(this._y1=e):d>er&&(Math.abs(f*h-u*c)>er&&i?(o=h*h+u*u,a=(s=n-a)*s+(n=r-l)*n,r=Math.sqrt(o),l=Math.sqrt(d),l=(a=i*Math.tan((Jn-Math.acos((o+d-a)/(2*r*l)))/2))/l,r=a/r,Math.abs(l-1)>er&&(this._+="L"+(t+l*c)+","+(e+l*f)),this._+="A"+i+","+i+",0,0,"+ +(c*n<f*s)+","+(this._x1=t+r*h)+","+(this._y1=e+r*u)):this._+="L"+(this._x1=t)+","+(this._y1=e))},arc:function(t,e,n,r,i,s){t=+t,e=+e,s=!!s;var o=(n=+n)*Math.cos(r),a=n*Math.sin(r),l=t+o,h=e+a,u=1^s,r=s?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+h:(Math.abs(this._x1-l)>er||Math.abs(this._y1-h)>er)&&(this._+="L"+l+","+h),n&&((r=r<0?r%tr+tr:r)>nr?this._+="A"+n+","+n+",0,1,"+u+","+(t-o)+","+(e-a)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=h):r>er&&(this._+="A"+n+","+n+",0,"+ +(r>=Jn)+","+u+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var sr=ir,or=(Array.prototype.slice,function(t){return function(){return t}});function ar(t){this._context=t}ar.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};function lr(t){return new ar(t)}function hr(t){return t[0]}function ur(t){return t[1]}Math.abs,Math.atan2,Math.cos,Math.max,Math.min,Math.sin,Math.sqrt;var cr=Math.PI,fr=2*cr;var dr={draw:function(t,e){e=Math.sqrt(e/cr);t.moveTo(e,0),t.arc(0,0,e,0,fr)}},gr={draw:function(t,e){e=Math.sqrt(e/5)/2;t.moveTo(-3*e,-e),t.lineTo(-e,-e),t.lineTo(-e,-3*e),t.lineTo(e,-3*e),t.lineTo(e,-e),t.lineTo(3*e,-e),t.lineTo(3*e,e),t.lineTo(e,e),t.lineTo(e,3*e),t.lineTo(-e,3*e),t.lineTo(-e,e),t.lineTo(-3*e,e),t.closePath()}},pr=Math.sqrt(1/3),mr=2*pr,yr={draw:function(t,e){var n=Math.sqrt(e/mr),e=n*pr;t.moveTo(0,-n),t.lineTo(e,0),t.lineTo(0,n),t.lineTo(-e,0),t.closePath()}},st=Math.sin(cr/10)/Math.sin(7*cr/10),_r=Math.sin(fr/10)*st,vr=-Math.cos(fr/10)*st,wr={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),r=_r*n,i=vr*n;t.moveTo(0,-n),t.lineTo(r,i);for(var s=1;s<5;++s){var o=fr*s/5,a=Math.cos(o),o=Math.sin(o);t.lineTo(o*n,-a*n),t.lineTo(a*r-o*i,o*r+a*i)}t.closePath()}},xr={draw:function(t,e){var n=Math.sqrt(e),e=-n/2;t.rect(e,e,n,n)}},Ar=Math.sqrt(3),br={draw:function(t,e){e=-Math.sqrt(e/(3*Ar));t.moveTo(0,2*e),t.lineTo(-Ar*e,-e),t.lineTo(Ar*e,-e),t.closePath()}},Mr=-.5,kr=Math.sqrt(3)/2,Tr=1/Math.sqrt(12),Sr=3*(Tr/2+1),Nr={draw:function(t,e){var n=Math.sqrt(e/Sr),r=n/2,i=n*Tr,s=r,o=n*Tr+n,e=-s,n=o;t.moveTo(r,i),t.lineTo(s,o),t.lineTo(e,n),t.lineTo(Mr*r-kr*i,kr*r+Mr*i),t.lineTo(Mr*s-kr*o,kr*s+Mr*o),t.lineTo(Mr*e-kr*n,kr*e+Mr*n),t.lineTo(Mr*r+kr*i,Mr*i-kr*r),t.lineTo(Mr*s+kr*o,Mr*o-kr*s),t.lineTo(Mr*e+kr*n,Mr*n-kr*e),t.closePath()}},Er=function(e,n){var r=null;function i(){var t;if(r=r||(t=sr()),e.apply(this,arguments).draw(r,+n.apply(this,arguments)),t)return r=null,t+""||null}return e="function"==typeof e?e:or(e||dr),n="function"==typeof n?n:or(void 0===n?64:+n),i.type=function(t){return arguments.length?(e="function"==typeof t?t:or(t),i):e},i.size=function(t){return arguments.length?(n="function"==typeof t?t:or(+t),i):n},i.context=function(t){return arguments.length?(r=null==t?null:t,i):r},i};function Or(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Ir(t){this._context=t}Ir.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Or(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Or(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Cr(t,e){this._basis=new Ir(t),this._beta=e}Cr.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(0<n)for(var r,i=t[0],s=e[0],o=t[n]-i,a=e[n]-s,l=-1;++l<=n;)this._basis.point(this._beta*t[l]+(1-this._beta)*(i+(r=l/n)*o),this._beta*e[l]+(1-this._beta)*(s+r*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};e=function e(n){function t(t){return 1===n?new Ir(t):new Cr(t,n)}return t.beta=function(t){return e(+t)},t}(.85);function Pr(t){return((t=Math.exp(t))+1/t)/2}(function n(f,d,g){function t(t,e){var r,i,s,n,o=t[0],a=t[1],l=t[2],h=e[0],t=e[1],e=e[2],u=h-o,c=t-a,h=u*u+c*c;return(n=h<1e-12?(s=Math.log(e/l)/f,function(t){return[o+t*u,a+t*c,l*Math.exp(f*t*s)]}):(r=Math.sqrt(h),t=(e*e-l*l+g*h)/(2*l*d*r),n=(e*e-l*l-g*h)/(2*e*d*r),i=Math.log(Math.sqrt(t*t+1)-t),s=(Math.log(Math.sqrt(n*n+1)-n)-i)/f,function(t){var e=t*s,n=Pr(i),t=l/(d*r)*(n*(t=f*e+i,((t=Math.exp(2*t))-1)/(t+1))-(t=i,((t=Math.exp(i))-1/t)/2));return[o+t*u,a+t*c,l*n/Pr(f*e+i)]})).duration=1e3*s*f/Math.SQRT2,n}return t.rho=function(t){var e=Math.max(.001,+t),t=e*e;return n(e,t,t*t)},t})(Math.SQRT2,2,4);function Dr(t,e,n){this.k=t,this.x=e,this.y=n}Dr.prototype={constructor:Dr,scale:function(t){return 1===t?this:new Dr(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Dr(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Lr=function(t){return t},Fr=1,Rr=2,Ur=3,Hr=4,Br=1e-6;function jr(t){return"translate("+t+",0)"}function zr(t){return"translate(0,"+t+")"}function qr(e){return t=>+e(t)}function Gr(e,n){return n=Math.max(0,e.bandwidth()-2*n)/2,e.round()&&(n=Math.round(n)),t=>+e(t)+n}function Xr(){return!this.__axis}function Yr(d,g){var p=[],m=null,y=null,_=6,v=6,w=3,x="undefined"!=typeof window&&1<window.devicePixelRatio?0:.5,A=d===Fr||d===Hr?-1:1,b=d===Hr||d===Rr?"x":"y",M=d===Fr||d===Ur?jr:zr;function e(t){var e=null==m?g.ticks?g.ticks.apply(g,p):g.domain():m,n=null==y?g.tickFormat?g.tickFormat.apply(g,p):Lr:y,r=Math.max(_,0)+w,i=g.range(),s=+i[0]+x,o=+i[i.length-1]+x,a=(g.bandwidth?Gr:qr)(g.copy(),x),l=t.selection?t.selection():t,h=l.selectAll(".domain").data([null]),u=(f=l.selectAll(".tick").data(e,g).order()).exit(),c=f.enter().append("g").attr("class","tick"),i=f.select("line"),e=f.select("text"),h=h.merge(h.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),f=f.merge(c),i=i.merge(c.append("line").attr("stroke","currentColor").attr(b+"2",A*_)),e=e.merge(c.append("text").attr("fill","currentColor").attr(b,A*r).attr("dy",d===Fr?"0em":d===Ur?"0.71em":"0.32em"));t!==l&&(h=h.transition(t),f=f.transition(t),i=i.transition(t),e=e.transition(t),u=u.transition(t).attr("opacity",Br).attr("transform",function(t){return isFinite(t=a(t))?M(t+x):this.getAttribute("transform")}),c.attr("opacity",Br).attr("transform",function(t){var e=this.parentNode.__axis;return M((e&&isFinite(e=e(t))?e:a(t))+x)})),u.remove(),h.attr("d",d===Hr||d===Rr?v?"M"+A*v+","+s+"H"+x+"V"+o+"H"+A*v:"M"+x+","+s+"V"+o:v?"M"+s+","+A*v+"V"+x+"H"+o+"V"+A*v:"M"+s+","+x+"H"+o),f.attr("opacity",1).attr("transform",function(t){return M(a(t)+x)}),i.attr(b+"2",A*_),e.attr(b,A*r).text(n),l.filter(Xr).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",d===Rr?"start":d===Hr?"end":"middle"),l.each(function(){this.__axis=a})}return e.scale=function(t){return arguments.length?(g=t,e):g},e.ticks=function(){return p=Array.from(arguments),e},e.tickArguments=function(t){return arguments.length?(p=null==t?[]:Array.from(t),e):p.slice()},e.tickValues=function(t){return arguments.length?(m=null==t?null:Array.from(t),e):m&&m.slice()},e.tickFormat=function(t){return arguments.length?(y=t,e):y},e.tickSize=function(t){return arguments.length?(_=v=+t,e):_},e.tickSizeInner=function(t){return arguments.length?(_=+t,e):_},e.tickSizeOuter=function(t){return arguments.length?(v=+t,e):v},e.tickPadding=function(t){return arguments.length?(w=+t,e):w},e.offset=function(t){return arguments.length?(x=+t,e):x},e}var Wr={value:()=>{}};function Vr(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new $r(r)}function $r(t){this._=t}function Kr(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Wr,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}$r.prototype=Vr.prototype={constructor:$r,on:function(t,e){var n,r,i=this._,s=(r=i,(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),o=-1,a=s.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=s[o]).type)i[n]=Kr(i[n],t.name,e);else if(null==e)for(n in i)i[n]=Kr(i[n],t.name,null);return this}for(;++o<a;)if((n=(t=s[o]).type)&&(n=function(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}(i[n],t.name)))return n},copy:function(){var t,e={},n=this._;for(t in n)e[t]=n[t].slice();return new $r(e)},call:function(t,e){if(0<(n=arguments.length-2))for(var n,r,i=new Array(n),s=0;s<n;++s)i[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=0,n=(r=this._[t]).length;s<n;++s)r[s].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};var Zr=Vr;function Qr(){}function Jr(t){return null==t?Qr:function(){return this.querySelector(t)}}function ti(){return[]}function ei(t){return null==t?ti:function(){return this.querySelectorAll(t)}}function ni(e){return function(){return null==(t=e.apply(this,arguments))?[]:Array.isArray(t)?t:Array.from(t);var t}}function ri(t){return function(){return this.matches(t)}}function ii(e){return function(t){return t.matches(e)}}var si=Array.prototype.find;function oi(){return this.firstElementChild}var ai=Array.prototype.filter;function li(){return Array.from(this.children)}function hi(t){return new Array(t.length)}function ui(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ui.prototype={constructor:ui,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function ci(t,e,n,r,i,s){for(var o,a=0,l=e.length,h=s.length;a<h;++a)(o=e[a])?(o.__data__=s[a],r[a]=o):n[a]=new ui(t,s[a]);for(;a<l;++a)(o=e[a])&&(i[a]=o)}function fi(t,e,n,r,i,s,o){for(var a,l,h=new Map,u=e.length,c=s.length,f=new Array(u),d=0;d<u;++d)(a=e[d])&&(f[d]=l=o.call(a,a.__data__,d,e)+"",h.has(l)?i[d]=a:h.set(l,a));for(d=0;d<c;++d)l=o.call(t,s[d],d,s)+"",(a=h.get(l))?((r[d]=a).__data__=s[d],h.delete(l)):n[d]=new ui(t,s[d]);for(d=0;d<u;++d)(a=e[d])&&h.get(f[d])===a&&(i[d]=a)}function di(t){return t.__data__}function gi(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}var pi="http://www.w3.org/1999/xhtml",mi={svg:"http://www.w3.org/2000/svg",xhtml:pi,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},yi=function(t){var e=t+="",n=e.indexOf(":");return 0<=n&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),mi.hasOwnProperty(e)?{space:mi[e],local:t}:t};var _i=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function vi(t,e){return t.style.getPropertyValue(e)||_i(t).getComputedStyle(t,null).getPropertyValue(e)}function wi(t){return t.trim().split(/^|\s+/)}function xi(t){return t.classList||new Ai(t)}function Ai(t){this._node=t,this._names=wi(t.getAttribute("class")||"")}function bi(t,e){for(var n=xi(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Mi(t,e){for(var n=xi(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}Ai.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){t=this._names.indexOf(t);0<=t&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return 0<=this._names.indexOf(t)}};function ki(){this.textContent=""}function Ti(){this.innerHTML=""}function Si(){this.nextSibling&&this.parentNode.appendChild(this)}function Ni(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ei(t){return((t=yi(t)).local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(n){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===pi&&t.documentElement.namespaceURI===pi?t.createElement(n):t.createElementNS(e,n)}})(t)}function Oi(){return null}function Ii(){var t=this.parentNode;t&&t.removeChild(this)}function Ci(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Pi(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Di(s){return function(){var t=this.__on;if(t){for(var e,n=0,r=-1,i=t.length;n<i;++n)e=t[n],s.type&&e.type!==s.type||e.name!==s.name?t[++r]=e:this.removeEventListener(e.type,e.listener,e.options);++r?t.length=r:delete this.__on}}}function Li(o,a,l){return function(){var t,e,n=this.__on,r=(e=a,function(t){e.call(this,t,this.__data__)});if(n)for(var i=0,s=n.length;i<s;++i)if((t=n[i]).type===o.type&&t.name===o.name)return this.removeEventListener(t.type,t.listener,t.options),this.addEventListener(t.type,t.listener=r,t.options=l),void(t.value=a);this.addEventListener(o.type,r,l),t={type:o.type,name:o.name,value:a,listener:r,options:l},n?n.push(t):this.__on=[t]}}function Fi(t,e,n){var r=_i(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}var Ri=[null];function Ui(t,e){this._groups=t,this._parents=e}function Hi(){return new Ui([[document.documentElement]],Ri)}Ui.prototype=Hi.prototype={constructor:Ui,select:function(t){"function"!=typeof t&&(t=Jr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s,o,a=e[i],l=a.length,h=r[i]=new Array(l),u=0;u<l;++u)(s=a[u])&&(o=t.call(s,s.__data__,u,a))&&("__data__"in s&&(o.__data__=s.__data__),h[u]=o);return new Ui(r,this._parents)},selectAll:function(t){t=("function"==typeof t?ni:ei)(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o,a=e[s],l=a.length,h=0;h<l;++h)(o=a[h])&&(r.push(t.call(o,o.__data__,h,a)),i.push(o));return new Ui(r,i)},selectChild:function(t){return this.select(null==t?oi:(e="function"==typeof t?t:ii(t),function(){return si.call(this.children,e)}));var e},selectChildren:function(t){return this.selectAll(null==t?li:(e="function"==typeof t?t:ii(t),function(){return ai.call(this.children,e)}));var e},filter:function(t){"function"!=typeof t&&(t=ri(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s,o=e[i],a=o.length,l=r[i]=[],h=0;h<a;++h)(s=o[h])&&t.call(s,s.__data__,h,o)&&l.push(s);return new Ui(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,di);var n,r=e?fi:ci,i=this._parents,s=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var o=s.length,a=new Array(o),l=new Array(o),h=new Array(o),u=0;u<o;++u){var c=i[u],f=s[u],d=f.length,g="object"==typeof(g=t.call(c,c&&c.__data__,u,i))&&"length"in g?g:Array.from(g),p=g.length,m=l[u]=new Array(p),y=a[u]=new Array(p);r(c,f,m,y,h[u]=new Array(d),g,e);for(var _,v,w=0,x=0;w<p;++w)if(_=m[w]){for(x<=w&&(x=w+1);!(v=y[x])&&++x<p;);_._next=v||null}}return(a=new Ui(a,i))._enter=l,a._exit=h,a},enter:function(){return new Ui(this._enter||this._groups.map(hi),this._parents)},exit:function(){return new Ui(this._exit||this._groups.map(hi),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,s=this.exit(),r="function"==typeof t?(r=t(r))&&r.selection():r.append(t+"");return null!=e&&(i=(i=e(i))&&i.selection()),null==n?s.remove():n(s),r&&i?r.merge(i).order():i},merge:function(t){for(var t=t.selection?t.selection():t,e=this._groups,n=t._groups,r=e.length,t=n.length,i=Math.min(r,t),s=new Array(r),o=0;o<i;++o)for(var a,l=e[o],h=n[o],u=l.length,c=s[o]=new Array(u),f=0;f<u;++f)(a=l[f]||h[f])&&(c[f]=a);for(;o<r;++o)s[o]=e[o];return new Ui(s,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],s=i.length-1,o=i[s];0<=--s;)(r=i[s])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(n){function t(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}n=n||gi;for(var e=this._groups,r=e.length,i=new Array(r),s=0;s<r;++s){for(var o,a=e[s],l=a.length,h=i[s]=new Array(l),u=0;u<l;++u)(o=a[u])&&(h[u]=o);h.sort(t)}return new Ui(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,s=e[n],o=0,a=s.length;o<a;++o)(i=s[o])&&t.call(i,i.__data__,o,s);return this},attr:function(t,e){var n=yi(t);if(arguments.length<2){t=this.node();return n.local?t.getAttributeNS(n.space,n.local):t.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}}:function(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){return 1<arguments.length?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(e,n,r){return function(){var t=n.apply(this,arguments);null==t?this.style.removeProperty(e):this.style.setProperty(e,t,r)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):vi(this.node(),t)},property:function(t,e){return 1<arguments.length?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(e,n){return function(){var t=n.apply(this,arguments);null==t?delete this[e]:this[e]=t}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=wi(t+"");if(arguments.length<2){for(var r=xi(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?bi:Mi)(this,t)}}:e?function(t){return function(){bi(this,t)}}:function(t){return function(){Mi(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?ki:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Ti:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(Si)},lower:function(){return this.each(Ni)},append:function(t){var e="function"==typeof t?t:Ei(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:Ei(t),r=null==e?Oi:"function"==typeof e?e:Jr(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(Ii)},clone:function(t){return this.select(t?Pi:Ci)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,s=(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return 0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}),o=s.length;if(!(arguments.length<2)){for(a=e?Li:Di,r=0;r<o;++r)this.each(a(s[r],e,n));return this}var a=this.node().__on;if(a)for(var l,h=0,u=a.length;h<u;++h)for(r=0,l=a[h];r<o;++r)if((i=s[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return Fi(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return Fi(this,t,e)}})(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],s=0,o=i.length;s<o;++s)(r=i[s])&&(yield r)}};var Bi=Hi,ji=function(t){return"string"==typeof t?new Ui([[document.querySelector(t)]],[document.documentElement]):new Ui([[t]],Ri)};const zi={passive:!1},qi={capture:!0,passive:!1};function Gi(t){t.stopImmediatePropagation()}var Xi=function(t){t.preventDefault(),t.stopImmediatePropagation()},Yi=function(t){var e=t.document.documentElement,t=ji(t).on("dragstart.drag",Xi,qi);"onselectstart"in e?t.on("selectstart.drag",Xi,qi):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")};function Wi(t,e){var n=t.document.documentElement,r=ji(t).on("dragstart.drag",null);e&&(r.on("click.drag",Xi,qi),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}lt=function(t,e,n){(t.prototype=e.prototype=n).constructor=t};function Vi(t,e){var n,r=Object.create(t.prototype);for(n in e)r[n]=e[n];return r}function $i(){}var ut="\\s*([+-]?\\d+)\\s*",ht="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",st="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ki=/^#([0-9a-f]{3,8})$/,Zi=new RegExp("^rgb\\("+[ut,ut,ut]+"\\)$"),Qi=new RegExp("^rgb\\("+[st,st,st]+"\\)$"),Ji=new RegExp("^rgba\\("+[ut,ut,ut,ht]+"\\)$"),ts=new RegExp("^rgba\\("+[st,st,st,ht]+"\\)$"),es=new RegExp("^hsl\\("+[ht,st,st]+"\\)$"),ns=new RegExp("^hsla\\("+[ht,st,st,ht]+"\\)$"),rs={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function is(){return this.rgb().formatHex()}function ss(){return this.rgb().formatRgb()}function os(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ki.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?as(e):3===n?new us(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?ls(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?ls(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Zi.exec(t))?new us(e[1],e[2],e[3],1):(e=Qi.exec(t))?new us(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Ji.exec(t))?ls(e[1],e[2],e[3],e[4]):(e=ts.exec(t))?ls(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=es.exec(t))?gs(e[1],e[2]/100,e[3]/100,1):(e=ns.exec(t))?gs(e[1],e[2]/100,e[3]/100,e[4]):rs.hasOwnProperty(t)?as(rs[t]):"transparent"===t?new us(NaN,NaN,NaN,0):null}function as(t){return new us(t>>16&255,t>>8&255,255&t,1)}function ls(t,e,n,r){return new us(t=r<=0?e=n=NaN:t,e,n,r)}function hs(t,e,n,r){return 1===arguments.length?(i=(i=t)instanceof $i?i:os(i))?new us((i=i.rgb()).r,i.g,i.b,i.opacity):new us:new us(t,e,n,null==r?1:r);var i}function us(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function cs(){return"#"+ds(this.r)+ds(this.g)+ds(this.b)}function fs(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function ds(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function gs(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||1<=n?t=e=NaN:e<=0&&(t=NaN),new ms(t,e,n,r)}function ps(t){if(t instanceof ms)return new ms(t.h,t.s,t.l,t.opacity);if(!(t=!(t instanceof $i)?os(t):t))return new ms;if(t instanceof ms)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(o=e===s?(n-r)/a+6*(n<r):n===s?(r-e)/a+2:(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=0<l&&l<1?0:o,new ms(o,a,l,t.opacity)}function ms(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function ys(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function _s(t,e,n,r,i){var s=t*t,o=s*t;return((1-3*t+3*s-o)*e+(4-6*s+3*o)*n+(1+3*t+3*s-3*o)*r+o*i)/6}lt($i,os,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:is,formatHex:is,formatHsl:function(){return ps(this).formatHsl()},formatRgb:ss,toString:ss}),lt(us,hs,Vi($i,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new us(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new us(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:cs,formatHex:cs,formatRgb:fs,toString:fs})),lt(ms,function(t,e,n,r){return 1===arguments.length?ps(t):new ms(t,e,n,null==r?1:r)},Vi($i,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new ms(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new ms(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,e=n+(n<.5?n:1-n)*e,n=2*n-e;return new us(ys(240<=t?t-240:120+t,n,e),ys(t,n,e),ys(t<120?240+t:t-120,n,e),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var vs=t=>()=>t;function ws(e,n){return function(t){return e+t*n}}function xs(s){return 1==(s=+s)?As:function(t,e){return e-t?(n=t,r=e,i=s,n=Math.pow(n,i),r=Math.pow(r,i)-n,i=1/i,function(t){return Math.pow(n+t*r,i)}):vs(isNaN(t)?e:t);var n,r,i}}function As(t,e){var n=e-t;return n?ws(t,n):vs(isNaN(t)?e:t)}var bs=function t(e){var o=xs(e);function n(e,t){var n=o((e=hs(e)).r,(t=hs(t)).r),r=o(e.g,t.g),i=o(e.b,t.b),s=As(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=r(t),e.b=i(t),e.opacity=s(t),e+""}}return n.gamma=t,n}(1);function Ms(a){return function(t){for(var e,n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o=0;o<n;++o)e=hs(t[o]),r[o]=e.r||0,i[o]=e.g||0,s[o]=e.b||0;return r=a(r),i=a(i),s=a(s),e.opacity=1,function(t){return e.r=r(t),e.g=i(t),e.b=s(t),e+""}}}Ms(function(o){var a=o.length-1;return function(t){var e=t<=0?t=0:1<=t?a-(t=1):Math.floor(t*a),n=o[e],r=o[e+1],i=0<e?o[e-1]:2*n-r,s=e<a-1?o[e+2]:2*r-n;return _s((t-e/a)*a,i,n,r,s)}}),Ms(function(o){var a=o.length;return function(t){var e=Math.floor(((t%=1)<0?++t:t)*a),n=o[(e+a-1)%a],r=o[e%a],i=o[(e+1)%a],s=o[(e+2)%a];return _s((t-e/a)*a,n,r,i,s)}});var ks=function(e,n){n=n||[];var r,i=e?Math.min(n.length,e.length):0,s=n.slice();return function(t){for(r=0;r<i;++r)s[r]=e[r]*(1-t)+n[r]*t;return s}};function Ts(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ss(t,e){for(var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),o=0;o<r;++o)i[o]=Fs(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(t){for(o=0;o<r;++o)s[o]=i[o](t);return s}}var Ns=function(e,n){var r=new Date;return e=+e,n=+n,function(t){return r.setTime(e*(1-t)+n*t),r}},Es=function(e,n){return e=+e,n=+n,function(t){return e*(1-t)+n*t}},Os=function(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),e=null===e||"object"!=typeof e?{}:e)n in t?r[n]=Fs(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},Is=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Cs=new RegExp(Is.source,"g");var Ps,Ds,Ls=function(t,r){var e,n,i,s,o,a=Is.lastIndex=Cs.lastIndex=0,l=-1,h=[],u=[];for(t+="",r+="";(e=Is.exec(t))&&(n=Cs.exec(r));)(i=n.index)>a&&(i=r.slice(a,i),h[l]?h[l]+=i:h[++l]=i),(e=e[0])===(n=n[0])?h[l]?h[l]+=n:h[++l]=n:(h[++l]=null,u.push({i:l,x:Es(e,n)})),a=Cs.lastIndex;return a<r.length&&(i=r.slice(a),h[l]?h[l]+=i:h[++l]=i),h.length<2?u[0]?(o=u[0].x,function(t){return o(t)+""}):(s=r,function(){return s}):(r=u.length,function(t){for(var e,n=0;n<r;++n)h[(e=u[n]).i]=e.x(t);return h.join("")})},Fs=function(t,e){var n=typeof e;return null==e||"boolean"==n?vs(e):("number"==n?Es:"string"==n?(n=os(e))?(e=n,bs):Ls:e instanceof os?bs:e instanceof Date?Ns:Ts(e)?ks:Array.isArray(e)?Ss:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Os:Es)(t,e)},Rs=function(t){for(var e;e=t.sourceEvent;)t=e;return t},Us=function(t,e){if(t=Rs(t),e=void 0===e?t.currentTarget:e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}if(e.getBoundingClientRect){r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]},Hs=0,Bs=0,js=0,zs=1e3,qs=0,Gs=0,Xs=0,Ys="object"==typeof performance&&performance.now?performance:Date,Ws="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Vs(){return Gs||(Ws($s),Gs=Ys.now()+Xs)}function $s(){Gs=0}function Ks(){this._call=this._time=this._next=null}function Zs(t,e,n){var r=new Ks;return r.restart(t,e,n),r}function Qs(){Gs=(qs=Ys.now())+Xs,Hs=Bs=0;try{!function(){Vs(),++Hs;for(var t,e=Ps;e;)0<=(t=Gs-e._time)&&e._call.call(void 0,t),e=e._next;--Hs}()}finally{Hs=0,function(){var t,e,n=Ps,r=1/0;for(;n;)n=n._call?(r>n._time&&(r=n._time),(t=n)._next):(e=n._next,n._next=null,t?t._next=e:Ps=e);Ds=t,to(r)}(),Gs=0}}function Js(){var t=Ys.now(),e=t-qs;zs<e&&(Xs-=e,qs=t)}function to(t){Hs||(Bs=Bs&&clearTimeout(Bs),24<t-Gs?(t<1/0&&(Bs=setTimeout(Qs,t-Ys.now()-Xs)),js=js&&clearInterval(js)):(js||(qs=Ys.now(),js=setInterval(Js,zs)),Hs=1,Ws(Qs)))}Ks.prototype=Zs.prototype={constructor:Ks,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Vs():+n)+(null==e?0:+e),this._next||Ds===this||(Ds?Ds._next=this:Ps=this,Ds=this),this._call=t,this._time=n,to()},stop:function(){this._call&&(this._call=null,this._time=1/0,to())}};function eo(e,n,t){var r=new Ks;return n=null==n?0:+n,r.restart(t=>{r.stop(),e(t+n)},n,t),r}function no(t,e,n,r,i,s){var o,a,l,h,u,c=t.__transition;if(c){if(n in c)return}else t.__transition={};function f(t){var e,n,r,i;if(l.state!==oo)return g();for(e in u)if((i=u[e]).name===l.name){if(i.state===lo)return eo(f);i.state===ho?(i.state=co,i.timer.stop(),i.on.call("interrupt",o,o.__data__,i.index,i.group),delete u[e]):+e<a&&(i.state=co,i.timer.stop(),i.on.call("cancel",o,o.__data__,i.index,i.group),delete u[e])}if(eo(function(){l.state===lo&&(l.state=ho,l.timer.restart(d,l.delay,l.time),d(t))}),l.state=ao,l.on.call("start",o,o.__data__,l.index,l.group),l.state===ao){for(l.state=lo,h=new Array(r=l.tween.length),e=0,n=-1;e<r;++e)(i=l.tween[e].value.call(o,o.__data__,l.index,l.group))&&(h[++n]=i);h.length=n+1}}function d(t){for(var e=t<l.duration?l.ease.call(null,t/l.duration):(l.timer.restart(g),l.state=uo,1),n=-1,r=h.length;++n<r;)h[n].call(o,e);l.state===uo&&(l.on.call("end",o,o.__data__,l.index,l.group),g())}function g(){for(var t in l.state=co,l.timer.stop(),delete u[a],u)return;delete o.__transition}o=t,a=n,l={name:e,index:r,group:i,on:ro,tween:io,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:so},((u=o.__transition)[a]=l).timer=Zs(function(t){l.state=oo,l.timer.restart(f,l.delay,l.time),l.delay<=t&&f(t-l.delay)},0,l.time)}var ro=Zr("start","end","cancel","interrupt"),io=[],so=0,oo=1,ao=2,lo=3,ho=4,uo=5,co=6;function fo(t,e){e=po(t,e);if(e.state>so)throw new Error("too late; already scheduled");return e}function go(t,e){e=po(t,e);if(e.state>lo)throw new Error("too late; already running");return e}function po(t,e){t=t.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function mo(t,e,n,r,i,s){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*vo,skewX:Math.atan(l)*vo,scaleX:o,scaleY:a}}var yo,_o=function(t,e){var n,r,i,s=t.__transition,o=!0;if(s){for(i in e=null==e?null:e+"",s)(n=s[i]).name===e?(r=n.state>ao&&n.state<uo,n.state=co,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete s[i]):o=!1;o&&delete t.__transition}},vo=180/Math.PI,wo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function xo(c,f,d,g){function p(t){return t.length?t.pop()+" ":""}return function(t,e){var n,r,i,s,o,a,l,h=[],u=[];return t=c(t),e=c(e),i=t.translateX,s=t.translateY,l=e.translateX,a=e.translateY,o=h,n=u,i!==l||s!==a?(r=o.push("translate(",null,f,null,d),n.push({i:r-4,x:Es(i,l)},{i:r-2,x:Es(s,a)})):(l||a)&&o.push("translate("+l+f+a+d),n=t.rotate,i=e.rotate,r=h,s=u,n!==i?(180<n-i?i+=360:180<i-n&&(n+=360),s.push({i:r.push(p(r)+"rotate(",null,g)-2,x:Es(n,i)})):i&&r.push(p(r)+"rotate("+i+g),o=t.skewX,l=e.skewX,a=h,s=u,o!==l?s.push({i:a.push(p(a)+"skewX(",null,g)-2,x:Es(o,l)}):l&&a.push(p(a)+"skewX("+l+g),n=t.scaleX,r=t.scaleY,i=e.scaleX,s=e.scaleY,o=h,a=u,n!==i||r!==s?(l=o.push(p(o)+"scale(",null,",",null,")"),a.push({i:l-4,x:Es(n,i)},{i:l-2,x:Es(r,s)})):1===i&&1===s||o.push(p(o)+"scale("+i+","+s+")"),t=e=null,function(t){for(var e,n=-1,r=u.length;++n<r;)h[(e=u[n]).i]=e.x(t);return h.join("")}}}var Ao=xo(function(t){return(t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"")).isIdentity?wo:mo(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),bo=xo(function(t){return null==t?wo:((yo=yo||document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("transform",t),(t=yo.transform.baseVal.consolidate())?(t=t.matrix,mo(t.a,t.b,t.c,t.d,t.e,t.f)):wo)},", ",")",")");function Mo(t,e,n){var r=t._id;return t.each(function(){var t=go(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return po(t,r).value[e]}}function ko(t,e){var n;return("number"==typeof e?Es:e instanceof os?bs:(n=os(e))?(e=n,bs):Ls)(t,e)}function To(r,i){var s,o;function t(){var e,n,t=i.apply(this,arguments);return s=t!==o?(o=t)&&(e=r,n=t,function(t){this.setAttributeNS(e.space,e.local,n.call(this,t))}):s}return t._value=i,t}function So(r,i){var s,o;function t(){var e,n,t=i.apply(this,arguments);return s=t!==o?(o=t)&&(e=r,n=t,function(t){this.setAttribute(e,n.call(this,t))}):s}return t._value=i,t}var No=Bi.prototype.constructor;function Eo(t){return function(){this.style.removeProperty(t)}}function Oo(i,s,o){var a,l;function t(){var e,n,r,t=s.apply(this,arguments);return a=t!==l?(l=t)&&(e=i,n=t,r=o,function(t){this.style.setProperty(e,n.call(this,t),r)}):a}return t._value=s,t}function Io(n){var r,i;function t(){var e,t=n.apply(this,arguments);return r=t!==i?(i=t)&&(e=t,function(t){this.textContent=e.call(this,t)}):r}return t._value=n,t}var Co=0;function Po(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}ut=Bi.prototype;Po.prototype={constructor:Po,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Jr(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a,l,h=r[o],u=h.length,c=s[o]=new Array(u),f=0;f<u;++f)(a=h[f])&&(l=t.call(a,a.__data__,f,h))&&("__data__"in a&&(l.__data__=a.__data__),c[f]=l,no(c[f],e,n,f,c,po(a,n)));return new Po(s,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=ei(t));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l,h=r[a],u=h.length,c=0;c<u;++c)if(l=h[c]){for(var f,d=t.call(l,l.__data__,c,h),g=po(l,n),p=0,m=d.length;p<m;++p)(f=d[p])&&no(f,e,n,p,d,g);s.push(d),o.push(l)}return new Po(s,o,e,n)},selectChild:ut.selectChild,selectChildren:ut.selectChildren,filter:function(t){"function"!=typeof t&&(t=ri(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s,o=e[i],a=o.length,l=r[i]=[],h=0;h<a;++h)(s=o[h])&&t.call(s,s.__data__,h,o)&&l.push(s);return new Po(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,t=n.length,i=Math.min(r,t),s=new Array(r),o=0;o<i;++o)for(var a,l=e[o],h=n[o],u=l.length,c=s[o]=new Array(u),f=0;f<u;++f)(a=l[f]||h[f])&&(c[f]=a);for(;o<r;++o)s[o]=e[o];return new Po(s,this._parents,this._name,this._id)},selection:function(){return new No(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=++Co,r=this._groups,i=r.length,s=0;s<i;++s)for(var o,a,l=r[s],h=l.length,u=0;u<h;++u)(o=l[u])&&(a=po(o,e),no(o,t,n,u,l,{time:a.time+a.delay+a.duration,delay:0,duration:a.duration,ease:a.ease}));return new Po(r,this._parents,t,n)},call:ut.call,nodes:ut.nodes,node:ut.node,size:ut.size,empty:ut.empty,each:ut.each,on:function(t,e){var n,r,i,s,o,a,l=this._id;return arguments.length<2?po(this.node(),l).on.on(t):this.each((n=l,i=e,a=((r=t)+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return!(t=0<=e?t.slice(0,e):t)||"start"===t})?fo:go,function(){var t=a(this,n),e=t.on;e!==s&&(o=(s=e).copy()).on(r,i),t.on=o}))},attr:function(t,e){var n=yi(t),r="transform"===n?bo:ko;return this.attrTween(t,"function"==typeof e?(n.local?function(r,i,s){var o,a,l;return function(){var t,e,n=s(this);if(null!=n)return(t=this.getAttributeNS(r.space,r.local))===(e=n+"")?null:t===o&&e===a?l:(a=e,l=i(o=t,n));this.removeAttributeNS(r.space,r.local)}}:function(r,i,s){var o,a,l;return function(){var t,e,n=s(this);if(null!=n)return(t=this.getAttribute(r))===(e=n+"")?null:t===o&&e===a?l:(a=e,l=i(o=t,n));this.removeAttribute(r)}})(n,r,Mo(this,"attr."+t,e)):null==e?(n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(n):(n.local?function(e,n,r){var i,s,o=r+"";return function(){var t=this.getAttributeNS(e.space,e.local);return t===o?null:t===i?s:s=n(i=t,r)}}:function(e,n,r){var i,s,o=r+"";return function(){var t=this.getAttribute(e);return t===o?null:t===i?s:s=n(i=t,r)}})(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;t=yi(t);return this.tween(n,(t.local?To:So)(t,e))},style:function(t,e,n){var r,i,s,o,a,l,h,u,c,f,d,g,p,m,y,_,v,w,x,A,b,M,k,T,S,N="transform"==(t+="")?Ao:ko;return null==e?this.styleTween(t,(b=t,M=N,function(){var t=vi(this,b),e=(this.style.removeProperty(b),vi(this,b));return t===e?null:t===k&&e===T?S:S=M(k=t,T=e)})).on("end.style."+t,Eo(t)):"function"==typeof e?this.styleTween(t,(_=N,v=Mo(this,"style."+(y=t),e),function(){var t=vi(this,y),e=v(this),n=e+"";return null==e&&(this.style.removeProperty(y),n=e=vi(this,y)),t===n?null:t===w&&n===x?A:(x=n,A=_(w=t,e))})).each((h=this._id,m="end."+(p="style."+(u=t)),function(){var t=go(this,h),e=t.on,n=null==t.value[p]?g=g||Eo(u):void 0;e===c&&d===n||(f=(c=e).copy()).on(m,d=n),t.on=f})):this.styleTween(t,(r=t,i=N,l=(s=e)+"",function(){var t=vi(this,r);return t===l?null:t===o?a:a=i(o=t,s)}),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,Oo(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?(n=Mo(this,"text",t),function(){var t=n(this);this.textContent=null==t?"":t}):(e=null==t?"":t+"",function(){this.textContent=e}));var e,n},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,Io(t))},remove:function(){return this.on("end.remove",(n=this._id,function(){var t,e=this.parentNode;for(t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}));var n},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=po(this.node(),n).tween,s=0,o=i.length;s<o;++s)if((r=i[s]).name===t)return r.value;return null}return this.each((null==e?function(i,s){var o,a;return function(){var t=go(this,i),e=t.tween;if(e!==o)for(var n=0,r=(a=o=e).length;n<r;++n)if(a[n].name===s){(a=a.slice()).splice(n,1);break}t.tween=a}}:function(s,o,a){var l,h;if("function"!=typeof a)throw new Error;return function(){var t=go(this,s),e=t.tween;if(e!==l){h=(l=e).slice();for(var n={name:o,value:a},r=0,i=h.length;r<i;++r)if(h[r].name===o){h[r]=n;break}r===i&&h.push(n)}t.tween=h}})(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){fo(this,t).delay=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){fo(this,t).delay=e}})(e,t)):po(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){go(this,t).duration=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){go(this,t).duration=e}})(e,t)):po(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){go(this,t).ease=e}}(e,t)):po(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each((e=this._id,n=t,function(){var t=n.apply(this,arguments);if("function"!=typeof t)throw new Error;go(this,e).ease=t}));var e,n},end:function(){var i,s,o=this,a=o._id,l=o.size();return new Promise(function(t,e){var n={value:e},r={value:function(){0==--l&&t()}};o.each(function(){var t=go(this,a),e=t.on;e!==i&&((s=(i=e).copy())._.cancel.push(n),s._.interrupt.push(n),s._.end.push(r)),t.on=s}),0===l&&t()})},[Symbol.iterator]:ut[Symbol.iterator]};var Do={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};Bi.prototype.interrupt=function(t){return this.each(function(){_o(this,t)})},Bi.prototype.transition=function(t){var e,n;t=t instanceof Po?(e=t._id,t._name):(e=++Co,(n=Do).time=Vs(),null==t?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o,a=r[s],l=a.length,h=0;h<l;++h)(o=a[h])&&no(o,t,e,h,a,n||function(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}(o,e));return new Po(r,this._parents,t,e)};const{}=Math;function Lo(t){return[+t[0],+t[1]]}function Fo(t){return[Lo(t[0]),Lo(t[1])]}["w","e"].map(Ro),["n","s"].map(Ro),["n","w","e","s","nw","ne","sw","se"].map(Ro);function Ro(t){return{type:t}}var Uo=t=>()=>t;function Ho(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:s,x:o,y:a,dx:l,dy:h,dispatch:u}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:h,enumerable:!0,configurable:!0},_:{value:u}})}function Bo(t){return!t.ctrlKey&&!t.button}function jo(){return this.parentNode}function zo(t,e){return null==e?{x:t.x,y:t.y}:e}function qo(){return navigator.maxTouchPoints||"ontouchstart"in this}Ho.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Go(){var r,i,s,o,a=Bo,l=jo,n=zo,e=qo,p={},m=Zr("start","drag","end"),y=0,h=0;function _(t){t.on("mousedown.drag",u).filter(e).on("touchstart.drag",d).on("touchmove.drag",g,zi).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function u(t,e){o||!a.call(this,t,e)||(e=w(this,l.call(this,t,e),t,e,"mouse"))&&(ji(t.view).on("mousemove.drag",c,qi).on("mouseup.drag",f,qi),Yi(t.view),Gi(t),s=!1,r=t.clientX,i=t.clientY,e("start",t))}function c(t){var e,n;Xi(t),s||(e=t.clientX-r,n=t.clientY-i,s=h<e*e+n*n),p.mouse("drag",t)}function f(t){ji(t.view).on("mousemove.drag mouseup.drag",null),Wi(t.view,s),Xi(t),p.mouse("end",t)}function d(t,e){if(a.call(this,t,e))for(var n,r=t.changedTouches,i=l.call(this,t,e),s=r.length,o=0;o<s;++o)(n=w(this,i,t,e,r[o].identifier,r[o]))&&(Gi(t),n("start",t,r[o]))}function g(t){for(var e,n=t.changedTouches,r=n.length,i=0;i<r;++i)(e=p[n[i].identifier])&&(Xi(t),e("drag",t,n[i]))}function v(t){var e,n,r=t.changedTouches,i=r.length;for(o&&clearTimeout(o),o=setTimeout(function(){o=null},500),e=0;e<i;++e)(n=p[r[e].identifier])&&(Gi(t),n("end",t,r[e]))}function w(o,a,t,l,h,e){var u,c,f,d=m.copy(),g=Us(e||t,a);if(null!=(f=n.call(o,new Ho("beforestart",{sourceEvent:t,target:_,identifier:h,active:y,x:g[0],y:g[1],dx:0,dy:0,dispatch:d}),l)))return u=f.x-g[0]||0,c=f.y-g[1]||0,function t(e,n,r){var i,s=g;switch(e){case"start":p[h]=t,i=y++;break;case"end":delete p[h],--y;case"drag":g=Us(r||n,a),i=y}d.call(e,o,new Ho(e,{sourceEvent:n,subject:f,target:_,identifier:h,active:i,x:g[0]+u,y:g[1]+c,dx:g[0]-s[0],dy:g[1]-s[1],dispatch:d}),l)}}return _.filter=function(t){return arguments.length?(a="function"==typeof t?t:Uo(!!t),_):a},_.container=function(t){return arguments.length?(l="function"==typeof t?t:Uo(t),_):l},_.subject=function(t){return arguments.length?(n="function"==typeof t?t:Uo(t),_):n},_.touchable=function(t){return arguments.length?(e="function"==typeof t?t:Uo(!!t),_):e},_.on=function(){var t=m.on.apply(m,arguments);return t===m?_:t},_.clickDistance=function(t){return arguments.length?(h=(t=+t)*t,_):Math.sqrt(h)},_}var Xo=Math.sqrt(50),Yo=Math.sqrt(10),Wo=Math.sqrt(2);function Vo(t,e,n){t=(e-t)/Math.max(0,n),n=Math.floor(Math.log(t)/Math.LN10),t/=Math.pow(10,n);return 0<=n?(Xo<=t?10:Yo<=t?5:Wo<=t?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(Xo<=t?10:Yo<=t?5:Wo<=t?2:1)}function $o(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),n=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),r=r/n;return Xo<=r?n*=10:Yo<=r?n*=5:Wo<=r&&(n*=2),e<t?-n:n}function Ko(t,e){return null==t||null==e?NaN:t<e?-1:e<t?1:e<=t?0:NaN}function Zo(n){let i=n,s=n,o=n;function a(t,e,n=0,r=t.length){if(n<r){if(0!==s(e,e))return r;do{var i=n+r>>>1;o(t[i],e)<0?n=1+i:r=i}while(n<r)}return n}return 1===n.length&&(i=(t,e)=>n(t)-e,s=Ko,o=(t,e)=>Ko(n(t),e)),{left:a,center:function(t,e,n=0,r=t.length){return r=a(t,e,n,r-1),n<r&&i(t[r-1],e)>-i(t[r],e)?r-1:r},right:function(t,e,n=0,r=t.length){if(n<r){if(0!==s(e,e))return r;do{var i=n+r>>>1;o(t[i],e)<=0?n=1+i:r=i}while(n<r)}return n}}}function Qo(e,n){return e=+e,n=+n,function(t){return Math.round(e*(1-t)+n*t)}}var st=Zo(Ko),ht=st.right,Jo=(st.left,Zo(function(t){return null===t?NaN:+t}).center,ht);function ta(t){return+t}var ea=[0,1];function na(t){return t}function ra(e,n){return(n-=e=+e)?function(t){return(t-e)/n}:(t=isNaN(n)?NaN:.5,function(){return t});var t}function ia(t,e,n){var r=t[0],t=t[1],i=e[0],e=e[1],i=t<r?(r=ra(t,r),n(e,i)):(r=ra(r,t),n(i,e));return function(t){return i(r(t))}}function sa(n,t,e){var r=Math.min(n.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=ra(n[o],n[o+1]),s[o]=e(t[o],t[o+1]);return function(t){var e=Jo(n,t,1,r)-1;return s[e](i[e](t))}}function oa(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function aa(){var n,r,e,i,s,o,a=ea,l=ea,h=Fs,u=na;function c(){var e,n,t,r=Math.min(a.length,l.length);return u!==na&&(e=a[0],(n=a[r-1])<e&&(t=e,e=n,n=t),u=function(t){return Math.max(e,Math.min(n,t))}),i=2<r?sa:ia,s=o=null,f}function f(t){return null==t||isNaN(t=+t)?e:(s=s||i(a.map(n),l,h))(n(u(t)))}return f.invert=function(t){return u(r((o=o||i(l,a.map(n),Es))(t)))},f.domain=function(t){return arguments.length?(a=Array.from(t,ta),c()):a.slice()},f.range=function(t){return arguments.length?(l=Array.from(t),c()):l.slice()},f.rangeRound=function(t){return l=Array.from(t),h=Qo,c()},f.clamp=function(t){return arguments.length?(u=!!t||na,c()):u!==na},f.interpolate=function(t){return arguments.length?(h=t,c()):h},f.unknown=function(t){return arguments.length?(e=t,f):e},function(t,e){return n=t,r=e,c()}}function la(){return aa()(na,na)}function ha(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}var ua=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ca(t){if(!(e=ua.exec(t)))throw new Error("invalid format: "+t);var e;return new fa({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function fa(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}ca.prototype=fa.prototype,fa.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};function da(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,e=t.slice(0,n);return[1<e.length?e[0]+e.slice(2):e,+t.slice(n+1)]}function ga(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(ya(e)/3)))-ya(Math.abs(t)))}function pa(t,e){return(e=da(t,e))?(t=e[0],(e=e[1])<0?"0."+new Array(-e).join("0")+t:t.length>e+1?t.slice(0,e+1)+"."+t.slice(e+1):t+new Array(e-t.length+2).join("0")):t+""}var ma,ya=function(t){return(t=da(Math.abs(t)))?t[1]:NaN},_a=function(a,l){return function(t,e){for(var n=t.length,r=[],i=0,s=a[0],o=0;0<n&&0<s&&(e<o+s+1&&(s=Math.max(1,e-o)),r.push(t.substring(n-=s,n+s)),!((o+=s+1)>e));)s=a[i=(i+1)%a.length];return r.reverse().join(l)}},va=function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}},wa=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;0<i&&(i=0)}return 0<i?t.slice(0,i)+t.slice(e+1):t},xa={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return 1e21<=Math.abs(t=Math.round(t))?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>pa(100*t,e),r:pa,s:function(t,e){var n=da(t,e);if(!n)return t+"";var r=n[0],i=n[1],n=i-(ma=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,i=r.length;return n===i?r:i<n?r+new Array(n-i+1).join("0"):0<n?r.slice(0,n)+"."+r.slice(n):"0."+new Array(1-n).join("0")+da(t,Math.max(0,e+n-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)},Aa=function(t){return t},ba=Array.prototype.map,Ma=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ka(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,ya(e)-ya(t))+1}function Ta(t){return Math.max(0,-ya(Math.abs(t)))}var Sa,Na=(Sa=function(t){var A=void 0===t.grouping||void 0===t.thousands?Aa:_a(ba.call(t.grouping,Number),t.thousands+""),r=void 0===t.currency?"":t.currency[0]+"",i=void 0===t.currency?"":t.currency[1]+"",b=void 0===t.decimal?".":t.decimal+"",M=void 0===t.numerals?Aa:va(ba.call(t.numerals,String)),s=void 0===t.percent?"%":t.percent+"",k=void 0===t.minus?"−":t.minus+"",T=void 0===t.nan?"NaN":t.nan+"";function o(t){var h=(t=ca(t)).fill,u=t.align,c=t.sign,e=t.symbol,f=t.zero,d=t.width,g=t.comma,p=t.precision,m=t.trim,y=t.type;"n"===y?(g=!0,y="g"):xa[y]||(void 0===p&&(p=12),m=!0,y="g"),(f||"0"===h&&"="===u)&&(f=!0,h="0",u="=");var _="$"===e?r:"#"===e&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",v="$"===e?i:/[%p]/.test(y)?s:"",w=xa[y],x=/[defgprs%]/.test(y);function n(t){var e,n,r,i=_,s=v;if("c"===y)s=w(t)+s,t="";else{var o=(t=+t)<0||1/t<0;if(t=isNaN(t)?T:w(Math.abs(t),p),m&&(t=wa(t)),i=((o=o&&0==+t&&"+"!==c?!1:o)?"("===c?c:k:"-"===c||"("===c?"":c)+i,s=("s"===y?Ma[8+ma/3]:"")+s+(o&&"("===c?")":""),x)for(e=-1,n=t.length;++e<n;)if((r=t.charCodeAt(e))<48||57<r){s=(46===r?b+t.slice(e+1):t.slice(e))+s,t=t.slice(0,e);break}}g&&!f&&(t=A(t,1/0));var a=i.length+t.length+s.length,l=a<d?new Array(d-a+1).join(h):"";switch(g&&f&&(t=A(l+t,l.length?d-s.length:1/0),l=""),u){case"<":t=i+t+s+l;break;case"=":t=i+l+t+s;break;case"^":t=l.slice(0,a=l.length>>1)+i+t+s+l.slice(a);break;default:t=l+i+t+s}return M(t)}return p=void 0===p?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p)),n.toString=function(){return t+""},n}return{format:o,formatPrefix:function(t,e){var n=o(((t=ca(t)).type="f",t)),e=3*Math.max(-8,Math.min(8,Math.floor(ya(e)/3))),r=Math.pow(10,-e),i=Ma[8+e/3];return function(t){return n(r*t)+i}}}}({thousands:",",grouping:[3],currency:["$",""]})).format,Ea=Sa.formatPrefix;function Oa(h){var u=h.domain;return h.ticks=function(t){var e=u();return function(n,r,t){var e,i,s,o,a=-1;if(t=+t,(n=+n)===(r=+r)&&0<t)return[n];if((e=r<n)&&(i=n,n=r,r=i),0===(o=Vo(n,r,t))||!isFinite(o))return[];if(0<o){let t=Math.round(n/o),e=Math.round(r/o);for(t*o<n&&++t,e*o>r&&--e,s=new Array(i=e-t+1);++a<i;)s[a]=(t+a)*o}else{o=-o;let t=Math.round(n*o),e=Math.round(r*o);for(t/o<n&&++t,e/o>r&&--e,s=new Array(i=e-t+1);++a<i;)s[a]=(t+a)/o}return e&&s.reverse(),s}(e[0],e[e.length-1],null==t?10:t)},h.tickFormat=function(t,e){var n=u();return function(t,e,n,r){var i,s=$o(t,e,n);switch((r=ca(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=ga(s,o))||(r.precision=i),Ea(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=ka(s,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=Ta(s))||(r.precision=i-2*("%"===r.type))}return Na(r)}(n[0],n[n.length-1],null==t?10:t,e)},h.nice=function(t){null==t&&(t=10);var e,n,r=u(),i=0,s=r.length-1,o=r[i],a=r[s],l=10;for(a<o&&(n=o,o=a,a=n,n=i,i=s,s=n);0<l--;){if((n=Vo(o,a,t))===e)return r[i]=o,r[s]=a,u(r);if(0<n)o=Math.floor(o/n)*n,a=Math.ceil(a/n)*n;else{if(!(n<0))break;o=Math.ceil(o*n)/n,a=Math.floor(a*n)/n}e=n}return h},h}function Ia(){var t=la();return t.copy=function(){return oa(t,Ia())},ha.apply(t,arguments),Oa(t)}const Ca=1e3,Pa=6e4,Da=36e5,La=864e5,Fa=7*La,Ra=(La,365*La);var Ua=new Date,Ha=new Date;function Ba(s,o,n,r){function a(t){return s(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=function(t){return s(t=new Date(+t)),t},a.ceil=function(t){return s(t=new Date(t-1)),o(t,1),s(t),t},a.round=function(t){var e=a(t),n=a.ceil(t);return t-e<n-t?e:n},a.offset=function(t,e){return o(t=new Date(+t),null==e?1:Math.floor(e)),t},a.range=function(t,e,n){var r,i=[];if(t=a.ceil(t),n=null==n?1:Math.floor(n),!(t<e&&0<n))return i;for(;i.push(r=new Date(+t)),o(t,n),s(t),r<t&&t<e;);return i},a.filter=function(n){return Ba(function(t){if(t<=t)for(;s(t),!n(t);)t.setTime(t-1)},function(t,e){if(t<=t)if(e<0)for(;++e<=0;)for(;o(t,-1),!n(t););else for(;0<=--e;)for(;o(t,1),!n(t););})},n&&(a.count=function(t,e){return Ua.setTime(+t),Ha.setTime(+e),s(Ua),s(Ha),Math.floor(n(Ua,Ha))},a.every=function(e){return e=Math.floor(e),isFinite(e)&&0<e?1<e?a.filter(r?function(t){return r(t)%e==0}:function(t){return a.count(0,t)%e==0}):a:null}),a}var ja=Ba(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});ja.every=function(n){return n=Math.floor(n),isFinite(n)&&0<n?1<n?Ba(function(t){t.setTime(Math.floor(t/n)*n)},function(t,e){t.setTime(+t+e*n)},function(t,e){return(e-t)/n}):ja:null};var za=ja,lt=(ja.range,Ba(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+e*Ca)},function(t,e){return(e-t)/Ca},function(t){return t.getUTCSeconds()})),qa=lt,ut=(lt.range,Ba(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ca)},function(t,e){t.setTime(+t+e*Pa)},function(t,e){return(e-t)/Pa},function(t){return t.getMinutes()})),Ga=ut,st=(ut.range,Ba(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ca-t.getMinutes()*Pa)},function(t,e){t.setTime(+t+e*Da)},function(t,e){return(e-t)/Da},function(t){return t.getHours()})),Xa=st,ht=(st.range,Ba(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Pa)/La,t=>t.getDate()-1)),Ya=ht;ht.range;function Wa(e){return Ba(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Pa)/Fa})}var Va=Wa(0),$a=Wa(1),lt=Wa(2),ut=Wa(3),Ka=Wa(4),st=Wa(5),ht=Wa(6),lt=(Va.range,$a.range,lt.range,ut.range,Ka.range,st.range,ht.range,Ba(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()})),Za=lt,ut=(lt.range,Ba(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()}));ut.every=function(n){return isFinite(n=Math.floor(n))&&0<n?Ba(function(t){t.setFullYear(Math.floor(t.getFullYear()/n)*n),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e*n)}):null};var Qa=ut,st=(ut.range,Ba(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*Pa)},function(t,e){return(e-t)/Pa},function(t){return t.getUTCMinutes()})),Ja=st,ht=(st.range,Ba(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*Da)},function(t,e){return(e-t)/Da},function(t){return t.getUTCHours()})),tl=ht,lt=(ht.range,Ba(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/La},function(t){return t.getUTCDate()-1})),el=lt;lt.range;function nl(e){return Ba(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/Fa})}var rl=nl(0),il=nl(1),ut=nl(2),st=nl(3),sl=nl(4),ht=nl(5),lt=nl(6),lt=(rl.range,il.range,ut.range,st.range,sl.range,ht.range,lt.range,Ba(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()})),ol=lt,lt=(lt.range,Ba(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()}));lt.every=function(n){return isFinite(n=Math.floor(n))&&0<n?Ba(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/n)*n),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e*n)}):null};var al=lt;lt.range;function ll(a,t,e,n,r,i){const l=[[qa,1,Ca],[qa,5,5e3],[qa,15,15e3],[qa,30,3e4],[i,1,Pa],[i,5,3e5],[i,15,9e5],[i,30,18e5],[r,1,Da],[r,3,3*Da],[r,6,6*Da],[r,12,432e5],[n,1,La],[n,2,2*La],[e,1,Fa],[t,1,2592e6],[t,3,7776e6],[a,1,Ra]];function o(t,e,n){var r=Math.abs(e-t)/n,i=Zo(([,,t])=>t).right(l,r);if(i===l.length)return a.every($o(t/Ra,e/Ra,n));if(0===i)return za.every(Math.max($o(t,e,n),1));const[s,o]=l[r/l[i-1][2]<l[i][2]/r?i-1:i];return s.every(o)}return[function(t,e,n){var r=e<t;r&&([t,e]=[e,t]);const i=n&&"function"==typeof n.range?n:o(t,e,n),s=i?i.range(t,+e+1):[];return r?s.reverse():s},o]}const[hl,ul]=ll(al,ol,rl,el,tl,Ja),[]=ll(Qa,Za,Va,Ya,Xa,Ga);function cl(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function fl(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function dl(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function gl(t){var r=t.dateTime,i=t.date,s=t.time,e=t.periods,n=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,h=xl(e),u=Al(e),c=xl(n),f=Al(n),d=xl(o),g=Al(o),p=xl(a),m=Al(a),y=xl(l),_=Al(l),v={a:function(t){return o[t.getDay()]},A:function(t){return n[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return a[t.getMonth()]},c:null,d:ql,e:ql,f:Vl,g:sh,G:ah,H:Gl,I:Xl,j:Yl,L:Wl,m:$l,M:Kl,p:function(t){return e[+(12<=t.getHours())]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Oh,s:Ih,S:Zl,u:Ql,U:Jl,V:eh,w:nh,W:rh,x:null,X:null,y:ih,Y:oh,Z:lh,"%":Eh},w={a:function(t){return o[t.getUTCDay()]},A:function(t){return n[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return a[t.getUTCMonth()]},c:null,d:hh,e:hh,f:gh,g:kh,G:Sh,H:uh,I:ch,j:fh,L:dh,m:ph,M:mh,p:function(t){return e[+(12<=t.getUTCHours())]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Oh,s:Ih,S:yh,u:_h,U:vh,V:xh,w:Ah,W:bh,x:null,X:null,y:Mh,Y:Th,Z:Nh,"%":Eh},x={a:function(t,e,n){e=d.exec(e.slice(n));return e?(t.w=g.get(e[0].toLowerCase()),n+e[0].length):-1},A:function(t,e,n){e=c.exec(e.slice(n));return e?(t.w=f.get(e[0].toLowerCase()),n+e[0].length):-1},b:function(t,e,n){e=y.exec(e.slice(n));return e?(t.m=_.get(e[0].toLowerCase()),n+e[0].length):-1},B:function(t,e,n){e=p.exec(e.slice(n));return e?(t.m=m.get(e[0].toLowerCase()),n+e[0].length):-1},c:function(t,e,n){return M(t,r,e,n)},d:Pl,e:Pl,f:Hl,g:El,G:Nl,H:Ll,I:Ll,j:Dl,L:Ul,m:Cl,M:Fl,p:function(t,e,n){e=h.exec(e.slice(n));return e?(t.p=u.get(e[0].toLowerCase()),n+e[0].length):-1},q:Il,Q:jl,s:zl,S:Rl,u:Ml,U:kl,V:Tl,w:bl,W:Sl,x:function(t,e,n){return M(t,i,e,n)},X:function(t,e,n){return M(t,s,e,n)},y:El,Y:Nl,Z:Ol,"%":Bl};function A(l,h){return function(t){var e,n,r,i=[],s=-1,o=0,a=l.length;for(t instanceof Date||(t=new Date(+t));++s<a;)37===l.charCodeAt(s)&&(i.push(l.slice(o,s)),null!=(n=pl[e=l.charAt(++s)])?e=l.charAt(++s):n="e"===e?" ":"0",(r=h[e])&&(e=r(t,n)),i.push(e),o=s+1);return i.push(l.slice(o,s)),i.join("")}}function b(i,s){return function(t){var e,n,r=dl(1900,void 0,1);if(M(r,i,t+="",0)!=t.length)return null;if("Q"in r)return new Date(r.Q);if("s"in r)return new Date(1e3*r.s+("L"in r?r.L:0));if(!s||"Z"in r||(r.Z=0),"p"in r&&(r.H=r.H%12+12*r.p),void 0===r.m&&(r.m="q"in r?r.q:0),"V"in r){if(r.V<1||53<r.V)return null;"w"in r||(r.w=1),"Z"in r?(e=4<(n=(e=fl(dl(r.y,0,1))).getUTCDay())||0===n?il.ceil(e):il(e),e=el.offset(e,7*(r.V-1)),r.y=e.getUTCFullYear(),r.m=e.getUTCMonth(),r.d=e.getUTCDate()+(r.w+6)%7):(e=4<(n=(e=cl(dl(r.y,0,1))).getDay())||0===n?$a.ceil(e):$a(e),e=Ya.offset(e,7*(r.V-1)),r.y=e.getFullYear(),r.m=e.getMonth(),r.d=e.getDate()+(r.w+6)%7)}else("W"in r||"U"in r)&&("w"in r||(r.w="u"in r?r.u%7:"W"in r?1:0),n="Z"in r?fl(dl(r.y,0,1)).getUTCDay():cl(dl(r.y,0,1)).getDay(),r.m=0,r.d="W"in r?(r.w+6)%7+7*r.W-(n+5)%7:r.w+7*r.U-(n+6)%7);return"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,fl(r)):cl(r)}}function M(t,e,n,r){for(var i,s,o=0,a=e.length,l=n.length;o<a;){if(l<=r)return-1;if(37===(i=e.charCodeAt(o++))){if(i=e.charAt(o++),!(s=x[i in pl?e.charAt(o++):i])||(r=s(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return v.x=A(i,v),v.X=A(s,v),v.c=A(r,v),w.x=A(i,w),w.X=A(s,w),w.c=A(r,w),{format:function(t){var e=A(t+="",v);return e.toString=function(){return t},e},parse:function(t){var e=b(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=A(t+="",w);return e.toString=function(){return t},e},utcParse:function(t){var e=b(t+="",!0);return e.toString=function(){return t},e}}}var pl={"-":"",_:" ",0:"0"},ml=/^\s*\d+/,yl=/^%/,_l=/[\\^$*+?|[\]().{}]/g;function vl(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",t=i.length;return r+(t<n?new Array(n-t+1).join(e)+i:i)}function wl(t){return t.replace(_l,"\\$&")}function xl(t){return new RegExp("^(?:"+t.map(wl).join("|")+")","i")}function Al(t){return new Map(t.map((t,e)=>[t.toLowerCase(),e]))}function bl(t,e,n){e=ml.exec(e.slice(n,n+1));return e?(t.w=+e[0],n+e[0].length):-1}function Ml(t,e,n){e=ml.exec(e.slice(n,n+1));return e?(t.u=+e[0],n+e[0].length):-1}function kl(t,e,n){e=ml.exec(e.slice(n,n+2));return e?(t.U=+e[0],n+e[0].length):-1}function Tl(t,e,n){e=ml.exec(e.slice(n,n+2));return e?(t.V=+e[0],n+e[0].length):-1}function Sl(t,e,n){e=ml.exec(e.slice(n,n+2));return e?(t.W=+e[0],n+e[0].length):-1}function Nl(t,e,n){e=ml.exec(e.slice(n,n+4));return e?(t.y=+e[0],n+e[0].length):-1}function El(t,e,n){e=ml.exec(e.slice(n,n+2));return e?(t.y=+e[0]+(68<+e[0]?1900:2e3),n+e[0].length):-1}function Ol(t,e,n){e=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return e?(t.Z=e[1]?0:-(e[2]+(e[3]||"00")),n+e[0].length):-1}function Il(t,e,n){e=ml.exec(e.slice(n,n+1));return e?(t.q=3*e[0]-3,n+e[0].length):-1}function Cl(t,e,n){e=ml.exec(e.slice(n,n+2));return e?(t.m=e[0]-1,n+e[0].length):-1}function Pl(t,e,n){e=ml.exec(e.slice(n,n+2));return e?(t.d=+e[0],n+e[0].length):-1}function Dl(t,e,n){e=ml.exec(e.slice(n,n+3));return e?(t.m=0,t.d=+e[0],n+e[0].length):-1}function Ll(t,e,n){e=ml.exec(e.slice(n,n+2));return e?(t.H=+e[0],n+e[0].length):-1}function Fl(t,e,n){e=ml.exec(e.slice(n,n+2));return e?(t.M=+e[0],n+e[0].length):-1}function Rl(t,e,n){e=ml.exec(e.slice(n,n+2));return e?(t.S=+e[0],n+e[0].length):-1}function Ul(t,e,n){e=ml.exec(e.slice(n,n+3));return e?(t.L=+e[0],n+e[0].length):-1}function Hl(t,e,n){e=ml.exec(e.slice(n,n+6));return e?(t.L=Math.floor(e[0]/1e3),n+e[0].length):-1}function Bl(t,e,n){e=yl.exec(e.slice(n,n+1));return e?n+e[0].length:-1}function jl(t,e,n){e=ml.exec(e.slice(n));return e?(t.Q=+e[0],n+e[0].length):-1}function zl(t,e,n){e=ml.exec(e.slice(n));return e?(t.s=+e[0],n+e[0].length):-1}function ql(t,e){return vl(t.getDate(),e,2)}function Gl(t,e){return vl(t.getHours(),e,2)}function Xl(t,e){return vl(t.getHours()%12||12,e,2)}function Yl(t,e){return vl(1+Ya.count(Qa(t),t),e,3)}function Wl(t,e){return vl(t.getMilliseconds(),e,3)}function Vl(t,e){return Wl(t,e)+"000"}function $l(t,e){return vl(t.getMonth()+1,e,2)}function Kl(t,e){return vl(t.getMinutes(),e,2)}function Zl(t,e){return vl(t.getSeconds(),e,2)}function Ql(t){t=t.getDay();return 0===t?7:t}function Jl(t,e){return vl(Va.count(Qa(t)-1,t),e,2)}function th(t){var e=t.getDay();return 4<=e||0===e?Ka(t):Ka.ceil(t)}function eh(t,e){return t=th(t),vl(Ka.count(Qa(t),t)+(4===Qa(t).getDay()),e,2)}function nh(t){return t.getDay()}function rh(t,e){return vl($a.count(Qa(t)-1,t),e,2)}function ih(t,e){return vl(t.getFullYear()%100,e,2)}function sh(t,e){return vl((t=th(t)).getFullYear()%100,e,2)}function oh(t,e){return vl(t.getFullYear()%1e4,e,4)}function ah(t,e){var n=t.getDay();return vl((t=4<=n||0===n?Ka(t):Ka.ceil(t)).getFullYear()%1e4,e,4)}function lh(t){t=t.getTimezoneOffset();return(0<t?"-":(t*=-1,"+"))+vl(t/60|0,"0",2)+vl(t%60,"0",2)}function hh(t,e){return vl(t.getUTCDate(),e,2)}function uh(t,e){return vl(t.getUTCHours(),e,2)}function ch(t,e){return vl(t.getUTCHours()%12||12,e,2)}function fh(t,e){return vl(1+el.count(al(t),t),e,3)}function dh(t,e){return vl(t.getUTCMilliseconds(),e,3)}function gh(t,e){return dh(t,e)+"000"}function ph(t,e){return vl(t.getUTCMonth()+1,e,2)}function mh(t,e){return vl(t.getUTCMinutes(),e,2)}function yh(t,e){return vl(t.getUTCSeconds(),e,2)}function _h(t){t=t.getUTCDay();return 0===t?7:t}function vh(t,e){return vl(rl.count(al(t)-1,t),e,2)}function wh(t){var e=t.getUTCDay();return 4<=e||0===e?sl(t):sl.ceil(t)}function xh(t,e){return t=wh(t),vl(sl.count(al(t),t)+(4===al(t).getUTCDay()),e,2)}function Ah(t){return t.getUTCDay()}function bh(t,e){return vl(il.count(al(t)-1,t),e,2)}function Mh(t,e){return vl(t.getUTCFullYear()%100,e,2)}function kh(t,e){return vl((t=wh(t)).getUTCFullYear()%100,e,2)}function Th(t,e){return vl(t.getUTCFullYear()%1e4,e,4)}function Sh(t,e){var n=t.getUTCDay();return vl((t=4<=n||0===n?sl(t):sl.ceil(t)).getUTCFullYear()%1e4,e,4)}function Nh(){return"+0000"}function Eh(){return"%"}function Oh(t){return+t}function Ih(t){return Math.floor(+t/1e3)}function Ch(t){return new Date(t)}function Ph(t){return t instanceof Date?+t:+new Date(+t)}function Dh(n,a,e,r,i,s,o,l,h,u){var c=la(),f=c.invert,d=c.domain,g=u(".%L"),p=u(":%S"),m=u("%I:%M"),y=u("%I %p"),_=u("%a %d"),v=u("%b %d"),w=u("%B"),x=u("%Y");function A(t){return(h(t)<t?g:l(t)<t?p:o(t)<t?m:s(t)<t?y:r(t)<t?i(t)<t?_:v:e(t)<t?w:x)(t)}return c.invert=function(t){return new Date(f(t))},c.domain=function(t){return arguments.length?d(Array.from(t,Ph)):d().map(Ch)},c.ticks=function(t){var e=d();return n(e[0],e[e.length-1],null==t?10:t)},c.tickFormat=function(t,e){return null==e?A:u(e)},c.nice=function(t){var e,n,r,i,s,o=d();return(t=!t||"function"!=typeof t.range?a(o[0],o[o.length-1],null==t?10:t):t)?d((n=t,r=0,i=(e=(e=o).slice()).length-1,s=e[r],(t=e[i])<s&&(o=r,r=i,i=o,o=s,s=t,t=o),e[r]=n.floor(s),e[i]=n.ceil(t),e)):c},c.copy=function(){return oa(c,Dh(n,a,e,r,i,s,o,l,h,u))},c}var Lh,Fh=(Lh=gl({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})).format,Rh=Lh.parse,Uh=Lh.utcFormat;Lh.utcParse;function Hh(t){return((t=Math.exp(t))+1/t)/2}(function n(f,d,g){function t(t,e){var r,i,s,n,o=t[0],a=t[1],l=t[2],h=e[0],t=e[1],e=e[2],u=h-o,c=t-a,h=u*u+c*c;return(n=h<1e-12?(s=Math.log(e/l)/f,function(t){return[o+t*u,a+t*c,l*Math.exp(f*t*s)]}):(r=Math.sqrt(h),t=(e*e-l*l+g*h)/(2*l*d*r),n=(e*e-l*l-g*h)/(2*e*d*r),i=Math.log(Math.sqrt(t*t+1)-t),s=(Math.log(Math.sqrt(n*n+1)-n)-i)/f,function(t){var e=t*s,n=Hh(i),t=l/(d*r)*(n*(t=f*e+i,((t=Math.exp(2*t))-1)/(t+1))-(t=i,((t=Math.exp(i))-1/t)/2));return[o+t*u,a+t*c,l*n/Hh(f*e+i)]})).duration=1e3*s*f/Math.SQRT2,n}return t.rho=function(t){var e=Math.max(.001,+t),t=e*e;return n(e,t,t*t)},t})(Math.SQRT2,2,4);function Bh(t,e,n){this.k=t,this.x=e,this.y=n}Bh.prototype={constructor:Bh,scale:function(t){return 1===t?this:new Bh(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Bh(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};function jh(t){return null!=t&&-1<t}class zh{constructor(t,e){this.color="#3366cc",this.showColor=!0,this.filter=!1,this.priority=0,this.id=t,this.name="Selection-"+this.id,this.elementIds=[],this.acceptedType=e,this.priority=t}acceptsType(t){return this.acceptedType==t}}class qh{constructor(t){this.name=t}}Fh("%m/%d/%Y"),Fh("%d/%m/%Y");const Gh="%Y-%m-%d %H:%M:%S",Xh=Rh(Gh),Yh=Fh(Gh),Wh={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6,milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:2592e6,years:31536e6};Fh("%w");function Vh(t,e){const n=Fh("%V"),r=new Date(t);switch(e){case 0:return r.getUTCMilliseconds();case 1:return r.getUTCSeconds();case 2:return r.getUTCMinutes();case 3:return r.getUTCHours();case 4:return r.getUTCDay();case 5:return parseInt(n(r));case 6:return r.getUTCMonth()+1;default:return r.getUTCFullYear()}}const $h=["millisecond","second","minute","hour","day","week","month","year","decade","century","millenium"],Kh="[*dgraph*]",Zh=!1;function Qh(t,e,n){return n==Kh?t:n}class Jh{constructor(){this.BOOKMARK_COLORS=this.default_colors,this.selectionColor_pointer=0,this.name="",this.gran_min=0,this.gran_max=Number.MAX_VALUE,this.minWeight=1e7,this.maxWeight=-1e7,this._nodes=[],this._links=[],this.directed=!1,this._nodePairs=[],this._locations=[],this._times=[],this.timeObjects=[],this.nodeOrders=[],this.matrix=[],this.selections=[],this.nodeArrays=new eu,this.linkArrays=new nu,this.nodePairArrays=new ru,this.timeArrays=new iu,this.linkTypeArrays=new su,this.nodeTypeArrays=new ou,this.locationArrays=new au,this.attributeArrays={node:this.nodeArrays,link:this.linkArrays,time:this.timeArrays,nodePair:this.nodePairArrays,linkType:this.linkTypeArrays,nodeType:this.nodeTypeArrays,location:this.locationArrays},this.highlightArrays=new Su,this.highlightFreezeArrays=new Su,this.currentSelection_id=0,this.defaultLinkSelection=this.createSelection("link"),this.defaultNodeSelection=this.createSelection("node"),this.gran_min_NAME="gran_min",this.gran_max_NAME="gran_max_NAME",this.directed_NAME="directed_NAME",this.minWeight_NAME="minWeight_NAME",this.maxWeight_NAME="maxWeight_NAME",this.matrix_NAME="matrix_NAME",this.nodeArrays_NAME="nodeArrays_NAME",this.linkArrays_NAME="linkArrays_NAME",this.nodePairArrays_NAME="nodePairArrays_NAME",this.timeArrays_NAME="timeArrays_NAME",this.linkTypeArrays_NAME="linkTypeArrays_NAME",this.nodeTypeArrays_NAME="nodeTypeArrays_NAME",this.locationArrays_NAME="locationArrays_NAME"}default_colors(t){var e=["#3366cc","#dc3912","#ff9900","#109618","#990099","#0099c6","#dd4477","#66aa00","#b82e2e","#316395","#994499","#22aa99","#aaaa11","#6633cc","#e67300","#8b0707","#651067","#329262","#5574a6","#3b3eac"];return e[t%e.length]}attr(t,e,n){let r;try{r=this.attributeArrays[n][t][e]}catch(t){r=void 0}return r}standardArrayReplacer(t,e){return e instanceof Jh?(console.log("standardReplacer found a DynamicGraph property",t),Kh):"selections"!=t?e:void 0}static timeReviver(t,e,n){return""==t?Nu(e,new pu(e.id,n)):Qh(n,0,e)}static nodeArrayReviver(t,e,n){switch(t){case"":return Nu(e,new eu);case"outLinks":case"inLinks":case"links":return Eu(e,function(){return new du});case"outNeighbors":case"inNeighbors":case"neighbors":return Eu(e,function(){return new du});case"locations":return Eu(e,function(){return new fu});default:return e}}static linkArrayReviver(t,e,n){switch(t){case"":return Nu(e,new nu);case"weights":return Eu(e,function(){return new fu});default:return e}}static nodePairArrayReviver(t,e,n){return""!==t?e:Nu(e,new ru)}static timeArrayReviver(t,e,n){switch(t){case"":return Nu(e,new iu);case"time":return e.map(function(t,e){return new Date(t)});default:return e}}static linkTypeArrayReviver(t,e,n){return""!==t?e:Nu(e,new su)}static nodeTypeArrayReviver(t,e,n){return""!==t?e:Nu(e,new ou)}static locationArrayReviver(t,e,n){return""!==t?e:Nu(e,new au)}loadDynamicGraph(t,e){this.clearSelections(),this.name=e;e=t.getFromStorage(this.name,this.gran_min_NAME);null!=e&&(this.gran_min=e);e=t.getFromStorage(this.name,this.gran_max_NAME);null!=e&&(this.gran_max=e);e=t.getFromStorage(this.name,this.directed_NAME);null!=e&&(this.directed=e);e=t.getFromStorage(this.name,this.minWeight_NAME);null!=e&&(this.minWeight=e);e=t.getFromStorage(this.name,this.maxWeight_NAME);null!=e&&(this.maxWeight=e);e=t.getFromStorage(this.name,this.matrix_NAME);null!=e&&(this.matrix=e);e=t.getFromStorage(this.name,this.nodeArrays_NAME,Jh.nodeArrayReviver);null!=e&&(this.nodeArrays=e);e=t.getFromStorage(this.name,this.linkArrays_NAME,Jh.linkArrayReviver);null!=e&&(this.linkArrays=e);e=t.getFromStorage(this.name,this.nodePairArrays_NAME,Jh.nodePairArrayReviver);null!=e&&(this.nodePairArrays=e);e=t.getFromStorage(this.name,this.timeArrays_NAME,Jh.timeArrayReviver);if(null!=e&&(this.timeArrays=e),"timeArrays"in this&&this.timeArrays)if("momentTime"in this.timeArrays&&"unixTime"in this.timeArrays){const n=this.timeArrays.momentTime;for(let t=0;t<n.length;t++)n[t]=new Date(this.timeArrays.unixTime[t])}else"unixTime"in this.timeArrays?(console.log("No time in timeArrays"),this.timeArrays.momentTime=this.timeArrays.unixTime.map(new Date)):(console.log("No time or unixTime in timeArrays"),this.timeArrays.momentTime=[]);else console.log("No timeArrays"),this.timeArrays=new iu;e=t.getFromStorage(this.name,this.linkTypeArrays_NAME,Jh.linkTypeArrayReviver);null!=e&&(this.linkTypeArrays=e);e=t.getFromStorage(this.name,this.nodeTypeArrays_NAME,Jh.nodeTypeArrayReviver);null!=e&&(this.nodeTypeArrays=e);t=t.getFromStorage(this.name,this.locationArrays_NAME,Jh.locationArrayReviver);null!=t&&(this.locationArrays=t),this.attributeArrays={node:this.nodeArrays,link:this.linkArrays,time:this.timeArrays,nodePair:this.nodePairArrays,linkType:this.linkTypeArrays,nodeType:this.nodeTypeArrays,location:this.locationArrays},this.createGraphObjects(!0,!0),this.createSelections(!0)}saveDynamicGraph(t){t.saveToStorage(this.name,this.gran_min_NAME,this.gran_min),t.saveToStorage(this.name,this.gran_max_NAME,this.gran_max),t.saveToStorage(this.name,this.directed_NAME,this.directed),t.saveToStorage(this.name,this.minWeight_NAME,this.minWeight),t.saveToStorage(this.name,this.maxWeight_NAME,this.maxWeight),t.saveToStorage(this.name,this.matrix_NAME,this.matrix),t.saveToStorage(this.name,this.nodeArrays_NAME,this.nodeArrays,this.standardArrayReplacer),t.saveToStorage(this.name,this.linkArrays_NAME,this.linkArrays,this.standardArrayReplacer),t.saveToStorage(this.name,this.nodePairArrays_NAME,this.nodePairArrays,this.standardArrayReplacer),t.saveToStorage(this.name,this.timeArrays_NAME,this.timeArrays,this.standardArrayReplacer),t.saveToStorage(this.name,this.linkTypeArrays_NAME,this.linkTypeArrays,this.standardArrayReplacer),t.saveToStorage(this.name,this.nodeTypeArrays_NAME,this.nodeTypeArrays,this.standardArrayReplacer),t.saveToStorage(this.name,this.locationArrays_NAME,this.locationArrays,this.standardArrayReplacer)}delete(t){t.removeFromStorage(this.name,this.gran_min_NAME),t.removeFromStorage(this.name,this.gran_max_NAME),t.removeFromStorage(this.name,this.directed_NAME),t.removeFromStorage(this.name,this.minWeight_NAME),t.removeFromStorage(this.name,this.maxWeight_NAME),t.removeFromStorage(this.name,this.matrix_NAME),t.removeFromStorage(this.name,this.nodeArrays_NAME),t.removeFromStorage(this.name,this.linkArrays_NAME),t.removeFromStorage(this.name,this.nodePairArrays_NAME),t.removeFromStorage(this.name,this.timeArrays_NAME),t.removeFromStorage(this.name,this.linkTypeArrays_NAME),t.removeFromStorage(this.name,this.nodeTypeArrays_NAME),t.removeFromStorage(this.name,this.locationArrays_NAME)}debugCompareTo(t){let e=!0;return this.name!=t.name&&(console.log("name different"),e=!1),this.gran_min!=t.gran_min&&(console.log("gran_min different",this.gran_min,t.gran_min),e=!1),this.gran_max!=t.gran_max&&(console.log("gran_max different",this.gran_max,t.gran_max),e=!1),this.directed!=t.directed&&(console.log("directed different",this.directed,t.directed),e=!1),this._nodes.length==t._nodes.length&&Ou(this._nodes,t._nodes,2)||(console.log("nodes different"),e=!1),this._links.length==t._links.length&&Ou(this._links,t._links,2)||(console.log("links different"),e=!1),this._nodePairs.length==t._nodePairs.length&&Ou(this._nodePairs,t._nodePairs,2)||(console.log("nodePairs different"),e=!1),this._locations.length==t._locations.length&&Ou(this._locations,t._locations,2)||(console.log("locations different"),e=!1),this._times.length==t._times.length&&Ou(this._times,t._times,2)||(console.log("times different"),e=!1),(this.nodeOrders&&this.nodeOrders.length!=t.nodeOrders.length||!Ou(this.nodeOrders,t.nodeOrders,2))&&(console.log("nodeOrders different",this.nodeOrders,t.nodeOrders),e=!1),this.matrix.length==t.matrix.length&&Ou(this.matrix,t.matrix,2)||(console.log("matrix different",this.matrix,t.matrix),e=!1),this.nodeArrays.length==t.nodeArrays.length&&Ou(this.nodeArrays,t.nodeArrays,2)||(console.log("nodeArrays different",this.nodeArrays,t.nodeArrays),e=!1),this.linkArrays.length==t.linkArrays.length&&Ou(this.linkArrays,t.linkArrays,2)||(console.log("linkArrays different",this.linkArrays,t.linkArrays),e=!1),this.nodePairArrays.length==t.nodePairArrays.length&&Ou(this.nodePairArrays,t.nodePairArrays,2)||(console.log("nodePairArrays different",this.nodePairArrays,t.nodePairArrays),e=!1),this.timeArrays.length==t.timeArrays.length&&Ou(this.timeArrays,t.timeArrays,2)||(console.log("timeArrays different",this.timeArrays,t.timeArrays),e=!1),this.linkTypeArrays.length==t.linkTypeArrays.length&&Ou(this.linkTypeArrays,t.linkTypeArrays,2)||(console.log("linkTypeArrays different",this.linkTypeArrays,t.linkTypeArrays),e=!1),this.nodeTypeArrays.length==t.nodeTypeArrays.length&&Ou(this.nodeTypeArrays,t.nodeTypeArrays,2)||(console.log("nodeTypeArrays different",this.nodeTypeArrays,t.nodeTypeArrays),e=!1),this.locationArrays.length==t.locationArrays.length&&Ou(this.locationArrays,t.locationArrays,2)||(console.log("locationArrays different",this.locationArrays,t.locationArrays),e=!1),this.defaultLinkSelection.elementIds.length==t.defaultLinkSelection.elementIds.length&&Ou(this.defaultLinkSelection,t.defaultLinkSelection,2)||(console.log("defaultLinkSelection different",this.defaultLinkSelection,t.defaultLinkSelection),e=!1),this.defaultNodeSelection.elementIds.length==t.defaultNodeSelection.elementIds.length&&Ou(this.defaultNodeSelection,t.defaultNodeSelection,2)||(console.log("defaultNodeSelection different",this.defaultNodeSelection,t.defaultNodeSelection),e=!1),this.selections.length==t.selections.length&&Ou(this.selections,t.selections,2)||(console.log("selections different",this.selections,t.selections),e=!1),e}initDynamicGraph(n){var r,e,i,s,o,a;this.clearSelections(),console.log("[dynamicgraph.ts] Create dynamic graph for ",n.name,n),this.name=n.name,this.directed=n.directed,this.gran_min=0,this.gran_max=0;let l;const h=[];let u;if(jh(n.linkSchema.time)){console.log("GEtting unix times for all times - linktable"),console.log(n.linkTable);for(let t=0;t<n.linkTable.length;t++)l=n.linkTable[t][n.linkSchema.time],console.log(n.linkTable[t]),u=null===(r=Xh(l))||void 0===r?void 0:r.getTime(),null!=u&&-1==h.indexOf(u)&&h.push(u);h.sort(Iu);let e=99999999999999;for(let t=0;t<h.length-2;t++)e=Math.min(e,h[t+1]-h[t]);1e3<=e&&(this.gran_min=1),6e4<=e&&(this.gran_min=2),36e5<=e&&(this.gran_min=3),864e5<=e&&(this.gran_min=4),6048e5<=e&&(this.gran_min=5),2592e6<=e&&(this.gran_min=6),31104e6<=e&&(this.gran_min=7),31104e7<=e&&(this.gran_min=8),31104e8<=e&&(this.gran_min=9),31104e9<=e&&(this.gran_min=10),e=h[h.length-1]-h[0],this.gran_max=0,1e3<=e&&(this.gran_max=1),6e4<=e&&(this.gran_max=2),36e5<=e&&(this.gran_max=3),864e5<=e&&(this.gran_max=4),6048e5<=e&&(this.gran_max=5),2592e6<=e&&(this.gran_max=6),31104e6<=e&&(this.gran_max=7),31104e7<=e&&(this.gran_max=8),31104e8<=e&&(this.gran_max=9),31104e9<=e&&(this.gran_max=10),console.log("[Dynamic Graph] Minimal granularity",$h[this.gran_min]),console.log("[Dynamic Graph] Maximal granularity",$h[this.gran_max]);for(let t=0;t<h.length;t++)this.timeArrays.id.push(t),this.timeArrays.momentTime.push(new Date(h[t])),this.timeArrays.label.push(Yh(this.timeArrays.momentTime[t])),this.timeArrays.unixTime.push(h[t]),this.timeArrays.selections.push([]),this.timeArrays.filter.push(!1),this.timeArrays.links.push([]),this._times.push(new pu(t,this));for(let t=0;t<=$h.length;t++)this.timeObjects.push([])}if(0==this.timeArrays.length&&(this.timeArrays.id.push(0),this.timeArrays.momentTime.push(new Date(0)),this.timeArrays.unixTime.push(0),this.timeArrays.selections.push([]),this.timeArrays.filter.push(!1),this.timeArrays.links.push([]),this._times.push(new pu(0,this))),console.assert(!n.locationTable||jh(n.locationSchema.id)),n.locationTable)for(let t=0;t<n.locationTable.length;t++)this.locationArrays.id.push(n.locationTable[t][n.locationSchema.id]),this.locationArrays.label.push(n.locationTable[t][n.locationSchema.label]),this.locationArrays.longitude.push(n.locationTable[t][n.locationSchema.longitude]),this.locationArrays.latitude.push(n.locationTable[t][n.locationSchema.latitude]),this.locationArrays.x.push(n.locationTable[t][n.locationSchema.x]),this.locationArrays.y.push(n.locationTable[t][n.locationSchema.y]),this.locationArrays.z.push(n.locationTable[t][n.locationSchema.z]),this.locationArrays.radius.push(n.locationTable[t][n.locationSchema.radius]);"id"in this.locationArrays&&console.log("locations",this.locationArrays.id.length);let c,f,d;console.assert(0==n.nodeTable.length||jh(n.nodeSchema.id),"either there is no nodeTable data, or we have a schema for the nodetable");let g,p;const m=[];for(const t in n.nodeSchema)Object.prototype.hasOwnProperty.call(n.nodeSchema,t)&&"id"!=t&&"label"!=t&&"time"!=t&&"name"!=t&&"nodeType"!=t&&"location"!=t&&"constructor"!=t&&(m.push(t),this.nodeArrays[t]=[]);for(let t=0;t<n.nodeTable.length;t++){if(c=n.nodeTable[t],e=c[n.nodeSchema.id],f=this.nodeArrays.id.indexOf(e),-1==f&&(f=this.nodeArrays.id.length,this.nodeArrays.id.push(e),this.nodeArrays.nodeType.push(""),this.nodeArrays.outLinks.push(new du),this.nodeArrays.inLinks.push(new du),this.nodeArrays.links.push(new du),this.nodeArrays.outNeighbors.push(new du),this.nodeArrays.inNeighbors.push(new du),this.nodeArrays.neighbors.push(new du),this.nodeArrays.selections.push([]),this.nodeArrays.filter.push(!1),this.nodeArrays.locations.push(new fu),this.nodeArrays.attributes.push(new Object),this.nodeArrays.color.push(""),this.nodeArrays.shape.push(""),jh(n.nodeSchema.label)?this.nodeArrays.label.push(c[n.nodeSchema.label]):this.nodeArrays.label.push(c[n.nodeSchema.id])),d=jh(n.nodeSchema.time)?(l=c[n.nodeSchema.time],console.log("params"),console.log(l),console.log(Gh),console.log(null===(i=Xh(l))||void 0===i?void 0:i.toUTCString()),console.log(null===(i=Xh(l))||void 0===i?void 0:i.getTime()),i=this.getTimeIdForUnixTime(null===(i=Xh(l))||void 0===i?void 0:i.getTime()),null==l||null==i?this._times[0]:this._times[i]):this._times[0],null==d&&(d=this._times[0]),jh(n.nodeSchema.location)){var y=c[n.nodeSchema.location];if(null==y)continue;this.nodeArrays.locations[e].set(d,y)}jh(n.nodeSchema.shape)&&(y=c[n.nodeSchema.shape],this.nodeArrays.shape.push(y)),jh(n.nodeSchema.nodeType)&&(g=n.nodeTable[t][n.nodeSchema.nodeType],p=this.nodeTypeArrays.name.indexOf(g),p<0&&(p=this.nodeTypeArrays.length,this.nodeTypeArrays.id.push(p),this.nodeTypeArrays.name.push(g)),this.nodeArrays.nodeType[f]=g,n.nodeTable[t][n.nodeSchema.nodeType]=p);for(let t=0;t<m.length;t++){var _=m[t];this.nodeArrays[_].push(c[n.nodeSchema[_]])}}if("id"in this.nodeArrays)for(let t=0;t<this.nodeArrays.id.length;t++)this.matrix.push(function(t,e){const n=[];for(;e--;)n[e]=t;return n}(void 0,this.nodeArrays.id.length));let v,w;const x=[];for(const S in n.linkSchema)Object.prototype.hasOwnProperty.call(n.linkSchema,S)&&"id"!=S&&"linkType"!=S&&"time"!=S&&"name"!=S&&"source"!=S&&"target"!=S&&"weight"!=S&&"directed"!=S&&(x.push(S),this.linkArrays[S]=[]);console.log("linkUserProperties",x),console.assert(0==n.linkTable.length||jh(n.linkSchema.id)&&jh(n.linkSchema.source)&&jh(n.linkSchema.target),"either there are no links, or the linkschema is defined");for(let t=0;t<n.linkTable.length;t++){c=n.linkTable[t],o=c[n.linkSchema.id],this.linkArrays.directed.push(!1),-1==this.linkArrays.id.indexOf(o)&&(this.linkArrays.id[o]=o,this.linkArrays.source[o]=c[n.linkSchema.source],this.linkArrays.target[o]=c[n.linkSchema.target],this.linkArrays.linkType[o]=c[n.linkSchema.linkType],this.linkArrays.directed[o]=c[n.linkSchema.directed],this.linkArrays.weights[o]=new fu,this.linkArrays.presence[o]=[],this.linkArrays.selections.push([]),this.linkArrays.nodePair.push(void 0),this.linkArrays.filter.push(!1)),v=jh(n.linkSchema.time)?(l=n.linkTable[t][n.linkSchema.time],u=null===(s=Xh(l))||void 0===s?void 0:s.getTime(),null!=(a=u?this.getTimeIdForUnixTime(u):void 0)?a:0):0,d=this._times[v],this.linkArrays.presence[o].push(v),jh(n.linkSchema.weight)&&null!=n.linkTable[t][n.linkSchema.weight]?(this.linkArrays.weights[o].set(d,n.linkTable[t][n.linkSchema.weight]),this.minWeight=Math.min(this.minWeight,n.linkTable[t][n.linkSchema.weight]),this.maxWeight=Math.max(this.maxWeight,n.linkTable[t][n.linkSchema.weight])):(this.minWeight=0,this.maxWeight=1,this.linkArrays.weights[o].set(d,1)),s=this.nodeArrays.id.indexOf(c[n.linkSchema.source]),a=this.nodeArrays.id.indexOf(c[n.linkSchema.target]),this.nodeArrays.neighbors[s].add(d,a),this.nodeArrays.neighbors[a].add(d,s),this.nodeArrays.links[s].add(d,o),this.nodeArrays.links[a].add(d,o),this.linkArrays.directed[t]&&(this.nodeArrays.outNeighbors[s].add(d,a),this.nodeArrays.inNeighbors[a].add(d,s),this.nodeArrays.outLinks[s].add(d,o),this.nodeArrays.inLinks[a].add(d,o)),w=this.matrix[s][a],jh(w)||(w=this.nodePairArrays.length,this.matrix[s][a]=w,this.nodePairArrays.id.push(w),this.nodePairArrays.source.push(s),this.nodePairArrays.target.push(a),this.nodePairArrays.links.push([]),this.nodePairArrays.selections.push([]),this.nodePairArrays.filter.push(!1)),-1==this.nodePairArrays.links[w].indexOf(o)&&(this.nodePairArrays.links[w].push(o),this.linkArrays.nodePair[o]=w),jh(n.linkSchema.linkType)&&(g=n.linkTable[t][n.linkSchema.linkType],p=this.linkTypeArrays.name.indexOf(g),p<0&&(p=this.linkTypeArrays.length,this.linkTypeArrays.id.push(p),this.linkTypeArrays.name.push(g)),n.linkTable[t][n.linkSchema.linkType]=p);for(let t=0;t<x.length;t++){var A=x[t];this.linkArrays[A].push(c[n.linkSchema[A]])}}for(let e=0;e<this.linkArrays.length;e++)for(let t=0;t<this.timeArrays.length;t++)this.linkArrays.weights[e]&&Object.prototype.hasOwnProperty.call(this.linkArrays.weights[e].toArray(),this.timeArrays.id[t].toString())&&this.timeArrays.links[t].push(this.linkArrays.id[e]);const b=new Set(["#e4549b","#a33a36","#bd6221","#dfba47","#b5b867","#479b7f","#335b8e","#78387d"]),M={};this.nodeArrays.color.forEach(function(t){var e;M[t]||(e=(e=Array.from(b))[Math.floor(Math.random()*e.length)],M[t]=e,b.delete(e))});const k=new Set(["cross","diamond","square","triangle"]),T={};this.nodeArrays.shape.forEach(function(t){var e;T[t]||(e=(e=Array.from(k))[Math.floor(Math.random()*e.length)],T[t]=e,k.delete(e))}),console.log("[Dynamic Graph] Dynamic Graph created: ",this.nodeArrays.length),console.log("[Dynamic Graph]    - Nodes: ",this.nodeArrays.length),console.log("[Dynamic Graph]    - Edges: ",this.linkArrays.length),console.log("[Dynamic Graph]    - Times: ",this.timeArrays.length),console.log("[Dynamic Graph]    - Link types: ",this.linkTypeArrays.length),console.log("[Dynamic Graph]    - Node Pairs: ",this.nodePairArrays.length),console.log('>>>this.nodeArrays["neighbors"][0]',this.nodeArrays.neighbors[0]),this.createGraphObjects(!0,!0),this.createSelections(!1)}createSelections(t){if(t){"nodeArrays"in this&&this.nodeArrays||(this.nodeArrays=new eu,this.linkArrays=new nu,this.timeArrays=new iu,this.nodePairArrays=new ru),this.nodeArrays.selections=new Array(this.nodeArrays.length);for(let t=0;t<this.nodeArrays.selections.length;t++)this.nodeArrays.selections[t]=[];this.linkArrays.selections=new Array(this.linkArrays.length);for(let t=0;t<this.linkArrays.selections.length;t++)this.linkArrays.selections[t]=[];this.timeArrays.selections=new Array(this.timeArrays.length);for(let t=0;t<this.timeArrays.selections.length;t++)this.timeArrays.selections[t]=[];this.nodePairArrays.selections=new Array(this.nodePairArrays.length);for(let t=0;t<this.nodePairArrays.selections.length;t++)this.nodePairArrays.selections[t]=[]}this.defaultNodeSelection=this.createSelection("node"),this.defaultNodeSelection.name="Unselected";for(let t=0;t<this._nodes.length;t++)this.defaultNodeSelection.elementIds.push(t),this.addToAttributeArraysSelection(this.defaultNodeSelection,"node",this._nodes[t].id());this.defaultNodeSelection.color="#000000",this.defaultNodeSelection.showColor=!1,this.defaultNodeSelection.priority=1e4,this.selectionColor_pointer--,this.defaultLinkSelection=this.createSelection("link"),this.defaultLinkSelection.name="Unselected";for(let t=0;t<this._links.length;t++)this.defaultLinkSelection.elementIds.push(t),this.addToAttributeArraysSelection(this.defaultLinkSelection,"link",this._links[t].id());this.defaultLinkSelection.color="#000000",this.defaultLinkSelection.showColor=!1,this.defaultLinkSelection.priority=1e4,this.selectionColor_pointer--;let e=[],n,r,i;const s=[];for(let t=0;t<this.nodeArrays.nodeType.length;t++)n=this.nodeArrays.nodeType[t],null!=n&&0!=n.length&&"undefined"!=n&&(r=e.indexOf(n),-1==r?(i=this.createSelection("node"),i.name=n,s.push(i),e.push(n)):i=s[r],this.addElementToSelection(i,this._nodes[t]));1==s.length&&(console.log("nodeSelections[0]:",s[0]),s[0].color="#444"),e=[];const o=[];for(let t=0;t<this.linkArrays.linkType.length;t++)n=this.linkArrays.linkType[t],n&&"undefined"!=n&&(r=e.indexOf(n),-1==r?(i=this.createSelection("link"),i.name=n,o.push(i),e.push(n)):i=o[r],this.addElementToSelection(i,this._links[t]));1==o.length&&(o[0].color="#444"),this.currentSelection_id=0}createGraphObjects(t,e){console.log("[DynamicNetwork:createGraph()] >>> ");var n,r=Date.now();if(this.locationArrays&&"id"in this.locationArrays)for(let t=0;t<this.locationArrays.id.length;t++)this._locations.push(new _u(this.locationArrays.id[t],this));else this.locationArrays=new au;const i=[];if("nodeArrays"in this&&this.nodeArrays)for(let t=0;t<this.nodeArrays.id.length;t++)i.push(new Mu(t,this));const s=[];if("linkArrays"in this&&this.linkArrays)for(let t=0;t<this.linkArrays.source.length;t++)n=new Tu(t,this),s.push(n);if("nodePairArrays"in this&&this.nodePairArrays)for(let t=0;t<this.nodePairArrays.length;t++)this.nodePairArrays.links[t],this._nodePairs.push(new wu(t,this));if(this._nodes=i,this._links=s,t){this._times=[];for(let t=0;t<this.timeArrays.length;t++)this._times.push(new pu(t,this))}console.log("[DynamicNetwork:getGraph()] <<< ",Date.now()-r,"msec")}nodeAttr(t,e){return this.attr(t,e,"node")}linkAttr(t,e){return this.attr(t,e,"link")}pairAttr(t,e){return this.attr(t,e,"nodePair")}timeAttr(t,e){return this.attr(t,e,"time")}get startTime(){return this._times[0]}get endTime(){return this._times[this._times.length-1]}highlight(t,e){if("freeze"==t)return this.highlight("resetFreeze"),void this.highlight("addFreeze",e);if("resetFreeze"==t)return this.highlightFreezeArrays.nodeIds=[],this.highlightFreezeArrays.linkIds=[],this.highlightFreezeArrays.nodePairIds=[],void(this.highlightFreezeArrays.timeIds=[]);if("reset"==t)return this.highlightArrays.nodeIds=[],this.highlightArrays.linkIds=[],this.highlightArrays.nodePairIds=[],void(this.highlightArrays.timeIds=[]);if(e){if("set"==t)return this.highlight("reset"),void this.highlight("add",e);if("add"==t)for(const i in e)for(let t=0;t<e[i].length;t++)this.highlightArrays[i].push(e[i][t]);else if("remove"==t){var n;for(const s in e)for(let t=0;t<e[s].length;t++)0<=(n=this.highlightArrays[s].indexOf(e[s][t]))&&this.highlightArrays[s].splice(n,1)}if("addFreeze"==t)for(const o in e)for(let t=0;t<e[o].length;t++)this.highlightFreezeArrays[o].push(e[o][t]);else if("removeFreeze"==t){var r;for(const a in e)for(let t=0;t<e[a].length;t++)0<=(r=this.highlightFreezeArrays[a].indexOf(e[a][t]))&&this.highlightFreezeArrays[a].splice(r,1)}}else console.error("[DynamicGraph] highlight: idCompound not set!")}selection(t,e,n){null==n&&(n=this.currentSelection_id);const r=this.getSelection(n);if(r)if("set"==t){const i=new Su;i[r.acceptedType+"s"]=r.elementIds,this.selection("remove",i,n),this.selection("add",e,n)}else"add"==t?(e.linkIds.forEach(t=>this.addToSelectionByTypeAndId(r,"link",t)),e.nodeIds.forEach(t=>this.addToSelectionByTypeAndId(r,"node",t)),e.timeIds.forEach(t=>this.addToSelectionByTypeAndId(r,"time",t)),e.nodePairIds.forEach(t=>this.addToSelectionByTypeAndId(r,"nodePair",t))):"remove"==t&&(e.linkIds.forEach(t=>this.removeFromSelectionByTypeAndId(r,"link",t)),e.nodeIds.forEach(t=>this.removeFromSelectionByTypeAndId(r,"node",t)),e.timeIds.forEach(t=>this.removeFromSelectionByTypeAndId(r,"time",t)),e.nodePairIds.forEach(t=>this.removeFromSelectionByTypeAndId(r,"nodePair",t)));else console.error("[DynamicGraph] Selection with ",n,"not found in ",this.selections)}addToAttributeArraysSelection(e,n,r){var i=this.attributeArrays[n].selections[r];for(let t=0;t<i.length;t++)if(i[t].priority>e.priority)return void this.attributeArrays[n].selections[r].splice(t,0,e);this.attributeArrays[n].selections[r].push(e)}removeFromAttributeArraysSelection(e,n,r){var i=this.attributeArrays[n].selections[r];for(let t=0;t<i.length;t++)i[t]==e&&this.attributeArrays[n].selections[r].splice(t,1)}addElementToSelection(t,e){this.addToSelectionByTypeAndId(t,e.type,e.id())}addToSelectionByTypeAndId(e,n,r){if(n==e.acceptedType){e.elementIds.push(r),this.addToAttributeArraysSelection(e,n,r);let t;"node"==n?(t=this.defaultNodeSelection.elementIds.indexOf(r),-1<t&&(this.removeFromAttributeArraysSelection(this.defaultNodeSelection,n,r),this.defaultNodeSelection.elementIds.splice(t,1))):"link"==n&&(t=this.defaultLinkSelection.elementIds.indexOf(r),-1<t&&(this.removeFromAttributeArraysSelection(this.defaultLinkSelection,n,r),this.defaultLinkSelection.elementIds.splice(t,1)))}else console.log("attempting to put object of the wrong type into a selection. "+n+" !="+e.acceptedType)}removeElementFromSelection(t,e){this.removeFromSelectionByTypeAndId(t,e.type,e.id())}removeFromSelectionByTypeAndId(t,e,n){var r=t.elementIds.indexOf(n);-1!=r&&(t.elementIds.splice(r,1),this.removeFromAttributeArraysSelection(t,e,n),0==this.getSelectionsByTypeAndId(e,n).length&&("node"==e?(this.defaultNodeSelection.elementIds.push(n),this.addToAttributeArraysSelection(this.defaultNodeSelection,e,n)):"link"==e&&(this.defaultLinkSelection.elementIds.push(n),this.addToAttributeArraysSelection(this.defaultLinkSelection,e,n))))}getSelectionsByTypeAndId(t,e){return this.attributeArrays[t].selections[e]}filterSelection(t,e){const n=this.getSelection(t);null!=n&&(n.filter=e)}isFiltered(t,e){return this.attributeArrays[e+"s"].filter}isHighlighted(t,e){return-1<this.highlightArrays[e+"Ids"].indexOf(t)||-1<this.highlightFreezeArrays[e+"Ids"].indexOf(t)}isFrozen(t,e){return-1<this.highlightFreezeArrays[e+"Ids"].indexOf(t)}getHighlightedIds(t){return this.highlightArrays[t+"Ids"]}setCurrentSelection(t){console.log("[DynamicGraph] setCurrentSelectionId ",t),this.currentSelection_id=t}getCurrentSelection(){return this.getSelection(this.currentSelection_id)}addSelection(t,e,n,r){const i=this.createSelection(n);i.id=t,i.color=e,i.priority=r}createSelection(t){const e=new zh(this.selections.length,t);return e.color=this.BOOKMARK_COLORS(this.selectionColor_pointer%10),this.selectionColor_pointer++,this.selections.push(e),e}deleteSelection(t){const e=this.getSelection(t);if(null!=e){const n=new Su;n[e.acceptedType+"Ids"]=e.elementIds.slice(0),console.log("Delete selection->remove elemeents",e.elementIds.slice(0)),this.selection("remove",n,e.id),this.selections.splice(this.selections.indexOf(e),1)}}setSelectionColor(t,e){const n=this.getSelection(t);n&&(n.color=e)}getSelections(e){const n=[];if(e){for(let t=0;t<this.selections.length;t++)this.selections[t].acceptsType(e)&&n.push(this.selections[t]);return n}return this.selections}getSelection(e){for(let t=0;t<this.selections.length;t++)if(e==this.selections[t].id)return this.selections[t];console.error("[DynamicGraph] No selection with id ",e,"found!")}clearSelections(){this.selections=[]}getTimeIdForUnixTime(t){let e;for(console.log("unixTime: "),console.log(t),e=0;e<this.timeArrays.length;e++)if(t==this.timeArrays.unixTime[e])return e;console.error("Time object for unix time",t,"not found!")}addNodeOrdering(e,t){for(let t=0;t<this.nodeOrders.length;t++)if(this.nodeOrders[t].name==e)return void console.error("Ordering",e,"already exists");t=new lu(e,t);this.nodeOrders.push(t)}setNodeOrdering(e,n){for(let t=0;t<this.nodeOrders.length;t++)if(this.nodeOrders[t].name==e)return void(this.nodeOrders[t].order=n);console.error("Ordering",e,"does not exist")}removeNodeOrdering(e,t){for(let t=0;t<this.nodeOrders.length;t++)this.nodeOrders[t].name==e&&this.nodeOrders.splice(t,1)}getNodeOrder(e){for(let t=0;t<this.nodeOrders.length;t++)if(this.nodeOrders[t].name==e)return this.nodeOrders[t];console.error("Ordering",e,"not found!")}nodes(){return new bu(this.nodeArrays.id,this)}links(){return new ku(this.linkArrays.id,this)}times(){return new gu(this.timeArrays.id,this)}locations(){return new mu(this.locationArrays.id,this)}nodePairs(){return new vu(this.nodePairArrays.id,this)}linksBetween(t,e){let n=this.matrix[t.id()][e.id()];if(null==n&&(n=this.matrix[e.id()][t.id()]),null==n)return new ku([],this);const r=this.nodePair(n);return null!=r?new ku(r.links().toArray(),this):new ku([],this)}get(t,e){return-1<t.indexOf("nodePair")?this.nodePair(e):-1<t.indexOf("node")?this.node(e):-1<t.indexOf("link")?this.link(e):-1<t.indexOf("time")?this.time(e):-1<t.indexOf("locations")?this.location(e):void 0}getAll(t){return"nodes"==t?this.nodes():"links"==t?this.links():"times"==t?this.times():"nodePairs"==t?this.nodePairs():this.locations()}node(e){for(let t=0;t<this._nodes.length;t++)if(this._nodes[t].id()==e)return this._nodes[t]}link(e){for(let t=0;t<this._links.length;t++)if(this._links[t].id()==e)return this._links[t]}time(e){for(let t=0;t<this._times.length;t++)if(this._times[t].id()==e)return this._times[t]}location(e){for(let t=0;t<this._locations.length;t++)if(this._locations[t].id()==e)return this._locations[t]}nodePair(e){for(let t=0;t<this._nodePairs.length;t++)if(this._nodePairs[t].id()==e)return this._nodePairs[t]}getMinGranularity(){return this.gran_min}getMaxGranularity(){return this.gran_max}}class tu{constructor(){this.id=[]}get length(){return this.id.length}}class eu extends tu{constructor(){super(...arguments),this.id=[],this.label=[],this.outLinks=[],this.inLinks=[],this.links=[],this.outNeighbors=[],this.inNeighbors=[],this.neighbors=[],this.selections=[],this.attributes=[],this.locations=[],this.filter=[],this.nodeType=[],this.color=[],this.shape=[]}}class nu extends tu{constructor(){super(...arguments),this.source=[],this.target=[],this.linkType=[],this.directed=[],this.nodePair=[],this.presence=[],this.weights=[],this.selections=[],this.filter=[],this.attributes=new Object}}class ru extends tu{constructor(){super(...arguments),this.source=[],this.target=[],this.links=[],this.selections=[],this.filter=[]}}class iu extends tu{constructor(){super(...arguments),this.id=[],this.momentTime=[],this.label=[],this.unixTime=[],this.selections=[],this.filter=[],this.links=[]}}class su extends tu{constructor(){super(...arguments),this.name=[],this.count=[],this.color=[],this.filter=[]}}class ou extends tu{constructor(){super(...arguments),this.name=[],this.count=[],this.color=[],this.filter=[]}}class au extends tu{constructor(){super(...arguments),this.id=[],this.label=[],this.longitude=[],this.latitude=[],this.x=[],this.y=[],this.z=[],this.radius=[]}}class lu{constructor(t,e){this.order=[],this.name=t,this.order=e}}class hu{constructor(e){if(this._elements=[],e)for(let t=0;t<e.length;t++)null!=e[t]&&this._elements.push(e[t])}addUnique(t){-1==this._elements.indexOf(t)&&this._elements.push(t)}add(t){this._elements.push(t)}addAll(e){for(let t=0;t<e.length;t++)null!=e[t]&&this._elements.push(e[t])}addAllUnique(e){for(let t=0;t<e.length;t++)this.addUnique(e[t])}get length(){return this._elements.length}size(){return this._elements.length}ids(){return this._elements}removeDuplicates(){var e=this._elements.slice(0);this._elements=[];for(let t=0;t<e.length;t++)-1==this._elements.indexOf(e[t])&&this._elements.push(e[t]);return this}generic_intersection(n){const r=[];for(let e=0;e<this._elements.length;e++)for(let t=0;t<n._elements.length;t++)this._elements[e]==n._elements[t]&&r.push(this._elements[e]);return new hu(r)}}class uu extends hu{constructor(t,e,n){super(t),this.g=e,this.elementType=n}generic_filter(e){const n=[];for(let t=0;t<this._elements.length;t++)try{e(this.g.get(this.elementType,this._elements[t]))&&n.push(this._elements[t])}catch(t){}return n}generic_selected(){const e=[];for(let t=0;t<this._elements.length;t++){const n=this.g.get(this.elementType,this._elements[t]);null!=n&&n.isSelected()&&e.push(this._elements[t])}return e}generic_visible(){const e=[];for(let t=0;t<this._elements.length;t++){const n=this.g.get(this.elementType,this._elements[t]);null!=n&&n.isVisible()&&e.push(this._elements[t])}return e}generic_highlighted(){const e=[];for(let t=0;t<this._elements.length;t++){const n=this.g.get(this.elementType,this._elements[t]);null!=n&&n.isHighlighted()&&e.push(this._elements[t])}return e}generic_presentIn(e,n){const r=[];for(let t=0;t<this._elements.length;t++){const i=this.g.get(this.elementType,this._elements[t]);null!=i&&i.presentIn(e,n)&&r.push(this._elements[t])}return r}generic_sort(n,r){if(0==this._elements.length)return this;const t=this._elements.slice(0);return t.sort((t,e)=>{t=this.g.get(this.elementType,t),e=this.g.get(this.elementType,e);return null!=t&&null!=e?function(t,e,n,r){var i=t.attr(n);let s;s="string"==typeof i?t.attr(n).localeCompare(e.attr(n)):"number"==typeof i?e.attr(n)-t.attr(n):0;0==r&&(s=-s);return s}(t,e,n,r):null==t&&null==e?0:null==t?1:-1}),this._elements=t,this}generic_removeDuplicates(){const e=[];for(let t=0;t<this._elements.length;t++)-1==e.indexOf(this._elements[t])&&e.push(this._elements[t]);return this._elements=e,this}}class cu{constructor(t,e,n){this._id=t,this.type=e,this.g=n}id(){return this._id}attr(t){return this.g.attr(t,this._id,this.type)}getSelections(){return this.g.attributeArrays[this.type].selections[this._id]}addToSelection(t){this.g.attributeArrays[this.type].selections[this._id].push(t)}removeFromSelection(e){var n=this.g.attributeArrays[this.type].selections[this._id];for(let t=0;t<n.length;t++)n[t]==e&&this.g.attributeArrays[this.type].selections[this._id].splice(t,1)}inSelection(t){return-1<this.getSelections().indexOf(t)}isSelected(e){if(!e)return 0<this.getSelections().length;var n=this.g.attributeArrays[this.type].selections[this._id];for(let t=0;t<n.length;t++)if(n[t]!=this.g.defaultNodeSelection&&n[t]!=this.g.defaultLinkSelection&&n[t]==e)return!0;return!1}isHighlighted(){return this.g.isHighlighted(this._id,this.type)}isFrozen(){return this.g.isFrozen(this._id,this.type)}isFiltered(){return this.g.isFiltered(this._id,this.type)}isVisible(){var e=this.getSelections();if(0==e.length)return!0;for(let t=0;t<e.length;t++)if(e[t].filter)return!1;return!0}presentIn(e,n){const r=this.attr("presence");n=n||e;for(let t=e._id;t<=n._id;t++)if(-1<r.indexOf(t))return!0;return!1}}class fu{constructor(){this.serie={}}period(t,e){var n=t.id(),r=e.id();const i=new fu;for(const s in this.serie)parseInt(s)>=n&&parseInt(s)<=r&&(i.serie[s]=this.serie[s]);return i}set(t,e){this.serie[t.id()]=e}get(t){if(null!=this.serie[t.id()])return this.serie[t.id()]}size(){return this.toArray().length}getSerie(){return this.serie}toArray(t){const e=[];if(t=null==t?!1:t)for(const n in this.serie)e.push(this.serie[n]);else for(const r in this.serie)-1==e.indexOf(this.serie[r])&&e.push(this.serie[r]);return e}}class du{constructor(){this.serie={}}period(t,e){var n=t.id();t.id();const r=new du;for(const i in this.serie)parseInt(i)>=n&&parseInt(i)<=n&&(r.serie[i]=this.serie[i]);return r}add(t,e){null!=t&&(this.serie[t._id]||(this.serie[t._id]=[]),this.serie[t._id].push(e))}get(t){return this.serie[t._id]}toArray(){const t=[];for(const e in this.serie)t.push(this.serie[e]);return t}toFlatArray(e){null==e&&(e=!1);const n=[];for(const r in this.serie)for(let t=0;t<this.serie[r].length;t++)e&&-1!=n.indexOf(this.serie[r])||n.push(this.serie[r][t]);return n}}class gu extends uu{constructor(e,t){if(super(e,t,"time"),0<e.length&&e[0]instanceof pu){this._elements=[];for(let t=0;t<e.length;t++)this._elements.push(e[t].id())}if(0<e.length&&"number"==typeof e[0]){this._elements=[];for(let t=0;t<e.length;t++)this._elements.push(e[t])}}contains(t){return-1<this._elements.indexOf(t.id())}highlighted(){return new gu(super.generic_highlighted(),this.g)}visible(){return new gu(super.generic_visible(),this.g)}selected(){return new gu(super.generic_selected(),this.g)}filter(t){return new gu(super.generic_filter(t),this.g)}presentIn(t,e){return new gu(super.generic_presentIn(t,e),this.g)}sort(t){return super.generic_sort(t)}links(){let e=[];for(let t=0;t<this._elements.length;t++)e=e.concat(this.g.attr("links",this._elements[t],"time"));return new ku(e,this.g)}get(t){return this.g._times[this._elements[t]]}last(){return this.g._times[this._elements[this._elements.length-1]]}toArray(){const e=[];var n=this.g._times;for(let t=0;t<this._elements.length;t++)e.push(n[this._elements[t]]);return e}createAttribute(e,n){if(null==this.g.timeArrays[e]){this.g.timeArrays[e]=[];for(let t=0;t<this.g._times.length;t++)this.g.timeArrays[e].push()}for(let t=0;t<this._elements.length;t++)this.g.timeArrays[e][this._elements[t]]=n(this.g._times[this._elements[t]]);return this}unixTimes(){const e=[];for(let t=0;t<this._elements.length;t++){const n=this.g.time(this._elements[t]);null!=n&&e.push(n.unixTime())}return e}intersection(t){return new gu(this.generic_intersection(t)._elements,this.g)}forEach(e){for(let t=0;t<this._elements.length;t++)e(this.g.time(this._elements[t]),t);return this}}class pu extends cu{constructor(t,e){super(t,"time",e),this.getWeek=Fh("%V")}time(){return this.attr("momentTime")}moment(){return this.attr("momentTime")}label(){return this.attr("label")}unixTime(){return this.attr("unixTime")}links(){return new ku(this.attr("links"),this.g)}year(){return this.time().getUTCFullYear()}month(){return this.time().getUTCMonth()}week(){return parseInt(this.getWeek(this.time()))}day(){return this.time().getUTCDay()}hour(){return this.time().getUTCHours()}minute(){return this.time().getUTCMinutes()}second(){return this.time().getUTCSeconds()}millisecond(){return this.time().getMilliseconds()}format(t){const e=Fh(t);return e(this.time())}}class mu extends uu{constructor(e,t){if(super(e,t,"location"),0<e.length&&e[0]instanceof _u){this._elements=[];for(let t=0;t<e.length;t++)this._elements=e[t].id()}if(0<e.length&&"number"==typeof e[0]){this._elements=[];for(let t=0;t<e.length;t++)this._elements.push(e[t])}}contains(t){return-1<this._elements.indexOf(t.id())}highlighted(){return new mu(super.generic_highlighted(),this.g)}visible(){return new mu(super.generic_visible(),this.g)}selected(){return new mu(super.generic_selected(),this.g)}filter(t){return new mu(super.generic_filter(t),this.g)}presentIn(t,e){return new mu(super.generic_presentIn(t,e),this.g)}sort(t){return super.generic_sort(t)}get(t){return this.g._locations[this._elements[t]]}last(){return this.g._locations[this._elements[this._elements.length-1]]}toArray(){const e=[];for(let t=0;t<this._elements.length;t++)e.push(this.g._locations[this._elements[t]]);return e}createAttribute(e,n){if(null==this.g.locationArrays[e]){this.g.locationArrays[e]=[];for(let t=0;t<this.g._locations.length;t++)this.g.locationArrays[e].push()}for(let t=0;t<this._elements.length;t++)this.g.locationArrays[e][this._elements[t]]=n(this.g._locations[this._elements[t]]);return this}intersection(t){return new mu(this.generic_intersection(t)._elements,this.g)}removeDuplicates(){return new mu(this.generic_removeDuplicates()._elements,this.g)}forEach(e){for(let t=0;t<this._elements.length;t++)e(this.g.location(this._elements[t]),t);return this}}class yu extends hu{clone(){return this._elements.slice(0)}min(){this._elements=this.makeNumbers(this._elements);let e=parseInt(this._elements[0]+"");for(let t=1;t<this._elements.length;t++)null!=this._elements[t]&&(e=Math.min(e,parseInt(this._elements[t]+"")));return e}max(){let e=parseInt(this._elements[0]+"");for(let t=1;t<this._elements.length;t++)null!=this._elements[t]&&(e=Math.max(e,parseInt(this._elements[t]+"")));return e}mean(){this._elements=this.makeNumbers(this._elements);let e=0,n=0;for(let t=0;t<this._elements.length;t++)"number"==typeof this._elements[t]&&(e+=parseInt(this._elements[t]+""),n++);return e/n}sum(){let e=0;for(let t=0;t<this._elements.length;t++)"number"==typeof this._elements[t]&&(e+=parseInt(this._elements[t]+""));return e}toArray(){return this._elements.slice(0)}get(t){return this._elements[t]}forEach(e){for(let t=0;t<this._elements.length;t++)e(this._elements[t],t);return this}makeNumbers(e){if(e&&0<e.length&&"string"==typeof e[0]){const n=[];for(let t=0;t<e.length;t++)n.push(parseFloat(e[t]+""));return console.log("string array converted",n),n}return e}}class _u extends cu{constructor(t,e){super(t,"location",e)}label(){return this.attr("label")+""}longitude(){return this.attr("longitude")}latitude(){return this.attr("latitude")}x(){return this.attr("x")}y(){return this.attr("y")}z(){return this.attr("z")}radius(){return this.attr("radius")}}class vu extends uu{constructor(e,t){if(super(e,t,"nodePair"),0<e.length&&e[0]instanceof wu){this._elements=[];for(let t=0;t<e.length;t++)this._elements.push(e[t].id())}if(0<e.length&&"number"==typeof e[0]){this._elements=[];for(let t=0;t<e.length;t++)this._elements.push(e[t])}}contains(t){return-1<this._elements.indexOf(t.id())}highlighted(){return new vu(super.generic_highlighted(),this.g)}visible(){return new vu(super.generic_visible(),this.g)}selected(){return new vu(super.generic_selected(),this.g)}filter(t){return new vu(super.generic_filter(t),this.g)}presentIn(t,e){return new vu(super.generic_presentIn(t,e),this.g)}sort(t){return super.generic_sort(t)}get(t){return this.g._nodePairs[this._elements[t]]}last(){return this.g._links[this._elements[this._elements.length-1]]}toArray(){const e=[];for(let t=0;t<this._elements.length;t++)e.push(this.g._nodePairs[this._elements[t]]);return e}createAttribute(e,n){if(null==this.g.nodePairArrays[e]){this.g.nodePairArrays[e]=[];for(let t=0;t<this.g._nodePairs.length;t++)this.g.nodePairArrays[e].push()}for(let t=0;t<this._elements.length;t++)this.g.nodePairArrays[e][this._elements[t]]=n(this.g._nodePairs[this._elements[t]]);return this}intersection(t){return new vu(this.generic_intersection(t)._elements,this.g)}removeDuplicates(){return new vu(this.generic_removeDuplicates()._elements,this.g)}forEach(e){for(let t=0;t<this._elements.length;t++)e(this.g.nodePair(this._elements[t]),t);return this}}class wu extends cu{constructor(t,e){super(t,"nodePair",e)}get source(){return this.g._nodes[this.attr("source")]}get target(){return this.g._nodes[this.attr("target")]}links(){return new ku(this.attr("links"),this.g)}nodeType(){return this.attr("nodeType")}presentIn(e,n){for(let t=0;t<this.links.length;t++)if(this.links[t].presentIn(e,n))return!0;return!1}}class xu{constructor(t){this._elements=t?t.slice(0):[]}contains(t){return-1<this._elements.indexOf(t)}addUnique(t){-1==this._elements.indexOf(t)&&this._elements.push(t)}add(t){this._elements.push(t)}addAll(e){for(let t=0;t<e.length;t++)null!=e[t]&&this._elements.push(e[t])}addAllUnique(e){for(let t=0;t<e.length;t++)this.addUnique(e[t])}get length(){return this._elements.length}size(){return this._elements.length}toArray(){return this._elements.slice(0)}forEach(e){for(let t=0;t<this._elements.length;t++)e(this._elements[t],t);return this}}function Au(e,n,r,i,s,o){let a=[],l;for(let t=0;t<n.length;t++){l=null!=o&&null!=s?i.attr(e,n[t],r).period(s,o).toArray():null!=s?[i.attr(e,n[t],r).get(s)]:i.attr(e,n[t],r).toArray();for(let t=0;t<l.length;t++)l[t]instanceof Array?a=a.concat(l[t]):-1==a.indexOf(l[t])&&a.push(l[t])}return a}class bu extends uu{constructor(e,t){if(super(e,t,"node"),0<e.length&&e[0]instanceof Mu){this._elements=[];for(let t=0;t<e.length;t++)this._elements.push(e[t].id())}else if(0<e.length&&"number"==typeof e[0]){this._elements=[];for(let t=0;t<e.length;t++)this._elements.push(e[t])}}contains(t){return-1<this._elements.indexOf(t.id())}highlighted(){return new bu(super.generic_highlighted(),this.g)}visible(){return new bu(super.generic_visible(),this.g)}selected(){return new bu(super.generic_selected(),this.g)}filter(t){return new bu(super.generic_filter(t),this.g)}presentIn(t,e){return new bu(super.generic_presentIn(t,e),this.g)}sort(t,e){return super.generic_sort(t,e)}label(){const e=new xu;for(let t=0;t<this._elements.length;t++)e.add(""+this.g.attr("label",this._elements[t],"node"));return e}neighbors(t,e){return new bu(Au("neighbors",this._elements,"node",this.g,t,e),this.g)}links(t,e){return new ku(Au("links",this._elements,"node",this.g,t,e),this.g)}locations(t,e){return new mu(Au("locations",this._elements,"node",this.g,t,e),this.g)}nodeTypes(){const e=new xu;for(let t=0;t<this._elements.length;t++)e.add(this.g.attr("nodeType",this._elements[t],"node"));return e}get(t){return this.g._nodes[this._elements[t]]}last(){return this.g._nodes[this._elements[this._elements.length-1]]}toArray(){const e=[];for(let t=0;t<this._elements.length;t++)e.push(this.g._nodes[this._elements[t]]);return e}createAttribute(e,n){if(null==this.g.nodeArrays[e]){this.g.nodeArrays[e]=[];for(let t=0;t<this.g._nodes.length;t++)this.g.nodeArrays[e].push()}for(let t=0;t<this._elements.length;t++)this.g.nodeArrays[e][this._elements[t]]=n(this.g._nodes[this._elements[t]]);return this}intersection(t){return new bu(this.generic_intersection(t)._elements,this.g)}removeDuplicates(){return new bu(this.generic_removeDuplicates()._elements,this.g)}forEach(e){for(let t=0;t<this._elements.length;t++)e(this.g.node(this._elements[t]),t);return this}}class Mu extends cu{constructor(t,e){super(t,"node",e)}label(){return""+this.attr("label")}shape(){return""+this.attr("shape")}color(){return""+this.attr("color")}nodeType(){return this.attr("nodeType")}neighbors(t,e){return null!=e&&null!=t?new bu(this.attr("neighbors").period(t,e).toFlatArray(!0),this.g):null!=t?new bu(this.attr("neighbors").get(t),this.g):new bu(this.attr("neighbors").toFlatArray(),this.g)}inNeighbors(t,e){return null!=e&&null!=t?new bu(this.attr("inNeighbors").period(t,e).toFlatArray(!0),this.g):null!=t?new bu(this.attr("inNeighbors").get(t),this.g):new bu(this.attr("inNeighbors").toFlatArray(!0),this.g)}outNeighbors(t,e){return null!=e&&null!=t?new bu(this.attr("outNeighbors").period(t,e).toFlatArray(!0),this.g):null!=t?new bu(this.attr("outNeighbors").get(t),this.g):new bu(this.attr("outNeighbors").toFlatArray(),this.g)}links(t,e){return null!=e&&null!=t?new ku(this.attr("links").period(t,e).toFlatArray(!0),this.g):null!=t?new ku(this.attr("links").get(t),this.g):new ku(this.attr("links").toFlatArray(!0),this.g)}inLinks(t,e){return null!=e&&null!=t?new ku(this.attr("inLinks").period(t,e).toFlatArray(!0),this.g):null!=t?new ku(this.attr("inLinks").get(t),this.g):new ku(this.attr("inLinks").toFlatArray(!0),this.g)}outLinks(t,e){return null!=e&&null!=t?new ku(this.attr("outLinks").period(t,e).toFlatArray(!0),this.g):null!=t?new ku(this.attr("outLinks").get(t),this.g):new ku(this.attr("outLinks").toFlatArray(!0),this.g)}locations(t,e){return null!=e&&null!=t?new mu(this.attr("locations").period(t,e).toArray(),this.g):null!=t?new mu([this.attr("locations").get(t)],this.g):new mu(this.attr("locations").toArray(),this.g)}locationSerie(t,e){let n;n=null!=e&&null!=t?this.attr("locations").period(t,e):null!=t?this.attr("locations").get(t):this.attr("locations");var r=n.getSerie();const i=new fu;for(const a in r){var s=this.g.time(parseInt(a)),o=this.g.location(r[a]);null!=s&&null!=o&&i.set(s,o)}return i}linksBetween(e){var n,r=this.links().toArray();const i=[];for(let t=0;t<r.length;t++)(n=r[t]).source!=e&&n.target!=e||i.push(n);return new ku(i,this.g)}}class ku extends uu{constructor(e,t){if(super(e,t,"link"),0<e.length&&e[0]instanceof Tu){this._elements=[];for(let t=0;t<e.length;t++)this._elements.push(e[t].id())}if(0<e.length&&"number"==typeof e[0]){this._elements=[];for(let t=0;t<e.length;t++)this._elements.push(e[t])}}contains(t){return-1<this._elements.indexOf(t.id())}highlighted(){return new ku(super.generic_highlighted(),this.g)}visible(){return new ku(super.generic_visible(),this.g)}selected(){return new ku(super.generic_selected(),this.g)}filter(t){return new ku(super.generic_filter(t),this.g)}presentIn(t,e){return new ku(super.generic_presentIn(t,e),this.g)}sort(t){return super.generic_sort(t)}get(t){return this.g._links[this._elements[t]]}last(){return this.g._links[this._elements[this._elements.length-1]]}toArray(){const e=[];for(let t=0;t<this._elements.length;t++)e.push(this.g._links[this._elements[t]]);return e}weights(e,n){const r=new yu;for(let t=0;t<this._elements.length;t++){const i=this.g.link(t);null!=i&&r.addAll(i.weights(e,n).toArray())}return r}createAttribute(e,n){if(null==this.g.linkArrays[e]){this.g.linkArrays[e]=[];for(let t=0;t<this.g._links.length;t++)this.g.linkArrays[e].push()}for(let t=0;t<this._elements.length;t++)this.g.linkArrays[e][this._elements[t]]=n(this.g._links[this._elements[t]]);return this}linkTypes(){const e=[];var n;for(let t=0;t<this._elements.length;t++){const r=this.g.link(this._elements[t]);null!=r&&(n=r.linkType(),-1==e.indexOf(n)&&e.push(n))}return e}sources(){const e=[];let n;for(let t=0;t<this._elements.length;t++)n=this.g.link(this._elements[t]),null!=n&&-1==e.indexOf(n.source.id())&&e.push(n.source.id());return new bu(e,this.g)}targets(){const e=[];let n;for(let t=0;t<this._elements.length;t++)n=this.g.link(this._elements[t]),null!=n&&-1==e.indexOf(n.target.id())&&e.push(n.target.id());return new bu(e,this.g)}intersection(t){return new ku(this.generic_intersection(t)._elements,this.g)}removeDuplicates(){return new ku(this.generic_removeDuplicates()._elements,this.g)}forEach(e){for(let t=0;t<this._elements.length;t++)e(this.g.link(this._elements[t]),t);return this}}class Tu extends cu{constructor(t,e){super(t,"link",e),this.targetNPO=void 0,this.sourceNPO=void 0}linkType(){return this.attr("linkType")}get source(){return this.g._nodes[this.attr("source")]}get target(){return this.g._nodes[this.attr("target")]}nodePair(){return this.g._nodePairs[this.attr("nodePair")]}directed(){return this.attr("directed")}other(t){return this.source==t?this.target:this.source}weights(t,e){return null==t?new yu(this.attr("weights").toArray()):null==e?new yu([this.attr("weights").get(t)]):new yu(this.attr("weights").period(t,e).toArray())}presentIn(t,e){return 0<this.weights(t,e).toArray().length}times(){return new gu(this.attr("presence"),this.g)}}class Su{constructor(){this.nodeIds=[],this.linkIds=[],this.timeIds=[],this.nodePairIds=[],this.locationIds=[]}}function Nu(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function Eu(t,e){const n=[];for(const r in t)n.push(function(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n))for(const r in t[n])Object.prototype.hasOwnProperty.call(t[n],r)&&(e[n][r]=t[n][r]);return e}(t[r],e()));return n}function Ou(t,e,n){let r=!0;if(null==t||null==e)return t==e;if(typeof t==typeof e){if("object"!=typeof t)return 1;if(t.constructor===e.constructor){if(0<n)for(const i in t)i in e&&Object.prototype.hasOwnProperty.call(t,i)&&Object.prototype.hasOwnProperty.call(e,i)&&!Ou(t[i],e[i],n-1)&&(console.log("compareFailed for key",i,t[i],e[i]),r=!1);return r}}}function Iu(t,e){return t-e}class Cu{constructor(){this.nodes=[],this.links=[],this.times=[],this.nodePairs=[],this.locations=[]}}function Pu(t){let e=0;for(var n=t.getSelections();!n[e].showColor;)if(e++,e==n.length)return void(e=-1);return t.getSelections()[e].color}function Du(t,e){return t.priority-e.priority}function Lu(t){const e=new Su;return null!=t&&(t.nodes&&(e.nodeIds=t.nodes.map(t=>t.id())),t.links&&(e.linkIds=t.links.map(t=>t.id())),t.times&&(e.timeIds=t.times.map(t=>t.id())),t.nodePairs&&(e.nodePairIds=t.nodePairs.map(t=>t.id()))),e}var Fu=n(19);let Ru;"undefined"!=typeof window&&(window.dataManager||(window.dataManager=new class{constructor(t){this.keepOnlyOneSession=!1,this.session="",this.sessionDataPrefix="ncubesession",this.SEP="_",t?t.keepOnlyOneSession&&this.setOptions(t):this.keepOnlyOneSession=!1}setOptions(t){this.keepOnlyOneSession=t.keepOnlyOneSession}clearSessionData(t){var e=this.sessionDataPrefix+this.SEP+t;const n=[];for(let t=0;t<localStorage.length;t++){const i=localStorage.key(t);!i||0!=i.indexOf(e)&&0!=i.indexOf("connectoscope1")||n.push(i)}for(let t=0;t<n.length;t++){var r=n[t];localStorage.removeItem(r)}}clearAllSessionData(){this.clearSessionData("")}isSessionCached(t,e){var n=this.sessionDataPrefix+this.SEP+t+this.SEP+e;for(let t=0;t<localStorage.length;t++){const r=localStorage.key(t);if(r&&0==r.indexOf(n))return!0}return!1}importData(t,n){if(this.session=t,n.nodeTable||n.linkTable){n.nodeTable||console.log("[n3] Node table missing!"),n.linkTable||console.log("[n3] Link table missing!"),n.nodeSchema||console.log("[n3] Node schema missing!"),n.linkSchema||console.log("[n3] Link schema missing!");for(let e=0;e<n.nodeTable.length;e++)for(let t=0;t<n.nodeTable[e].length;t++)"string"==typeof n.nodeTable[e][t]&&(n.nodeTable[e][t]=n.nodeTable[e][t].trim());for(let e=0;e<n.linkTable.length;e++)for(let t=0;t<n.linkTable[e].length;t++)"string"==typeof n.linkTable[e][t]&&(n.linkTable[e][t]=n.linkTable[e][t].trim());if(this.isSchemaWellDefined(n)){console.log("data is well-schematized, caching dynamicGraph"),this.keepOnlyOneSession&&this.clearAllSessionData();const e=new Jh;e.initDynamicGraph(n),e.saveDynamicGraph(this)}else console.log("data is not well-schematized, so not caching dynamicGraph")}else console.log("Empty tables. No data imported.")}saveToStorage(e,n,r,i){if(null!=r){i=JSON.stringify(r,i);let t;t=4194304<i.length?Fu.compress(i):i,localStorage[this.sessionDataPrefix+this.SEP+this.session+this.SEP+e+this.SEP+n]=t}else console.log("attempting to save undefined value. aborting",e,n)}getFromStorage(t,e,n,r){console.assert(""!=this.session);let i;i=n?function(t,e){return n(t,e,r)}:void 0;e=localStorage[this.sessionDataPrefix+this.SEP+this.session+this.SEP+t+this.SEP+e];if(e&&"undefined"!=e){let t;return t="true"==e||"false"!=e&&(0<="\"'[{0123456789".indexOf(e[0])?e:Fu.decompress(e)),JSON.parse(t,i)}}removeFromStorage(t,e){localStorage.removeItem(this.sessionDataPrefix+this.SEP+this.session+this.SEP+t+this.SEP+e)}getGraph(t,e){return this.session=t,this.dynamicGraph&&this.dynamicGraph.name==e||(this.dynamicGraph=new Jh,this.dynamicGraph.loadDynamicGraph(this,e)),this.dynamicGraph}isSchemaWellDefined(t){return console.log("isSchemaWellDefined"),!(t.locationTable&&!jh(t.locationSchema.id))&&(!(0<t.nodeTable.length&&!jh(t.nodeSchema.id))&&!(0<t.linkTable.length&&!(jh(t.linkSchema.id)&&jh(t.linkSchema.source)&&jh(t.linkSchema.target))))}}),Ru=window.dataManager);let Uu;function Hu(t,e){var n=function(){const e={},t=window.location.search.replace("?","").split("&");let n,r;return t.forEach(function(t){n=t.split("="),r=decodeURIComponent(n[1]),e[n[0]]=r}),e}();return t=t||n.datasetName,Uu=e||n.session,Ru.getGraph(Uu,t)}(Fc=Fc=Fc||{})[Fc.Local=0]="Local",Fc[Fc.Global=1]="Global",Fc[Fc.Data=2]="Data";const Bu="highlight",ju="selection",zu="timeRange",qu="createSelection",Gu="deleteSelection",Xu="setCurrentSelectionId",Yu="setSelectionColor",Wu="selectionColoring",Vu="selectionFilter",$u="selectionPriority",Ku="searchResult",Zu="SET_STATE",Qu="GET_STATE",Ju="STATE_CREATED",tc="ZOOM_INTERACTION",ec="CENTER_VIEW",nc=!0,rc=[Bu,ju,zu,qu,Gu,Xu,Wu,Vu,$u,Ku,Yu,Zu,Qu,Ju,tc];const ic=new class{};let sc=-1;function oc(t,e){ic[t]=e}window.addEventListener("storage",function(){var t=localStorage[xc];if(null!=t&&"undefined"!=t){const n=Hu();t=JSON.parse(t,function(t,e){return Qh(n,0,e)});t&&t.id!=sc&&(sc=t.id,bc(t))}},!1);class ac{constructor(t){this.id=Math.random(),this.type=t,this.body=null}}function lc(t,e,n){var r=Hu(),i=Lu(e);null!=e&&function(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return}(e),null==!e&&(t="reset"),Ac(new hc(t,i,n));let s="auto";e&&0<r.currentSelection_id&&(s="url(/networkcube/icons/brush.png),auto");const o=document.querySelector("body");o&&(o.style.cursor=s)}class hc extends ac{constructor(t,e,n){super(Bu),this.action=t,this.idCompound=null!=e?e:new Su,this.msg=null!=n?n:""}}function uc(t,e,n){var r=Hu();n=n||r.currentSelection_id;e=Lu(e);Ac(new cc(t,e,n))}class cc extends ac{constructor(t,e,n){super(ju),this.action=t,this.idCompound=e,this.selectionId=null!=n?n:0}}function fc(t,e,n,r){e=new dc(t,e);((r=null==r?!1:r)?Ac:bc)(e)}class dc extends ac{constructor(t,e){super(zu),this.startUnix=t,this.endUnix=e}}class gc extends ac{constructor(t){super(qu),this.selection=t}}ac;ac;ac;ac;class pc extends ac{constructor(t){super(Gu),this.selectionId=t.id}}class mc extends ac{constructor(t,e){super(Yu),this.selectionId=t.id,this.color=e}}ac;ac;class yc{constructor(t,e,n){this.networkType=t,this.timeSliderStart=e,this.timeSliderEnd=n}}class _c extends yc{constructor(t,e,n,r,i,s,o,a,l,h,u,c){super(t,e,n),this.globalZoom=r,this.panOffsetGlobal=s,this.panOffsetLocal=i,this.linkOpacity=o,this.nodeOpacity=a,this.nodeSize=l,this.edgeGap=h,this.linkWidth=u,this.labellingType=c}}ac;ac;class vc extends ac{constructor(t,e,n,r,i){super(Ju),this.state=t,this.bookmarkIndex=e,this.viewType=n,this.isNewBookmark=r,this.typeOfMultiView=i}}class wc extends ac{constructor(t,e){super(tc),this.visType=t,this.ineractionType=e}}const xc="networkcube_message";function Ac(t,e){null!=e&&!e||bc(t),nc&&(localStorage[xc]=JSON.stringify(t,function(t,e){return t=t,e=e,Zh&&console.log("dgraphReplacer",t,e),e instanceof Jh?(console.log("dgraphReplacer found a DynamicGraph property",t),Kh):e}))}function bc(t){const e=Hu();if(ic[t.type]){if(t.type==Bu)e.highlight(t.action,t.idCompound);else if(t.type==ju)e.selection(t.action,t.idCompound,t.selectionId);else if(t.type!=zu)if(t.type==Wu){var n=t;const i=e.getSelection(n.selectionId);null!=i&&(i.showColor=n.showColor)}else if(t.type==$u){var r=t;const s=e.getSelection(r.selectionId1),o=e.getSelection(r.selectionId2);null!=s&&(s.priority=r.priority1),null!=o&&(o.priority=r.priority2);const a=e.links().selected().toArray();for(let t=0;t<a.length;t++)a[t].getSelections().sort(Du);const l=e.nodes().selected().toArray();for(let t=0;t<l.length;t++)l[t].getSelections().sort(Du);const h=e.nodePairs().selected().toArray();for(let t=0;t<h.length;t++)h[t].getSelections().sort(Du)}else if(t.type==Vu)e.filterSelection(t.selectionId,t.filter);else if(t.type==qu)e.addSelection(t.selection.id,t.selection.color,t.selection.acceptedType,t.selection.priority);else if(t.type==Xu)e.setCurrentSelection(t.selectionId);else if(t.type==Gu)e.deleteSelection(t.selectionId);else if(t.type==Ku)e.highlight("set",t.idCompound);else if(t.type==Yu){r=t;const u=e.getSelection(r.selectionId);null!=u&&(u.color=r.color)}else t.type==Qu||t.type==Zu||t.type==Ju||(t.type,tc);t=t,ic[t.type]&&null!=ic[t.type]&&ic[t.type](t)}}localStorage[xc]=void 0;class Mc{constructor(t,e,n,r,i,s){this.BAR_WIDTH=5,this.RADIUS_HANDLE=5,this.LEFT=this.RADIUS_HANDLE,this.RIGHT=this.RADIUS_HANDLE,this.HEIGHT=10,this.TOP=0,this.dragEndCallBackFn=t=>null,this.x=t,this.y=e,this.width=n,this.min=r,this.max=i,this.value=this.min,this.stepWidth=s}setDragEndCallBack(t){this.dragEndCallBackFn=t}appendTo(t){this.svg=t,this.rect=this.svg._groups[0][0].getBoundingClientRect(),this.valueRange=Ia().domain([0,this.width]).range([this.min,this.max]),this.drag=Go().on("start",t=>{this.dragStart(t.sourceEvent)}).on("drag",t=>{this.dragMove(t.sourceEvent)}),this.svg=t,this.g=t.append("g").attr("height",this.HEIGHT).attr("width",this.width).attr("transform","translate("+this.x+","+this.y+")"),this.g.append("line").attr("x1",this.LEFT).attr("y1",this.TOP).attr("x2",this.width-this.RIGHT-this.LEFT).attr("y2",this.TOP).style("stroke","#aaa"),this.knob=this.g.append("circle").attr("id","#sliderKnob").attr("r",this.RADIUS_HANDLE).attr("cx",this.LEFT).attr("cy",this.TOP).attr("fill","#777").attr("onchange","trace.event('vis_4',document.location.pathname,this.parentElement.previousElementSibling.innerHTML ,'cx' + this.getAttribute('cx'))").attr("onmouseup","trace.event('vis_4',document.location.pathname,this.parentElement.previousElementSibling.innerHTML ,'cx' + this.getAttribute('cx'))").call(this.drag)}dragStart(t){this.dragStartXMouse=Math.max(this.LEFT,Math.min(this.width-this.RIGHT,this.getRelX(t))),this.dragObj=t?t.target:void 0}dragMove(t){ji(this.dragObj).attr("cx",Math.max(this.LEFT,Math.min(this.width-this.RIGHT,this.getRelX(t)))),this.dragEnd()}dragEnd(){this.value=this.valueRange(this.knob.attr("cx")),this.dragEndCallBackFn(this.value)}getRelX(t){return(t?t.pageX:0)-this.LEFT-this.x-this.rect.left}set(t){this.knob.attr("cx",this.valueRange.invert(t))}}function kc(t,e,n,r,i,s,o,a){const l=new Mc(5,r-5,n,s,o,.01),h=t.append("svg").attr("width",n+20).attr("height",r);h.append("text").attr("x",10).attr("y",r-15).text(e).style("user-select","none").attr("class","sliderLabel"),l.appendTo(h),l.set(i),l.setDragEndCallBack(a)}class Tc{constructor(t,e){this.checked=!1,this.text="",this.RADIUS=7,this.clickHandler=()=>null,this.color=t,e&&(this.text=e)}appendTo(t,e,n){const r=n.append("g").attr("transform","translate("+t+","+e+")");this.circle=r.append("circle").attr("r",this.RADIUS).attr("fill","#ffffff").attr("stroke",this.color).attr("stroke-width",1).attr("cx",2*this.RADIUS).attr("cy",0).attr("oninput","trace.event('vis_4',document.location.pathname,this.parentElement.previousElementSibling.innerHTML ,'cx' + this.getAttribute('cx'))").attr("onmouseup","trace.event('vis_4',document.location.pathname,this.parentElement.previousElementSibling.innerHTML ,'cx' + this.getAttribute('cx'))"),this.text&&(this.label=r.append("text").attr("x",1.4*this.RADIUS).attr("y",5).style("font-family","Helvetica").style("font-size","9pt").style("user-select","none").text(this.text[0]).on("click",()=>{this.checked=!this.checked,this.checked?(this.circle.attr("fill",this.color),this.label.attr("fill","#ffffff")):(this.circle.attr("fill","#ffffff"),this.label.attr("fill",this.color)),this.clickHandler&&this.clickHandler()}))}isChecked(){return this.checked}addClickHandler(t){this.clickHandler=t}}class Sc{constructor(t,e,n,r,i,s,o){this.BAR_WIDTH=15,this.RADIUS_HANDLE=5,this.LEFT=0,this.RIGHT=0,this.HEIGHT=10,this.TOP=0,this.isInverted=!1,this.dragEndCallBackFn=()=>null,this.singleTimeStepX=0,this.dragStartXMouse=0,this.dragStartXBar=0,this.currentBarLength=0,this.x=t,this.y=e,this.width=n,this.min=r,this.max=i,this.stepWidth=s,this.hasTickmarks=null!=o&&o}setDragEndCallBack(t){this.dragEndCallBackFn=t}appendTo(t){if(this.svg=t,this.rect=this.svg._groups[0][0].getBoundingClientRect(),this.valueRange=Ia().domain([0,this.width]).range([this.min,this.max]),this.svg=t,this.g=t.append("g").attr("height",this.HEIGHT).attr("width",this.width).attr("transform","translate("+this.x+","+this.y+")"),this.drag=Go().on("start",t=>{this.dragStart(t.sourceEvent)}).on("drag",t=>{this.dragMove(t.sourceEvent)}),this.g.append("line").attr("x1",this.LEFT).attr("y1",this.TOP).attr("x2",this.width-this.RIGHT-this.LEFT).attr("y2",this.TOP).style("stroke","#aaa"),this.hasTickmarks){this.val2spaceScale=Ia().domain([this.min,this.max]).range([this.LEFT,this.width-this.RIGHT-this.LEFT]);for(let t=this.min;t<=this.max;t+=this.stepWidth){var e=this.val2spaceScale(t);this.g.append("line").attr("class","rangeTick").attr("x1",e).attr("y1",this.TOP).attr("x2",e).attr("y2",this.TOP+20).style("stroke","#bbb"),this.g.append("text").attr("class","rangeTickText").attr("x",e).attr("y",this.TOP+20).text(t.toFixed(1)).style("opacity",.5).style("font-family","Helvetica").style("font-weigth","100").style("font-size","7pt")}}this.isInverted?(this.bar0=this.g.append("rect").attr("x",this.LEFT).attr("y",this.TOP).attr("height",this.BAR_WIDTH).attr("width",0).style("fill","#bbb").call(this.drag).attr("id","bar0").attr("onmouseup","trace.event('vis_43',document.location.pathname,'Time Slider','x' + this.getAttribute('x') + 'width' + this.getAttribute('width'))").attr("oninput","trace.event('vis_43',document.location.pathname,'Time Slider','x' + this.getAttribute('x') + 'width' + this.getAttribute('width'))"),this.bar1=this.g.append("rect").attr("x",this.RIGHT).attr("y",this.TOP).attr("height",this.BAR_WIDTH).attr("width",0).style("fill","#bbb").call(this.drag).attr("id","bar1").attr("onmouseup","trace.event('vis_43',document.location.pathname,'Time Slider','x' + this.getAttribute('x') + 'width' + this.getAttribute('width'))").attr("oninput","trace.event('vis_43',document.location.pathname,'Time Slider','x' + this.getAttribute('x') + 'width' + this.getAttribute('width'))")):(this.bar0=this.g.append("rect").attr("x",this.LEFT).attr("y",this.TOP).attr("height",this.BAR_WIDTH).attr("width",this.width-this.RIGHT-this.LEFT).style("fill","#bbb").call(this.drag).attr("id","bar0").attr("onmouseup","trace.event('vis_43',document.location.pathname,'Time Slider','x' + this.getAttribute('x') + 'width' + this.getAttribute('width'))").attr("oninput","trace.event('vis_43',document.location.pathname,'Time Slider','x' + this.getAttribute('x') + 'width' + this.getAttribute('width'))"),this.bar1=null),this.circleMin=this.g.append("circle").attr("id","sliderKnobMin").attr("r",this.RADIUS_HANDLE).attr("cx",this.LEFT).attr("cy",this.TOP+this.BAR_WIDTH).attr("fill","#777").attr("onchange","trace.event('vis_27',document.location.pathname,'Time Sliden Min','cx' + this.getAttribute('cx'))").attr("onmouseup","trace.event('vis_27',document.location.pathname,'Time Sliden Min','cx' + this.getAttribute('cx'))").attr("oninput","trace.event('vis_27',document.location.pathname,'Time Sliden Min','cx' + this.getAttribute('cx'))").call(this.drag),this.circleMax=this.g.append("circle").attr("id","sliderKnobMax").attr("r",this.RADIUS_HANDLE).attr("cx",this.width-this.RIGHT).attr("cy",this.TOP+this.BAR_WIDTH).attr("fill","#777").attr("onchange","trace.event('vis_28',document.location.pathname,'Time Sliden Max','cx' + this.getAttribute('cx'))").attr("onmouseup","trace.event('vis_28',document.location.pathname,'Time Sliden Max','cx' + this.getAttribute('cx'))").attr("oninput","trace.event('vis_28',document.location.pathname,'Time Sliden Max','cx' + this.getAttribute('cx'))").call(this.drag)}dragStart(t){var e;this.dragStartXMouse=Math.max(this.LEFT,Math.min(this.width-this.RIGHT,this.getRelX(t))),this.dragObj=t?t.target:void 0,this.isInverted?(e=parseInt(this.circleMin.attr("cx")),t=parseInt(this.circleMax.attr("cx")),this.dragStartXMouse<e?(this.dragStartXBar=this.LEFT,this.currentBarLength=e-this.LEFT):this.dragStartXMouse<t?(this.dragStartXBar=e,this.currentBarLength=t-e):(this.dragStartXBar=t,this.currentBarLength=this.width-this.RIGHT-t)):(this.dragStartXBar=parseInt(this.bar0.attr("x")),this.currentBarLength=parseInt(this.bar0.attr("width")))}dragMove(t){if(this.isInverted||this.dragObj.id!=this.bar0.attr("id")){if(this.isInverted&&(this.dragObj.id==this.bar0.attr("id")||this.dragObj.id==this.bar1.attr("id")))return;this.dragObj==this.circleSingle?(this.singleTimeStepX=Math.max(this.LEFT,Math.min(this.width-this.RIGHT,this.getRelX(t))),ji(this.dragObj).attr("transform","translate("+this.singleTimeStepX+", 0)")):(ji(this.dragObj).attr("cx",Math.max(this.LEFT,Math.min(this.width-this.RIGHT,this.getRelX(t)))),this.isInverted?(this.bar0.attr("x",this.LEFT).attr("width",this.circleMin.attr("cx")-this.LEFT),this.bar1.attr("x",this.circleMax.attr("cx")).attr("width",this.width-2*this.RIGHT-this.circleMax.attr("cx"))):this.bar0.attr("x",this.circleMin.attr("cx")).attr("width",this.circleMax.attr("cx")-this.circleMin.attr("cx")))}else{t=Math.max(this.LEFT,Math.min(this.width-this.RIGHT,this.getRelX(t)))-this.dragStartXMouse,t=Math.max(this.LEFT,Math.min(this.width-this.RIGHT-this.currentBarLength,this.dragStartXBar+t));this.bar0.attr("x",t),this.circleMin.attr("cx",t),this.circleMax.attr("cx",t+this.currentBarLength)}this.dragEnd()}dragEnd(){this.min=this.valueRange(this.circleMin.attr("cx")),this.max=this.valueRange(this.circleMax.attr("cx")),this.dragEndCallBackFn(this.min,this.max,this.valueRange(this.singleTimeStepX))}getRelX(t){return(t?t.pageX:0)-this.LEFT-this.x-this.rect.left}set(t,e){this.circleMin.attr("cx",this.valueRange.invert(t)),this.circleMax.attr("cx",this.valueRange.invert(e)),this.isInverted?(this.bar0.attr("x",this.LEFT).attr("width",this.circleMin.attr("cx")),this.bar1.attr("x",this.circleMax.attr("cx")).attr("width",this.width-2*this.RIGHT-this.circleMax.attr("cx"))):this.bar0.attr("x",this.circleMin.attr("cx")).attr("width",this.circleMax.attr("cx")-this.circleMin.attr("cx"))}setIsInverted(t){t!=this.isInverted&&(this.isInverted=t,this.isInverted?this.bar1=this.g.insert("rect","#bar0").attr("x",this.RIGHT).attr("y",this.TOP).attr("height",this.BAR_WIDTH).attr("width",0).style("fill","#bbb").call(this.drag).attr("id","bar1"):this.bar1.remove(),this.set(this.min,this.max))}}class Nc{constructor(t,e,n){this.MARGIN_SLIDER_RIGHT=30,this.MARGIN_SLIDER_LEFT=10,this.TICK_GAP=2,this.TICK_LABEL_GAP=40,this.SLIDER_TOP=25,this.HEIGHT=200,this.callBack=void 0,this.propagateButton=new Tc("#000000"),this.dgraph=t,this.times=t.times().toArray(),this.widgetWidth=e;const r=new pu(0,this.dgraph);this.sliderWidth=e-this.MARGIN_SLIDER_RIGHT+5-this.MARGIN_SLIDER_LEFT-5;let i=(0!=this.times.length?this.times[this.times.length-1]:r).moment();var s,o=function(t){let e="milliseconds";switch(t){case 0:e="milliseconds";break;case 1:e="seconds";break;case 2:e="minutes";break;case 3:e="hours";break;case 4:e="days";break;case 5:e="weeks";break;case 6:e="months";break;case 7:e="years"}return e}(t.gran_min);i=i||new Date(0),i=(s=i,e=1,o=o,new Date(s.getTime()+e*Wh[o]));o=0!=this.times.length?this.times[0].unixTime():0;this.slider=new Sc(this.MARGIN_SLIDER_LEFT,this.SLIDER_TOP,this.sliderWidth,o,i.valueOf(),1),n&&(this.callBack=n),this.tickScale=function(){return ha.apply(Dh(hl,ul,al,ol,rl,el,tl,Ja,qa,Uh).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}().range([this.MARGIN_SLIDER_LEFT,this.MARGIN_SLIDER_LEFT+this.sliderWidth]).domain([o,i.valueOf()]),this.tickHeightFunction=Ia().range([4,this.SLIDER_TOP-10]).domain([t.gran_min,t.gran_max])}appendTo(t,e,n){e=e||0,n=n||0;const r=t.append("g").attr("transform","translate("+e+","+n+")");r.append("g").attr("transform","translate(0,"+this.SLIDER_TOP+")").attr("class","x axis").call((n=this.tickScale,Yr(Fr,n))),this.labelStart=r.append("text").attr("y",this.SLIDER_TOP+20).style("opacity",0).style("font-family","Helvetica").style("font-weigth","100").style("font-size","8pt").style("text-anchor","end").text("").style("user-select","none").style("-webkit-user-select","none").style("-khtml-user-select","none").style("-moz-user-select","none").style("-o-user-select","none").style("user-select","none"),this.labelEnd=r.append("text").style("opacity",0).attr("y",this.SLIDER_TOP+20).style("font-family","Helvetica").style("font-weigth","100").style("font-size","8pt").style("text-anchor","start").text("").style("user-select","none").style("-webkit-user-select","none").style("-khtml-user-select","none").style("-moz-user-select","none").style("-o-user-select","none").style("user-select","none"),this.slider.appendTo(r),this.slider.setDragEndCallBack((t,e,n)=>this.updateTime(t,e,n)),this.propagateButton=new Tc("#000000","Syncronize Time"),this.propagateButton.appendTo(this.sliderWidth+15,this.SLIDER_TOP+8,r)}drawTickmarks(e,n,r){let i=1;for(;Math.floor(this.sliderWidth/this.TICK_LABEL_GAP)<n.length/i&&i<100;)i++;for(let t=0;t<n.length;t++)t%i==0&&(r.append("text").attr("x",this.tickScale(n[t].unixTime())).attr("y",this.SLIDER_TOP-this.tickHeightFunction(e)).text(Vh(n[t].time(),e)).attr("id","timelabel_"+e+"_"+t).attr("class","timelabel").style("opacity",.5).style("font-family","Helvetica").style("font-weigth","100").style("font-size","7pt"),r.append("line").attr("x1",this.tickScale(n[t].unixTime())).attr("x2",this.tickScale(n[t].unixTime())).attr("y1",this.SLIDER_TOP).attr("y2",this.SLIDER_TOP-this.tickHeightFunction(e)).style("stroke","#bbb"))}formatForGranularities(t,e,n){let r="";for(;e<=n;)r+=function(t,e){switch(t){case 0:return"%S";case 1:return"%S"+(e?".":"");case 2:return"%M"+(e?":":"");case 3:return"%H";case 4:return"%D"+(e?" ":"");case 6:return"%m"+(e?"-":"");default:return"%Y"+(e?"-":"")}}(n,e<n),n--;return t.format(r.trim())}updateTime(t,e,n){function r(t){return t.toDateString()}n=Math.round(n),this.labelStart.attr("x",this.slider.valueRange.invert(t)+10).style("opacity",1).text(r(new Date(t))),this.labelEnd.attr("x",this.slider.valueRange.invert(e)+10).style("opacity",1).text(r(new Date(e))),null!=this.callBack?this.callBack(t,e,this.propagateButton.isChecked()):fc(t,e,this.times[n],this.propagateButton.isChecked())}set(t,e){this.slider.set(t,e)}}var Ec=t=>()=>t;function Oc(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:s,x:o,y:a,dx:l,dy:h,dispatch:u}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:h,enumerable:!0,configurable:!0},_:{value:u}})}function Ic(t){return!t.ctrlKey&&!t.button}function Cc(){return this.parentNode}function Pc(t,e){return null==e?{x:t.x,y:t.y}:e}function Dc(){return navigator.maxTouchPoints||"ontouchstart"in this}Oc.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Lc(){var r,i,s,o,a=Ic,l=Cc,n=Pc,e=Dc,p={},m=x("start","drag","end"),y=0,h=0;function _(t){t.on("mousedown.drag",u).filter(e).on("touchstart.drag",d).on("touchmove.drag",g,J).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function u(t,e){o||!a.call(this,t,e)||(e=w(this,l.call(this,t,e),t,e,"mouse"))&&(Q(t.view).on("mousemove.drag",c,tt).on("mouseup.drag",f,tt),rt(t.view),et(t),s=!1,r=t.clientX,i=t.clientY,e("start",t))}function c(t){var e,n;nt(t),s||(e=t.clientX-r,n=t.clientY-i,s=h<e*e+n*n),p.mouse("drag",t)}function f(t){Q(t.view).on("mousemove.drag mouseup.drag",null),it(t.view,s),nt(t),p.mouse("end",t)}function d(t,e){if(a.call(this,t,e))for(var n,r=t.changedTouches,i=l.call(this,t,e),s=r.length,o=0;o<s;++o)(n=w(this,i,t,e,r[o].identifier,r[o]))&&(et(t),n("start",t,r[o]))}function g(t){for(var e,n=t.changedTouches,r=n.length,i=0;i<r;++i)(e=p[n[i].identifier])&&(nt(t),e("drag",t,n[i]))}function v(t){var e,n,r=t.changedTouches,i=r.length;for(o&&clearTimeout(o),o=setTimeout(function(){o=null},500),e=0;e<i;++e)(n=p[r[e].identifier])&&(et(t),n("end",t,r[e]))}function w(o,a,t,l,h,e){var u,c,f,d=m.copy(),g=Jt(e||t,a);if(null!=(f=n.call(o,new Oc("beforestart",{sourceEvent:t,target:_,identifier:h,active:y,x:g[0],y:g[1],dx:0,dy:0,dispatch:d}),l)))return u=f.x-g[0]||0,c=f.y-g[1]||0,function t(e,n,r){var i,s=g;switch(e){case"start":p[h]=t,i=y++;break;case"end":delete p[h],--y;case"drag":g=Jt(r||n,a),i=y}d.call(e,o,new Oc(e,{sourceEvent:n,subject:f,target:_,identifier:h,active:i,x:g[0]+u,y:g[1]+c,dx:g[0]-s[0],dy:g[1]-s[1],dispatch:d}),l)}}return _.filter=function(t){return arguments.length?(a="function"==typeof t?t:Ec(!!t),_):a},_.container=function(t){return arguments.length?(l="function"==typeof t?t:Ec(t),_):l},_.subject=function(t){return arguments.length?(n="function"==typeof t?t:Ec(t),_):n},_.touchable=function(t){return arguments.length?(e="function"==typeof t?t:Ec(!!t),_):e},_.on=function(){var t=m.on.apply(m,arguments);return t===m?_:t},_.clickDistance=function(t){return arguments.length?(h=(t=+t)*t,_):Math.sqrt(h)},_}var Fc=n(36),Rc=n.n(Fc);function Uc(){let f=[],d=75,g=!0,p=!1,n=!0,r,m={start:function(){},draw:function(){},end:function(){}};function i(t){let e=t.append("g").attr("class","lasso"),s=e.append("path").attr("class","drawn"),o=e.append("path").attr("class","loop_close"),a=e.append("circle").attr("class","origin"),l,h,u,c;t=Lc().filter(t=>t.shiftKey).on("start",function(t){c=[],l="",s.attr("d",null),o.attr("d",null),f.nodes().forEach(function(t){t.__lasso.possible=!1,t.__lasso.selected=!1,t.__lasso.hoverSelect=!1,t.__lasso.loopSelect=!1;var e=t.getBoundingClientRect();t.__lasso.lassoPoint=[Math.round(e.left+e.width/2),Math.round(e.top+e.height/2)]}),n&&f.on("mouseover.lasso",function(){this.__lasso.hoverSelect=!0});m.start()}).on("drag",function(t){let e,n;n="touchmove"===t.sourceEvent.type?(e=t.sourceEvent.touches[0].clientX,t.sourceEvent.touches[0].clientY):(e=t.sourceEvent.clientX,t.sourceEvent.clientY);var r=Jt(t,this)[0],i=Jt(t,this)[1];""===l?(l=l+"M "+r+" "+i,h=[e,n],u=[r,i],a.attr("cx",r).attr("cy",i).attr("r",4).attr("display",null)):l=l+" L "+r+" "+i;c.push([e,n]);t=Math.sqrt(Math.pow(e-h[0],2)+Math.pow(n-h[1],2)),i="M "+r+" "+i+" L "+u[0]+" "+u[1];s.attr("d",l),o.attr("d",i),p=t<=d,p&&g?o.attr("display",null):o.attr("display","none");f.nodes().forEach(function(t){t.__lasso.loopSelect=!(!p||!g)&&Rc()(c,t.__lasso.lassoPoint)<1,t.__lasso.possible=t.__lasso.hoverSelect||t.__lasso.loopSelect}),m.draw()}).on("end",function(t){f.on("mouseover.lasso",null),f.nodes().forEach(function(t){t.__lasso.selected=t.__lasso.possible,t.__lasso.possible=!1}),s.attr("d",null),o.attr("d",null),a.attr("display","none"),m.end()});r.call(t)}return i.items=function(t){if(!arguments.length)return f;f=t;let e=f.nodes();return e.forEach(function(t){t.__lasso={possible:!1,selected:!1}}),i},i.possibleItems=function(){return f.filter(function(){return this.__lasso.possible})},i.selectedItems=function(){return f.filter(function(){return this.__lasso.selected})},i.notPossibleItems=function(){return f.filter(function(){return!this.__lasso.possible})},i.notSelectedItems=function(){return f.filter(function(){return!this.__lasso.selected})},i.closePathDistance=function(t){return arguments.length?(d=t,i):d},i.closePathSelect=function(t){return arguments.length?(g=!0===t,i):g},i.isPathClosed=function(t){return arguments.length?(p=!0===t,i):p},i.hoverSelect=function(t){return arguments.length?(n=!0===t,i):n},i.on=function(t,e){if(!arguments.length)return m;if(1===arguments.length)return m[t];return-1<["start","draw","end"].indexOf(t)&&(m[t]=e),i},i.targetArea=function(t){return arguments.length?(r=t,i):r},i}const Hc="#999999";let Bc=.5,jc=1,zc=1;const qc={x:5,y:4};let Gc=2;const Xc=10;let Yc=10;var Wc=window.innerWidth,Vc=window.innerHeight-100;const $c=Hu(),Kc=$c.times().toArray();let Zc=Kc[0],Qc=Kc[Kc.length-1];const Jc=$c.directed,tf=$c.nodes().toArray(),ef=$c.nodes().toArray().sort((t,e)=>e.neighbors().length-t.neighbors().length);let nf=$c.links().toArray();Fc=$c.linkArrays;nf=function(e,n){for(let t=0;t<e.length;t++){var r=n.directed[t];e[t].directed=!(!["yes","true"].includes(r)&&!Jc)}return e}(nf,Fc);const rf=new BroadcastChannel("row_hovered_over_link");rf.onmessage=function(t){zd(t.data.id)};const sf=new BroadcastChannel("row_hovered_over_node");sf.onmessage=function(t){jd(t.data.id)};let of=[],af=0;const lf=function e(){var n=On()(Tn,Tn);return n.copy=function(){return t=n,e().domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown());var t},function(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}.apply(n,arguments),Qn(n)}().range([1,1]);1<$c.links().weights().max()&&lf.range([1,3]),lf.domain([0,$c.links().weights().max()]),function(e){for(let t=0;t<rc.length;t++)ic[rc[t]]=e}(function(){zd(),jd()}),oc(Zu,function(t){"nodelink"==t.viewType&&(t=t.state,Bc=t.linkOpacity,zd(),jc=t.nodeOpacity,jd(),Yc=t.nodeSize,Bd(),Gc=t.edgeGap,Id(),zc=t.linkWidth,zd(),af=t.labellingType,Fd(),fc(t.timeSliderStart,t.timeSliderEnd,Kc[0],!0),zd(),jd(),ed=t.panOffsetLocal,nd=t.panOffsetGlobal,id=t.globalZoom,Id())}),oc(Qu,function(t){"nodelink"==t.viewType&&function(t,e,n,r,i){Ac(new vc(t,e,n,r,i),!0)}(new _c("nodelink",Zc.unixTime(),Qc.unixTime(),id,ed,nd,Bc,jc,Yc,Gc,zc,af),t.bookmarkIndex,t.viewType,t.isNewBookmark,t.typeOfMultiView)}),oc(ec,function(t){var e=t.selectionId;console.log(tf.map(t=>t.getSelections()));let n=1/0,r=1/0,i=-1/0,s=-1/0;for(const u of tf){const c=u.getSelections().map(t=>t.id);c.includes(e)&&(n=Math.min(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.x),s=Math.max(s,u.y))}n-=150,r-=150,i+=150,s+=150;var o=(null===(a=document.getElementById("visSvg"))||void 0===a?void 0:a.getBoundingClientRect())||{width:0,height:0},t=o.width/(i-n),a=o.height/(s-r),l=Math.min(t,a),h=[n+(i-n)/2,r+(s-r)/2];for(let t=0;t<tf.length;t++){const f=tf[t];f.x=o.width/2+(f.x-h[0])*l,f.y=o.height/2+(f.y-h[1])*l}nd=[0,0],ed=[0,0],od.attr("transform","translate(0,0)"),Id()});Fc=Q("#menuDiv");kc(Fc,"Link Opacity",100,35,Bc,0,1,function(t){Bc=t,zd()}),kc(Fc,"Node Opacity",100,35,jc,0,1,function(t){jc=t,jd()}),kc(Fc,"Node Size",100,35,Yc,.01,30,function(t){Yc=t,Bd()}),kc(Fc,"Edge Gap",100,35,Gc,0,10,function(t){Gc=t,Id()}),kc(Fc,"Link Width",100,35,zc,0,10,function(t){zc=t,zd()}),function(t,e,n,r){const i=t.append("select").attr("id","selection-input_"+e).attr("onchange","trace.event('vis_9','Node Link','selection-input_"+e+"',this.value)");i.append("option").html("Chose "+e+":"),n.forEach((t,e)=>{i.append("option").attr("value",e).html(t)}),i.on("change",()=>{var t=document.getElementById("selection-input_"+e);r(t.options[t.selectedIndex].value)})}(Fc,"Labeling",["Automatic/Importance","Hide All","Show All"],t=>{af=parseInt(t),Fd()});var hf,uf,cf,ff,df,gf,pf,mf,yf,_f,vf,wf,xf,Af,bf,Mf,kf,Tf,Sf,Nf,Ef,Of,If,Cf,Pf,Df,Lf,Ff,Rf,Uf,Hf,Bf,jf,zf,qf,Gf,Xf,Yf,Wf,Vf,$f,Fc=Q("#timelineDiv").append("svg").attr("width",Wc).attr("height",50);let Kf;1<$c.times().size()&&(Kf=new Nc($c,Wc-50),Kf.appendTo(Fc),oc("timeRange",function(t){Zc=Kc[0],Qc=Kc[Kc.length-1];let e=0;for(e;e<Kc.length;e++)if(Kc[e].unixTime()>t.startUnix){Zc=Kc[e-1];break}for(e;e<Kc.length;e++)if(Kc[e].unixTime()>t.endUnix){Qc=Kc[e-1];break}Kf.set(t.startUnix,t.endUnix),zd(),jd()}));const Zf=document.createElement("svg"),Qf=document.getElementById("visDiv");Qf&&(Qf.appendChild(Zf),Zf.outerHTML='<svg id="visSvg" width="'+(Wc-20)+'" height="'+(Vc-20)+'"></svg>'),console.log($c);let Jf,td,ed=[0,0],nd=[0,0],rd=!1,id=1;const sd=Q("#visSvg"),od=sd.append("g").attr("width",Wc).attr("height",Vc),ad=od.append("rect").attr("id","selectionRect").attr("x",0).attr("y",0).attr("width",0).attr("height",0).style("opacity",.2);sd.on("mousedown",t=>{t.shiftKey||(rd=!0,Jf=[t.clientX,t.clientY])}).on("mousemove",t=>{var e,n,r;t.shiftKey||(rd&&!t.ctrlKey?(ed[0]=(t.clientX-Jf[0])*id,ed[1]=(t.clientY-Jf[1])*id,od.attr("transform","translate("+(nd[0]+ed[0])+","+(nd[1]+ed[1])+")")):rd&&(td=[t.clientX,t.clientY],{x:n,y:r}=sd.node().getBoundingClientRect(),e=Math.abs(Jf[1]-td[1]),t=Math.min(Jf[0],td[0])-n-nd[0],n=Math.abs(Jf[0]-td[0]),r=Math.min(Jf[1],td[1])-r-nd[1],ad.attr("x",t).attr("width",n).attr("y",r).attr("height",e)))}).on("mouseup",t=>{if(rd=!1,!t.shiftKey)if(t.ctrlKey){td=[t.clientX,t.clientY];var{x:e,y:t}=sd.node().getBoundingClientRect();const i=Math.abs(Jf[1]-td[1]),s=Math.min(Jf[0],td[0])-e-nd[0],o=Math.abs(Jf[0]-td[0]),a=Math.min(Jf[1],td[1])-t-nd[1];ad.attr("x",s).attr("width",o).attr("y",a).attr("height",i);const n=cd.filter(function(t,e,n){const r=n[e];var[n,e]=r.getAttribute("transform").replace("translate(","").replace(")","").split(",");return+n>=s&&+n<=s+o&&+e>=a&&+e<=a+i}),r=new Cu;r.nodes=n.data(),lc("set",r,"RECTANGULAR_BRUSH")}else nd[0]+=ed[0],nd[1]+=ed[1]}).on("wheel.zoom",t=>{t.preventDefault(),t.stopPropagation();var e=t.deltaMode,n=t.deltaY;let r;r=1===e?16*n:0===e?n:(console.log(`Encountered wheel event with unexpected deltaMode (${e}))`),0);var i=1-r/1e3,s=[t.clientX-nd[0],t.clientY-nd[1]];for(let t=0;t<tf.length;t++){const o=tf[t];o.x=s[0]+(o.x-s[0])*i,o.y=s[1]+(o.y-s[1])*i}t={x1:s[0]+(+ad.attr("x")-s[0])*i,x2:s[0]+(+ad.attr("x")+ +ad.attr("width")-s[0])*i,y1:s[1]+(+ad.attr("y")-s[1])*i,y2:s[1]+(+ad.attr("y")+ +ad.attr("height")-s[1])*i};ad.attr("x",t.x1).attr("width",t.x2-t.x1).attr("y",t.y1).attr("height",t.y2-t.y1),Id(),Ac(new wc("nodelink","zoom"),!0)});const ld=od.append("g"),hd=od.append("g"),ud=od.append("g");let cd,fd,dd,gd,pd;const md=(cf=or(!0),df=lr,gf=ff=null,hf="function"==typeof hf?hf:void 0===hf?hr:or(hf),uf="function"==typeof uf?uf:void 0===uf?ur:or(uf),yd.x=function(t){return arguments.length?(hf="function"==typeof t?t:or(+t),yd):hf},yd.y=function(t){return arguments.length?(uf="function"==typeof t?t:or(+t),yd):uf},yd.defined=function(t){return arguments.length?(cf="function"==typeof t?t:or(!!t),yd):cf},yd.curve=function(t){return arguments.length?(df=t,null!=ff&&(gf=df(ff)),yd):df},yd.context=function(t){return arguments.length?(null==t?ff=gf=null:gf=df(ff=t),yd):ff},yd.x(function(t){return t.x}).y(function(t){return t.y}).curve(e));function yd(t){var e,n,r,i,s=(t="object"==typeof(i=t)&&"length"in i?i:Array.from(i)).length,o=!1;for(null==ff&&(gf=df(r=sr())),e=0;e<=s;++e)!(e<s&&cf(n=t[e],e,t))===o&&((o=!o)?gf.lineStart():gf.lineEnd()),o&&gf.point(+hf(n,e,t),+uf(n,e,t));if(r)return gf=null,r+""||null}for(let t=0;t<tf.length;t++)tf[t].width=2*Pd(tf[t]),tf[t].height=2*Pd(tf[t]);function _d(){for(var t,e=yf.length,n=0,r=0,i=0;i<e;++i)n+=(t=yf[i]).x,r+=t.y;for(n=(n/e-pf)*_f,r=(r/e-mf)*_f,i=0;i<e;++i)(t=yf[i]).x-=n,t.y-=r}function vd(t){var e,n=vf.length,r=an(vf,dn,gn).visitAfter(xd);for(Af=t,e=0;e<n;++e)wf=vf[e],r.visit(Ad)}function wd(){if(vf){var t,e,n=vf.length;for(bf=new Array(n),t=0;t<n;++t)e=vf[t],bf[e.index]=+Mf(e,t,vf)}}function xd(t){var e,n,r,i,s,o=0,a=0;if(t.length){for(r=i=s=0;s<4;++s)(e=t[s])&&(n=Math.abs(e.value))&&(o+=e.value,a+=n,r+=n*e.x,i+=n*e.y);t.x=r/a,t.y=i/a}else for((e=t).x=e.data.x,e.y=e.data.y;o+=bf[e.data.index],e=e.next;);t.value=o}function Ad(t,e,n,r){if(!t.value)return!0;var i=t.x-wf.x,s=t.y-wf.y,o=r-e,a=i*i+s*s;if(o*o/Sf<a)return a<Tf&&(0===i&&(a+=(i=Je(xf))*i),0===s&&(a+=(s=Je(xf))*s),a<kf&&(a=Math.sqrt(kf*a)),wf.vx+=i*t.value*Af/a,wf.vy+=s*t.value*Af/a),!0;if(!(t.length||Tf<=a))for(t.data===wf&&!t.next||(0===i&&(a+=(i=Je(xf))*i),0===s&&(a+=(s=Je(xf))*s),a<kf&&(a=Math.sqrt(kf*a)));t.data!==wf&&(o=bf[t.data.index]*Af/a,wf.vx+=i*o,wf.vy+=s*o),t=t.next;);}function bd(t){for(var e=0,n=Nf.length;e<Uf;++e)for(var r,i,s,o,a,l=0;l<n;++l)r=(a=Nf[l]).source,s=(i=a.target).x+i.vx-r.x-r.vx||Je(Df),o=i.y+i.vy-r.y-r.vy||Je(Df),s*=a=((a=Math.sqrt(s*s+o*o))-Of[l])/a*t*Ef[l],o*=a,i.vx-=s*(a=Pf[l]),i.vy-=o*a,r.vx+=s*(a=1-a),r.vy+=o*a}function Md(){if(If){var t,e=If.length,n=Nf.length,r=new Map(If.map((t,e)=>[Lf(t,e,If),t])),i=0;for(Cf=new Array(e);i<n;++i)(t=Nf[i]).index=i,"object"!=typeof t.source&&(t.source=en(r,t.source)),"object"!=typeof t.target&&(t.target=en(r,t.target)),Cf[t.source.index]=(Cf[t.source.index]||0)+1,Cf[t.target.index]=(Cf[t.target.index]||0)+1;for(i=0,Pf=new Array(n);i<n;++i)t=Nf[i],Pf[i]=Cf[t.source.index]/(Cf[t.source.index]+Cf[t.target.index]);Ef=new Array(n),kd(),Of=new Array(n),Td()}}function kd(){if(If)for(var t=0,e=Nf.length;t<e;++t)Ef[t]=+Ff(Nf[t],t,Nf)}function Td(){if(If)for(var t=0,e=Nf.length;t<e;++t)Of[t]=+Rf(Nf[t],t,Nf)}function Sd(){Nd(),Vf.call("tick",Bf),jf<zf&&(Wf.stop(),Vf.call("end",Bf))}function Nd(t){var e,n,r=Hf.length;void 0===t&&(t=1);for(var i=0;i<t;++i)for(jf+=(Gf-jf)*qf,Yf.forEach(function(t){t(jf)}),e=0;e<r;++e)null==(n=Hf[e]).fx?n.x+=n.vx*=Xf:(n.x=n.fx,n.vx=0),null==n.fy?n.y+=n.vy*=Xf:(n.y=n.fy,n.vy=0);return Bf}function Ed(){for(var t,e,n,r=0,i=Hf.length;r<i;++r)(n=Hf[r]).index=r,null!=n.fx&&(n.x=n.fx),null!=n.fy&&(n.y=n.fy),(isNaN(n.x)||isNaN(n.y))&&(t=10*Math.sqrt(.5+r),e=r*pn,n.x=t*Math.cos(e),n.y=t*Math.sin(e)),(isNaN(n.vx)||isNaN(n.vy))&&(n.vx=n.vy=0)}function Od(t){return t.initialize&&t.initialize(Hf,$f),t}function Id(){cd.attr("transform",function(t){return"translate("+t.x+","+t.y+")"}),fd.attr("transform",function(t){return"translate("+t.x+","+t.y+")"}),dd.attr("x",t=>t.x+qc.x).attr("y",t=>t.y+qc.y),gd.attr("x",t=>t.x+qc.x).attr("y",t=>t.y+qc.y),qd(),pd.attr("d",t=>md(t.path)),Fd()}function Cd(t){return 8.5*t.label().length+10}function Pd(t){return Math.sqrt(t.links().length)*Yc+1}function Dd(t){let e;return","!==t.color().split("#")[0]&&(e=t.color().split("#")[1]),e=e||"#000","#"===e[0]?e:"#"+e}function Ld(t){var e=t.shape(),t={circle:dr,cross:gr,diamond:yr,square:xr,star:wr,triangle:br,wye:Nr};return t[e]||dr}function Fd(){var n,r,i,s,o,a,l,h,u,c;if(of=[],0==af){for(let e=0;e<ef.length;e++)if(n=ef[e],!(-1<of.indexOf(n)))for(let t=e+1;t<ef.length;t++)if(r=ef[t],!(-1<of.indexOf(r)))if(s=r,c=u=h=l=a=o=void 0,o=(i=n).x+Cd(i)/2+Xc,a=s.x+Cd(s)/2+Xc,l=i.x-Cd(i)/2-Xc,h=s.x-Cd(s)/2-Xc,u=i.y+9+Xc,c=s.y+9+Xc,i=i.y-9-Xc,s=s.y-9-Xc,h<o&&l<a&&i<c&&s<u||h<o&&l<a&&s<u&&i<c||l<a&&c<i&&i<c&&s<u||l<a&&u<s&&s<u&&i<c)of.push(r);else if(s=r,c=i=u=void 0,u=(r=n).x+Cd(r)/2+Xc,i=r.x-Cd(r)/2-Xc,c=r.y+9+Xc,r=r.y-9-Xc,i<s.x&&u>s.x&&c<s.y&&r>s.y){of.push(n);break}}else 1==af?of=tf.slice(0):2==af&&(of=[]);dd.attr("visibility",t=>-1<of.indexOf(t)?"hidden":"visible"),gd.attr("visibility",t=>-1<of.indexOf(t)?"hidden":"visible")}function Rd(t,e){const n=new Cu;e=[e,...e.neighbors().toArray()];n.nodes=Array.from(new Set(e)),lc("set",n,"NODE_MOUSEOVER")}function Ud(t,e){console.log(">>> mouseClick",e.isFrozen());const n=new Cu;var r=[e,...e.neighbors().toArray()];n.nodes=Array.from(new Set(r)),e.isFrozen()?lc("removeFreeze",n,"NODE_CLICK"):t.shiftKey?lc("addFreeze",n,"NODE_CLICK"):lc("freeze",n,"NODE_CLICK")}function Hd(){lc("reset",void 0,"NODE_MOUSEOUT")}function Bd(){cd.attr("d",t=>Er().size(Pd(t)).type(Ld(t))()),fd.attr("r",t=>Pd(t)/10+5)}function jd(){let e=!1;(0<$c.nodes().highlighted().length||0<$c.links().highlighted().length)&&(e=!0),cd.style("fill",t=>{let e;return e=Pu(t),e=e||Dd(t),e}).style("opacity",t=>{return t.isVisible()?e&&!(t.isHighlighted()||0<t.links().highlighted().length)?.2*jc:jc:0}),fd.style("visibility",t=>t.isHighlighted()||0<t.links().highlighted().length?"visible":"hidden"),dd.attr("visibility",t=>e?t.isHighlighted()||0<t.links().highlighted().length?"visible":"hidden":of.includes(t)?"hidden":"visible").style("color",t=>{let e;return e=t.isHighlighted()?"#ff8800":Pu(t),e=e||"#333333",e}),gd.attr("visibility",t=>(!e||t.isHighlighted()||-1==of.indexOf(t)||0<t.links().highlighted().length)&&-1==of.indexOf(t)?"visible":"hidden")}function zd(n){let e=!1;(0<$c.nodes().highlighted().length||0<$c.links().highlighted().length)&&(e=!0),pd.attr("marker-end",function(e){if(e.directed){let t=Pu(e);return t=t||Hc,n&&n==e._id?"black":(e=t,od.append("svg:defs").append("svg:marker").attr("id",e.replace("#","")).attr("viewBox","0 -5 10 10").attr("refX",12).attr("refY",0).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("svg:path").attr("d","M0,-5L10,0L0,5").style("fill",e),"url("+e+")")}}).style("stroke",function(t){let e=Pu(t);return e=e||Hc,e}).style("opacity",t=>{return t.isVisible()&&t.source.isVisible()&&t.target.isVisible()&&t.presentIn(Zc,Qc)?e&&!(t.isHighlighted()||t.source.isHighlighted()&&t.target.isHighlighted())?.2*Bc:Bc:0}).style("stroke-width",function(t){return lf(t.weights(Zc,Qc).mean())*zc})}function qd(){let e,n,r,i,s;for(let t=0;t<$c.nodePairs().length;t++)if(i=$c.nodePair(t),i)if(i.links().length<2)i.source!=i.target?i.links().toArray()[0].path=[{x:i.source.x,y:i.source.y},{x:i.target.x,y:i.target.y}]:i.links().toArray()[0].path=[{x:i.source.x,y:i.source.y},{x:i.source.x+10,y:i.source.y},{x:i.source.x+10,y:i.source.y-10},{x:i.source.x,y:i.source.y-10},{x:i.source.x,y:i.source.y}];else if(s=i.links().toArray(),i.source==i.target){var o=Pd(i.source)/2+4;for(let t=0;t<s.length;t++)s[t].path=[{x:i.source.x,y:i.source.y},{x:i.source.x,y:i.source.y-o-t*Gc},{x:i.source.x+o+t*Gc,y:i.source.y-o-t*Gc},{x:i.source.x+o+t*Gc,y:i.source.y},{x:i.source.x,y:i.source.y}]}else{n=Gd([-(e={x:i.target.x-i.source.x,y:i.target.y-i.source.y}).y,e.x],Gc),r=Gd([e.x,e.y],Gc);for(let t=0;t<s.length;t++)s[t]&&(s[t].path=[{x:i.source.x,y:i.source.y},{x:i.source.x+r[0]+(t-s.length/2+.5)*n[0],y:i.source.y+r[1]+(t-s.length/2+.5)*n[1]},{x:i.target.x-r[0]+(t-s.length/2+.5)*n[0],y:i.target.y-r[1]+(t-s.length/2+.5)*n[1]},{x:i.target.x,y:i.target.y}])}}function Gd(e,n){let r=0;for(let t=0;t<e.length;t++)r+=Math.pow(e[t],2);r=Math.sqrt(r);for(let t=0;t<e.length;t++)e[t]=e[t]/r*n;return e}Hf=tf,zf=.001,qf=(jf=1)-Math.pow(zf,1/300),Gf=0,Xf=.6,Yf=new Map,Wf=fe(Sd),Vf=x("tick","end"),$f=function(){let t=1;return()=>(t=(un*t+cn)%fn)/fn}(),null==Hf&&(Hf=[]),Ed(),(Bf={tick:Nd,restart:function(){return Wf.restart(Sd),Bf},stop:function(){return Wf.stop(),Bf},nodes:function(t){return arguments.length?(Hf=t,Ed(),Yf.forEach(Od),Bf):Hf},alpha:function(t){return arguments.length?(jf=+t,Bf):jf},alphaMin:function(t){return arguments.length?(zf=+t,Bf):zf},alphaDecay:function(t){return arguments.length?(qf=+t,Bf):+qf},alphaTarget:function(t){return arguments.length?(Gf=+t,Bf):Gf},velocityDecay:function(t){return arguments.length?(Xf=1-t,Bf):1-Xf},randomSource:function(t){return arguments.length?($f=t,Yf.forEach(Od),Bf):$f},force:function(t,e){return 1<arguments.length?(null==e?Yf.delete(t):Yf.set(t,Od(e)),Bf):Yf.get(t)},find:function(t,e,n){var r,i,s,o=0,a=Hf.length;for(null==n?n=1/0:n*=n,o=0;o<a;++o)(r=(r=t-(i=Hf[o]).x)*r+(r=e-i.y)*r)<n&&(s=i,n=r);return s},on:function(t,e){return 1<arguments.length?(Vf.on(t,e),Bf):Vf.on(t)}}).force("link",(Nf=nf,Lf=tn,Ff=function(t){return 1/Math.min(Cf[t.source.index],Cf[t.target.index])},Rf=Qe(30),Uf=1,null==Nf&&(Nf=[]),bd.initialize=function(t,e){If=t,Df=e,Md()},bd.links=function(t){return arguments.length?(Nf=t,Md(),bd):Nf},bd.id=function(t){return arguments.length?(Lf=t,bd):Lf},bd.iterations=function(t){return arguments.length?(Uf=+t,bd):Uf},bd.strength=function(t){return arguments.length?(Ff="function"==typeof t?t:Qe(+t),kd(),bd):Ff},(bd.distance=function(t){return arguments.length?(Rf="function"==typeof t?t:Qe(+t),Td(),bd):Rf})(30).strength(.1))).force("charge",(Mf=Qe(-30),Tf=(kf=1)/0,Sf=.81,vd.initialize=function(t,e){vf=t,xf=e,wd()},vd.strength=function(t){return arguments.length?(Mf="function"==typeof t?t:Qe(+t),wd(),vd):Mf},vd.distanceMin=function(t){return arguments.length?(kf=t*t,vd):Math.sqrt(kf)},vd.distanceMax=function(t){return arguments.length?(Tf=t*t,vd):Math.sqrt(Tf)},vd.theta=function(t){return arguments.length?(Sf=t*t,vd):Math.sqrt(Sf)},vd)).force("center",(_f=1,null==(pf=Wc/2)&&(pf=0),null==(mf=Vc/2)&&(mf=0),_d.initialize=function(t){yf=t},_d.x=function(t){return arguments.length?(pf=+t,_d):pf},_d.y=function(t){return arguments.length?(mf=+t,_d):mf},_d.strength=function(t){return arguments.length?(_f=+t,_d):_f},_d)).on("end",()=>{!function(){const t=document.querySelector("#messageBox");t&&(t.outerHTML="")}(),jd(),zd(),Id();const e=[];for(let t=0;t<tf.length;t++)e.push({x:tf[t].x,y:tf[t].y});!function(t,e){const n=new ac(t);n.body=e,Ac(n,!0)}("layout",{coords:e})}),function(t){const e=document.querySelector(".messageBox");e&&(e.outerHTML="");const n=document.createElement("div"),r=document.getElementById("visDiv");r&&(r.appendChild(n),n.outerHTML='<div id="messageBox"><p>'+t+"</p></div>")}("Calculating<br/>layout"),fd=ld.selectAll("nodeHighlights").data(tf).enter().append("circle").attr("r",10).attr("class","nodeHighlights").attr("class","nodeHighlights").style("stroke","#ddd").style("fill","#eee"),cd=hd.selectAll("nodes").data(tf).enter().append("path").attr("d",t=>Er().type(Ld(t))()).attr("class","nodes").style("fill",t=>Dd(t)).on("click",Ud).attr("onmouseover","trace.event('vis_30',document.location.pathname,'Node','Mouse Over')").on("mouseover",Rd).on("mouseout",Hd),gd=ud.selectAll(".nodeLabelOutlines").data(tf).enter().append("text").attr("z",2).text(t=>t.label()).style("font-size",12).attr("visibility","hidden").attr("class","nodeLabelOutlines"),dd=ud.selectAll("nodeLabels").data(tf).enter().append("text").attr("z",2).text(t=>t.label()).style("font-size",12).attr("visibility","hidden"),qd(),pd=ld.selectAll("visualLinks").data(nf).enter().append("path").attr("d",t=>{md(t.path)}).attr("onclick","trace.event('vis_31',document.location.pathname,'Link','Click')").attr("onmouseover","trace.event('vis_32',document.location.pathname,'Link','Mouse Over')").style("opacity",Bc).on("click",(t,e)=>{var n=e.getSelections(),r=$c.getCurrentSelection();for(let t=0;t<n.length;t++)if(n[t]==r)return void uc("remove",{links:[e]});uc("add",{links:[e]})}),zd(),jd(),Bd(),Id(),function(){const e=Uc().closePathSelect(!0).closePathDistance(100).items(cd).targetArea(sd).on("draw",function(){const t=new Cu;t.nodes=e.notPossibleItems().nodes().map(t=>t.__data__),lc("set",t,"NODE_LASSO")}).on("end",function(){const t=new Cu;t.nodes=e.selectedItems().nodes().map(t=>t.__data__),lc("set",t,"NODE_LASSO")});sd.call(e)}();const Xd=[];window.addEventListener("message",t=>{if("clearSelections"===t.data.type){console.log("Received clearSelection message");for(const s of Xd)i=s,Ac(new pc(i))}else if("colorNodes"===t.data.type){console.log("Received colorNodes message");var e=function(t,e){const n=Hu(),r=n.createSelection(t);return r.name=e,Ac(new gc(r),!1),r}("node",`cluster-${Xd.length+1}`);n=e,r=t.data.color,Ac(new mc(n,r));const o=new Cu;o.nodes=t.data.highlightNodes,uc("add",o,e.id),Xd.push(e)}var n,r,i},!1)},19:function(t,e,n){var y,r,i,s,o,a=(y=String.fromCharCode,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",s={},o={compressToBase64:function(t){if(null==t)return"";var e=o._compress(t,6,function(t){return r.charAt(t)});switch(e.length%4){default:case 0:return e;case 1:return e+"===";case 2:return e+"==";case 3:return e+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:o._decompress(e.length,32,function(t){return l(r,e.charAt(t))})},compressToUTF16:function(t){return null==t?"":o._compress(t,15,function(t){return y(t+32)})+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:o._decompress(e.length,16384,function(t){return e.charCodeAt(t)-32})},compressToUint8Array:function(t){for(var e=o.compress(t),n=new Uint8Array(2*e.length),r=0,i=e.length;r<i;r++){var s=e.charCodeAt(r);n[2*r]=s>>>8,n[2*r+1]=s%256}return n},decompressFromUint8Array:function(t){if(null==t)return o.decompress(t);for(var e=new Array(t.length/2),n=0,r=e.length;n<r;n++)e[n]=256*t[2*n]+t[2*n+1];var i=[];return e.forEach(function(t){i.push(y(t))}),o.decompress(i.join(""))},compressToEncodedURIComponent:function(t){return null==t?"":o._compress(t,6,function(t){return i.charAt(t)})},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),o._decompress(e.length,32,function(t){return l(i,e.charAt(t))}))},compress:function(t){return o._compress(t,16,function(t){return y(t)})},_compress:function(t,e,n){if(null==t)return"";for(var r,i,s,o,a={},l={},h="",u=2,c=3,f=2,d=[],g=0,p=0,m=0;m<t.length;m+=1)if(s=t.charAt(m),Object.prototype.hasOwnProperty.call(a,s)||(a[s]=c++,l[s]=!0),o=h+s,Object.prototype.hasOwnProperty.call(a,o))h=o;else{if(Object.prototype.hasOwnProperty.call(l,h)){if(h.charCodeAt(0)<256){for(r=0;r<f;r++)g<<=1,p==e-1?(p=0,d.push(n(g)),g=0):p++;for(i=h.charCodeAt(0),r=0;r<8;r++)g=g<<1|1&i,p==e-1?(p=0,d.push(n(g)),g=0):p++,i>>=1}else{for(i=1,r=0;r<f;r++)g=g<<1|i,p==e-1?(p=0,d.push(n(g)),g=0):p++,i=0;for(i=h.charCodeAt(0),r=0;r<16;r++)g=g<<1|1&i,p==e-1?(p=0,d.push(n(g)),g=0):p++,i>>=1}0==--u&&(u=Math.pow(2,f),f++),delete l[h]}else for(i=a[h],r=0;r<f;r++)g=g<<1|1&i,p==e-1?(p=0,d.push(n(g)),g=0):p++,i>>=1;0==--u&&(u=Math.pow(2,f),f++),a[o]=c++,h=String(s)}if(""!==h){if(Object.prototype.hasOwnProperty.call(l,h)){if(h.charCodeAt(0)<256){for(r=0;r<f;r++)g<<=1,p==e-1?(p=0,d.push(n(g)),g=0):p++;for(i=h.charCodeAt(0),r=0;r<8;r++)g=g<<1|1&i,p==e-1?(p=0,d.push(n(g)),g=0):p++,i>>=1}else{for(i=1,r=0;r<f;r++)g=g<<1|i,p==e-1?(p=0,d.push(n(g)),g=0):p++,i=0;for(i=h.charCodeAt(0),r=0;r<16;r++)g=g<<1|1&i,p==e-1?(p=0,d.push(n(g)),g=0):p++,i>>=1}0==--u&&(u=Math.pow(2,f),f++),delete l[h]}else for(i=a[h],r=0;r<f;r++)g=g<<1|1&i,p==e-1?(p=0,d.push(n(g)),g=0):p++,i>>=1;0==--u&&(u=Math.pow(2,f),f++)}for(i=2,r=0;r<f;r++)g=g<<1|1&i,p==e-1?(p=0,d.push(n(g)),g=0):p++,i>>=1;for(;;){if(g<<=1,p==e-1){d.push(n(g));break}p++}return d.join("")},decompress:function(e){return null==e?"":""==e?null:o._decompress(e.length,32768,function(t){return e.charCodeAt(t)})},_decompress:function(t,e,n){for(var r,i,s,o,a,l,h=[],u=4,c=4,f=3,d="",g=[],p={val:n(0),position:e,index:1},m=0;m<3;m+=1)h[m]=m;for(i=0,o=Math.pow(2,2),a=1;a!=o;)s=p.val&p.position,p.position>>=1,0==p.position&&(p.position=e,p.val=n(p.index++)),i|=(0<s?1:0)*a,a<<=1;switch(i){case 0:for(i=0,o=Math.pow(2,8),a=1;a!=o;)s=p.val&p.position,p.position>>=1,0==p.position&&(p.position=e,p.val=n(p.index++)),i|=(0<s?1:0)*a,a<<=1;l=y(i);break;case 1:for(i=0,o=Math.pow(2,16),a=1;a!=o;)s=p.val&p.position,p.position>>=1,0==p.position&&(p.position=e,p.val=n(p.index++)),i|=(0<s?1:0)*a,a<<=1;l=y(i);break;case 2:return""}for(r=h[3]=l,g.push(l);;){if(p.index>t)return"";for(i=0,o=Math.pow(2,f),a=1;a!=o;)s=p.val&p.position,p.position>>=1,0==p.position&&(p.position=e,p.val=n(p.index++)),i|=(0<s?1:0)*a,a<<=1;switch(l=i){case 0:for(i=0,o=Math.pow(2,8),a=1;a!=o;)s=p.val&p.position,p.position>>=1,0==p.position&&(p.position=e,p.val=n(p.index++)),i|=(0<s?1:0)*a,a<<=1;h[c++]=y(i),l=c-1,u--;break;case 1:for(i=0,o=Math.pow(2,16),a=1;a!=o;)s=p.val&p.position,p.position>>=1,0==p.position&&(p.position=e,p.val=n(p.index++)),i|=(0<s?1:0)*a,a<<=1;h[c++]=y(i),l=c-1,u--;break;case 2:return g.join("")}if(0==u&&(u=Math.pow(2,f),f++),h[l])d=h[l];else{if(l!==c)return null;d=r+r.charAt(0)}g.push(d),h[c++]=r+d.charAt(0),r=d,0==--u&&(u=Math.pow(2,f),f++)}}});function l(t,e){if(!s[t]){s[t]={};for(var n=0;n<t.length;n++)s[t][t.charAt(n)]=n}return s[t][e]}void 0===(e=function(){return a}.call(e,n,e,t))||(t.exports=e)},35:function(t,e,n){"use strict";t.exports=function(t,e,n){var r=t*e,i=o*t,s=i-(i-t),i=t-s,t=o*e,t=t-(t-e),e=e-t,e=i*e-(r-s*t-i*t-s*e);if(n)return n[0]=e,n[1]=r,n;return[e,r]};var o=+(Math.pow(2,27)+1)},36:function(t,e,n){t.exports=function(t,e){for(var n=e[0],r=e[1],i=t.length,s=1,o=i,a=0,l=i-1;a<o;l=a++){var h=t[a],u=t[l],c=h[1],f=u[1];if(f<c){if(f<r&&r<c){if(0===(g=x(h,u,e)))return 0;s^=0<g|0}else if(r===c){var d=(p=t[(a+1)%i])[1];if(c<d){if(0===(g=x(h,u,e)))return 0;s^=0<g|0}}}else if(c<f){if(c<r&&r<f){if(0===(g=x(h,u,e)))return 0;s^=g<0|0}else if(r===c){var g,p=t[(a+1)%i];if((d=p[1])<c){if(0===(g=x(h,u,e)))return 0;s^=g<0|0}}}else if(r===c){var m=Math.min(h[0],u[0]),y=Math.max(h[0],u[0]);if(0===a){for(;0<l;){var _=(l+i-1)%i;if((w=t[_])[1]!==r)break;var v=w[0];m=Math.min(m,v),y=Math.max(y,v),l=_}if(0===l)return m<=n&&n<=y?0:1;o=l+1}for(var w,h=t[(l+i-1)%i][1];a+1<o;){if((w=t[a+1])[1]!==r)break;v=w[0];m=Math.min(m,v),y=Math.max(y,v),a+=1}if(m<=n&&n<=y)return 0;u=t[(a+1)%i][1];n<m&&h<r!=u<r&&(s^=1)}}return 2*s-1};var x=n(124)}},r={},i.m=n,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=129);function i(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}var n,r});