{"version":3,"file":"vistorian-core.js","sources":["../src/data/dynamicgraphutils.ts","../node_modules/d3-time/src/interval.js","../node_modules/d3-time/src/millisecond.js","../node_modules/d3-time/src/duration.js","../node_modules/d3-time/src/second.js","../node_modules/d3-time/src/minute.js","../node_modules/d3-time/src/hour.js","../node_modules/d3-time/src/day.js","../node_modules/d3-time/src/week.js","../node_modules/d3-time/src/month.js","../node_modules/d3-time/src/year.js","../node_modules/d3-time/src/utcMinute.js","../node_modules/d3-time/src/utcHour.js","../node_modules/d3-time/src/utcDay.js","../node_modules/d3-time/src/utcWeek.js","../node_modules/d3-time/src/utcMonth.js","../node_modules/d3-time/src/utcYear.js","../node_modules/d3-array/src/ascending.js","../node_modules/d3-array/src/bisector.js","../node_modules/d3-array/src/bisect.js","../node_modules/d3-array/src/number.js","../node_modules/d3-array/src/ticks.js","../node_modules/d3-time/src/ticks.js","../node_modules/d3-time-format/src/locale.js","../node_modules/d3-time-format/src/defaultLocale.js","../node_modules/d3-axis/src/identity.js","../node_modules/d3-axis/src/axis.js","../node_modules/d3-dispatch/src/dispatch.js","../node_modules/d3-selection/src/namespaces.js","../node_modules/d3-selection/src/namespace.js","../node_modules/d3-selection/src/creator.js","../node_modules/d3-selection/src/selector.js","../node_modules/d3-selection/src/array.js","../node_modules/d3-selection/src/selectorAll.js","../node_modules/d3-selection/src/matcher.js","../node_modules/d3-selection/src/selection/selectChild.js","../node_modules/d3-selection/src/selection/selectChildren.js","../node_modules/d3-selection/src/selection/sparse.js","../node_modules/d3-selection/src/selection/enter.js","../node_modules/d3-selection/src/constant.js","../node_modules/d3-selection/src/selection/data.js","../node_modules/d3-selection/src/selection/sort.js","../node_modules/d3-selection/src/selection/attr.js","../node_modules/d3-selection/src/window.js","../node_modules/d3-selection/src/selection/style.js","../node_modules/d3-selection/src/selection/property.js","../node_modules/d3-selection/src/selection/classed.js","../node_modules/d3-selection/src/selection/text.js","../node_modules/d3-selection/src/selection/html.js","../node_modules/d3-selection/src/selection/raise.js","../node_modules/d3-selection/src/selection/lower.js","../node_modules/d3-selection/src/selection/insert.js","../node_modules/d3-selection/src/selection/remove.js","../node_modules/d3-selection/src/selection/clone.js","../node_modules/d3-selection/src/selection/on.js","../node_modules/d3-selection/src/selection/dispatch.js","../node_modules/d3-selection/src/selection/index.js","../node_modules/d3-selection/src/select.js","../node_modules/d3-selection/src/pointer.js","../node_modules/d3-selection/src/sourceEvent.js","../node_modules/d3-selection/src/selection/select.js","../node_modules/d3-selection/src/selection/selectAll.js","../node_modules/d3-selection/src/selection/filter.js","../node_modules/d3-selection/src/selection/exit.js","../node_modules/d3-selection/src/selection/join.js","../node_modules/d3-selection/src/selection/merge.js","../node_modules/d3-selection/src/selection/order.js","../node_modules/d3-selection/src/selection/call.js","../node_modules/d3-selection/src/selection/nodes.js","../node_modules/d3-selection/src/selection/node.js","../node_modules/d3-selection/src/selection/size.js","../node_modules/d3-selection/src/selection/empty.js","../node_modules/d3-selection/src/selection/each.js","../node_modules/d3-selection/src/selection/append.js","../node_modules/d3-selection/src/selection/datum.js","../node_modules/d3-selection/src/selection/iterator.js","../node_modules/d3-drag/src/noevent.js","../node_modules/d3-drag/src/constant.js","../node_modules/d3-drag/src/event.js","../node_modules/d3-drag/src/drag.js","../node_modules/d3-drag/src/nodrag.js","../node_modules/d3-color/src/define.js","../node_modules/d3-color/src/color.js","../node_modules/d3-interpolate/src/constant.js","../node_modules/d3-interpolate/src/color.js","../node_modules/d3-interpolate/src/rgb.js","../node_modules/d3-interpolate/src/numberArray.js","../node_modules/d3-interpolate/src/array.js","../node_modules/d3-interpolate/src/date.js","../node_modules/d3-interpolate/src/number.js","../node_modules/d3-interpolate/src/object.js","../node_modules/d3-interpolate/src/string.js","../node_modules/d3-interpolate/src/value.js","../node_modules/d3-interpolate/src/round.js","../node_modules/d3-interpolate/src/transform/decompose.js","../node_modules/d3-interpolate/src/transform/parse.js","../node_modules/d3-interpolate/src/transform/index.js","../node_modules/d3-timer/src/timer.js","../node_modules/d3-timer/src/timeout.js","../node_modules/d3-transition/src/transition/schedule.js","../node_modules/d3-transition/src/transition/tween.js","../node_modules/d3-transition/src/transition/interpolate.js","../node_modules/d3-transition/src/transition/attr.js","../node_modules/d3-transition/src/transition/attrTween.js","../node_modules/d3-transition/src/transition/delay.js","../node_modules/d3-transition/src/transition/duration.js","../node_modules/d3-transition/src/transition/ease.js","../node_modules/d3-transition/src/transition/on.js","../node_modules/d3-transition/src/transition/selection.js","../node_modules/d3-transition/src/transition/style.js","../node_modules/d3-transition/src/transition/styleTween.js","../node_modules/d3-transition/src/transition/textTween.js","../node_modules/d3-transition/src/transition/index.js","../node_modules/d3-transition/src/transition/select.js","../node_modules/d3-transition/src/transition/selectAll.js","../node_modules/d3-transition/src/transition/filter.js","../node_modules/d3-transition/src/transition/merge.js","../node_modules/d3-transition/src/transition/transition.js","../node_modules/d3-transition/src/transition/text.js","../node_modules/d3-transition/src/transition/remove.js","../node_modules/d3-transition/src/transition/easeVarying.js","../node_modules/d3-transition/src/transition/end.js","../node_modules/d3-transition/src/selection/transition.js","../node_modules/d3-ease/src/cubic.js","../node_modules/d3-fetch/src/text.js","../node_modules/d3-fetch/src/json.js","../node_modules/d3-transition/src/selection/index.js","../node_modules/d3-transition/src/selection/interrupt.js","../node_modules/d3-transition/src/interrupt.js","../node_modules/d3-fetch/src/xml.js","../node_modules/d3-format/src/formatDecimal.js","../node_modules/d3-format/src/exponent.js","../node_modules/d3-format/src/formatSpecifier.js","../node_modules/d3-format/src/formatPrefixAuto.js","../node_modules/d3-format/src/formatRounded.js","../node_modules/d3-format/src/formatTypes.js","../node_modules/d3-format/src/identity.js","../node_modules/d3-format/src/locale.js","../node_modules/d3-format/src/defaultLocale.js","../node_modules/d3-format/src/formatGroup.js","../node_modules/d3-format/src/formatNumerals.js","../node_modules/d3-format/src/formatTrim.js","../node_modules/d3-scale/src/init.js","../node_modules/d3-scale/src/number.js","../node_modules/d3-scale/src/continuous.js","../node_modules/d3-scale/src/constant.js","../node_modules/d3-scale/src/tickFormat.js","../node_modules/d3-format/src/precisionPrefix.js","../node_modules/d3-format/src/precisionRound.js","../node_modules/d3-format/src/precisionFixed.js","../node_modules/d3-scale/src/linear.js","../node_modules/d3-scale/src/time.js","../node_modules/d3-scale/src/nice.js","../src/data/dates.ts","../src/data/dynamicgraph.ts","../src/data/utils.ts","../src/data/ordering.ts","../src/data/motifs.ts","../node_modules/lz-string/libs/lz-string.js","../src/data/datamanager.ts","../src/data/main.ts","../src/data/importers.ts","../src/data/search.ts","../src/data/messenger.ts","../src/data/analytics.ts","../src/ui/colors.ts","../src/ui/BSpline.ts","../src/ui/glutils.ts","../src/ui/rangeslider.ts","../src/ui/slider.ts","../src/ui/smartslider.ts","../src/ui/timeline.ts","../src/ui/ui.ts","../src/ui/timeslider.ts","../node_modules/d3-scale/src/utcTime.js"],"sourcesContent":["// namespace networkcube {\n\n/* moved from utils to datamanager */\nexport function isValidIndex(v: number | undefined): boolean {\n  return v != undefined && v > -1;\n}\n\n/* moved from dynamicgraph to datamanager */\nexport class Selection {\n  name: string;\n  elementIds: number[];\n  acceptedType: string;\n  color = \"#3366cc\"; // INIT??\n  id: number;\n  showColor = true;\n  filter = false;\n  priority = 0;\n\n  constructor(id: number, acceptedType: string) {\n    this.id = id;\n    this.name = \"Selection-\" + this.id;\n    this.elementIds = [];\n    this.acceptedType = acceptedType;\n    this.priority = id;\n  }\n\n  acceptsType(type: string): boolean {\n    return this.acceptedType == type;\n  }\n}\n\n// data set / graph with name\nexport class DataSet {\n  name: string;\n  nodeTable: any[];\n  linkTable: any[];\n  locationTable: any[] = [];\n  nodeSchema: NodeSchema;\n  linkSchema: LinkSchema;\n  locationSchema: LocationSchema;\n  selections: Selection[] = []; //predefined selections (not link type)\n\n  timeFormat = \"\"; // INIT?????????????\n  directed: boolean;\n\n  // constructor(name:string, nodeTable:any[], linkTable:any[], nodeSchema:NodeSchema, linkSchema:LinkSchema, locationTable?:any, locationSchema?:LocationSchema){\n  constructor(params: any) {\n    // before without any\n    this.name = params.name;\n    this.nodeTable = params.nodeTable;\n    this.linkTable = params.linkTable;\n    this.directed = params.directed;\n\n    if (params.nodeSchema == undefined)\n      this.nodeSchema = getDefaultNodeSchema();\n    else this.nodeSchema = params.nodeSchema;\n\n    if (params.linkSchema == undefined)\n      this.linkSchema = getDefaultLinkSchema();\n    else this.linkSchema = params.linkSchema;\n\n    if (params.locationTable != undefined)\n      this.locationTable = params.locationTable;\n\n    if (params.locationSchema == undefined)\n      this.locationSchema = getDefaultLocationSchema();\n    else this.locationSchema = params.locationSchema;\n\n    console.log(\"[n3] data set created\", this);\n  }\n}\n\nexport function getDefaultNodeSchema(): NodeSchema {\n  return new NodeSchema(0);\n}\n\nexport function getDefaultLinkSchema(): LinkSchema {\n  return new LinkSchema(0, 1, 2);\n}\n\nexport function getDefaultLocationSchema(): LocationSchema {\n  return new LocationSchema(0, 1, 2, 3, 4, 5, 6, 7, 8);\n}\n\nexport class TableSchema {\n  name: string;\n\n  constructor(name: string) {\n    this.name = name;\n  }\n}\n\n// default node schema for node table\nexport class NodeSchema extends TableSchema {\n  id: number;\n  /* INIT ?????????????????? */\n  label = -1;\n  time = -1;\n  location = -1;\n  nodeType = -1;\n  shape = -1;\n  color = -1;\n\n  constructor(id: number) {\n    super(\"nodeSchema\");\n    this.id = id;\n  }\n}\n\n// default node schema for link table\nexport class LinkSchema extends TableSchema {\n  id: number;\n  source: number;\n  target: number;\n  weight = -1; // INIT????????\n  linkType = -1;\n  directed = -1;\n  time = -1;\n\n  constructor(id: number, source: number, target: number) {\n    super(\"linkSchema\");\n    this.source = source;\n    this.target = target;\n    this.id = id;\n  }\n}\n\nexport class LocationSchema extends TableSchema {\n  id: number;\n  label: number; // user given label\n  geoname = -1; // actual geo name (english)\n  longitude = -1;\n  latitude = -1;\n  x = -1;\n  y = -1;\n  z = -1;\n  radius = -1;\n\n  constructor(\n    id: number,\n    label: number,\n    geoname?: number,\n    longitude?: number,\n    latitude?: number,\n    x?: number,\n    y?: number,\n    z?: number,\n    radius?: number\n  ) {\n    super(\"locationSchema\");\n\n    this.id = id;\n    this.label = label;\n\n    if (isValidIndex(geoname))\n      this.geoname = geoname != undefined ? geoname : -1; // geoname never will be undefined at this point\n    if (isValidIndex(longitude))\n      this.longitude = longitude != undefined ? longitude : -1;\n    if (isValidIndex(latitude))\n      this.latitude = latitude != undefined ? latitude : -1;\n    if (isValidIndex(x)) this.x = x != undefined ? x : -1;\n    if (isValidIndex(y)) this.y = y != undefined ? y : -1;\n    if (isValidIndex(z)) this.z = z != undefined ? z : -1;\n    if (isValidIndex(radius)) this.radius = radius != undefined ? radius : -1;\n  }\n}\n\n//}\n","var t0 = new Date,\n    t1 = new Date;\n\nexport default function newInterval(floori, offseti, count, field) {\n\n  function interval(date) {\n    return floori(date = arguments.length === 0 ? new Date : new Date(+date)), date;\n  }\n\n  interval.floor = function(date) {\n    return floori(date = new Date(+date)), date;\n  };\n\n  interval.ceil = function(date) {\n    return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;\n  };\n\n  interval.round = function(date) {\n    var d0 = interval(date),\n        d1 = interval.ceil(date);\n    return date - d0 < d1 - date ? d0 : d1;\n  };\n\n  interval.offset = function(date, step) {\n    return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;\n  };\n\n  interval.range = function(start, stop, step) {\n    var range = [], previous;\n    start = interval.ceil(start);\n    step = step == null ? 1 : Math.floor(step);\n    if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date\n    do range.push(previous = new Date(+start)), offseti(start, step), floori(start);\n    while (previous < start && start < stop);\n    return range;\n  };\n\n  interval.filter = function(test) {\n    return newInterval(function(date) {\n      if (date >= date) while (floori(date), !test(date)) date.setTime(date - 1);\n    }, function(date, step) {\n      if (date >= date) {\n        if (step < 0) while (++step <= 0) {\n          while (offseti(date, -1), !test(date)) {} // eslint-disable-line no-empty\n        } else while (--step >= 0) {\n          while (offseti(date, +1), !test(date)) {} // eslint-disable-line no-empty\n        }\n      }\n    });\n  };\n\n  if (count) {\n    interval.count = function(start, end) {\n      t0.setTime(+start), t1.setTime(+end);\n      floori(t0), floori(t1);\n      return Math.floor(count(t0, t1));\n    };\n\n    interval.every = function(step) {\n      step = Math.floor(step);\n      return !isFinite(step) || !(step > 0) ? null\n          : !(step > 1) ? interval\n          : interval.filter(field\n              ? function(d) { return field(d) % step === 0; }\n              : function(d) { return interval.count(0, d) % step === 0; });\n    };\n  }\n\n  return interval;\n}\n","import interval from \"./interval.js\";\n\nvar millisecond = interval(function() {\n  // noop\n}, function(date, step) {\n  date.setTime(+date + step);\n}, function(start, end) {\n  return end - start;\n});\n\n// An optimized implementation for this simple case.\nmillisecond.every = function(k) {\n  k = Math.floor(k);\n  if (!isFinite(k) || !(k > 0)) return null;\n  if (!(k > 1)) return millisecond;\n  return interval(function(date) {\n    date.setTime(Math.floor(date / k) * k);\n  }, function(date, step) {\n    date.setTime(+date + step * k);\n  }, function(start, end) {\n    return (end - start) / k;\n  });\n};\n\nexport default millisecond;\nexport var milliseconds = millisecond.range;\n","export const durationSecond = 1000;\nexport const durationMinute = durationSecond * 60;\nexport const durationHour = durationMinute * 60;\nexport const durationDay = durationHour * 24;\nexport const durationWeek = durationDay * 7;\nexport const durationMonth = durationDay * 30;\nexport const durationYear = durationDay * 365;\n","import interval from \"./interval.js\";\nimport {durationSecond} from \"./duration.js\";\n\nvar second = interval(function(date) {\n  date.setTime(date - date.getMilliseconds());\n}, function(date, step) {\n  date.setTime(+date + step * durationSecond);\n}, function(start, end) {\n  return (end - start) / durationSecond;\n}, function(date) {\n  return date.getUTCSeconds();\n});\n\nexport default second;\nexport var seconds = second.range;\n","import interval from \"./interval.js\";\nimport {durationMinute, durationSecond} from \"./duration.js\";\n\nvar minute = interval(function(date) {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getMinutes();\n});\n\nexport default minute;\nexport var minutes = minute.range;\n","import interval from \"./interval.js\";\nimport {durationHour, durationMinute, durationSecond} from \"./duration.js\";\n\nvar hour = interval(function(date) {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond - date.getMinutes() * durationMinute);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getHours();\n});\n\nexport default hour;\nexport var hours = hour.range;\n","import interval from \"./interval.js\";\nimport {durationDay, durationMinute} from \"./duration.js\";\n\nvar day = interval(\n  date => date.setHours(0, 0, 0, 0),\n  (date, step) => date.setDate(date.getDate() + step),\n  (start, end) => (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationDay,\n  date => date.getDate() - 1\n);\n\nexport default day;\nexport var days = day.range;\n","import interval from \"./interval.js\";\nimport {durationMinute, durationWeek} from \"./duration.js\";\n\nfunction weekday(i) {\n  return interval(function(date) {\n    date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setDate(date.getDate() + step * 7);\n  }, function(start, end) {\n    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationWeek;\n  });\n}\n\nexport var sunday = weekday(0);\nexport var monday = weekday(1);\nexport var tuesday = weekday(2);\nexport var wednesday = weekday(3);\nexport var thursday = weekday(4);\nexport var friday = weekday(5);\nexport var saturday = weekday(6);\n\nexport var sundays = sunday.range;\nexport var mondays = monday.range;\nexport var tuesdays = tuesday.range;\nexport var wednesdays = wednesday.range;\nexport var thursdays = thursday.range;\nexport var fridays = friday.range;\nexport var saturdays = saturday.range;\n","import interval from \"./interval.js\";\n\nvar month = interval(function(date) {\n  date.setDate(1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setMonth(date.getMonth() + step);\n}, function(start, end) {\n  return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;\n}, function(date) {\n  return date.getMonth();\n});\n\nexport default month;\nexport var months = month.range;\n","import interval from \"./interval.js\";\n\nvar year = interval(function(date) {\n  date.setMonth(0, 1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setFullYear(date.getFullYear() + step);\n}, function(start, end) {\n  return end.getFullYear() - start.getFullYear();\n}, function(date) {\n  return date.getFullYear();\n});\n\n// An optimized implementation for this simple case.\nyear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setFullYear(Math.floor(date.getFullYear() / k) * k);\n    date.setMonth(0, 1);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setFullYear(date.getFullYear() + step * k);\n  });\n};\n\nexport default year;\nexport var years = year.range;\n","import interval from \"./interval.js\";\nimport {durationMinute} from \"./duration.js\";\n\nvar utcMinute = interval(function(date) {\n  date.setUTCSeconds(0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getUTCMinutes();\n});\n\nexport default utcMinute;\nexport var utcMinutes = utcMinute.range;\n","import interval from \"./interval.js\";\nimport {durationHour} from \"./duration.js\";\n\nvar utcHour = interval(function(date) {\n  date.setUTCMinutes(0, 0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getUTCHours();\n});\n\nexport default utcHour;\nexport var utcHours = utcHour.range;\n","import interval from \"./interval.js\";\nimport {durationDay} from \"./duration.js\";\n\nvar utcDay = interval(function(date) {\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCDate(date.getUTCDate() + step);\n}, function(start, end) {\n  return (end - start) / durationDay;\n}, function(date) {\n  return date.getUTCDate() - 1;\n});\n\nexport default utcDay;\nexport var utcDays = utcDay.range;\n","import interval from \"./interval.js\";\nimport {durationWeek} from \"./duration.js\";\n\nfunction utcWeekday(i) {\n  return interval(function(date) {\n    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCDate(date.getUTCDate() + step * 7);\n  }, function(start, end) {\n    return (end - start) / durationWeek;\n  });\n}\n\nexport var utcSunday = utcWeekday(0);\nexport var utcMonday = utcWeekday(1);\nexport var utcTuesday = utcWeekday(2);\nexport var utcWednesday = utcWeekday(3);\nexport var utcThursday = utcWeekday(4);\nexport var utcFriday = utcWeekday(5);\nexport var utcSaturday = utcWeekday(6);\n\nexport var utcSundays = utcSunday.range;\nexport var utcMondays = utcMonday.range;\nexport var utcTuesdays = utcTuesday.range;\nexport var utcWednesdays = utcWednesday.range;\nexport var utcThursdays = utcThursday.range;\nexport var utcFridays = utcFriday.range;\nexport var utcSaturdays = utcSaturday.range;\n","import interval from \"./interval.js\";\n\nvar utcMonth = interval(function(date) {\n  date.setUTCDate(1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCMonth(date.getUTCMonth() + step);\n}, function(start, end) {\n  return end.getUTCMonth() - start.getUTCMonth() + (end.getUTCFullYear() - start.getUTCFullYear()) * 12;\n}, function(date) {\n  return date.getUTCMonth();\n});\n\nexport default utcMonth;\nexport var utcMonths = utcMonth.range;\n","import interval from \"./interval.js\";\n\nvar utcYear = interval(function(date) {\n  date.setUTCMonth(0, 1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCFullYear(date.getUTCFullYear() + step);\n}, function(start, end) {\n  return end.getUTCFullYear() - start.getUTCFullYear();\n}, function(date) {\n  return date.getUTCFullYear();\n});\n\n// An optimized implementation for this simple case.\nutcYear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);\n    date.setUTCMonth(0, 1);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCFullYear(date.getUTCFullYear() + step * k);\n  });\n};\n\nexport default utcYear;\nexport var utcYears = utcYear.range;\n","export default function ascending(a, b) {\n  return a == null || b == null ? NaN : a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import ascending from \"./ascending.js\";\n\nexport default function bisector(f) {\n  let delta = f;\n  let compare1 = f;\n  let compare2 = f;\n\n  if (f.length === 1) {\n    delta = (d, x) => f(d) - x;\n    compare1 = ascending;\n    compare2 = (d, x) => ascending(f(d), x);\n  }\n\n  function left(a, x, lo = 0, hi = a.length) {\n    if (lo < hi) {\n      if (compare1(x, x) !== 0) return hi;\n      do {\n        const mid = (lo + hi) >>> 1;\n        if (compare2(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      } while (lo < hi);\n    }\n    return lo;\n  }\n\n  function right(a, x, lo = 0, hi = a.length) {\n    if (lo < hi) {\n      if (compare1(x, x) !== 0) return hi;\n      do {\n        const mid = (lo + hi) >>> 1;\n        if (compare2(a[mid], x) <= 0) lo = mid + 1;\n        else hi = mid;\n      } while (lo < hi);\n    }\n    return lo;\n  }\n\n  function center(a, x, lo = 0, hi = a.length) {\n    const i = left(a, x, lo, hi - 1);\n    return i > lo && delta(a[i - 1], x) > -delta(a[i], x) ? i - 1 : i;\n  }\n\n  return {left, center, right};\n}\n","import ascending from \"./ascending.js\";\nimport bisector from \"./bisector.js\";\nimport number from \"./number.js\";\n\nconst ascendingBisect = bisector(ascending);\nexport const bisectRight = ascendingBisect.right;\nexport const bisectLeft = ascendingBisect.left;\nexport const bisectCenter = bisector(number).center;\nexport default bisectRight;\n","export default function number(x) {\n  return x === null ? NaN : +x;\n}\n\nexport function* numbers(values, valueof) {\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  }\n}\n","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function ticks(start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    let r0 = Math.round(start / step), r1 = Math.round(stop / step);\n    if (r0 * step < start) ++r0;\n    if (r1 * step > stop) --r1;\n    ticks = new Array(n = r1 - r0 + 1);\n    while (++i < n) ticks[i] = (r0 + i) * step;\n  } else {\n    step = -step;\n    let r0 = Math.round(start * step), r1 = Math.round(stop * step);\n    if (r0 / step < start) ++r0;\n    if (r1 / step > stop) --r1;\n    ticks = new Array(n = r1 - r0 + 1);\n    while (++i < n) ticks[i] = (r0 + i) / step;\n  }\n\n  if (reverse) ticks.reverse();\n\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0\n      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n","import {bisector, tickStep} from \"d3-array\";\nimport {durationDay, durationHour, durationMinute, durationMonth, durationSecond, durationWeek, durationYear} from \"./duration.js\";\nimport millisecond from \"./millisecond.js\";\nimport second from \"./second.js\";\nimport minute from \"./minute.js\";\nimport hour from \"./hour.js\";\nimport day from \"./day.js\";\nimport {sunday as week} from \"./week.js\";\nimport month from \"./month.js\";\nimport year from \"./year.js\";\nimport utcMinute from \"./utcMinute.js\";\nimport utcHour from \"./utcHour.js\";\nimport utcDay from \"./utcDay.js\";\nimport {utcSunday as utcWeek} from \"./utcWeek.js\";\nimport utcMonth from \"./utcMonth.js\";\nimport utcYear from \"./utcYear.js\";\n\nfunction ticker(year, month, week, day, hour, minute) {\n\n  const tickIntervals = [\n    [second,  1,      durationSecond],\n    [second,  5,  5 * durationSecond],\n    [second, 15, 15 * durationSecond],\n    [second, 30, 30 * durationSecond],\n    [minute,  1,      durationMinute],\n    [minute,  5,  5 * durationMinute],\n    [minute, 15, 15 * durationMinute],\n    [minute, 30, 30 * durationMinute],\n    [  hour,  1,      durationHour  ],\n    [  hour,  3,  3 * durationHour  ],\n    [  hour,  6,  6 * durationHour  ],\n    [  hour, 12, 12 * durationHour  ],\n    [   day,  1,      durationDay   ],\n    [   day,  2,  2 * durationDay   ],\n    [  week,  1,      durationWeek  ],\n    [ month,  1,      durationMonth ],\n    [ month,  3,  3 * durationMonth ],\n    [  year,  1,      durationYear  ]\n  ];\n\n  function ticks(start, stop, count) {\n    const reverse = stop < start;\n    if (reverse) [start, stop] = [stop, start];\n    const interval = count && typeof count.range === \"function\" ? count : tickInterval(start, stop, count);\n    const ticks = interval ? interval.range(start, +stop + 1) : []; // inclusive stop\n    return reverse ? ticks.reverse() : ticks;\n  }\n\n  function tickInterval(start, stop, count) {\n    const target = Math.abs(stop - start) / count;\n    const i = bisector(([,, step]) => step).right(tickIntervals, target);\n    if (i === tickIntervals.length) return year.every(tickStep(start / durationYear, stop / durationYear, count));\n    if (i === 0) return millisecond.every(Math.max(tickStep(start, stop, count), 1));\n    const [t, step] = tickIntervals[target / tickIntervals[i - 1][2] < tickIntervals[i][2] / target ? i - 1 : i];\n    return t.every(step);\n  }\n\n  return [ticks, tickInterval];\n}\n\nconst [utcTicks, utcTickInterval] = ticker(utcYear, utcMonth, utcWeek, utcDay, utcHour, utcMinute);\nconst [timeTicks, timeTickInterval] = ticker(year, month, week, day, hour, minute);\n\nexport {utcTicks, utcTickInterval, timeTicks, timeTickInterval};\n","import {\n  timeDay,\n  timeSunday,\n  timeMonday,\n  timeThursday,\n  timeYear,\n  utcDay,\n  utcSunday,\n  utcMonday,\n  utcThursday,\n  utcYear\n} from \"d3-time\";\n\nfunction localDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);\n    date.setFullYear(d.y);\n    return date;\n  }\n  return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);\n}\n\nfunction utcDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));\n    date.setUTCFullYear(d.y);\n    return date;\n  }\n  return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));\n}\n\nfunction newDate(y, m, d) {\n  return {y: y, m: m, d: d, H: 0, M: 0, S: 0, L: 0};\n}\n\nexport default function formatLocale(locale) {\n  var locale_dateTime = locale.dateTime,\n      locale_date = locale.date,\n      locale_time = locale.time,\n      locale_periods = locale.periods,\n      locale_weekdays = locale.days,\n      locale_shortWeekdays = locale.shortDays,\n      locale_months = locale.months,\n      locale_shortMonths = locale.shortMonths;\n\n  var periodRe = formatRe(locale_periods),\n      periodLookup = formatLookup(locale_periods),\n      weekdayRe = formatRe(locale_weekdays),\n      weekdayLookup = formatLookup(locale_weekdays),\n      shortWeekdayRe = formatRe(locale_shortWeekdays),\n      shortWeekdayLookup = formatLookup(locale_shortWeekdays),\n      monthRe = formatRe(locale_months),\n      monthLookup = formatLookup(locale_months),\n      shortMonthRe = formatRe(locale_shortMonths),\n      shortMonthLookup = formatLookup(locale_shortMonths);\n\n  var formats = {\n    \"a\": formatShortWeekday,\n    \"A\": formatWeekday,\n    \"b\": formatShortMonth,\n    \"B\": formatMonth,\n    \"c\": null,\n    \"d\": formatDayOfMonth,\n    \"e\": formatDayOfMonth,\n    \"f\": formatMicroseconds,\n    \"g\": formatYearISO,\n    \"G\": formatFullYearISO,\n    \"H\": formatHour24,\n    \"I\": formatHour12,\n    \"j\": formatDayOfYear,\n    \"L\": formatMilliseconds,\n    \"m\": formatMonthNumber,\n    \"M\": formatMinutes,\n    \"p\": formatPeriod,\n    \"q\": formatQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatSeconds,\n    \"u\": formatWeekdayNumberMonday,\n    \"U\": formatWeekNumberSunday,\n    \"V\": formatWeekNumberISO,\n    \"w\": formatWeekdayNumberSunday,\n    \"W\": formatWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatYear,\n    \"Y\": formatFullYear,\n    \"Z\": formatZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var utcFormats = {\n    \"a\": formatUTCShortWeekday,\n    \"A\": formatUTCWeekday,\n    \"b\": formatUTCShortMonth,\n    \"B\": formatUTCMonth,\n    \"c\": null,\n    \"d\": formatUTCDayOfMonth,\n    \"e\": formatUTCDayOfMonth,\n    \"f\": formatUTCMicroseconds,\n    \"g\": formatUTCYearISO,\n    \"G\": formatUTCFullYearISO,\n    \"H\": formatUTCHour24,\n    \"I\": formatUTCHour12,\n    \"j\": formatUTCDayOfYear,\n    \"L\": formatUTCMilliseconds,\n    \"m\": formatUTCMonthNumber,\n    \"M\": formatUTCMinutes,\n    \"p\": formatUTCPeriod,\n    \"q\": formatUTCQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatUTCSeconds,\n    \"u\": formatUTCWeekdayNumberMonday,\n    \"U\": formatUTCWeekNumberSunday,\n    \"V\": formatUTCWeekNumberISO,\n    \"w\": formatUTCWeekdayNumberSunday,\n    \"W\": formatUTCWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatUTCYear,\n    \"Y\": formatUTCFullYear,\n    \"Z\": formatUTCZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var parses = {\n    \"a\": parseShortWeekday,\n    \"A\": parseWeekday,\n    \"b\": parseShortMonth,\n    \"B\": parseMonth,\n    \"c\": parseLocaleDateTime,\n    \"d\": parseDayOfMonth,\n    \"e\": parseDayOfMonth,\n    \"f\": parseMicroseconds,\n    \"g\": parseYear,\n    \"G\": parseFullYear,\n    \"H\": parseHour24,\n    \"I\": parseHour24,\n    \"j\": parseDayOfYear,\n    \"L\": parseMilliseconds,\n    \"m\": parseMonthNumber,\n    \"M\": parseMinutes,\n    \"p\": parsePeriod,\n    \"q\": parseQuarter,\n    \"Q\": parseUnixTimestamp,\n    \"s\": parseUnixTimestampSeconds,\n    \"S\": parseSeconds,\n    \"u\": parseWeekdayNumberMonday,\n    \"U\": parseWeekNumberSunday,\n    \"V\": parseWeekNumberISO,\n    \"w\": parseWeekdayNumberSunday,\n    \"W\": parseWeekNumberMonday,\n    \"x\": parseLocaleDate,\n    \"X\": parseLocaleTime,\n    \"y\": parseYear,\n    \"Y\": parseFullYear,\n    \"Z\": parseZone,\n    \"%\": parseLiteralPercent\n  };\n\n  // These recursive directive definitions must be deferred.\n  formats.x = newFormat(locale_date, formats);\n  formats.X = newFormat(locale_time, formats);\n  formats.c = newFormat(locale_dateTime, formats);\n  utcFormats.x = newFormat(locale_date, utcFormats);\n  utcFormats.X = newFormat(locale_time, utcFormats);\n  utcFormats.c = newFormat(locale_dateTime, utcFormats);\n\n  function newFormat(specifier, formats) {\n    return function(date) {\n      var string = [],\n          i = -1,\n          j = 0,\n          n = specifier.length,\n          c,\n          pad,\n          format;\n\n      if (!(date instanceof Date)) date = new Date(+date);\n\n      while (++i < n) {\n        if (specifier.charCodeAt(i) === 37) {\n          string.push(specifier.slice(j, i));\n          if ((pad = pads[c = specifier.charAt(++i)]) != null) c = specifier.charAt(++i);\n          else pad = c === \"e\" ? \" \" : \"0\";\n          if (format = formats[c]) c = format(date, pad);\n          string.push(c);\n          j = i + 1;\n        }\n      }\n\n      string.push(specifier.slice(j, i));\n      return string.join(\"\");\n    };\n  }\n\n  function newParse(specifier, Z) {\n    return function(string) {\n      var d = newDate(1900, undefined, 1),\n          i = parseSpecifier(d, specifier, string += \"\", 0),\n          week, day;\n      if (i != string.length) return null;\n\n      // If a UNIX timestamp is specified, return it.\n      if (\"Q\" in d) return new Date(d.Q);\n      if (\"s\" in d) return new Date(d.s * 1000 + (\"L\" in d ? d.L : 0));\n\n      // If this is utcParse, never use the local timezone.\n      if (Z && !(\"Z\" in d)) d.Z = 0;\n\n      // The am-pm flag is 0 for AM, and 1 for PM.\n      if (\"p\" in d) d.H = d.H % 12 + d.p * 12;\n\n      // If the month was not specified, inherit from the quarter.\n      if (d.m === undefined) d.m = \"q\" in d ? d.q : 0;\n\n      // Convert day-of-week and week-of-year to day-of-year.\n      if (\"V\" in d) {\n        if (d.V < 1 || d.V > 53) return null;\n        if (!(\"w\" in d)) d.w = 1;\n        if (\"Z\" in d) {\n          week = utcDate(newDate(d.y, 0, 1)), day = week.getUTCDay();\n          week = day > 4 || day === 0 ? utcMonday.ceil(week) : utcMonday(week);\n          week = utcDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getUTCFullYear();\n          d.m = week.getUTCMonth();\n          d.d = week.getUTCDate() + (d.w + 6) % 7;\n        } else {\n          week = localDate(newDate(d.y, 0, 1)), day = week.getDay();\n          week = day > 4 || day === 0 ? timeMonday.ceil(week) : timeMonday(week);\n          week = timeDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getFullYear();\n          d.m = week.getMonth();\n          d.d = week.getDate() + (d.w + 6) % 7;\n        }\n      } else if (\"W\" in d || \"U\" in d) {\n        if (!(\"w\" in d)) d.w = \"u\" in d ? d.u % 7 : \"W\" in d ? 1 : 0;\n        day = \"Z\" in d ? utcDate(newDate(d.y, 0, 1)).getUTCDay() : localDate(newDate(d.y, 0, 1)).getDay();\n        d.m = 0;\n        d.d = \"W\" in d ? (d.w + 6) % 7 + d.W * 7 - (day + 5) % 7 : d.w + d.U * 7 - (day + 6) % 7;\n      }\n\n      // If a time zone is specified, all fields are interpreted as UTC and then\n      // offset according to the specified time zone.\n      if (\"Z\" in d) {\n        d.H += d.Z / 100 | 0;\n        d.M += d.Z % 100;\n        return utcDate(d);\n      }\n\n      // Otherwise, all fields are in local time.\n      return localDate(d);\n    };\n  }\n\n  function parseSpecifier(d, specifier, string, j) {\n    var i = 0,\n        n = specifier.length,\n        m = string.length,\n        c,\n        parse;\n\n    while (i < n) {\n      if (j >= m) return -1;\n      c = specifier.charCodeAt(i++);\n      if (c === 37) {\n        c = specifier.charAt(i++);\n        parse = parses[c in pads ? specifier.charAt(i++) : c];\n        if (!parse || ((j = parse(d, string, j)) < 0)) return -1;\n      } else if (c != string.charCodeAt(j++)) {\n        return -1;\n      }\n    }\n\n    return j;\n  }\n\n  function parsePeriod(d, string, i) {\n    var n = periodRe.exec(string.slice(i));\n    return n ? (d.p = periodLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseShortWeekday(d, string, i) {\n    var n = shortWeekdayRe.exec(string.slice(i));\n    return n ? (d.w = shortWeekdayLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseWeekday(d, string, i) {\n    var n = weekdayRe.exec(string.slice(i));\n    return n ? (d.w = weekdayLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseShortMonth(d, string, i) {\n    var n = shortMonthRe.exec(string.slice(i));\n    return n ? (d.m = shortMonthLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseMonth(d, string, i) {\n    var n = monthRe.exec(string.slice(i));\n    return n ? (d.m = monthLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseLocaleDateTime(d, string, i) {\n    return parseSpecifier(d, locale_dateTime, string, i);\n  }\n\n  function parseLocaleDate(d, string, i) {\n    return parseSpecifier(d, locale_date, string, i);\n  }\n\n  function parseLocaleTime(d, string, i) {\n    return parseSpecifier(d, locale_time, string, i);\n  }\n\n  function formatShortWeekday(d) {\n    return locale_shortWeekdays[d.getDay()];\n  }\n\n  function formatWeekday(d) {\n    return locale_weekdays[d.getDay()];\n  }\n\n  function formatShortMonth(d) {\n    return locale_shortMonths[d.getMonth()];\n  }\n\n  function formatMonth(d) {\n    return locale_months[d.getMonth()];\n  }\n\n  function formatPeriod(d) {\n    return locale_periods[+(d.getHours() >= 12)];\n  }\n\n  function formatQuarter(d) {\n    return 1 + ~~(d.getMonth() / 3);\n  }\n\n  function formatUTCShortWeekday(d) {\n    return locale_shortWeekdays[d.getUTCDay()];\n  }\n\n  function formatUTCWeekday(d) {\n    return locale_weekdays[d.getUTCDay()];\n  }\n\n  function formatUTCShortMonth(d) {\n    return locale_shortMonths[d.getUTCMonth()];\n  }\n\n  function formatUTCMonth(d) {\n    return locale_months[d.getUTCMonth()];\n  }\n\n  function formatUTCPeriod(d) {\n    return locale_periods[+(d.getUTCHours() >= 12)];\n  }\n\n  function formatUTCQuarter(d) {\n    return 1 + ~~(d.getUTCMonth() / 3);\n  }\n\n  return {\n    format: function(specifier) {\n      var f = newFormat(specifier += \"\", formats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    parse: function(specifier) {\n      var p = newParse(specifier += \"\", false);\n      p.toString = function() { return specifier; };\n      return p;\n    },\n    utcFormat: function(specifier) {\n      var f = newFormat(specifier += \"\", utcFormats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    utcParse: function(specifier) {\n      var p = newParse(specifier += \"\", true);\n      p.toString = function() { return specifier; };\n      return p;\n    }\n  };\n}\n\nvar pads = {\"-\": \"\", \"_\": \" \", \"0\": \"0\"},\n    numberRe = /^\\s*\\d+/, // note: ignores next directive\n    percentRe = /^%/,\n    requoteRe = /[\\\\^$*+?|[\\]().{}]/g;\n\nfunction pad(value, fill, width) {\n  var sign = value < 0 ? \"-\" : \"\",\n      string = (sign ? -value : value) + \"\",\n      length = string.length;\n  return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n}\n\nfunction requote(s) {\n  return s.replace(requoteRe, \"\\\\$&\");\n}\n\nfunction formatRe(names) {\n  return new RegExp(\"^(?:\" + names.map(requote).join(\"|\") + \")\", \"i\");\n}\n\nfunction formatLookup(names) {\n  return new Map(names.map((name, i) => [name.toLowerCase(), i]));\n}\n\nfunction parseWeekdayNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.w = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekdayNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.u = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.U = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberISO(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.V = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.W = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseFullYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 4));\n  return n ? (d.y = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;\n}\n\nfunction parseZone(d, string, i) {\n  var n = /^(Z)|([+-]\\d\\d)(?::?(\\d\\d))?/.exec(string.slice(i, i + 6));\n  return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || \"00\")), i + n[0].length) : -1;\n}\n\nfunction parseQuarter(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.q = n[0] * 3 - 3, i + n[0].length) : -1;\n}\n\nfunction parseMonthNumber(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.m = n[0] - 1, i + n[0].length) : -1;\n}\n\nfunction parseDayOfMonth(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseDayOfYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseHour24(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.H = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMinutes(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.M = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.S = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMilliseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.L = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMicroseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 6));\n  return n ? (d.L = Math.floor(n[0] / 1000), i + n[0].length) : -1;\n}\n\nfunction parseLiteralPercent(d, string, i) {\n  var n = percentRe.exec(string.slice(i, i + 1));\n  return n ? i + n[0].length : -1;\n}\n\nfunction parseUnixTimestamp(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.Q = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseUnixTimestampSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.s = +n[0], i + n[0].length) : -1;\n}\n\nfunction formatDayOfMonth(d, p) {\n  return pad(d.getDate(), p, 2);\n}\n\nfunction formatHour24(d, p) {\n  return pad(d.getHours(), p, 2);\n}\n\nfunction formatHour12(d, p) {\n  return pad(d.getHours() % 12 || 12, p, 2);\n}\n\nfunction formatDayOfYear(d, p) {\n  return pad(1 + timeDay.count(timeYear(d), d), p, 3);\n}\n\nfunction formatMilliseconds(d, p) {\n  return pad(d.getMilliseconds(), p, 3);\n}\n\nfunction formatMicroseconds(d, p) {\n  return formatMilliseconds(d, p) + \"000\";\n}\n\nfunction formatMonthNumber(d, p) {\n  return pad(d.getMonth() + 1, p, 2);\n}\n\nfunction formatMinutes(d, p) {\n  return pad(d.getMinutes(), p, 2);\n}\n\nfunction formatSeconds(d, p) {\n  return pad(d.getSeconds(), p, 2);\n}\n\nfunction formatWeekdayNumberMonday(d) {\n  var day = d.getDay();\n  return day === 0 ? 7 : day;\n}\n\nfunction formatWeekNumberSunday(d, p) {\n  return pad(timeSunday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction dISO(d) {\n  var day = d.getDay();\n  return (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n}\n\nfunction formatWeekNumberISO(d, p) {\n  d = dISO(d);\n  return pad(timeThursday.count(timeYear(d), d) + (timeYear(d).getDay() === 4), p, 2);\n}\n\nfunction formatWeekdayNumberSunday(d) {\n  return d.getDay();\n}\n\nfunction formatWeekNumberMonday(d, p) {\n  return pad(timeMonday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction formatYear(d, p) {\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatYearISO(d, p) {\n  d = dISO(d);\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatFullYear(d, p) {\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatFullYearISO(d, p) {\n  var day = d.getDay();\n  d = (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatZone(d) {\n  var z = d.getTimezoneOffset();\n  return (z > 0 ? \"-\" : (z *= -1, \"+\"))\n      + pad(z / 60 | 0, \"0\", 2)\n      + pad(z % 60, \"0\", 2);\n}\n\nfunction formatUTCDayOfMonth(d, p) {\n  return pad(d.getUTCDate(), p, 2);\n}\n\nfunction formatUTCHour24(d, p) {\n  return pad(d.getUTCHours(), p, 2);\n}\n\nfunction formatUTCHour12(d, p) {\n  return pad(d.getUTCHours() % 12 || 12, p, 2);\n}\n\nfunction formatUTCDayOfYear(d, p) {\n  return pad(1 + utcDay.count(utcYear(d), d), p, 3);\n}\n\nfunction formatUTCMilliseconds(d, p) {\n  return pad(d.getUTCMilliseconds(), p, 3);\n}\n\nfunction formatUTCMicroseconds(d, p) {\n  return formatUTCMilliseconds(d, p) + \"000\";\n}\n\nfunction formatUTCMonthNumber(d, p) {\n  return pad(d.getUTCMonth() + 1, p, 2);\n}\n\nfunction formatUTCMinutes(d, p) {\n  return pad(d.getUTCMinutes(), p, 2);\n}\n\nfunction formatUTCSeconds(d, p) {\n  return pad(d.getUTCSeconds(), p, 2);\n}\n\nfunction formatUTCWeekdayNumberMonday(d) {\n  var dow = d.getUTCDay();\n  return dow === 0 ? 7 : dow;\n}\n\nfunction formatUTCWeekNumberSunday(d, p) {\n  return pad(utcSunday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction UTCdISO(d) {\n  var day = d.getUTCDay();\n  return (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n}\n\nfunction formatUTCWeekNumberISO(d, p) {\n  d = UTCdISO(d);\n  return pad(utcThursday.count(utcYear(d), d) + (utcYear(d).getUTCDay() === 4), p, 2);\n}\n\nfunction formatUTCWeekdayNumberSunday(d) {\n  return d.getUTCDay();\n}\n\nfunction formatUTCWeekNumberMonday(d, p) {\n  return pad(utcMonday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction formatUTCYear(d, p) {\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCYearISO(d, p) {\n  d = UTCdISO(d);\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCFullYear(d, p) {\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCFullYearISO(d, p) {\n  var day = d.getUTCDay();\n  d = (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCZone() {\n  return \"+0000\";\n}\n\nfunction formatLiteralPercent() {\n  return \"%\";\n}\n\nfunction formatUnixTimestamp(d) {\n  return +d;\n}\n\nfunction formatUnixTimestampSeconds(d) {\n  return Math.floor(+d / 1000);\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var timeFormat;\nexport var timeParse;\nexport var utcFormat;\nexport var utcParse;\n\ndefaultLocale({\n  dateTime: \"%x, %X\",\n  date: \"%-m/%-d/%Y\",\n  time: \"%-I:%M:%S %p\",\n  periods: [\"AM\", \"PM\"],\n  days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n  shortDays: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n  months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n  shortMonths: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  timeFormat = locale.format;\n  timeParse = locale.parse;\n  utcFormat = locale.utcFormat;\n  utcParse = locale.utcParse;\n  return locale;\n}\n","export default function(x) {\n  return x;\n}\n","import identity from \"./identity.js\";\n\nvar top = 1,\n    right = 2,\n    bottom = 3,\n    left = 4,\n    epsilon = 1e-6;\n\nfunction translateX(x) {\n  return \"translate(\" + x + \",0)\";\n}\n\nfunction translateY(y) {\n  return \"translate(0,\" + y + \")\";\n}\n\nfunction number(scale) {\n  return d => +scale(d);\n}\n\nfunction center(scale, offset) {\n  offset = Math.max(0, scale.bandwidth() - offset * 2) / 2;\n  if (scale.round()) offset = Math.round(offset);\n  return d => +scale(d) + offset;\n}\n\nfunction entering() {\n  return !this.__axis;\n}\n\nfunction axis(orient, scale) {\n  var tickArguments = [],\n      tickValues = null,\n      tickFormat = null,\n      tickSizeInner = 6,\n      tickSizeOuter = 6,\n      tickPadding = 3,\n      offset = typeof window !== \"undefined\" && window.devicePixelRatio > 1 ? 0 : 0.5,\n      k = orient === top || orient === left ? -1 : 1,\n      x = orient === left || orient === right ? \"x\" : \"y\",\n      transform = orient === top || orient === bottom ? translateX : translateY;\n\n  function axis(context) {\n    var values = tickValues == null ? (scale.ticks ? scale.ticks.apply(scale, tickArguments) : scale.domain()) : tickValues,\n        format = tickFormat == null ? (scale.tickFormat ? scale.tickFormat.apply(scale, tickArguments) : identity) : tickFormat,\n        spacing = Math.max(tickSizeInner, 0) + tickPadding,\n        range = scale.range(),\n        range0 = +range[0] + offset,\n        range1 = +range[range.length - 1] + offset,\n        position = (scale.bandwidth ? center : number)(scale.copy(), offset),\n        selection = context.selection ? context.selection() : context,\n        path = selection.selectAll(\".domain\").data([null]),\n        tick = selection.selectAll(\".tick\").data(values, scale).order(),\n        tickExit = tick.exit(),\n        tickEnter = tick.enter().append(\"g\").attr(\"class\", \"tick\"),\n        line = tick.select(\"line\"),\n        text = tick.select(\"text\");\n\n    path = path.merge(path.enter().insert(\"path\", \".tick\")\n        .attr(\"class\", \"domain\")\n        .attr(\"stroke\", \"currentColor\"));\n\n    tick = tick.merge(tickEnter);\n\n    line = line.merge(tickEnter.append(\"line\")\n        .attr(\"stroke\", \"currentColor\")\n        .attr(x + \"2\", k * tickSizeInner));\n\n    text = text.merge(tickEnter.append(\"text\")\n        .attr(\"fill\", \"currentColor\")\n        .attr(x, k * spacing)\n        .attr(\"dy\", orient === top ? \"0em\" : orient === bottom ? \"0.71em\" : \"0.32em\"));\n\n    if (context !== selection) {\n      path = path.transition(context);\n      tick = tick.transition(context);\n      line = line.transition(context);\n      text = text.transition(context);\n\n      tickExit = tickExit.transition(context)\n          .attr(\"opacity\", epsilon)\n          .attr(\"transform\", function(d) { return isFinite(d = position(d)) ? transform(d + offset) : this.getAttribute(\"transform\"); });\n\n      tickEnter\n          .attr(\"opacity\", epsilon)\n          .attr(\"transform\", function(d) { var p = this.parentNode.__axis; return transform((p && isFinite(p = p(d)) ? p : position(d)) + offset); });\n    }\n\n    tickExit.remove();\n\n    path\n        .attr(\"d\", orient === left || orient === right\n            ? (tickSizeOuter ? \"M\" + k * tickSizeOuter + \",\" + range0 + \"H\" + offset + \"V\" + range1 + \"H\" + k * tickSizeOuter : \"M\" + offset + \",\" + range0 + \"V\" + range1)\n            : (tickSizeOuter ? \"M\" + range0 + \",\" + k * tickSizeOuter + \"V\" + offset + \"H\" + range1 + \"V\" + k * tickSizeOuter : \"M\" + range0 + \",\" + offset + \"H\" + range1));\n\n    tick\n        .attr(\"opacity\", 1)\n        .attr(\"transform\", function(d) { return transform(position(d) + offset); });\n\n    line\n        .attr(x + \"2\", k * tickSizeInner);\n\n    text\n        .attr(x, k * spacing)\n        .text(format);\n\n    selection.filter(entering)\n        .attr(\"fill\", \"none\")\n        .attr(\"font-size\", 10)\n        .attr(\"font-family\", \"sans-serif\")\n        .attr(\"text-anchor\", orient === right ? \"start\" : orient === left ? \"end\" : \"middle\");\n\n    selection\n        .each(function() { this.__axis = position; });\n  }\n\n  axis.scale = function(_) {\n    return arguments.length ? (scale = _, axis) : scale;\n  };\n\n  axis.ticks = function() {\n    return tickArguments = Array.from(arguments), axis;\n  };\n\n  axis.tickArguments = function(_) {\n    return arguments.length ? (tickArguments = _ == null ? [] : Array.from(_), axis) : tickArguments.slice();\n  };\n\n  axis.tickValues = function(_) {\n    return arguments.length ? (tickValues = _ == null ? null : Array.from(_), axis) : tickValues && tickValues.slice();\n  };\n\n  axis.tickFormat = function(_) {\n    return arguments.length ? (tickFormat = _, axis) : tickFormat;\n  };\n\n  axis.tickSize = function(_) {\n    return arguments.length ? (tickSizeInner = tickSizeOuter = +_, axis) : tickSizeInner;\n  };\n\n  axis.tickSizeInner = function(_) {\n    return arguments.length ? (tickSizeInner = +_, axis) : tickSizeInner;\n  };\n\n  axis.tickSizeOuter = function(_) {\n    return arguments.length ? (tickSizeOuter = +_, axis) : tickSizeOuter;\n  };\n\n  axis.tickPadding = function(_) {\n    return arguments.length ? (tickPadding = +_, axis) : tickPadding;\n  };\n\n  axis.offset = function(_) {\n    return arguments.length ? (offset = +_, axis) : offset;\n  };\n\n  return axis;\n}\n\nexport function axisTop(scale) {\n  return axis(top, scale);\n}\n\nexport function axisRight(scale) {\n  return axis(right, scale);\n}\n\nexport function axisBottom(scale) {\n  return axis(bottom, scale);\n}\n\nexport function axisLeft(scale) {\n  return axis(left, scale);\n}\n","var noop = {value: () => {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces.js\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name; // eslint-disable-line no-prototype-builtins\n}\n","import namespace from \"./namespace.js\";\nimport {xhtml} from \"./namespaces.js\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","// Given something array like (or null), returns something that is strictly an\n// array. This is used to ensure that array-like objects passed to d3.selectAll\n// or selection.selectAll are converted into proper arrays when creating a\n// selection; we dont ever want to create a selection backed by a live\n// HTMLCollection or NodeList. However, note that selection.selectAll will use a\n// static NodeList as a group, since it safely derived from querySelectorAll.\nexport default function array(x) {\n  return x == null ? [] : Array.isArray(x) ? x : Array.from(x);\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n\nexport function childMatcher(selector) {\n  return function(node) {\n    return node.matches(selector);\n  };\n}\n\n","import {childMatcher} from \"../matcher.js\";\n\nvar find = Array.prototype.find;\n\nfunction childFind(match) {\n  return function() {\n    return find.call(this.children, match);\n  };\n}\n\nfunction childFirst() {\n  return this.firstElementChild;\n}\n\nexport default function(match) {\n  return this.select(match == null ? childFirst\n      : childFind(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {childMatcher} from \"../matcher.js\";\n\nvar filter = Array.prototype.filter;\n\nfunction children() {\n  return Array.from(this.children);\n}\n\nfunction childrenFilter(match) {\n  return function() {\n    return filter.call(this.children, match);\n  };\n}\n\nexport default function(match) {\n  return this.selectAll(match == null ? children\n      : childrenFilter(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import {Selection} from \"./index.js\";\nimport {EnterNode} from \"./enter.js\";\nimport constant from \"../constant.js\";\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that dont fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = new Map,\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + \"\";\n      if (nodeByKeyValue.has(keyValue)) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue.set(keyValue, node);\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = key.call(parent, data[i], i, data) + \"\";\n    if (node = nodeByKeyValue.get(keyValue)) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue.delete(keyValue);\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue.get(keyValues[i]) === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction datum(node) {\n  return node.__data__;\n}\n\nexport default function(value, key) {\n  if (!arguments.length) return Array.from(this, datum);\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = arraylike(value.call(parent, parent && parent.__data__, j, parents)),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n\n// Given some data, this returns an array-like view of it: an object that\n// exposes a length property and allows numeric indexing. Note that unlike\n// selectAll, this isnt worried about live collections because the resulting\n// array will only be used briefly while data is being bound. (It is possible to\n// cause the data to change while iterating by using a key function, but please\n// dont; wed rather avoid a gratuitous copy.)\nfunction arraylike(data) {\n  return typeof data === \"object\" && \"length\" in data\n    ? data // Array, TypedArray, NodeList, array-like\n    : Array.from(data); // Map, Set, iterable, string, or anything else\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import namespace from \"../namespace.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window.js\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import creator from \"../creator.js\";\nimport selector from \"../selector.js\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","function contextListener(listener) {\n  return function(event) {\n    listener.call(this, event, this.__data__);\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, options) {\n  return function() {\n    var on = this.__on, o, listener = contextListener(value);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n        this.addEventListener(o.type, o.listener = listener, o.options = options);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, options);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, options: options};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, options) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, options));\n  return this;\n}\n","import defaultView from \"../window.js\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","import selection_select from \"./select.js\";\nimport selection_selectAll from \"./selectAll.js\";\nimport selection_selectChild from \"./selectChild.js\";\nimport selection_selectChildren from \"./selectChildren.js\";\nimport selection_filter from \"./filter.js\";\nimport selection_data from \"./data.js\";\nimport selection_enter from \"./enter.js\";\nimport selection_exit from \"./exit.js\";\nimport selection_join from \"./join.js\";\nimport selection_merge from \"./merge.js\";\nimport selection_order from \"./order.js\";\nimport selection_sort from \"./sort.js\";\nimport selection_call from \"./call.js\";\nimport selection_nodes from \"./nodes.js\";\nimport selection_node from \"./node.js\";\nimport selection_size from \"./size.js\";\nimport selection_empty from \"./empty.js\";\nimport selection_each from \"./each.js\";\nimport selection_attr from \"./attr.js\";\nimport selection_style from \"./style.js\";\nimport selection_property from \"./property.js\";\nimport selection_classed from \"./classed.js\";\nimport selection_text from \"./text.js\";\nimport selection_html from \"./html.js\";\nimport selection_raise from \"./raise.js\";\nimport selection_lower from \"./lower.js\";\nimport selection_append from \"./append.js\";\nimport selection_insert from \"./insert.js\";\nimport selection_remove from \"./remove.js\";\nimport selection_clone from \"./clone.js\";\nimport selection_datum from \"./datum.js\";\nimport selection_on from \"./on.js\";\nimport selection_dispatch from \"./dispatch.js\";\nimport selection_iterator from \"./iterator.js\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nfunction selection_selection() {\n  return this;\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  selectChild: selection_selectChild,\n  selectChildren: selection_selectChildren,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  selection: selection_selection,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch,\n  [Symbol.iterator]: selection_iterator\n};\n\nexport default selection;\n","import {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","import sourceEvent from \"./sourceEvent.js\";\n\nexport default function(event, node) {\n  event = sourceEvent(event);\n  if (node === undefined) node = event.currentTarget;\n  if (node) {\n    var svg = node.ownerSVGElement || node;\n    if (svg.createSVGPoint) {\n      var point = svg.createSVGPoint();\n      point.x = event.clientX, point.y = event.clientY;\n      point = point.matrixTransform(node.getScreenCTM().inverse());\n      return [point.x, point.y];\n    }\n    if (node.getBoundingClientRect) {\n      var rect = node.getBoundingClientRect();\n      return [event.clientX - rect.left - node.clientLeft, event.clientY - rect.top - node.clientTop];\n    }\n  }\n  return [event.pageX, event.pageY];\n}\n","export default function(event) {\n  let sourceEvent;\n  while (sourceEvent = event.sourceEvent) event = sourceEvent;\n  return event;\n}\n","import {Selection} from \"./index.js\";\nimport selector from \"../selector.js\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import {Selection} from \"./index.js\";\nimport array from \"../array.js\";\nimport selectorAll from \"../selectorAll.js\";\n\nfunction arrayAll(select) {\n  return function() {\n    return array(select.apply(this, arguments));\n  };\n}\n\nexport default function(select) {\n  if (typeof select === \"function\") select = arrayAll(select);\n  else select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","import {Selection} from \"./index.js\";\nimport matcher from \"../matcher.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  if (typeof onenter === \"function\") {\n    enter = onenter(enter);\n    if (enter) enter = enter.selection();\n  } else {\n    enter = enter.append(onenter + \"\");\n  }\n  if (onupdate != null) {\n    update = onupdate(update);\n    if (update) update = update.selection();\n  }\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(context) {\n  var selection = context.selection ? context.selection() : context;\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  return Array.from(this);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  let size = 0;\n  for (const node of this) ++size; // eslint-disable-line no-unused-vars\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import creator from \"../creator.js\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","export default function*() {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) yield node;\n    }\n  }\n}\n","// These are typically used in conjunction with noevent to ensure that we can\n// preventDefault on the event.\nexport const nonpassive = {passive: false};\nexport const nonpassivecapture = {capture: true, passive: false};\n\nexport function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","export default x => () => x;\n","export default function DragEvent(type, {\n  sourceEvent,\n  subject,\n  target,\n  identifier,\n  active,\n  x, y, dx, dy,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    subject: {value: subject, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    identifier: {value: identifier, enumerable: true, configurable: true},\n    active: {value: active, enumerable: true, configurable: true},\n    x: {value: x, enumerable: true, configurable: true},\n    y: {value: y, enumerable: true, configurable: true},\n    dx: {value: dx, enumerable: true, configurable: true},\n    dy: {value: dy, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n\nDragEvent.prototype.on = function() {\n  var value = this._.on.apply(this._, arguments);\n  return value === this._ ? this : value;\n};\n","import {dispatch} from \"d3-dispatch\";\nimport {select, pointer} from \"d3-selection\";\nimport nodrag, {yesdrag} from \"./nodrag.js\";\nimport noevent, {nonpassive, nonpassivecapture, nopropagation} from \"./noevent.js\";\nimport constant from \"./constant.js\";\nimport DragEvent from \"./event.js\";\n\n// Ignore right-click, since that should open the context menu.\nfunction defaultFilter(event) {\n  return !event.ctrlKey && !event.button;\n}\n\nfunction defaultContainer() {\n  return this.parentNode;\n}\n\nfunction defaultSubject(event, d) {\n  return d == null ? {x: event.x, y: event.y} : d;\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      container = defaultContainer,\n      subject = defaultSubject,\n      touchable = defaultTouchable,\n      gestures = {},\n      listeners = dispatch(\"start\", \"drag\", \"end\"),\n      active = 0,\n      mousedownx,\n      mousedowny,\n      mousemoving,\n      touchending,\n      clickDistance2 = 0;\n\n  function drag(selection) {\n    selection\n        .on(\"mousedown.drag\", mousedowned)\n      .filter(touchable)\n        .on(\"touchstart.drag\", touchstarted)\n        .on(\"touchmove.drag\", touchmoved, nonpassive)\n        .on(\"touchend.drag touchcancel.drag\", touchended)\n        .style(\"touch-action\", \"none\")\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  function mousedowned(event, d) {\n    if (touchending || !filter.call(this, event, d)) return;\n    var gesture = beforestart(this, container.call(this, event, d), event, d, \"mouse\");\n    if (!gesture) return;\n    select(event.view)\n      .on(\"mousemove.drag\", mousemoved, nonpassivecapture)\n      .on(\"mouseup.drag\", mouseupped, nonpassivecapture);\n    nodrag(event.view);\n    nopropagation(event);\n    mousemoving = false;\n    mousedownx = event.clientX;\n    mousedowny = event.clientY;\n    gesture(\"start\", event);\n  }\n\n  function mousemoved(event) {\n    noevent(event);\n    if (!mousemoving) {\n      var dx = event.clientX - mousedownx, dy = event.clientY - mousedowny;\n      mousemoving = dx * dx + dy * dy > clickDistance2;\n    }\n    gestures.mouse(\"drag\", event);\n  }\n\n  function mouseupped(event) {\n    select(event.view).on(\"mousemove.drag mouseup.drag\", null);\n    yesdrag(event.view, mousemoving);\n    noevent(event);\n    gestures.mouse(\"end\", event);\n  }\n\n  function touchstarted(event, d) {\n    if (!filter.call(this, event, d)) return;\n    var touches = event.changedTouches,\n        c = container.call(this, event, d),\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = beforestart(this, c, event, d, touches[i].identifier, touches[i])) {\n        nopropagation(event);\n        gesture(\"start\", event, touches[i]);\n      }\n    }\n  }\n\n  function touchmoved(event) {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        noevent(event);\n        gesture(\"drag\", event, touches[i]);\n      }\n    }\n  }\n\n  function touchended(event) {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        nopropagation(event);\n        gesture(\"end\", event, touches[i]);\n      }\n    }\n  }\n\n  function beforestart(that, container, event, d, identifier, touch) {\n    var dispatch = listeners.copy(),\n        p = pointer(touch || event, container), dx, dy,\n        s;\n\n    if ((s = subject.call(that, new DragEvent(\"beforestart\", {\n        sourceEvent: event,\n        target: drag,\n        identifier,\n        active,\n        x: p[0],\n        y: p[1],\n        dx: 0,\n        dy: 0,\n        dispatch\n      }), d)) == null) return;\n\n    dx = s.x - p[0] || 0;\n    dy = s.y - p[1] || 0;\n\n    return function gesture(type, event, touch) {\n      var p0 = p, n;\n      switch (type) {\n        case \"start\": gestures[identifier] = gesture, n = active++; break;\n        case \"end\": delete gestures[identifier], --active; // falls through\n        case \"drag\": p = pointer(touch || event, container), n = active; break;\n      }\n      dispatch.call(\n        type,\n        that,\n        new DragEvent(type, {\n          sourceEvent: event,\n          subject: s,\n          target: drag,\n          identifier,\n          active: n,\n          x: p[0] + dx,\n          y: p[1] + dy,\n          dx: p[0] - p0[0],\n          dy: p[1] - p0[1],\n          dispatch\n        }),\n        d\n      );\n    };\n  }\n\n  drag.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), drag) : filter;\n  };\n\n  drag.container = function(_) {\n    return arguments.length ? (container = typeof _ === \"function\" ? _ : constant(_), drag) : container;\n  };\n\n  drag.subject = function(_) {\n    return arguments.length ? (subject = typeof _ === \"function\" ? _ : constant(_), drag) : subject;\n  };\n\n  drag.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), drag) : touchable;\n  };\n\n  drag.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? drag : value;\n  };\n\n  drag.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, drag) : Math.sqrt(clickDistance2);\n  };\n\n  return drag;\n}\n","import {select} from \"d3-selection\";\nimport noevent, {nonpassivecapture} from \"./noevent.js\";\n\nexport default function(view) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", noevent, nonpassivecapture);\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", noevent, nonpassivecapture);\n  } else {\n    root.__noselect = root.style.MozUserSelect;\n    root.style.MozUserSelect = \"none\";\n  }\n}\n\nexport function yesdrag(view, noclick) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", null);\n  if (noclick) {\n    selection.on(\"click.drag\", noevent, nonpassivecapture);\n    setTimeout(function() { selection.on(\"click.drag\", null); }, 0);\n  }\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", null);\n  } else {\n    root.style.MozUserSelect = root.__noselect;\n    delete root.__noselect;\n  }\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy: function(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\")\n      + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n      + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\")\n        + (this.h || 0) + \", \"\n        + (this.s || 0) * 100 + \"%, \"\n        + (this.l || 0) * 100 + \"%\"\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export default x => () => x;\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n","import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return Math.round(a * (1 - t) + b * t);\n  };\n}\n","var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n","import decompose, {identity} from \"./decompose.js\";\n\nvar svgNode;\n\n/* eslint-disable no-undef */\nexport function parseCss(value) {\n  const m = new (typeof DOMMatrix === \"function\" ? DOMMatrix : WebKitCSSMatrix)(value + \"\");\n  return m.isIdentity ? identity : decompose(m.a, m.b, m.c, m.d, m.e, m.f);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n","import number from \"../number.js\";\nimport {parseCss, parseSvg} from \"./parse.js\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend weve set an alarm, if we havent already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(undefined, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","import {Timer} from \"./timer.js\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(elapsed => {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions.\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n","import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n","import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\n","import {namespace} from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function(t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function(t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n","import {get, init} from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n","import {get, set, init} from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n","import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n","import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {style} from \"d3-selection\";\nimport {set} from \"./schedule.js\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = style(this, name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0, on1, listener0, key = \"style.\" + name, event = \"end.\" + key, remove;\n  return function() {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n      .styleTween(name, styleNull(name, i))\n      .on(\"end.style.\" + name, styleRemove(name))\n    : typeof value === \"function\" ? this\n      .styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value)))\n      .each(styleMaybeRemove(this._id, name))\n    : this\n      .styleTween(name, styleConstant(name, i, value), priority)\n      .on(\"end.style.\" + name, null);\n}\n","function styleInterpolate(name, i, priority) {\n  return function(t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n","function textInterpolate(i) {\n  return function(t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, textTween(value));\n}\n","import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_easeVarying from \"./easeVarying.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  selectChild: selection_prototype.selectChild,\n  selectChildren: selection_prototype.selectChildren,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  easeVarying: transition_easeVarying,\n  end: transition_end,\n  [Symbol.iterator]: selection_prototype[Symbol.iterator]\n};\n","import {selector} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n","import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n","import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n","import {Transition} from \"./index.js\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n","import {Transition, newId} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n","import {tweenValue} from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n","function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n","import {set} from \"./schedule.js\";\n\nfunction easeVarying(id, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (typeof v !== \"function\") throw new Error;\n    set(this, id).ease = v;\n  };\n}\n\nexport default function(value) {\n  if (typeof value !== \"function\") throw new Error;\n  return this.each(easeVarying(this._id, value));\n}\n","import {set} from \"./schedule.js\";\n\nexport default function() {\n  var on0, on1, that = this, id = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = {value: reject},\n        end = {value: function() { if (--size === 0) resolve(); }};\n\n    that.each(function() {\n      var schedule = set(this, id),\n          on = schedule.on;\n\n      // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and were done!\n      // Otherwise, copy-on-write.\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n\n    // The selection was empty, resolve end immediately\n    if (size === 0) resolve();\n  });\n}\n","import {Transition, newId} from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      throw new Error(`transition ${id} not found`);\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","function responseText(response) {\n  if (!response.ok) throw new Error(response.status + \" \" + response.statusText);\n  return response.text();\n}\n\nexport default function(input, init) {\n  return fetch(input, init).then(responseText);\n}\n","function responseJson(response) {\n  if (!response.ok) throw new Error(response.status + \" \" + response.statusText);\n  if (response.status === 204 || response.status === 205) return;\n  return response.json();\n}\n\nexport default function(input, init) {\n  return fetch(input, init).then(responseJson);\n}\n","import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n","import interrupt from \"../interrupt.js\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n","import {STARTING, ENDING, ENDED} from \"./transition/schedule.js\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n","import text from \"./text.js\";\n\nfunction parser(type) {\n  return (input, init) => text(input, init)\n    .then(text => (new DOMParser).parseFromString(text, type));\n}\n\nexport default parser(\"application/xml\");\n\nexport var html = parser(\"text/html\");\n\nexport var svg = parser(\"image/svg+xml\");\n","export default function(x) {\n  return Math.abs(x = Math.round(x)) >= 1e21\n      ? x.toLocaleString(\"en\").replace(/,/g, \"\")\n      : x.toString(10);\n}\n\n// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimalParts(1.23) returns [\"123\", 0].\nexport function formatDecimalParts(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x) {\n  return x = formatDecimalParts(Math.abs(x)), x ? x[1] : NaN;\n}\n","// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  return new FormatSpecifier({\n    fill: match[1],\n    align: match[2],\n    sign: match[3],\n    symbol: match[4],\n    zero: match[5],\n    width: match[6],\n    comma: match[7],\n    precision: match[8] && match[8].slice(1),\n    trim: match[9],\n    type: match[10]\n  });\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nexport function FormatSpecifier(specifier) {\n  this.fill = specifier.fill === undefined ? \" \" : specifier.fill + \"\";\n  this.align = specifier.align === undefined ? \">\" : specifier.align + \"\";\n  this.sign = specifier.sign === undefined ? \"-\" : specifier.sign + \"\";\n  this.symbol = specifier.symbol === undefined ? \"\" : specifier.symbol + \"\";\n  this.zero = !!specifier.zero;\n  this.width = specifier.width === undefined ? undefined : +specifier.width;\n  this.comma = !!specifier.comma;\n  this.precision = specifier.precision === undefined ? undefined : +specifier.precision;\n  this.trim = !!specifier.trim;\n  this.type = specifier.type === undefined ? \"\" : specifier.type + \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width === undefined ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision === undefined ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimalParts(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatDecimal from \"./formatDecimal.js\";\nimport formatPrefixAuto from \"./formatPrefixAuto.js\";\nimport formatRounded from \"./formatRounded.js\";\n\nexport default {\n  \"%\": (x, p) => (x * 100).toFixed(p),\n  \"b\": (x) => Math.round(x).toString(2),\n  \"c\": (x) => x + \"\",\n  \"d\": formatDecimal,\n  \"e\": (x, p) => x.toExponential(p),\n  \"f\": (x, p) => x.toFixed(p),\n  \"g\": (x, p) => x.toPrecision(p),\n  \"o\": (x) => Math.round(x).toString(8),\n  \"p\": (x, p) => formatRounded(x * 100, p),\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": (x) => Math.round(x).toString(16).toUpperCase(),\n  \"x\": (x) => Math.round(x).toString(16)\n};\n","export default function(x) {\n  return x;\n}\n","import exponent from \"./exponent.js\";\nimport formatGroup from \"./formatGroup.js\";\nimport formatNumerals from \"./formatNumerals.js\";\nimport formatSpecifier from \"./formatSpecifier.js\";\nimport formatTrim from \"./formatTrim.js\";\nimport formatTypes from \"./formatTypes.js\";\nimport {prefixExponent} from \"./formatPrefixAuto.js\";\nimport identity from \"./identity.js\";\n\nvar map = Array.prototype.map,\n    prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + \"\"),\n      currencyPrefix = locale.currency === undefined ? \"\" : locale.currency[0] + \"\",\n      currencySuffix = locale.currency === undefined ? \"\" : locale.currency[1] + \"\",\n      decimal = locale.decimal === undefined ? \".\" : locale.decimal + \"\",\n      numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),\n      percent = locale.percent === undefined ? \"%\" : locale.percent + \"\",\n      minus = locale.minus === undefined ? \"\" : locale.minus + \"\",\n      nan = locale.nan === undefined ? \"NaN\" : locale.nan + \"\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision === undefined ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Determine the sign. -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = value < 0 || 1 / value < 0;\n\n        // Perform the initial formatting.\n        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero after formatting, and no explicit positive sign is requested, hide the sign.\n        if (valueNegative && +value === 0 && sign !== \"+\") valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : minus) : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer value part that can be\n        // grouped, and fractional or exponential suffix part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n","// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (!+s[i]) break out; if (i0 > 0) i0 = 0; break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n","export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: {\n      if (typeof domain === \"function\") this.interpolator(domain);\n      else this.range(domain);\n      break;\n    }\n    default: {\n      this.domain(domain);\n      if (typeof interpolator === \"function\") this.interpolator(interpolator);\n      else this.range(interpolator);\n      break;\n    }\n  }\n  return this;\n}\n","export default function number(x) {\n  return +x;\n}\n","import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateNumber, interpolateRound} from \"d3-interpolate\";\nimport constant from \"./constant.js\";\nimport number from \"./number.js\";\n\nvar unit = [0, 1];\n\nexport function identity(x) {\n  return x;\n}\n\nfunction normalize(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(isNaN(b) ? NaN : 0.5);\n}\n\nfunction clamper(a, b) {\n  var t;\n  if (a > b) t = a, a = b, b = t;\n  return function(x) { return Math.max(a, Math.min(b, x)); };\n}\n\n// normalize(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// interpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding range value x in [a,b].\nfunction bimap(domain, range, interpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = normalize(d1, d0), r0 = interpolate(r1, r0);\n  else d0 = normalize(d0, d1), r0 = interpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, interpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = normalize(domain[i], domain[i + 1]);\n    r[i] = interpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport function transformer() {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      transform,\n      untransform,\n      unknown,\n      clamp = identity,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    var n = Math.min(domain.length, range.length);\n    if (clamp !== identity) clamp = clamper(domain[0], domain[n - 1]);\n    piecewise = n > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return x == null || isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform), range, interpolate)))(transform(clamp(x)));\n  }\n\n  scale.invert = function(y) {\n    return clamp(untransform((input || (input = piecewise(range, domain.map(transform), interpolateNumber)))(y)));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = Array.from(_, number), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = Array.from(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = _ ? true : identity, rescale()) : clamp !== identity;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t, u) {\n    transform = t, untransform = u;\n    return rescale();\n  };\n}\n\nexport default function continuous() {\n  return transformer()(identity, identity);\n}\n","export default function constants(x) {\n  return function() {\n    return x;\n  };\n}\n","import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function tickFormat(start, stop, count, specifier) {\n  var step = tickStep(start, stop, count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n","import {ticks, tickIncrement} from \"d3-array\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport tickFormat from \"./tickFormat.js\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    var d = domain();\n    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain();\n    var i0 = 0;\n    var i1 = d.length - 1;\n    var start = d[i0];\n    var stop = d[i1];\n    var prestep;\n    var step;\n    var maxIter = 10;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n    \n    while (maxIter-- > 0) {\n      step = tickIncrement(start, stop, count);\n      if (step === prestep) {\n        d[i0] = start\n        d[i1] = stop\n        return domain(d);\n      } else if (step > 0) {\n        start = Math.floor(start / step) * step;\n        stop = Math.ceil(stop / step) * step;\n      } else if (step < 0) {\n        start = Math.ceil(start * step) / step;\n        stop = Math.floor(stop * step) / step;\n      } else {\n        break;\n      }\n      prestep = step;\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous();\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return linearish(scale);\n}\n","import {timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeTicks, timeTickInterval} from \"d3-time\";\nimport {timeFormat} from \"d3-time-format\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport nice from \"./nice.js\";\n\nfunction date(t) {\n  return new Date(t);\n}\n\nfunction number(t) {\n  return t instanceof Date ? +t : +new Date(+t);\n}\n\nexport function calendar(ticks, tickInterval, year, month, week, day, hour, minute, second, format) {\n  var scale = continuous(),\n      invert = scale.invert,\n      domain = scale.domain;\n\n  var formatMillisecond = format(\".%L\"),\n      formatSecond = format(\":%S\"),\n      formatMinute = format(\"%I:%M\"),\n      formatHour = format(\"%I %p\"),\n      formatDay = format(\"%a %d\"),\n      formatWeek = format(\"%b %d\"),\n      formatMonth = format(\"%B\"),\n      formatYear = format(\"%Y\");\n\n  function tickFormat(date) {\n    return (second(date) < date ? formatMillisecond\n        : minute(date) < date ? formatSecond\n        : hour(date) < date ? formatMinute\n        : day(date) < date ? formatHour\n        : month(date) < date ? (week(date) < date ? formatDay : formatWeek)\n        : year(date) < date ? formatMonth\n        : formatYear)(date);\n  }\n\n  scale.invert = function(y) {\n    return new Date(invert(y));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? domain(Array.from(_, number)) : domain().map(date);\n  };\n\n  scale.ticks = function(interval) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], interval == null ? 10 : interval);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    return specifier == null ? tickFormat : format(specifier);\n  };\n\n  scale.nice = function(interval) {\n    var d = domain();\n    if (!interval || typeof interval.range !== \"function\") interval = tickInterval(d[0], d[d.length - 1], interval == null ? 10 : interval);\n    return interval ? domain(nice(d, interval)) : scale;\n  };\n\n  scale.copy = function() {\n    return copy(scale, calendar(ticks, tickInterval, year, month, week, day, hour, minute, second, format));\n  };\n\n  return scale;\n}\n\nexport default function time() {\n  return initRange.apply(calendar(timeTicks, timeTickInterval, timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeFormat).domain([new Date(2000, 0, 1), new Date(2000, 0, 2)]), arguments);\n}\n","export default function nice(domain, interval) {\n  domain = domain.slice();\n\n  var i0 = 0,\n      i1 = domain.length - 1,\n      x0 = domain[i0],\n      x1 = domain[i1],\n      t;\n\n  if (x1 < x0) {\n    t = i0, i0 = i1, i1 = t;\n    t = x0, x0 = x1, x1 = t;\n  }\n\n  domain[i0] = interval.floor(x0);\n  domain[i1] = interval.ceil(x1);\n  return domain;\n}\n","import { timeFormat, timeParse } from \"d3-time-format\";\nimport * as d3 from \"d3\";\n\n// separaetely defined in map.ts\nconst toMMDDYYYY = timeFormat(\"%m/%d/%Y\");\n\nexport const formatAsDDMMYYYY = d3.timeFormat(\"%d/%m/%Y\"); // \"DD/MM/YYYY\"\n\nexport const TIME_FORMAT = \"%Y-%m-%d %H:%M:%S\"; // \"YYYY-MM-DD hh:mm:ss\"\nexport const parseStandardTime = timeParse(TIME_FORMAT);\nexport const formatStandardTime = timeFormat(TIME_FORMAT);\n\n// TODO: improve this type\nexport const offsetInMilliseconds: Record<string, any> = {\n  millisecond: 1,\n  second: 1000,\n  minute: 1000 * 60,\n  hour: 1000 * 60 * 60,\n  day: 1000 * 60 * 60 * 24,\n  week: 1000 * 60 * 60 * 24 * 7,\n  month: 1000 * 60 * 60 * 24 * 30,\n  year: 1000 * 60 * 60 * 24 * 365,\n\n  milliseconds: 1,\n  seconds: 1000,\n  minutes: 1000 * 60,\n  hours: 1000 * 60 * 60,\n  days: 1000 * 60 * 60 * 24,\n  weeks: 1000 * 60 * 60 * 24 * 7,\n  months: 1000 * 60 * 60 * 24 * 30,\n  years: 1000 * 60 * 60 * 24 * 365,\n};\n\nexport function addDate(date: Date, n: number, granularity: string): Date {\n  // alternative is to use things like a.setDate(a.getDate() + 1); to add a day\n  return new Date(date.getTime() + n * offsetInMilliseconds[granularity]);\n}\n\nexport const dayOfWeek = timeFormat(\"%w\"); // \"Sunday-based weekday as a decimal number [0,6].\"\n\nexport function startOf(date: Date, granularity: string) {\n  const d = new Date(date);\n\n  switch (granularity) {\n    case \"millisecond\":\n      break;\n\n    case \"second\":\n      d.setMilliseconds(0);\n      break;\n\n    case \"minute\":\n      d.setMilliseconds(0);\n      d.setSeconds(0);\n      break;\n\n    case \"hour\":\n      d.setMilliseconds(0);\n      d.setSeconds(0);\n      d.setMinutes(0);\n      break;\n\n    case \"day\":\n      d.setMilliseconds(0);\n      d.setSeconds(0);\n      d.setMinutes(0);\n      d.setHours(0);\n      break;\n\n    case \"week\":\n      return new Date(\n        d.getTime() - 1000 * 60 * 60 * 24 * parseInt(dayOfWeek(d))\n      );\n\n    case \"month\":\n      d.setMilliseconds(0);\n      d.setSeconds(0);\n      d.setMinutes(0);\n      d.setHours(0);\n      d.setDate(0);\n      break;\n\n    case \"year\":\n      d.setMilliseconds(0);\n      d.setSeconds(0);\n      d.setMinutes(0);\n      d.setHours(0);\n      d.setDate(0);\n      d.setMonth(0);\n      break;\n  }\n\n  return d;\n}\n\nexport function getGranularityName(granularityIndex: number) {\n  let granularityName = \"milliseconds\";\n  switch (granularityIndex) {\n    case 0:\n      granularityName = \"milliseconds\";\n      break;\n    case 1:\n      granularityName = \"seconds\";\n      break;\n    case 2:\n      granularityName = \"minutes\";\n      break;\n    case 3:\n      granularityName = \"hours\";\n      break;\n    case 4:\n      granularityName = \"days\";\n      break;\n    case 5:\n      granularityName = \"weeks\";\n      break;\n    case 6:\n      granularityName = \"months\";\n      break;\n    case 7:\n      granularityName = \"years\";\n      break;\n    // case 8: minGranName = 'decades'; break;\n    // case 9: minGranName = 'centuries'; break;\n    // case 10: minGranName = 'millenia'; break;\n  }\n  return granularityName;\n}\n\nexport function formatTimeAtGranularity(\n  time: Date,\n  granularity: number\n): number {\n  const getWeek = d3.timeFormat(\"%V\");\n\n  const dateObj = new Date(time);\n  switch (granularity) {\n    case 0:\n      return dateObj.getUTCMilliseconds();\n    case 1:\n      return dateObj.getUTCSeconds();\n    case 2:\n      return dateObj.getUTCMinutes();\n    case 3:\n      return dateObj.getUTCHours();\n    case 4:\n      return dateObj.getUTCDay();\n    case 5:\n      return parseInt(getWeek(dateObj));\n    case 6:\n      return dateObj.getUTCMonth() + 1;\n    default:\n      return dateObj.getUTCFullYear();\n  }\n}\n\nexport const formatAtGranularity = (time: Date, granularity: number) =>\n  formatTimeAtGranularity(time, granularity).toString();\n\nexport function getGranularityFormattingString(\n  granualarity: any,\n  separator: boolean\n): string {\n  switch (granualarity) {\n    case 0:\n      return \"%S\";\n    case 1:\n      return \"%S\" + (separator ? \".\" : \"\");\n    case 2:\n      return \"%M\" + (separator ? \":\" : \"\");\n    case 3:\n      return \"%H\" + (separator ? \"\" : \"\");\n    case 4:\n      return \"%D\" + (separator ? \" \" : \"\");\n    case 6:\n      return \"%m\" + (separator ? \"-\" : \"\");\n    default:\n      return \"%Y\" + (separator ? \"-\" : \"\");\n  }\n}\n\n// export { offsetInMilliseconds, addDate, startOf };\n","import { DataSet, isValidIndex, Selection } from \"./dynamicgraphutils\";\nimport { DataManager } from \"./datamanager\";\n\nimport { timeFormat } from \"d3-time-format\";\nimport { TIME_FORMAT, parseStandardTime, formatStandardTime } from \"./dates\";\n\nexport const GRANULARITY: string[] = [\n  \"millisecond\",\n  \"second\",\n  \"minute\",\n  \"hour\",\n  \"day\",\n  \"week\",\n  \"month\",\n  \"year\",\n\n  \"decade\",\n  \"century\",\n  \"millenium\",\n]; //, 'decade', 'century', 'millenium'];\n// TODO: these levels aren't handled by the relevant functions\n\nexport const DGRAPH_SUB = \"[*dgraph*]\";\nexport const DGRAPH_SER_VERBOSE_LOGGING = false;\n\nexport function dgraphReviver(dgraph: DynamicGraph, key: any, value: any): any {\n  if (value == DGRAPH_SUB) return dgraph;\n  else return value;\n}\n\nexport function dgraphReplacer(key: string, value: any): any {\n  // don't write out graph, as this would cause cycles\n  if (DGRAPH_SER_VERBOSE_LOGGING) {\n    console.log(\"dgraphReplacer\", key, value);\n  }\n  if (value instanceof DynamicGraph) {\n    console.log(\"dgraphReplacer found a DynamicGraph property\", key);\n    return DGRAPH_SUB;\n  }\n  return value;\n}\n\nexport class DynamicGraph {\n  private default_colors(i: number): string {\n    const colors = [\n      \"#3366cc\",\n      \"#dc3912\",\n      \"#ff9900\",\n      \"#109618\",\n      \"#990099\",\n      \"#0099c6\",\n      \"#dd4477\",\n      \"#66aa00\",\n      \"#b82e2e\",\n      \"#316395\",\n      \"#994499\",\n      \"#22aa99\",\n      \"#aaaa11\",\n      \"#6633cc\",\n      \"#e67300\",\n      \"#8b0707\",\n      \"#651067\",\n      \"#329262\",\n      \"#5574a6\",\n      \"#3b3eac\",\n    ];\n    return colors[i % colors.length];\n  }\n\n  // BOOKMARK_COLORS: string[] = colorSchemes.schema5;\n  BOOKMARK_COLORS: (i: number) => string = this.default_colors;\n  selectionColor_pointer = 0;\n\n  //data: DataSet;\n  name = \"\"; // INIT??\n\n  // data meta data\n  gran_min = 0; // INIT?\n  gran_max: number = Number.MAX_VALUE; // INIT?\n\n  minWeight = 10000000;\n  maxWeight = -10000000;\n\n  _nodes: Node[] = [];\n  _links: Link[] = [];\n  directed = false;\n  _nodePairs: NodePair[] = [];\n  _locations: Location[] = [];\n  // Contains all time objects for this dynamic graph\n  _times: Time[] = [];\n  // linkTypes: LinkType[] = [];\n  timeObjects: any[] = [];\n\n  nodeOrders: Ordering[] = []; // INIT?\n\n  // Matrix for fast access to node pairs (link)\n  matrix: number[][] = []; // fast access to node pairs.\n\n  selections: Selection[] = [];\n\n  // node attributes\n  nodeArrays: NodeArray = new NodeArray();\n\n  // link attributes\n  linkArrays: LinkArray = new LinkArray();\n\n  // node pair attributes\n  nodePairArrays: NodePairArray = new NodePairArray();\n\n  // time attributes\n  timeArrays: TimeArray = new TimeArray();\n\n  // array for relation types\n  linkTypeArrays: LinkTypeArray = new LinkTypeArray();\n\n  // array for node types\n  nodeTypeArrays: NodeTypeArray = new NodeTypeArray();\n\n  // array for locations\n  locationArrays: LocationArray = new LocationArray();\n\n  // points to all object arrays. For convenience\n  attributeArrays: Record<string, any> = {\n    node: this.nodeArrays,\n    link: this.linkArrays,\n    time: this.timeArrays,\n    nodePair: this.nodePairArrays,\n    linkType: this.linkTypeArrays,\n    nodeType: this.nodeTypeArrays,\n    location: this.locationArrays,\n  };\n\n  // highlighted objects\n  highlightArrays: IDCompound = new IDCompound();\n  highlightFreezeArrays: IDCompound = new IDCompound();\n\n  currentSelection_id = 0;\n\n  /* INIT OK?? */\n  defaultLinkSelection: Selection = this.createSelection(\"link\");\n  defaultNodeSelection: Selection = this.createSelection(\"node\");\n\n  // ACCESSOR FUNCTIONS\n  // universal accesor\n  attr(field: string, id: number, type: string): any {\n    let r: any;\n    try {\n      r = (this.attributeArrays as any)[type][field][id];\n    } catch (e) {\n      r = undefined;\n    }\n    return r;\n  }\n\n  // storage keys /////////////////////////////////\n  //\n  gran_min_NAME = \"gran_min\";\n  gran_max_NAME = \"gran_max_NAME\";\n\n  directed_NAME = \"directed_NAME\";\n\n  minWeight_NAME = \"minWeight_NAME\";\n  maxWeight_NAME = \"maxWeight_NAME\";\n\n  matrix_NAME = \"matrix_NAME\";\n\n  nodeArrays_NAME = \"nodeArrays_NAME\";\n  linkArrays_NAME = \"linkArrays_NAME\";\n  nodePairArrays_NAME = \"nodePairArrays_NAME\";\n  timeArrays_NAME = \"timeArrays_NAME\";\n  linkTypeArrays_NAME = \"linkTypeArrays_NAME\";\n  nodeTypeArrays_NAME = \"nodeTypeArrays_NAME\";\n  locationArrays_NAME = \"locationArrays_NAME\";\n  //\n  // end storage keys //////////////////////////////\n\n  // FUNCTIONS\n\n  standardArrayReplacer(key: string, value: any): any {\n    // don't write out graph, as this would cause cycles\n    if (value instanceof DynamicGraph) {\n      console.log(\"standardReplacer found a DynamicGraph property\", key);\n      return DGRAPH_SUB;\n    }\n    // don't write out selection, because we must preserve it independently\n    // from the graph\n    else if (key == \"selections\") return undefined;\n\n    return value;\n  }\n\n  static timeReviver(k: string, v: any, s: DynamicGraph): any {\n    if (k == \"\") {\n      return copyPropsShallow(v, new Time(v.id, s));\n    } else {\n      return dgraphReviver(s, k, v);\n    }\n  }\n\n  static nodeArrayReviver(k: string, v: any, s: DynamicGraph): any {\n    switch (k) {\n      case \"\":\n        return copyPropsShallow(v, new NodeArray());\n      // case 'nodeType':\n      // return copyTimeSeries(v, function() { return new ScalarTimeSeries<string>(); });\n      case \"outLinks\":\n      case \"inLinks\":\n      case \"links\":\n        return copyTimeSeries(v, function () {\n          return new ArrayTimeSeries<number>();\n        });\n      case \"outNeighbors\":\n      case \"inNeighbors\":\n      case \"neighbors\":\n        return copyTimeSeries(v, function () {\n          return new ArrayTimeSeries<number>();\n        });\n      case \"locations\":\n        return copyTimeSeries(v, function () {\n          return new ScalarTimeSeries<number>();\n        });\n      default:\n        return v;\n    }\n  }\n\n  static linkArrayReviver(k: string, v: any, s: DynamicGraph): any {\n    switch (k) {\n      case \"\":\n        return copyPropsShallow(v, new LinkArray());\n      case \"weights\":\n        return copyTimeSeries(v, function () {\n          return new ScalarTimeSeries<any>();\n        });\n      default:\n        return v;\n    }\n  }\n\n  static nodePairArrayReviver(k: string, v: any, s: DynamicGraph): any {\n    switch (k) {\n      case \"\":\n        return copyPropsShallow(v, new NodePairArray());\n      default:\n        return v;\n    }\n  }\n\n  static timeArrayReviver(k: string, v: any, s: DynamicGraph): any {\n    switch (k) {\n      case \"\":\n        return copyPropsShallow(v, new TimeArray());\n      case \"time\":\n        return (v as string[]).map(function (s, i) {\n          return new Date(s);\n        });\n      default:\n        return v;\n    }\n  }\n\n  static linkTypeArrayReviver(k: string, v: any, s: DynamicGraph): any {\n    switch (k) {\n      case \"\":\n        return copyPropsShallow(v, new LinkTypeArray());\n      default:\n        return v;\n    }\n  }\n\n  static nodeTypeArrayReviver(k: string, v: any, s: DynamicGraph): any {\n    switch (k) {\n      case \"\":\n        return copyPropsShallow(v, new NodeTypeArray());\n      default:\n        return v;\n    }\n  }\n\n  static locationArrayReviver(k: string, v: any, s: DynamicGraph): any {\n    switch (k) {\n      case \"\":\n        return copyPropsShallow(v, new LocationArray());\n      default:\n        return v;\n    }\n  }\n\n  loadDynamicGraph(dataMgr: DataManager, dataSetName: string): void {\n    this.clearSelections();\n    this.name = dataSetName;\n\n    // CACHEGRAPH : load from storage the entire state of the graph\n\n    const gran_min_storage = dataMgr.getFromStorage<number>(\n      this.name,\n      this.gran_min_NAME\n    );\n    if (gran_min_storage != undefined) this.gran_min = gran_min_storage;\n\n    const gran_max_storage = dataMgr.getFromStorage<number>(\n      this.name,\n      this.gran_max_NAME\n    );\n    if (gran_max_storage != undefined) this.gran_max = gran_max_storage;\n\n    const directed_storage = dataMgr.getFromStorage<boolean>(\n      this.name,\n      this.directed_NAME\n    );\n    if (directed_storage != undefined) this.directed = directed_storage;\n\n    const minWeight_storage = dataMgr.getFromStorage<number>(\n      this.name,\n      this.minWeight_NAME\n    );\n    if (minWeight_storage != undefined) this.minWeight = minWeight_storage;\n\n    const maxWeight_storage = dataMgr.getFromStorage<number>(\n      this.name,\n      this.maxWeight_NAME\n    );\n    if (maxWeight_storage != undefined) this.maxWeight = maxWeight_storage;\n\n    const matrix_storage = dataMgr.getFromStorage<number[][]>(\n      this.name,\n      this.matrix_NAME\n    );\n    if (matrix_storage != undefined) this.matrix = matrix_storage;\n\n    const nodeArrays_storage = dataMgr.getFromStorage<NodeArray>(\n      this.name,\n      this.nodeArrays_NAME,\n      DynamicGraph.nodeArrayReviver\n    );\n    if (nodeArrays_storage != undefined) this.nodeArrays = nodeArrays_storage;\n\n    const linkArrays_storage = dataMgr.getFromStorage<LinkArray>(\n      this.name,\n      this.linkArrays_NAME,\n      DynamicGraph.linkArrayReviver\n    );\n    if (linkArrays_storage != undefined) this.linkArrays = linkArrays_storage;\n\n    const nodePairArrays_storage = dataMgr.getFromStorage<NodePairArray>(\n      this.name,\n      this.nodePairArrays_NAME,\n      DynamicGraph.nodePairArrayReviver\n    );\n    if (nodePairArrays_storage != undefined)\n      this.nodePairArrays = nodePairArrays_storage;\n\n    const timeArrays_storage = dataMgr.getFromStorage<TimeArray>(\n      this.name,\n      this.timeArrays_NAME,\n      DynamicGraph.timeArrayReviver\n    );\n    if (timeArrays_storage != undefined) this.timeArrays = timeArrays_storage;\n\n    if (!(\"timeArrays\" in this) || !this.timeArrays) {\n      console.log(\"No timeArrays\");\n      this.timeArrays = new TimeArray();\n    } else if (\n      \"momentTime\" in this.timeArrays &&\n      \"unixTime\" in this.timeArrays\n    ) {\n      const ta = this.timeArrays[\"momentTime\"];\n      for (let i = 0; i < ta.length; i++) {\n        ta[i] = new Date(this.timeArrays[\"unixTime\"][i]);\n      }\n    } else if (\"unixTime\" in this.timeArrays) {\n      /* I DON'T KNOW WHY timeArrays IS never */\n      console.log(\"No time in timeArrays\");\n      (this.timeArrays as any)[\"momentTime\"] = (this.timeArrays as any)[\n        \"unixTime\"\n      ].map(new Date());\n    } else {\n      console.log(\"No time or unixTime in timeArrays\");\n      (this.timeArrays as any)[\"momentTime\"] = [];\n    }\n\n    const linkTypeArrays_storage = dataMgr.getFromStorage<LinkTypeArray>(\n      this.name,\n      this.linkTypeArrays_NAME,\n      DynamicGraph.linkTypeArrayReviver\n    );\n    if (linkTypeArrays_storage != undefined)\n      this.linkTypeArrays = linkTypeArrays_storage;\n\n    const nodeTypeArrays_storage = dataMgr.getFromStorage<NodeTypeArray>(\n      this.name,\n      this.nodeTypeArrays_NAME,\n      DynamicGraph.nodeTypeArrayReviver\n    );\n    if (nodeTypeArrays_storage != undefined)\n      this.nodeTypeArrays = nodeTypeArrays_storage;\n\n    const locationArrays_storage = dataMgr.getFromStorage<LocationArray>(\n      this.name,\n      this.locationArrays_NAME,\n      DynamicGraph.locationArrayReviver\n    );\n    if (locationArrays_storage != undefined)\n      this.locationArrays = locationArrays_storage;\n\n    // points to all object arrays. For convenience\n    this.attributeArrays = {\n      node: this.nodeArrays,\n      link: this.linkArrays,\n      time: this.timeArrays,\n      nodePair: this.nodePairArrays,\n      linkType: this.linkTypeArrays,\n      nodeType: this.nodeTypeArrays,\n      location: this.locationArrays,\n    };\n\n    // rather than persist all of the state of windowGraph\n    // as well, we simply reinitialize from our persisted state.\n    // perhaps we need to serialize this as well.\n    // inits the WindowGraph for this dynamic graph, i.e.\n    // the all-aggregated graph.\n    this.createGraphObjects(true, true);\n\n    // init the selections which are currently null\n    // this.nodeArrays.selections=[];\n    // this.nodeArrays.selections.push([]);\n    // this.timeArrays.selections=[];\n    // this.timeArrays.selections.push([]);\n    // this.linkArrays.selections=[];\n    // this.linkArrays.selections.push([]);\n    // this.nodePairArrays.selections=[];\n    // this.nodePairArrays.selections.push([]);\n    this.createSelections(true);\n  }\n\n  saveDynamicGraph(dataMgr: DataManager): void {\n    // CACHEGRAPH : persist the entire state of the dynamic graph\n    dataMgr.saveToStorage(this.name, this.gran_min_NAME, this.gran_min);\n    dataMgr.saveToStorage(this.name, this.gran_max_NAME, this.gran_max);\n    dataMgr.saveToStorage(this.name, this.directed_NAME, this.directed);\n    dataMgr.saveToStorage(this.name, this.minWeight_NAME, this.minWeight);\n    dataMgr.saveToStorage(this.name, this.maxWeight_NAME, this.maxWeight);\n\n    dataMgr.saveToStorage(this.name, this.matrix_NAME, this.matrix);\n    dataMgr.saveToStorage(\n      this.name,\n      this.nodeArrays_NAME,\n      this.nodeArrays,\n      this.standardArrayReplacer\n    );\n    // when we tried to persist the entire linkArrays, javascript threw an\n    // exception, so for now we will simply try to save out the parts.\n    dataMgr.saveToStorage(\n      this.name,\n      this.linkArrays_NAME,\n      this.linkArrays,\n      this.standardArrayReplacer\n    );\n    // dataMgr.saveToStorage(this.name, this.linkArrays_NAME+\"source\", this.linkArrays.source, this.standardReplacer);\n    // dataMgr.saveToStorage(this.name, this.linkArrays_NAME+\"target\", this.linkArrays.target, this.standardReplacer);\n    // dataMgr.saveToStorage(this.name, this.linkArrays_NAME+\"linkType\", this.linkArrays.linkType, this.standardReplacer);\n    // dataMgr.saveToStorage(this.name, this.linkArrays_NAME+\"directed\", this.linkArrays.directed, this.standardReplacer);\n    // dataMgr.saveToStorage(this.name, this.linkArrays_NAME+\"nodePair\", this.linkArrays.nodePair, this.standardReplacer);\n    // dataMgr.saveToStorage(this.name, this.linkArrays_NAME+\"presence\", this.linkArrays.presence, this.standardReplacer);\n    // dataMgr.saveToStorage(this.name, this.linkArrays_NAME+\"weights\", this.linkArrays.weights, this.standardReplacer);\n    // dataMgr.saveToStorage(this.name, this.linkArrays_NAME+\"filter\", this.linkArrays.filter, this.standardReplacer);\n    // dataMgr.saveToStorage(this.name, this.linkArrays_NAME+\"attributes\", this.linkArrays.attributes, this.standardReplacer);\n\n    dataMgr.saveToStorage(\n      this.name,\n      this.nodePairArrays_NAME,\n      this.nodePairArrays,\n      this.standardArrayReplacer\n    );\n    dataMgr.saveToStorage(\n      this.name,\n      this.timeArrays_NAME,\n      this.timeArrays,\n      this.standardArrayReplacer\n    );\n    dataMgr.saveToStorage(\n      this.name,\n      this.linkTypeArrays_NAME,\n      this.linkTypeArrays,\n      this.standardArrayReplacer\n    );\n    dataMgr.saveToStorage(\n      this.name,\n      this.nodeTypeArrays_NAME,\n      this.nodeTypeArrays,\n      this.standardArrayReplacer\n    );\n    dataMgr.saveToStorage(\n      this.name,\n      this.locationArrays_NAME,\n      this.locationArrays,\n      this.standardArrayReplacer\n    );\n  }\n\n  // Removes this graph from the cache.\n  delete(dataMgr: DataManager): void {\n    dataMgr.removeFromStorage(this.name, this.gran_min_NAME);\n    dataMgr.removeFromStorage(this.name, this.gran_max_NAME);\n    dataMgr.removeFromStorage(this.name, this.directed_NAME);\n    dataMgr.removeFromStorage(this.name, this.minWeight_NAME);\n    dataMgr.removeFromStorage(this.name, this.maxWeight_NAME);\n\n    dataMgr.removeFromStorage(this.name, this.matrix_NAME);\n    dataMgr.removeFromStorage(this.name, this.nodeArrays_NAME);\n    // when we tried to persist the entire linkArrays, javascript threw an\n    // exception, so for now we will simply try to save out the parts.\n    dataMgr.removeFromStorage(this.name, this.linkArrays_NAME);\n    // dataMgr.saveToStorage(this.name, this.linkArrays_NAME+\"source\", this.linkArrays.source, this.standardReplacer);\n    // dataMgr.saveToStorage(this.name, this.linkArrays_NAME+\"target\", this.linkArrays.target, this.standardReplacer);\n    // dataMgr.saveToStorage(this.name, this.linkArrays_NAME+\"linkType\", this.linkArrays.linkType, this.standardReplacer);\n    // dataMgr.saveToStorage(this.name, this.linkArrays_NAME+\"directed\", this.linkArrays.directed, this.standardReplacer);\n    // dataMgr.saveToStorage(this.name, this.linkArrays_NAME+\"nodePair\", this.linkArrays.nodePair, this.standardReplacer);\n    // dataMgr.saveToStorage(this.name, this.linkArrays_NAME+\"presence\", this.linkArrays.presence, this.standardReplacer);\n    // dataMgr.saveToStorage(this.name, this.linkArrays_NAME+\"weights\", this.linkArrays.weights, this.standardReplacer);\n    // dataMgr.saveToStorage(this.name, this.linkArrays_NAME+\"filter\", this.linkArrays.filter, this.standardReplacer);\n    // dataMgr.saveToStorage(this.name, this.linkArrays_NAME+\"attributes\", this.linkArrays.attributes, this.standardReplacer);\n\n    dataMgr.removeFromStorage(this.name, this.nodePairArrays_NAME);\n    dataMgr.removeFromStorage(this.name, this.timeArrays_NAME);\n    dataMgr.removeFromStorage(this.name, this.linkTypeArrays_NAME);\n    dataMgr.removeFromStorage(this.name, this.nodeTypeArrays_NAME);\n    dataMgr.removeFromStorage(this.name, this.locationArrays_NAME);\n  }\n\n  debugCompareTo(other: DynamicGraph): boolean {\n    let result = true;\n\n    if (this.name != other.name) {\n      console.log(\"name different\");\n      result = false;\n    }\n    // CACHEGRAPH compare every aspect of this one to the other one\n    if (this.gran_min != other.gran_min) {\n      console.log(\"gran_min different\", this.gran_min, other.gran_min);\n      result = false;\n    }\n    if (this.gran_max != other.gran_max) {\n      console.log(\"gran_max different\", this.gran_max, other.gran_max);\n      result = false;\n    }\n\n    if (this.directed != other.directed) {\n      console.log(\"directed different\", this.directed, other.directed);\n      result = false;\n    }\n\n    if (\n      this._nodes.length != other._nodes.length ||\n      !compareTypesDeep(this._nodes, other._nodes, 2)\n    ) {\n      console.log(\"nodes different\");\n      result = false;\n    }\n    if (\n      this._links.length != other._links.length ||\n      !compareTypesDeep(this._links, other._links, 2)\n    ) {\n      console.log(\"links different\");\n      result = false;\n    }\n    if (\n      this._nodePairs.length != other._nodePairs.length ||\n      !compareTypesDeep(this._nodePairs, other._nodePairs, 2)\n    ) {\n      console.log(\"nodePairs different\");\n      result = false;\n    }\n    if (\n      this._locations.length != other._locations.length ||\n      !compareTypesDeep(this._locations, other._locations, 2)\n    ) {\n      console.log(\"locations different\");\n      result = false;\n    }\n    if (\n      this._times.length != other._times.length ||\n      !compareTypesDeep(this._times, other._times, 2)\n    ) {\n      console.log(\"times different\");\n      result = false;\n    }\n\n    if (\n      (this.nodeOrders && this.nodeOrders.length != other.nodeOrders.length) ||\n      !compareTypesDeep(this.nodeOrders, other.nodeOrders, 2)\n    ) {\n      console.log(\"nodeOrders different\", this.nodeOrders, other.nodeOrders);\n      result = false;\n    }\n\n    if (\n      this.matrix.length != other.matrix.length ||\n      !compareTypesDeep(this.matrix, other.matrix, 2)\n    ) {\n      console.log(\"matrix different\", this.matrix, other.matrix);\n      result = false;\n    }\n\n    if (\n      this.nodeArrays.length != other.nodeArrays.length ||\n      !compareTypesDeep(this.nodeArrays, other.nodeArrays, 2)\n    ) {\n      console.log(\"nodeArrays different\", this.nodeArrays, other.nodeArrays);\n      result = false;\n    }\n\n    if (\n      this.linkArrays.length != other.linkArrays.length ||\n      !compareTypesDeep(this.linkArrays, other.linkArrays, 2)\n    ) {\n      console.log(\"linkArrays different\", this.linkArrays, other.linkArrays);\n      result = false;\n    }\n\n    if (\n      this.nodePairArrays.length != other.nodePairArrays.length ||\n      !compareTypesDeep(this.nodePairArrays, other.nodePairArrays, 2)\n    ) {\n      console.log(\n        \"nodePairArrays different\",\n        this.nodePairArrays,\n        other.nodePairArrays\n      );\n      result = false;\n    }\n\n    if (\n      this.timeArrays.length != other.timeArrays.length ||\n      !compareTypesDeep(this.timeArrays, other.timeArrays, 2)\n    ) {\n      console.log(\"timeArrays different\", this.timeArrays, other.timeArrays);\n      result = false;\n    }\n\n    if (\n      this.linkTypeArrays.length != other.linkTypeArrays.length ||\n      !compareTypesDeep(this.linkTypeArrays, other.linkTypeArrays, 2)\n    ) {\n      console.log(\n        \"linkTypeArrays different\",\n        this.linkTypeArrays,\n        other.linkTypeArrays\n      );\n      result = false;\n    }\n\n    if (\n      this.nodeTypeArrays.length != other.nodeTypeArrays.length ||\n      !compareTypesDeep(this.nodeTypeArrays, other.nodeTypeArrays, 2)\n    ) {\n      console.log(\n        \"nodeTypeArrays different\",\n        this.nodeTypeArrays,\n        other.nodeTypeArrays\n      );\n      result = false;\n    }\n\n    if (\n      this.locationArrays.length != other.locationArrays.length ||\n      !compareTypesDeep(this.locationArrays, other.locationArrays, 2)\n    ) {\n      console.log(\n        \"locationArrays different\",\n        this.locationArrays,\n        other.locationArrays\n      );\n      result = false;\n    }\n\n    if (\n      this.defaultLinkSelection.elementIds.length !=\n        other.defaultLinkSelection.elementIds.length ||\n      !compareTypesDeep(\n        this.defaultLinkSelection,\n        other.defaultLinkSelection,\n        2\n      )\n    ) {\n      console.log(\n        \"defaultLinkSelection different\",\n        this.defaultLinkSelection,\n        other.defaultLinkSelection\n      );\n      result = false;\n    }\n\n    if (\n      this.defaultNodeSelection.elementIds.length !=\n        other.defaultNodeSelection.elementIds.length ||\n      !compareTypesDeep(\n        this.defaultNodeSelection,\n        other.defaultNodeSelection,\n        2\n      )\n    ) {\n      console.log(\n        \"defaultNodeSelection different\",\n        this.defaultNodeSelection,\n        other.defaultNodeSelection\n      );\n      result = false;\n    }\n\n    if (\n      this.selections.length != other.selections.length ||\n      !compareTypesDeep(this.selections, other.selections, 2)\n    ) {\n      console.log(\"selections different\", this.selections, other.selections);\n      result = false;\n    }\n\n    return result;\n  }\n\n  // creates this graph and fills node, link and time arrays from\n  // data tables.\n  initDynamicGraph(data: DataSet): void {\n    this.clearSelections();\n    console.log(\"[dynamicgraph.ts] Create dynamic graph for \", data.name, data);\n\n    //this.data = data;s\n    this.name = data.name;\n    this.directed = data.directed;\n\n    // fill node, link arrays and time\n\n    // CREATE TIME OBJECT for all events\n    this.gran_min = 0;\n    this.gran_max = 0;\n\n    let timeLabel: string;\n    const unixTimes: number[] = [];\n    let unixTime: number | undefined;\n\n    if (isValidIndex(data.linkSchema.time)) {\n      // get unix times for all times\n      console.log(\"GEtting unix times for all times - linktable\");\n      console.log(data.linkTable);\n      for (let i = 0; i < data.linkTable.length; i++) {\n        timeLabel = data.linkTable[i][data.linkSchema.time];\n        console.log(data.linkTable[i]);\n\n        unixTime = parseStandardTime(timeLabel)?.getTime();\n        if (unixTime == undefined) continue;\n\n        if (unixTimes.indexOf(unixTime) == -1) {\n          unixTimes.push(unixTime);\n        }\n      }\n      // obtain granularity\n      unixTimes.sort(sortNumber);\n\n      let diff = 99999999999999;\n      for (let i = 0; i < unixTimes.length - 2; i++) {\n        diff = Math.min(diff, unixTimes[i + 1] - unixTimes[i]);\n      }\n\n      if (diff >= 1000) this.gran_min = 1;\n      if (diff >= 1000 * 60) this.gran_min = 2;\n      if (diff >= 1000 * 60 * 60) this.gran_min = 3;\n      if (diff >= 1000 * 60 * 60 * 24) this.gran_min = 4;\n      if (diff >= 1000 * 60 * 60 * 24 * 7) this.gran_min = 5;\n      if (diff >= 1000 * 60 * 60 * 24 * 30) this.gran_min = 6;\n      if (diff >= 1000 * 60 * 60 * 24 * 30 * 12) this.gran_min = 7;\n      if (diff >= 1000 * 60 * 60 * 24 * 30 * 12 * 10) this.gran_min = 8;\n      if (diff >= 1000 * 60 * 60 * 24 * 30 * 12 * 100) this.gran_min = 9;\n      if (diff >= 1000 * 60 * 60 * 24 * 30 * 12 * 1000) this.gran_min = 10;\n\n      diff = unixTimes[unixTimes.length - 1] - unixTimes[0];\n      this.gran_max = 0;\n      if (diff >= 1000) this.gran_max = 1;\n      if (diff >= 1000 * 60) this.gran_max = 2;\n      if (diff >= 1000 * 60 * 60) this.gran_max = 3;\n      if (diff >= 1000 * 60 * 60 * 24) this.gran_max = 4;\n      if (diff >= 1000 * 60 * 60 * 24 * 7) this.gran_max = 5;\n      if (diff >= 1000 * 60 * 60 * 24 * 30) this.gran_max = 6;\n      if (diff >= 1000 * 60 * 60 * 24 * 30 * 12) this.gran_max = 7;\n      if (diff >= 1000 * 60 * 60 * 24 * 30 * 12 * 10) this.gran_max = 8;\n      if (diff >= 1000 * 60 * 60 * 24 * 30 * 12 * 100) this.gran_max = 9;\n      if (diff >= 1000 * 60 * 60 * 24 * 30 * 12 * 1000) this.gran_max = 10;\n\n      console.log(\n        \"[Dynamic Graph] Minimal granularity\",\n        GRANULARITY[this.gran_min]\n      );\n      console.log(\n        \"[Dynamic Graph] Maximal granularity\",\n        GRANULARITY[this.gran_max]\n      );\n\n      // create one time object for every time point of gran_min, between start and end time.\n      // [bb] deprecated\n      // var start = moment(unixTimes[0] + '', 'x').startOf(GRANULARITY[this.gran_min]);\n      // var end = moment(unixTimes[unixTimes.length - 1] + '', 'x').startOf(GRANULARITY[this.gran_min]);\n      // var numTimes = Math.ceil(Math.abs(start.diff(end, GRANULARITY[this.gran_min] + 's')));\n\n      // var curr_t = start;\n      // this._times = [];\n      for (let i = 0; i < unixTimes.length; i++) {\n        this.timeArrays.id.push(i);\n        this.timeArrays.momentTime.push(new Date(unixTimes[i]));\n        this.timeArrays.label.push(\n          formatStandardTime(this.timeArrays.momentTime[i])\n        );\n        this.timeArrays.unixTime.push(unixTimes[i]);\n        this.timeArrays.selections.push([]);\n        this.timeArrays.filter.push(false);\n        this.timeArrays.links.push([]);\n\n        // create time objects\n        this._times.push(new Time(i, this));\n        // curr_t = start.add(1, GRANULARITY[this.gran_min] + 's');\n      }\n\n      // Now, all existing times with events and potentially\n      // attributes associated, have been created.\n      // Below, we create a simple array of moment.moments\n      // for any possible time unit for every aggregation level.\n      // In fact, those structures are created on-demand, i.e.\n      // the first time they are needed.\n      // Here, we only create the meta-structure\n      for (let g = 0; g <= GRANULARITY.length; g++) {\n        this.timeObjects.push([]); // AQUIIIII\n      }\n    }\n\n    // if no valid have been found:\n    if (this.timeArrays.length == 0) {\n      // null time object that represents one time step for the entire graph, i.e. a static graph\n      this.timeArrays.id.push(0);\n      this.timeArrays.momentTime.push(new Date(0));\n      this.timeArrays.unixTime.push(0);\n      this.timeArrays.selections.push([]);\n      this.timeArrays.filter.push(false);\n      this.timeArrays.links.push([]);\n      this._times.push(new Time(0, this));\n    }\n\n    // from here on, there is at least one time object present.\n\n    // CREATE LOCATIONS\n\n    // if there is a location table, then there needs to be locationSchema\n    console.assert(!data.locationTable || isValidIndex(data.locationSchema.id));\n\n    if (data.locationTable) {\n      for (let i = 0; i < data.locationTable.length; i++) {\n        this.locationArrays.id.push(\n          data.locationTable[i][data.locationSchema.id]\n        );\n        this.locationArrays.label.push(\n          data.locationTable[i][data.locationSchema.label]\n        );\n        this.locationArrays.longitude.push(\n          data.locationTable[i][data.locationSchema.longitude]\n        );\n        this.locationArrays.latitude.push(\n          data.locationTable[i][data.locationSchema.latitude]\n        );\n        this.locationArrays.x.push(\n          data.locationTable[i][data.locationSchema.x]\n        );\n        this.locationArrays.y.push(\n          data.locationTable[i][data.locationSchema.y]\n        );\n        this.locationArrays.z.push(\n          data.locationTable[i][data.locationSchema.z]\n        );\n        this.locationArrays.radius.push(\n          data.locationTable[i][data.locationSchema.radius]\n        );\n      }\n    }\n    if (\"id\" in this.locationArrays)\n      console.log(\"locations\", this.locationArrays.id.length);\n\n    // CREATE NODES\n    let row: any[];\n    let nodeId_data; // node id in data set\n    let nodeId_table; // node id in table\n    let time: Time;\n    console.assert(\n      data.nodeTable.length == 0 || isValidIndex(data.nodeSchema.id),\n      \"either there is no nodeTable data, or we have a schema for the nodetable\"\n    );\n\n    let typeName: string;\n    let typeId: number;\n\n    const nodeUserProperties = [];\n    // Get user-properties on links, if exist\n    for (const prop in data.nodeSchema) {\n      if (\n        Object.prototype.hasOwnProperty.call(data.nodeSchema, prop) &&\n        prop != \"id\" &&\n        prop != \"label\" &&\n        prop != \"time\" &&\n        prop != \"name\" &&\n        prop != \"nodeType\" &&\n        prop != \"location\" &&\n        prop != \"constructor\"\n      ) {\n        nodeUserProperties.push(prop);\n        // create property\n        (this.nodeArrays as any)[prop] = [];\n      }\n    }\n\n    for (let i = 0; i < data.nodeTable.length; i++) {\n      row = data.nodeTable[i];\n\n      // check if id already exists\n      nodeId_data = row[data.nodeSchema.id];\n      nodeId_table = this.nodeArrays.id.indexOf(nodeId_data);\n      if (nodeId_table == -1) {\n        nodeId_table = this.nodeArrays.id.length;\n        this.nodeArrays.id.push(nodeId_data);\n        this.nodeArrays.nodeType.push(\"\");\n        this.nodeArrays.outLinks.push(new ArrayTimeSeries<number>());\n        this.nodeArrays.inLinks.push(new ArrayTimeSeries<number>());\n        this.nodeArrays.links.push(new ArrayTimeSeries<number>()); // both, in and out\n        this.nodeArrays.outNeighbors.push(new ArrayTimeSeries<number>());\n        this.nodeArrays.inNeighbors.push(new ArrayTimeSeries<number>());\n        this.nodeArrays.neighbors.push(new ArrayTimeSeries<number>());\n        this.nodeArrays.selections.push([]);\n        this.nodeArrays.filter.push(false);\n        this.nodeArrays.locations.push(new ScalarTimeSeries<number>());\n        this.nodeArrays.attributes.push(new Object());\n        this.nodeArrays.color.push(\"\");\n        this.nodeArrays.shape.push(\"\");\n        if (isValidIndex(data.nodeSchema.label)) {\n          this.nodeArrays.label.push(row[data.nodeSchema.label]);\n        } else {\n          this.nodeArrays.label.push(row[data.nodeSchema.id]);\n        }\n      }\n\n      // get time\n      // if (isValidIndex(data.nodeSchema.time)) {\n\n      if (isValidIndex(data.nodeSchema.time)) {\n        timeLabel = row[data.nodeSchema.time];\n        console.log(\"params\");\n        console.log(timeLabel);\n        console.log(TIME_FORMAT);\n        console.log(parseStandardTime(timeLabel)?.toUTCString());\n        console.log(parseStandardTime(timeLabel)?.getTime());\n        const timeIdForUnixTime = this.getTimeIdForUnixTime(\n          parseStandardTime(timeLabel)?.getTime()\n        );\n        if (timeLabel == undefined || timeIdForUnixTime == undefined) {\n          //} || timeStamp.indexOf('null')) {\n          time = this._times[0];\n        } else {\n          time = this._times[timeIdForUnixTime];\n        }\n      } else {\n        time = this._times[0];\n      }\n      if (time == undefined) time = this._times[0];\n\n      // check locations\n      if (isValidIndex(data.nodeSchema.location)) {\n        const locId = row[data.nodeSchema.location];\n        if (locId == null || locId == undefined) continue;\n        this.nodeArrays.locations[nodeId_data].set(time, locId);\n      }\n\n      // check shapes\n      if (isValidIndex(data.nodeSchema.shape)) {\n        const shape = row[data.nodeSchema.shape];\n        this.nodeArrays.shape.push(shape);\n      }\n\n      // gather node type\n      if (isValidIndex(data.nodeSchema.nodeType)) {\n        typeName = data.nodeTable[i][data.nodeSchema.nodeType];\n        typeId = this.nodeTypeArrays.name.indexOf(typeName);\n        if (typeId < 0) {\n          typeId = this.nodeTypeArrays.length;\n          this.nodeTypeArrays.id.push(typeId);\n          this.nodeTypeArrays.name.push(typeName);\n        }\n        this.nodeArrays.nodeType[nodeId_table] = typeName;\n        data.nodeTable[i][data.nodeSchema.nodeType] = typeId;\n      }\n\n      // gather user-properties:\n      for (let p = 0; p < nodeUserProperties.length; p++) {\n        const prop = nodeUserProperties[p];\n        (this.nodeArrays as any)[prop].push(\n          row[(data.nodeSchema as any)[prop]]\n        );\n      }\n\n      // see if temporal information is available\n      // if(data.nodeSchema.time && data.nodeSchema.time > -1){\n      //     for(var field in data.nodeSchema){\n      //         if (field != undefined\n      //             && data.nodeSchema.hasOwnProperty(field)\n      //             && data.nodeSchema[field] > -1\n      //             && field != 'label'\n      //             && field != 'time'\n      //             && field != 'locations'\n      //             && field != 'id'\n      //             ){\n      //                 if(this.nodeArrays.attributes[nodeId_table][field] == undefined){\n      //                     this.nodeArrays.attributes[nodeId_table][field] = new ScalarTimeSeries();\n      //                 }\n      //                 timeLabel = data.nodeTable[i][data.nodeSchema.time];\n      //                 if(timeLabel == undefined)\n      //                     continue;\n      //                 timeStamp = parseInt(moment(timeLabel, networkcube.TIME_FORMAT).format('x'));\n      //                 time = this.times[this.getTimeIdForTimeStamp(timeStamp)];\n      //                 this.nodeArrays[field][nodeId_table].set(time, row[data.nodeSchema[field]]);\n\n      //             // //in case of locations:\n      //             // if(field == 'location'){\n      //             //     if(typeof row[data.nodeSchema[field]] == 'number'){\n      //             //         id_loc = row[data.nodeSchema[field]];\n      //             //     }\n      //             // }\n      //          }\n      //     }\n      // }else{\n      //     // no time information available on nodes\n      //     for(var field in data.nodeSchema){\n      //         if (field != undefined\n      //             && data.nodeSchema.hasOwnProperty(field)\n      //             && data.nodeSchema[field] > -1\n      //             && field != 'label'\n      //             && field != 'time'\n      //             && field != 'id'\n      //             && field != 'locations'\n      //             )\n      //         {\n      //             // check for non temporal information\n      //             if(this.nodeArrays.attributes[nodeId_table][field] == undefined){\n      //                 this.nodeArrays.attributes[nodeId_table][field] = new ScalarTimeSeries();\n      //             }\n      //             // eternal attributes are assigned no time.\n      //             this.nodeArrays[field][nodeId_table].set(undefined, row[data.nodeSchema[field]]);\n      //         }\n      //     }\n      // }\n    }\n\n    // create matrix and initialize with -1, i.e. nodes are not connected.\n    if (\"id\" in this.nodeArrays) {\n      for (let i = 0; i < this.nodeArrays.id.length; i++) {\n        this.matrix.push(array(undefined, this.nodeArrays.id.length));\n      }\n    }\n\n    // CREATE LINKS\n\n    let s: number, t: number;\n    let timeId: number;\n    let nodePairId: number;\n    let linkId: number;\n\n    const linkUserProperties = [];\n    // Get user-properties on links, if exist\n    for (const prop in data.linkSchema) {\n      if (\n        Object.prototype.hasOwnProperty.call(data.linkSchema, prop) &&\n        prop != \"id\" &&\n        prop != \"linkType\" &&\n        prop != \"time\" &&\n        prop != \"name\" &&\n        prop != \"source\" &&\n        prop != \"target\" &&\n        prop != \"weight\" &&\n        prop != \"directed\"\n      ) {\n        linkUserProperties.push(prop);\n        // create property\n        (this.linkArrays as any)[prop] = [];\n      }\n    }\n    console.log(\"linkUserProperties\", linkUserProperties);\n\n    console.assert(\n      data.linkTable.length == 0 ||\n        (isValidIndex(data.linkSchema.id) &&\n          isValidIndex(data.linkSchema.source) &&\n          isValidIndex(data.linkSchema.target)),\n      \"either there are no links, or the linkschema is defined\"\n    );\n\n    for (let i = 0; i < data.linkTable.length; i++) {\n      row = data.linkTable[i];\n      linkId = row[data.linkSchema.id];\n      this.linkArrays.directed.push(false); // this is default and can be overwritten in the following.\n\n      // check if linkId, i.e. link exists\n      if (this.linkArrays.id.indexOf(linkId) == -1) {\n        // init new link\n        this.linkArrays.id[linkId] = linkId;\n        this.linkArrays.source[linkId] = row[data.linkSchema.source];\n        this.linkArrays.target[linkId] = row[data.linkSchema.target];\n        this.linkArrays.linkType[linkId] = row[data.linkSchema.linkType];\n        this.linkArrays.directed[linkId] = row[data.linkSchema.directed];\n        this.linkArrays.weights[linkId] = new ScalarTimeSeries<any>();\n        this.linkArrays.presence[linkId] = [];\n        this.linkArrays.selections.push([]);\n        this.linkArrays.nodePair.push(undefined);\n        this.linkArrays.filter.push(false);\n      }\n\n      // set time information\n      if (isValidIndex(data.linkSchema.time)) {\n        timeLabel = data.linkTable[i][data.linkSchema.time];\n        unixTime = parseStandardTime(timeLabel)?.getTime();\n        const timeIdForUnixTime = unixTime\n          ? this.getTimeIdForUnixTime(unixTime)\n          : undefined;\n        if (timeIdForUnixTime != undefined) {\n          timeId = timeIdForUnixTime;\n        } else {\n          timeId = 0;\n        }\n      } else {\n        timeId = 0;\n      }\n\n      time = this._times[timeId];\n      this.linkArrays.presence[linkId].push(timeId);\n\n      // set weight if applies\n      if (\n        isValidIndex(data.linkSchema.weight) &&\n        data.linkTable[i][data.linkSchema.weight] != undefined\n      ) {\n        this.linkArrays.weights[linkId].set(\n          time,\n          data.linkTable[i][data.linkSchema.weight]\n        );\n        this.minWeight = Math.min(\n          this.minWeight,\n          data.linkTable[i][data.linkSchema.weight]\n        );\n        this.maxWeight = Math.max(\n          this.maxWeight,\n          data.linkTable[i][data.linkSchema.weight]\n        );\n      } else {\n        // set one = presence\n        this.minWeight = 0;\n        this.maxWeight = 1;\n        this.linkArrays.weights[linkId].set(time, 1);\n      }\n\n      // add graph specific information\n      s = this.nodeArrays.id.indexOf(row[data.linkSchema.source]);\n      t = this.nodeArrays.id.indexOf(row[data.linkSchema.target]);\n      this.nodeArrays.neighbors[s].add(time, t);\n      this.nodeArrays.neighbors[t].add(time, s);\n\n      this.nodeArrays.links[s].add(time, linkId);\n      this.nodeArrays.links[t].add(time, linkId);\n\n      // for directed links, fill the in/out arrays\n      if (this.linkArrays.directed[i]) {\n        this.nodeArrays.outNeighbors[s].add(time, t);\n        this.nodeArrays.inNeighbors[t].add(time, s);\n\n        this.nodeArrays.outLinks[s].add(time, linkId);\n        this.nodeArrays.inLinks[t].add(time, linkId);\n      }\n\n      //link pairs\n      // a node pair is stored in a matrix structure for easy access.\n      // For every direction (s,t) and (t,s), an individual link pair\n      // exists. If an underlying link is undirected, it is referenced\n      // in both node pairs.\n      nodePairId = this.matrix[s][t];\n      if (!isValidIndex(nodePairId)) {\n        nodePairId = this.nodePairArrays.length;\n        this.matrix[s][t] = nodePairId;\n        this.nodePairArrays.id.push(nodePairId);\n        this.nodePairArrays.source.push(s);\n        this.nodePairArrays.target.push(t);\n        this.nodePairArrays.links.push([]);\n        this.nodePairArrays.selections.push([]);\n        this.nodePairArrays.filter.push(false);\n      }\n      // add link only, if not already exist\n      if (this.nodePairArrays.links[nodePairId].indexOf(linkId) == -1) {\n        this.nodePairArrays.links[nodePairId].push(linkId);\n        this.linkArrays.nodePair[linkId] = nodePairId;\n      }\n\n      //May affect matrix view, but breaks nodelink directionality\n      // if (this.linkArrays.directed[i]) {\n      //     nodePairId = this.matrix[t][s];\n      //     if (!nodePairId) {\n      //         nodePairId = this.nodePairArrays.id.length;\n      //         this.matrix[t][s] = nodePairId;\n      //         this.nodePairArrays.id.push(nodePairId);\n      //         this.nodePairArrays.source.push(t);\n      //         this.nodePairArrays.target.push(s);\n      //         this.nodePairArrays.links.push(doubleArray(this._times.length));\n      //     }\n      //     // add link only, if not already exist\n      //     if (this.nodePairArrays.links[nodePairId].indexOf(linkId) == -1) {\n      //         this.nodePairArrays.links[nodePairId].push(linkId);\n      //         this.linkArrays.nodePair[linkId] = nodePairId;\n      //     }\n      // }\n\n      // gather link types\n      if (isValidIndex(data.linkSchema.linkType)) {\n        typeName = data.linkTable[i][data.linkSchema.linkType];\n        typeId = this.linkTypeArrays.name.indexOf(typeName);\n        if (typeId < 0) {\n          typeId = this.linkTypeArrays.length;\n          this.linkTypeArrays.id.push(typeId);\n          this.linkTypeArrays.name.push(typeName);\n        }\n        data.linkTable[i][data.linkSchema.linkType] = typeId;\n      }\n\n      // gather user-properties:\n      for (let p = 0; p < linkUserProperties.length; p++) {\n        const prop = linkUserProperties[p];\n        (this.linkArrays as any)[prop].push(\n          row[(data.linkSchema as any)[prop]]\n        );\n      }\n    }\n\n    // For every time, store a pointer to all its links:\n    // var allLinks = links().toArray();\n    // var allTimes = this.g.times().toArray();\n    for (let i = 0; i < this.linkArrays.length; i++) {\n      for (let j = 0; j < this.timeArrays.length; j++) {\n        if (this.linkArrays.weights[i]) {\n          if (\n            Object.prototype.hasOwnProperty.call(\n              this.linkArrays.weights[i].toArray(),\n              this.timeArrays.id[j].toString()\n            )\n          ) {\n            this.timeArrays.links[j].push(this.linkArrays.id[i]);\n          }\n        }\n      }\n    }\n\n    //Build a color mapping\n    const colorSet = new Set([\n      \"#e4549b\",\n      \"#a33a36\",\n      \"#bd6221\",\n      \"#dfba47\",\n      \"#b5b867\",\n      \"#479b7f\",\n      \"#335b8e\",\n      \"#78387d\",\n    ]);\n    const colorMappings: { [color: string]: string } = {};\n    this.nodeArrays.color.forEach(function (color: any) {\n      if (!colorMappings[color]) {\n        const colorSetAsArray = Array.from(colorSet);\n        const generatedColor =\n          colorSetAsArray[Math.floor(Math.random() * colorSetAsArray.length)];\n        colorMappings[color] = generatedColor;\n        colorSet.delete(generatedColor);\n      }\n    });\n\n    //Add color values to nodeArray colors\n    /*\n        for(let i=0; i<this.nodeArrays.color.length; i++) {\n            this.nodeArrays.color[i] = this.nodeArrays.color[i], colorMappings[this.nodeArrays.color[i]];\n        }\n        */\n\n    //Build a shape mapping\n    const shapeSet = new Set([\"cross\", \"diamond\", \"square\", \"triangle\"]);\n    const shapeMappings: { [shape: string]: string } = {};\n    this.nodeArrays.shape.forEach(function (shape: any) {\n      if (!shapeMappings[shape]) {\n        const shapeSetAsArray = Array.from(shapeSet);\n        const generatedShape =\n          shapeSetAsArray[Math.floor(Math.random() * shapeSetAsArray.length)];\n        shapeMappings[shape] = generatedShape;\n        shapeSet.delete(generatedShape);\n      }\n    });\n\n    //Add shapes to nodeArray shapes\n    /*\n        for(let i=0; i<this.nodeArrays.shape.length; i++) {\n            this.nodeArrays.shape[i] = this.nodeArrays.shape[i], shapeMappings[this.nodeArrays.shape[i]];\n        }\n        */\n\n    // create color map for link types\n    console.log(\n      \"[Dynamic Graph] Dynamic Graph created: \",\n      this.nodeArrays.length\n    );\n    console.log(\"[Dynamic Graph]    - Nodes: \", this.nodeArrays.length);\n    console.log(\"[Dynamic Graph]    - Edges: \", this.linkArrays.length);\n    console.log(\"[Dynamic Graph]    - Times: \", this.timeArrays.length);\n    console.log(\n      \"[Dynamic Graph]    - Link types: \",\n      this.linkTypeArrays.length\n    );\n    console.log(\n      \"[Dynamic Graph]    - Node Pairs: \",\n      this.nodePairArrays.length\n    );\n\n    console.log(\n      '>>>this.nodeArrays[\"neighbors\"][0]',\n      this.nodeArrays[\"neighbors\"][0]\n    );\n\n    // inits the WindowGraph for this dynamic graph, i.e.\n    // the all-aggregated graph.\n    this.createGraphObjects(true, true); //false, false);\n\n    this.createSelections(false);\n  }\n\n  createSelections(shouldCreateArrays: boolean): void {\n    // CREATE SELECTIONS\n    if (shouldCreateArrays) {\n      if (!(\"nodeArrays\" in this && this.nodeArrays)) {\n        this.nodeArrays = new NodeArray();\n        this.linkArrays = new LinkArray();\n        this.timeArrays = new TimeArray();\n        this.nodePairArrays = new NodePairArray();\n      }\n      this.nodeArrays.selections = new Array(this.nodeArrays.length);\n      for (let i = 0; i < this.nodeArrays.selections.length; i++) {\n        this.nodeArrays.selections[i] = [];\n      }\n\n      this.linkArrays.selections = new Array(this.linkArrays.length);\n      for (let i = 0; i < this.linkArrays.selections.length; i++) {\n        this.linkArrays.selections[i] = [];\n      }\n\n      this.timeArrays.selections = new Array(this.timeArrays.length);\n      for (let i = 0; i < this.timeArrays.selections.length; i++) {\n        this.timeArrays.selections[i] = [];\n      }\n\n      this.nodePairArrays.selections = new Array(this.nodePairArrays.length);\n      for (let i = 0; i < this.nodePairArrays.selections.length; i++) {\n        this.nodePairArrays.selections[i] = [];\n      }\n    }\n\n    // create default selections for each type\n    this.defaultNodeSelection = this.createSelection(\"node\");\n    this.defaultNodeSelection.name = \"Unselected\";\n    for (let i = 0; i < this._nodes.length; i++) {\n      this.defaultNodeSelection.elementIds.push(i);\n      this.addToAttributeArraysSelection(\n        this.defaultNodeSelection,\n        \"node\",\n        this._nodes[i].id()\n      );\n    }\n    this.defaultNodeSelection.color = \"#000000\";\n    this.defaultNodeSelection.showColor = false;\n    this.defaultNodeSelection.priority = 10000;\n    this.selectionColor_pointer--;\n\n    this.defaultLinkSelection = this.createSelection(\"link\");\n    this.defaultLinkSelection.name = \"Unselected\";\n    for (let i = 0; i < this._links.length; i++) {\n      this.defaultLinkSelection.elementIds.push(i);\n      this.addToAttributeArraysSelection(\n        this.defaultLinkSelection,\n        \"link\",\n        this._links[i].id()\n      );\n    }\n    this.defaultLinkSelection.color = \"#000000\";\n    this.defaultLinkSelection.showColor = false;\n    this.defaultLinkSelection.priority = 10000;\n    this.selectionColor_pointer--;\n\n    // create selections for node types\n    let types: string[] = [];\n    let type, index;\n    let selection: Selection;\n    const nodeSelections: Selection[] = [];\n\n    for (let i = 0; i < this.nodeArrays.nodeType.length; i++) {\n      type = this.nodeArrays.nodeType[i];\n      if (type == undefined || type.length == 0 || type == \"undefined\")\n        continue;\n      index = types.indexOf(type);\n      if (index == -1) {\n        selection = this.createSelection(\"node\");\n        selection.name = type;\n        nodeSelections.push(selection);\n        types.push(type);\n      } else {\n        selection = nodeSelections[index];\n      }\n      this.addElementToSelection(selection, this._nodes[i]);\n      // this.addToSelection(selection, this._nodes[i].id(), 'node');\n    }\n    if (nodeSelections.length == 1) {\n      console.log(\"nodeSelections[0]:\", nodeSelections[0]);\n      nodeSelections[0].color = \"#444\";\n    }\n\n    // create selections for link type\n    types = [];\n    const linkSelections: Selection[] = [];\n    for (let i = 0; i < this.linkArrays.linkType.length; i++) {\n      type = this.linkArrays.linkType[i];\n      if (!type || type == \"undefined\") continue;\n      index = types.indexOf(type);\n      if (index == -1) {\n        selection = this.createSelection(\"link\");\n        selection.name = type;\n        linkSelections.push(selection);\n        types.push(type);\n      } else {\n        selection = linkSelections[index];\n      }\n      this.addElementToSelection(selection, this._links[i]);\n      // this.addToSelection(selection, this._links[i].id(), 'link');\n    }\n    if (linkSelections.length == 1) linkSelections[0].color = \"#444\";\n\n    // create selections for node type\n    // types = [];\n    // var nodeSelections: Selection[] = [];\n    // for (var i = 0; i < this.nodeArrays.nodeType.length; i++) {\n    //     type = this.nodeArrays.nodeType[i];\n    //     if (!type || type == 'undefined')\n    //         continue;\n    //     index = types.indexOf(type);\n    //     if (index == -1) {\n    //         selection = this.createSelection('node');\n    //         selection.name = type;\n    //         nodeSelections.push(selection)\n    //         types.push(type);\n    //     } else {\n    //         selection = nodeSelections[index];\n    //     }\n    //     this.addElementToSelection(selection, this._nodes[i]);\n    //     // this.addToSelection(selection, this._links[i].id(), 'link');\n    // }\n\n    this.currentSelection_id = 0;\n  }\n\n  // GRAPH API //////////////////\n\n  /**\n   *\n   * Returns a window graph for the passed time point\n   * or period\n   * @param  {any}    start First time point of this graph\n   * @param  {any}    end   Last time point of this graph.\n   * @return {[type]}       [description]\n   */\n  // getGraph(start: Time, end?: Time): WindowGraph {\n  //     var g: WindowGraph = new WindowGraph();\n  //     return this.createGraph(g, start, end);\n  // }\n\n  // Creates a new graph with all nodes and edges from start to end.\n  // CACHEGRAPH : this code needs to be leveraged to initialize all of the fields from\n  // windowGraph that are now part of this class\n  private createGraphObjects(\n    shouldCreateTimes: boolean,\n    shouldCreateLinkTypes: any\n  ): void {\n    // measure time:\n    console.log(\"[DynamicNetwork:createGraph()] >>> \");\n    const d = Date.now();\n\n    // POPULATE WINDOW GRAPH\n\n    // populate locations\n    if (this.locationArrays && \"id\" in this.locationArrays) {\n      for (let i = 0; i < this.locationArrays.id.length; i++) {\n        this._locations.push(new Location(this.locationArrays.id[i], this));\n      }\n    } else {\n      this.locationArrays = new LocationArray();\n    }\n\n    // Populate nodes\n    const nodes: Node[] = [];\n    if (\"nodeArrays\" in this && this.nodeArrays) {\n      for (let i = 0; i < this.nodeArrays.id.length; i++) {\n        nodes.push(new Node(i, this));\n      }\n    }\n\n    // Populate links\n    const links: Link[] = [];\n    let link: Link;\n    if (\"linkArrays\" in this && this.linkArrays) {\n      for (let i = 0; i < this.linkArrays.source.length; i++) {\n        link = new Link(i, this);\n        links.push(link);\n      }\n    }\n\n    // Populate node pairs\n    let pairLinks: number[];\n    if (\"nodePairArrays\" in this && this.nodePairArrays) {\n      for (let i = 0; i < this.nodePairArrays.length; i++) {\n        pairLinks = this.nodePairArrays.links[i];\n        this._nodePairs.push(new NodePair(i, this));\n        // for (var j = 0; j < pairLinks.length; j++) {\n        //     pairLinkId = pairLinks[j];\n        //     pair = undefined;\n        //     for (var k = 0; k < nodePairs.length; k++) {\n        //         if (nodePairs[k].id == i) {\n        //             pair = nodePairs[k];\n        //             break;\n        //         }\n        //     }\n        //     if (!pair) {\n        //         pair = new NodePair(i, this);\n        //         nodePairs.push(pair)\n        //         thisGraphNodePairIds.push(i)\n        //         pair.source = nodes[this.pairAttr('source', i)];\n        //         pair.target = nodes[this.pairAttr('target', i)];\n        //     }\n\n        //     for (var k = 0; k < links.length; k++) {\n        //         if (links[k].id == pairLinkId) {\n        //             link = links[k];\n        //             break;\n        //         }\n        //     }\n\n        //     pair.links.push(link);\n        //     link.nodePair = pair;\n        // }\n      }\n    }\n\n    this._nodes = nodes;\n    this._links = links;\n    // this.nodePairs = nodePairs;\n\n    if (shouldCreateTimes) {\n      // && 'timesArrays' in this && this.timeArrays) {\n      this._times = [];\n      for (let i = 0; i < this.timeArrays.length; i++)\n        this._times.push(new Time(i, this));\n    }\n\n    // if (shouldCreateLinkTypes) {\n    //     var linkTypeCount: number = this.linkTypeArrays.length;\n    //     var colorScale;\n    //     if (linkTypeCount <= 10) {\n    //         colorScale = d3.scale.category10();\n    //     } else {\n    //         colorScale = d3.scale.category20();\n    //     }\n    //     for (var i = 0; i < this.linkTypeArrays.name.length; i++) {\n    //         this.linkTypes.push(new LinkType(\n    //             this.linkTypeArrays.id[i],\n    //             this.linkTypeArrays.name[i],\n    //             this.linkTypeArrays.color[i]\n    //         ));\n    //     }\n    // }\n\n    console.log(\"[DynamicNetwork:getGraph()] <<< \", Date.now() - d, \"msec\");\n  }\n\n  // all attribute accessor method\n  nodeAttr(attr: string, id: number): any {\n    return this.attr(attr, id, \"node\");\n  }\n\n  linkAttr(attr: string, id: number): any {\n    return this.attr(attr, id, \"link\");\n  }\n\n  pairAttr(attr: string, id: number): any {\n    return this.attr(attr, id, \"nodePair\");\n  }\n\n  timeAttr(attr: string, id: number): any {\n    return this.attr(attr, id, \"time\");\n  }\n\n  get startTime(): Time {\n    return this._times[0];\n  }\n\n  get endTime(): Time {\n    return this._times[this._times.length - 1];\n  }\n\n  // /// SELECTIONS\n  // // selections store ids of objects only.\n\n  highlight(action: string, idCompound?: IDCompound): void {\n\n\n    if (action == 'freeze'){\n      this.highlight(\"resetFreeze\");\n      this.highlight(\"addFreeze\", idCompound);\n      return;\n    }\n    if (action == \"resetFreeze\") {\n      // reset all\n      this.highlightFreezeArrays.nodeIds = [];\n      this.highlightFreezeArrays.linkIds = [];\n      this.highlightFreezeArrays.nodePairIds = [];\n      this.highlightFreezeArrays.timeIds = [];\n      return;\n    }\n\n    if (action == \"reset\") {\n      // reset all\n      this.highlightArrays.nodeIds = [];\n      this.highlightArrays.linkIds = [];\n      this.highlightArrays.nodePairIds = [];\n      this.highlightArrays.timeIds = [];\n      return;\n    }\n    if (!idCompound) {\n      console.error(\"[DynamicGraph] highlight: idCompound not set!\");\n      return;\n    }\n\n    if (action == \"set\"){\n      this.highlight(\"reset\");\n      this.highlight(\"add\", idCompound);\n      return;\n    }\n    if (action == \"add\") {\n      for (const type in idCompound) {\n        for (let i = 0; i < (idCompound as any)[type].length; i++) {\n          (this.highlightArrays as any)[type].push(\n            (idCompound as any)[type][i]\n          );\n        }\n      }\n    } else if (action == \"remove\") {\n      let index: number;\n      for (const type in idCompound) {\n        for (let i = 0; i < (idCompound as any)[type].length; i++) {\n          index = (this.highlightArrays as any)[type].indexOf(\n            (idCompound as any)[type][i]\n          );\n          if (index >= 0) (this.highlightArrays as any)[type].splice(index, 1);\n        }\n      }\n    }\n    if (action == \"addFreeze\") {\n      for (const type in idCompound) {\n        for (let i = 0; i < (idCompound as any)[type].length; i++) {\n          (this.highlightFreezeArrays as any)[type].push(\n            (idCompound as any)[type][i]\n          );\n        }\n      }\n    } else if (action == \"removeFreeze\") {\n      let index: number;\n      for (const type in idCompound) {\n        for (let i = 0; i < (idCompound as any)[type].length; i++) {\n          index = (this.highlightFreezeArrays as any)[type].indexOf(\n            (idCompound as any)[type][i]\n          );\n          if (index >= 0) (this.highlightFreezeArrays as any)[type].splice(index, 1);\n        }\n      }\n    }\n  }\n\n  // SELECT\n  selection(\n    action: string,\n    idCompound: IDCompound,\n    selectionId?: number\n  ): void {\n    if (selectionId == undefined) selectionId = this.currentSelection_id;\n\n    const selection: any = this.getSelection(selectionId);\n    if (!selection) {\n      console.error(\n        \"[DynamicGraph] Selection with \",\n        selectionId,\n        \"not found in \",\n        this.selections\n      );\n      return; // WITH RETURN ?\n    }\n\n    if (action == \"set\") {\n      const c: IDCompound = new IDCompound();\n      (c as any)[selection.acceptedType +'s'] = selection.elementIds;\n      this.selection(\"remove\", c, selectionId);\n      this.selection(\"add\", idCompound, selectionId);\n    } else if (action == \"add\") {\n      idCompound.linkIds.forEach((v) =>\n        this.addToSelectionByTypeAndId(selection, \"link\", v)\n      );\n      idCompound.nodeIds.forEach((v) =>\n        this.addToSelectionByTypeAndId(selection, \"node\", v)\n      );\n      idCompound.timeIds.forEach((v) =>\n        this.addToSelectionByTypeAndId(selection, \"time\", v)\n      );\n      idCompound.nodePairIds.forEach((v) =>\n        this.addToSelectionByTypeAndId(selection, \"nodePair\", v)\n      );\n    } else if (action == \"remove\") {\n      idCompound.linkIds.forEach((v) =>\n        this.removeFromSelectionByTypeAndId(selection, \"link\", v)\n      );\n      idCompound.nodeIds.forEach((v) =>\n        this.removeFromSelectionByTypeAndId(selection, \"node\", v)\n      );\n      idCompound.timeIds.forEach((v) =>\n        this.removeFromSelectionByTypeAndId(selection, \"time\", v)\n      );\n      idCompound.nodePairIds.forEach((v) =>\n        this.removeFromSelectionByTypeAndId(selection, \"nodePair\", v)\n      );\n    }\n  }\n\n  // SELFIX : delegate to dgraph\n  addToAttributeArraysSelection(\n    selection: Selection,\n    type: string,\n    id: number\n  ): void {\n    // check for priority of selections, then add where appropriate\n    const elementSelections = (this.attributeArrays as any)[type].selections[\n      id\n    ];\n    for (let i = 0; i < elementSelections.length; i++) {\n      if (elementSelections[i].priority > selection.priority) {\n        (this.attributeArrays as any)[type].selections[id].splice(\n          i,\n          0,\n          selection\n        );\n        return;\n      }\n    }\n    // if not already selected and if not higher priority than any other\n    // selection, append to the end.\n    (this.attributeArrays as any)[type].selections[id].push(selection);\n  }\n\n  // SELFIX : delegate to dgraph\n  removeFromAttributeArraysSelection(\n    selection: Selection,\n    type: string,\n    id: number\n  ): void {\n    const arr = (this.attributeArrays as any)[type].selections[id];\n    for (let i = 0; i < arr.length; i++) {\n      if (arr[i] == selection)\n        (this.attributeArrays as any)[type].selections[id].splice(i, 1);\n    }\n  }\n\n  addElementToSelection(selection: Selection, e: BasicElement): void {\n    this.addToSelectionByTypeAndId(selection, e.type, e.id());\n  }\n\n  addToSelectionByTypeAndId(\n    selection: Selection,\n    type: string,\n    id: number\n  ): void {\n    if (type != selection.acceptedType) {\n      console.log(\n        \"attempting to put object of the wrong type into a selection. \" + type + ' !=' +selection.acceptedType\n      );\n      return; // don't proceed with selection;\n    }\n    selection.elementIds.push(id);\n    this.addToAttributeArraysSelection(selection, type, id);\n    // =======\n    //                 this.selection('add', idCompound, selectionId);\n    //             } else {\n    //                 if (action == 'add') {\n    //                     for (var field in idCompound) {\n    //                         for (var i = 0; i < idCompound[field].length; i++) {\n    //                             this.addToSelection(selection, idCompound[field][i], field)\n    //                         }\n    //                     }\n    //                 } else {\n    //                     if (action == 'remove') {\n    //                         for (var field in idCompound) {\n    //                             for (var i = 0; i < idCompound[field].length; i++) {\n    //                                 for (var j = 0; j < selection.elementIds.length; j++) {\n    //                                     if (selection.elementIds[j] == idCompound[field][i].id) {\n    //                                         this.removeFromSelection(selection, idCompound[field][i], field);\n    //                                     }\n    //                                 }\n    //                             }\n    //                         }\n    //                     }\n    //                 }\n    //             }\n    //         }\n    //         addToSelection(selection: Selection, id:number, elementType:string) {\n    //             selection.elementIds.push(id);\n\n    //             var e:BasicElement = this.get(elementType, id);\n    //             e.addToSelection(selection);\n    // >>>>>>> api\n    // remove from default selection\n    let i;\n    if (type == \"node\") {\n      i = this.defaultNodeSelection.elementIds.indexOf(id);\n      if (i > -1) {\n        this.removeFromAttributeArraysSelection(\n          this.defaultNodeSelection,\n          type,\n          id\n        );\n        this.defaultNodeSelection.elementIds.splice(i, 1);\n      }\n    } else if (type == \"link\") {\n      i = this.defaultLinkSelection.elementIds.indexOf(id);\n      if (i > -1) {\n        this.removeFromAttributeArraysSelection(\n          this.defaultLinkSelection,\n          type,\n          id\n        );\n        this.defaultLinkSelection.elementIds.splice(i, 1);\n      }\n    }\n  }\n\n  // <<<<<<< HEAD\n\n  removeElementFromSelection(selection: Selection, e: BasicElement): void {\n    this.removeFromSelectionByTypeAndId(selection, e.type, e.id());\n  }\n\n  removeFromSelectionByTypeAndId(\n    selection: Selection,\n    type: string,\n    id: number\n  ): void {\n    // selection.elements.push(compound[field][i])\n    // e.addToSelection(selection);\n    // =======\n    //         removeFromSelection(selection: Selection, id:number, elementType:string) {\n    // >>>>>>> api\n    const i = selection.elementIds.indexOf(id);\n    if (i == -1) return;\n\n    selection.elementIds.splice(i, 1);\n    // <<<<<<< HEAD\n    this.removeFromAttributeArraysSelection(selection, type, id);\n    // =======\n    //             var e:BasicElement = this.get(elementType, id);\n    //             e.removeFromSelection(selection);\n    // >>>>>>> api\n\n    // add to default selection\n    if (this.getSelectionsByTypeAndId(type, id).length == 0) {\n      if (type == \"node\") {\n        this.defaultNodeSelection.elementIds.push(id);\n        this.addToAttributeArraysSelection(this.defaultNodeSelection, type, id);\n      } else if (type == \"link\") {\n        this.defaultLinkSelection.elementIds.push(id);\n        this.addToAttributeArraysSelection(this.defaultLinkSelection, type, id);\n      }\n    }\n  }\n\n  getSelectionsByTypeAndId(type: string, id: number): Selection[] {\n    return (this.attributeArrays as any)[type].selections[id];\n  }\n\n  filterSelection(selectionId: number, filter: boolean): void {\n    const selection: any = this.getSelection(selectionId);\n    if (selection != undefined) {\n      selection.filter = filter;\n    }\n  }\n\n  isFiltered(id: number, type: string): boolean {\n    return (this.attributeArrays as any)[type + \"s\"].filter;\n  }\n\n  isHighlighted(id: number, type: string): boolean {\n    return (this.highlightArrays as any)[type + \"Ids\"].indexOf(id) > -1\n      || (this.highlightFreezeArrays as any)[type + \"Ids\"].indexOf(id) > -1;\n  }\n  isFrozen(id: number, type: string): boolean {\n    return (this.highlightFreezeArrays as any)[type + \"Ids\"].indexOf(id) > -1 \n  }\n\n  getHighlightedIds(type: string): any {\n    return (this.highlightArrays as any)[type + \"Ids\"];\n  }\n\n  setCurrentSelection(id: number): void {\n    // [bbach] why should we ignore them?\n    // if (id < 2) // i.e. either default node or link selection..\n    //     return;  // ignore\n    console.log(\"[DynamicGraph] setCurrentSelectionId \", id);\n    this.currentSelection_id = id;\n  }\n\n  getCurrentSelection(): Selection | undefined {\n    // before onoly Selection!\n    return this.getSelection(this.currentSelection_id);\n  }\n\n  addSelection(\n    id: number,\n    color: string,\n    acceptedType: string,\n    priority: number\n  ): void {\n    const s: Selection = this.createSelection(acceptedType);\n    s.id = id;\n    s.color = color;\n    s.priority = priority;\n  }\n\n  // creates a selection for the passed type.\n  createSelection(type: string): Selection {\n    const s = new Selection(this.selections.length, type);\n    s.color = this.BOOKMARK_COLORS(this.selectionColor_pointer % 10);\n    this.selectionColor_pointer++;\n    this.selections.push(s);\n    return s;\n  }\n\n  deleteSelection(selectionId: number): void {\n    const s = this.getSelection(selectionId);\n\n    // remove all elements from this selection\n    // <<<<<<< HEAD\n    //             var compound: ElementCompound = new ElementCompound();\n    //             compound[s.acceptedType + 'Ids'] = s.elementIds.slice(0);\n    //             this.selection('remove', compound, s.id)\n    // =======\n\n    // remove\n    if (s != undefined) {\n      const idCompound: IDCompound = new IDCompound();\n      (idCompound as any)[s.acceptedType + \"Ids\"] = s.elementIds.slice(0);\n      console.log(\"Delete selection->remove elemeents\", s.elementIds.slice(0));\n      this.selection(\"remove\", idCompound, s.id);\n      // >>>>>>> api\n\n      // delete selection\n      this.selections.splice(this.selections.indexOf(s), 1);\n    }\n  }\n\n  setSelectionColor(id: number, color: string): void {\n    const s = this.getSelection(id);\n    if (!s) {\n      return;\n    }\n    s.color = color;\n  }\n\n  getSelections(type?: string): Selection[] {\n    const selections: Selection[] = [];\n    if (type) {\n      for (let i = 0; i < this.selections.length; i++) {\n        if ((<Selection>this.selections[i]).acceptsType(type))\n          selections.push(this.selections[i]);\n      }\n      return selections;\n    } else {\n      return this.selections;\n    }\n  }\n\n  getSelection(id: number): Selection | undefined {\n    // before only Selection return\n    for (let i = 0; i < this.selections.length; i++) {\n      if (id == this.selections[i].id) return this.selections[i];\n    }\n    console.error(\"[DynamicGraph] No selection with id \", id, \"found!\");\n    /* If not found ?? */\n    return undefined;\n  }\n\n  clearSelections(): void {\n    this.selections = [];\n  }\n\n  // internal utils\n  getTimeIdForUnixTime(unixTime: number | undefined): number | undefined {\n    // before only number\n    let timeId: number;\n    console.log(\"unixTime: \");\n    console.log(unixTime);\n    for (timeId = 0; timeId < this.timeArrays.length; timeId++) {\n      if (unixTime == this.timeArrays.unixTime[timeId]) {\n        return timeId;\n      }\n    }\n    console.error(\"Time object for unix time\", unixTime, \"not found!\");\n    return undefined;\n  }\n\n  // ORDERING\n  /* adds an specific node order (e.g. alphabetical) */\n\n  // go into dynamicgraph\n  addNodeOrdering(name: string, order: number[]): void {\n    for (let i = 0; i < this.nodeOrders.length; i++) {\n      if (this.nodeOrders[i].name == name) {\n        console.error(\"Ordering\", name, \"already exists\");\n        return;\n      }\n    }\n    const o = new Ordering(name, order);\n    this.nodeOrders.push(o);\n  }\n\n  setNodeOrdering(name: string, order: number[]): void {\n    for (let i = 0; i < this.nodeOrders.length; i++) {\n      if (this.nodeOrders[i].name == name) {\n        this.nodeOrders[i].order = order;\n        return;\n      }\n    }\n    console.error(\"Ordering\", name, \"does not exist\");\n  }\n\n  removeNodeOrdering(name: string, order: number[]): void {\n    for (let i = 0; i < this.nodeOrders.length; i++) {\n      if (this.nodeOrders[i].name == name) {\n        this.nodeOrders.splice(i, 1);\n      }\n    }\n  }\n\n  getNodeOrder(name: string): Ordering | undefined {\n    for (let i = 0; i < this.nodeOrders.length; i++) {\n      if (this.nodeOrders[i].name == name) {\n        return this.nodeOrders[i];\n      }\n    }\n    console.error(\"Ordering\", name, \"not found!\");\n    return;\n  }\n\n  // returns elements\n  nodes(): NodeQuery {\n    return new NodeQuery(this.nodeArrays.id, this);\n  }\n\n  links(): LinkQuery {\n    return new LinkQuery(this.linkArrays.id, this);\n  }\n\n  times(): TimeQuery {\n    return new TimeQuery(this.timeArrays.id, this);\n  }\n\n  locations(): LocationQuery {\n    return new LocationQuery(this.locationArrays.id, this);\n  }\n\n  nodePairs(): NodePairQuery {\n    return new NodePairQuery(this.nodePairArrays.id, this);\n  }\n\n  linksBetween(n1: Node, n2: Node): LinkQuery {\n    let nodePairId = this.matrix[n1.id()][n2.id()];\n    if (nodePairId == undefined) nodePairId = this.matrix[n2.id()][n1.id()];\n    if (nodePairId == undefined) return new LinkQuery([], this);\n\n    /* UNDEFINED? */\n    const node_pair: any = this.nodePair(nodePairId);\n    if (node_pair != undefined)\n      return new LinkQuery(node_pair.links().toArray(), this);\n    else return new LinkQuery([], this);\n  }\n\n  // generic accessor method. should not be used externally\n  get(type: string, id: number): BasicElement | undefined {\n    if (type.indexOf(\"nodePair\") > -1) return this.nodePair(id);\n    if (type.indexOf(\"node\") > -1) return this.node(id);\n    if (type.indexOf(\"link\") > -1) return this.link(id);\n    if (type.indexOf(\"time\") > -1) return this.time(id);\n    if (type.indexOf(\"locations\") > -1) return this.location(id);\n  }\n\n  getAll(type: string): GraphElementQuery {\n    if (type == \"nodes\") return this.nodes();\n    if (type == \"links\") return this.links();\n    if (type == \"times\") return this.times();\n    if (type == \"nodePairs\") return this.nodePairs();\n    // if (type == 'locations')\n    return this.locations();\n  }\n\n  // returns the node with ID\n  node(id: number): Node | undefined {\n    for (let i = 0; i < this._nodes.length; i++) {\n      if (this._nodes[i].id() == id) return this._nodes[i];\n    }\n  }\n\n  link(id: number): Link | undefined {\n    for (let i = 0; i < this._links.length; i++) {\n      if (this._links[i].id() == id) return this._links[i];\n    }\n  }\n\n  time(id: number): Time | undefined {\n    for (let i = 0; i < this._times.length; i++) {\n      if (this._times[i].id() == id) return this._times[i];\n    }\n  }\n\n  location(id: number): Location | undefined {\n    for (let i = 0; i < this._locations.length; i++) {\n      if (this._locations[i].id() == id) return this._locations[i];\n    }\n  }\n\n  nodePair(id: number): NodePair | undefined {\n    for (let i = 0; i < this._nodePairs.length; i++) {\n      if (this._nodePairs[i].id() == id) return this._nodePairs[i];\n    }\n  }\n\n  getMinGranularity(): number {\n    return this.gran_min;\n  }\n\n  getMaxGranularity(): number {\n    return this.gran_max;\n  }\n}\n\n// A time series with one scalar value for every time point\n\nexport class AttributeArray {\n  id: number[] = [];\n\n  get length(): number {\n    return this.id.length;\n  }\n}\n\nexport class NodeArray extends AttributeArray {\n  id: number[] = [];\n  label: string[] = [];\n  // nodeType: ScalarTimeSeries<string>[] = [];\n  outLinks: ArrayTimeSeries<number>[] = []; // contains link ids only, since every GRAPH has its own EDGE object instance\n  inLinks: ArrayTimeSeries<number>[] = []; // contains link ids only, since every GRAPH has its own EDGE object instance\n  links: ArrayTimeSeries<number>[] = [];\n  outNeighbors: ArrayTimeSeries<number>[] = []; // contains node ids only, since every GRAPH has its own NODE object instance\n  inNeighbors: ArrayTimeSeries<number>[] = []; // contains node ids only, since every GRAPH has its own NODE object instance\n  neighbors: ArrayTimeSeries<number>[] = [];\n  selections: Selection[][] = [];\n  attributes: Record<any, any>[] = []; // arbitrary attributes (key -> value)\n  locations: ScalarTimeSeries<number>[] = [];\n  filter: boolean[] = [];\n  nodeType: string[] = [];\n  color: string[] = [];\n  shape: string[] = [];\n}\n\nexport class LinkArray extends AttributeArray {\n  source: number[] = [];\n  target: number[] = [];\n  linkType: string[] = [];\n  directed: boolean[] = [];\n  nodePair: any[] = []; // before number but it don't accept undefined\n  // array of all time ids (temporally ordered) when this link is present\n  presence: number[][] = [];\n  // array of weights per time this link is present. This is a generic field\n  // that can be used for weights, e.g.\n  weights: ScalarTimeSeries<any>[] = [];\n  selections: Selection[][] = [];\n  filter: boolean[] = [];\n  attributes: Record<any, any> = new Object(); // arbitrary attributes (key -> value)\n}\n\nexport class NodePairArray extends AttributeArray {\n  source: number[] = [];\n  target: number[] = [];\n  links: number[][] = [];\n  selections: Selection[][] = [];\n  filter: boolean[] = [];\n}\n\nexport class TimeArray extends AttributeArray {\n  id: number[] = [];\n  momentTime: Date[] = []; // moment object\n  label: string[] = [];\n  unixTime: number[] = []; // unix time object\n  selections: Selection[][] = [];\n  filter: boolean[] = [];\n  links: number[][] = []; // all links at that time\n}\n\nexport class LinkTypeArray extends AttributeArray {\n  name: string[] = [];\n  count: string[] = [];\n  color: string[] = [];\n  filter: boolean[] = [];\n}\n\nexport class NodeTypeArray extends AttributeArray {\n  name: string[] = [];\n  count: string[] = [];\n  color: string[] = [];\n  filter: boolean[] = [];\n}\n\nexport class LocationArray extends AttributeArray {\n  id: number[] = [];\n  label: string[] = [];\n  longitude: number[] = [];\n  latitude: number[] = [];\n  x: number[] = [];\n  y: number[] = [];\n  z: number[] = [];\n  radius: number[] = [];\n}\n\nexport class NodeType implements LegendElement {\n  id: number;\n  name: string;\n  color: string;\n\n  constructor(id: number, name: string, color: string) {\n    this.id = id;\n    this.name = name;\n    this.color = color;\n  }\n}\n\nexport class Ordering {\n  name: string;\n  order: number[] = [];\n\n  constructor(name: string, order: number[]) {\n    this.name = name;\n    this.order = order;\n  }\n}\n\n/* MOVED FROM QUERIES TO DYNAMICGRAPH */\n\n//// QUERIES\n\nexport class Query {\n  _elements: number[] = [];\n\n  constructor(elements?: number[]) {\n    if (elements) {\n      for (let i = 0; i < elements.length; i++) {\n        if (elements[i] != undefined) this._elements.push(elements[i]);\n      }\n    }\n  }\n\n  // contains(element: number): boolean {\n  //     return this._elements.indexOf(element) > -1;\n  // }\n\n  addUnique(element: number): void {\n    if (this._elements.indexOf(element) == -1) this._elements.push(element);\n  }\n\n  add(element: number): void {\n    this._elements.push(element);\n  }\n\n  addAll(elements: number[]): void {\n    for (let i = 0; i < elements.length; i++) {\n      if (elements[i] != undefined) this._elements.push(elements[i]);\n    }\n  }\n\n  addAllUnique(elements: number[]): void {\n    for (let i = 0; i < elements.length; i++) {\n      this.addUnique(elements[i]);\n    }\n  }\n\n  /** @returns numbr of elements in this query. Same as size(). */\n  get length(): number {\n    return this._elements.length;\n  }\n\n  /** @returns numbr of elements in this query. Same as length getter. */\n  size(): number {\n    return this._elements.length;\n  }\n\n  /** @returns all ids in this query. */\n  ids(): number[] {\n    return this._elements;\n  }\n\n  removeDuplicates(): Query {\n    const elements = this._elements.slice(0);\n    this._elements = [];\n    for (let i = 0; i < elements.length; i++) {\n      if (this._elements.indexOf(elements[i]) == -1)\n        this._elements.push(elements[i]);\n    }\n    return this;\n  }\n\n  generic_intersection(q: Query): Query {\n    const intersection = [];\n    for (let i = 0; i < this._elements.length; i++) {\n      for (let j = 0; j < q._elements.length; j++) {\n        if (this._elements[i] == q._elements[j]) {\n          intersection.push(this._elements[i]);\n        }\n      }\n    }\n    return new Query(intersection);\n  }\n}\n\nexport class GraphElementQuery extends Query {\n  g: DynamicGraph;\n  elementType: string;\n\n  constructor(elements: any[], g: DynamicGraph, elementType: string) {\n    super(elements);\n    this.g = g;\n    this.elementType = elementType;\n  }\n\n  /** @returns a query that contains only the elements matching\n   * the filter critera;\n   * @param attribute - name of attribute that is used on filter\n   * @param filter - function evaluating if the attribute's value is valid.\n   */\n  generic_filter(filter: (d: any) => boolean): any[] {\n    const arr: any[] = [];\n    for (let i = 0; i < this._elements.length; i++) {\n      try {\n        if (filter(this.g.get(this.elementType, this._elements[i]))) {\n          arr.push(this._elements[i]);\n        }\n      } catch (ex) {\n        // TODO: catch this exception?\n      }\n    }\n    return arr;\n  }\n\n  /** @returns a query with selected elements, i.e. elements that are in at least\n   * one selection.\n   */\n  generic_selected(): any[] {\n    const arr: any[] = [];\n    for (let i = 0; i < this._elements.length; i++) {\n      const element = this.g.get(this.elementType, this._elements[i]);\n      if (element != undefined && element.isSelected()) {\n        arr.push(this._elements[i]);\n      }\n    }\n    return arr;\n  }\n\n  /** @returns a query with visible elements.\n   */\n  generic_visible(): any[] {\n    const arr: any[] = [];\n    for (let i = 0; i < this._elements.length; i++) {\n      const element = this.g.get(this.elementType, this._elements[i]);\n      if (element != undefined && element.isVisible()) {\n        arr.push(this._elements[i]);\n      }\n    }\n    return arr;\n  }\n\n  /** @returns a query with highighted elements.\n   */\n  generic_highlighted(): any[] {\n    const arr: any[] = [];\n    for (let i = 0; i < this._elements.length; i++) {\n      const element = this.g.get(this.elementType, this._elements[i]);\n      if (element != undefined && element.isHighlighted()) {\n        arr.push(this._elements[i]);\n      }\n    }\n    return arr;\n  }\n\n  /** @returns a query with only the elements present in the specified time step\n   * or period.\n   */\n  generic_presentIn(start: Time, end?: Time): any[] {\n    const arr: any[] = [];\n    for (let i = 0; i < this._elements.length; i++) {\n      const element = this.g.get(this.elementType, this._elements[i]);\n      if (element != undefined && element.presentIn(start, end)) {\n        arr.push(this._elements[i]);\n      }\n    }\n    return arr;\n  }\n\n  /** @returns this query with elements sorted */\n  generic_sort(attrName: string, asc?: boolean): GraphElementQuery {\n    if (this._elements.length == 0) {\n      return this;\n    }\n    const array = this._elements.slice(0);\n\n    // ITS POSSIBLE AN UNDEFINED VALUE??\n    array.sort((e1, e2) => {\n      const e1_get = this.g.get(this.elementType, e1);\n      const e2_get = this.g.get(this.elementType, e2);\n      if (e1_get != undefined && e2_get != undefined) {\n        return attributeSort(e1_get, e2_get, attrName, asc);\n      } else if (e1_get == undefined && e2_get == undefined) {\n        return 0;\n      }\n      return e1_get == undefined ? 1 : -1;\n    });\n    this._elements = array;\n    return this;\n  }\n\n  generic_removeDuplicates(): GraphElementQuery {\n    const uniqueElements = [];\n    for (let i = 0; i < this._elements.length; i++) {\n      // for(var j=i+1 ; j <this._elements.length ; j++){\n      //     if(this._elements[i]==this._elements[j])\n      //         this._elements.slice(j,1);\n      // }\n      if (uniqueElements.indexOf(this._elements[i]) == -1)\n        uniqueElements.push(this._elements[i]);\n    }\n    this._elements = uniqueElements;\n    return this;\n  }\n\n  // sortByFunction(sortFunction:(a:any,b:any)=>number){\n  //     if(this._elements.length == 0){\n  //         console.error('This query has no elements')\n  //         return new Query<any>();\n  //     }\n  //     var array = this._elements.slice(0);\n  //     array.sort(sortFunction);\n  //     var result:GraphElementQuery<T> = new GraphElementQuery<T>();\n  //     for(var i=0 ; i<array.length ; i++){\n  //         result.add(array[i]);\n  //     }\n  //     return result;\n  // }\n}\n\n/** Basic class for every object in networkcube with an ID.\n * A BasicElement is a wrapper to the DynamicGraph and that\n * represents any object, i.e. node, link, node pair, time, location.\n */\n\nexport class BasicElement {\n  _id: number;\n  type: string;\n  g: DynamicGraph;\n\n  // CONSTRUCTOR\n\n  constructor(id: number, type: string, dynamicGraph: DynamicGraph) {\n    this._id = id;\n    this.type = type;\n    this.g = dynamicGraph;\n  }\n\n  // GETTER\n\n  /** @returns the object's id */\n  id(): number {\n    return this._id;\n  }\n\n  /** Generic method to return an attribute value for this element\n   * @param attr: attribute name on this object.\n   * @returns the attribute's value. */\n  attr(attr: string): any {\n    return this.g.attr(attr, this._id, this.type);\n  }\n\n  // SELECTIONS\n\n  /** @returns all selections this object is part of. */\n  getSelections(): Selection[] {\n    return (this.g.attributeArrays as any)[this.type].selections[this._id];\n  }\n\n  /** Adds this object to a selection\n   * @param selection - the Selection object\n   */\n  addToSelection(b: Selection): void {\n    (this.g.attributeArrays as any)[this.type].selections[this._id].push(b);\n  }\n\n  /** Removes this object from a selection.\n   * @param selection - the Selection objects\n   */\n  removeFromSelection(b: Selection): void {\n    const arr: Selection[] = (this.g.attributeArrays as any)[this.type]\n      .selections[this._id];\n    for (let i = 0; i < arr.length; i++) {\n      if (arr[i] == b)\n        (this.g.attributeArrays as any)[this.type].selections[this._id].splice(\n          i,\n          1\n        );\n    }\n  }\n\n  inSelection(s: Selection): boolean {\n    return this.getSelections().indexOf(s) > -1;\n  }\n\n  // DISPLAY STATES\n\n  /** @returns true if this object is selected.\n   * @param selection - (optional) if specified returns true if this object\n   * is in the passed selection.\n   */\n  isSelected(selection?: Selection): boolean {\n    if (!selection) return this.getSelections().length > 0;\n\n    const selections = (this.g.attributeArrays as any)[this.type].selections[\n      this._id\n    ];\n    for (let i = 0; i < selections.length; i++) {\n      // start with 1 to avoid default selection.\n      if (\n        selections[i] == this.g.defaultNodeSelection ||\n        selections[i] == this.g.defaultLinkSelection\n      ) {\n        continue;\n      }\n      if (selections[i] == selection) return true;\n    }\n    return false;\n  }\n\n  /** @returns true if this object is highlighted */\n  isHighlighted(): boolean {\n    return this.g.isHighlighted(this._id, this.type)\n  }\n  /** @returns true if this object is highlighted frozen */\n  isFrozen(): boolean {\n    return this.g.isFrozen(this._id, this.type)\n  }\n\n  /** @returns true if this object is filtered, i.e. removed from display. */\n  isFiltered(): boolean {\n    return this.g.isFiltered(this._id, this.type);\n  }\n\n  /** @returns true if this object is visible. */\n  isVisible(): boolean {\n    const selections = this.getSelections();\n    if (selections.length == 0) return true;\n    for (let i = 0; i < selections.length; i++) {\n      if (selections[i].filter) return false;\n    }\n    return true;\n  }\n\n  // OTHER QUERIES\n\n  /** @returns true if this object is present in the graph\n   * in a specific time or a time period.\n   * @param start -  start time. If only this parameter is passed to the\n   * function, method returns if this object is present in this time step.\n   * @param end - end time. If this parameter is specified, returns if this\n   * object is present between start and end.\n   */\n  presentIn(start: Time, end?: Time): boolean {\n    const presence: number[] = this.attr(\"presence\");\n    if (!end) end = start;\n    for (let i = start._id; i <= end._id; i++) {\n      if (presence.indexOf(i) > -1) return true;\n    }\n    return false;\n  }\n}\n\n/** A time series with a scalar value per time step.\n * This class nestes an object that holds information for time\n * steps in the format key->value. I.e. the value for the\n * time step with ID 3 is accessed by this.3   */\nexport class ScalarTimeSeries<T> {\n  private serie: any = {};\n\n  /** @returns a ScalarTimeSeries for the specified period. */\n  period(t1: Time, t2: Time): ScalarTimeSeries<T> {\n    const t1id = t1.id();\n    const t2id = t2.id();\n    const s = new ScalarTimeSeries<T>();\n    for (const prop in this.serie) {\n      if (parseInt(prop) >= t1id && parseInt(prop) <= t2id) {\n        s.serie[prop] = this.serie[prop];\n      }\n    }\n    return s;\n  }\n\n  /** Sets a value for a specified time point. */\n  set(t: Time, element: T): void {\n    this.serie[t.id()] = element;\n  }\n\n  /** @returns the value for a specified time point. */\n  get(t: Time): any {\n    // before T!!\n    if (this.serie[t.id()] == undefined) return; // this is avoid!!\n    return this.serie[t.id()];\n  }\n\n  size(): number {\n    return this.toArray().length;\n  }\n\n  getSerie(): any[] {\n    return this.serie;\n  }\n\n  /** Returns all values as array.\n   * @param removeDuplicates\n   * @returns array with values;\n   */\n  toArray(removeDuplicates?: boolean): T[] {\n    if (removeDuplicates == undefined) removeDuplicates = false;\n    const a: T[] = [];\n    if (removeDuplicates) {\n      for (const prop in this.serie) {\n        a.push(this.serie[prop]);\n      }\n    } else {\n      for (const prop in this.serie) {\n        if (a.indexOf(this.serie[prop]) == -1) a.push(this.serie[prop]);\n      }\n    }\n    return a;\n  }\n}\n\n/** A time series with an array per time step.\n * This class nestes an object that holds information for time\n * steps in the format key->value. I.e. the value for the\n * time step with ID 3 is accessed by this.3   */\nexport class ArrayTimeSeries<T> {\n  serie: any = {};\n\n  period(t1: Time, t2: Time): ArrayTimeSeries<T> {\n    const t1id = t1.id();\n    const t2id = t1.id();\n    const s = new ArrayTimeSeries<T>();\n    for (const prop in this.serie) {\n      if (parseInt(prop) >= t1id && parseInt(prop) <= t1id) {\n        (s.serie as any)[prop] = (this.serie as any)[prop];\n      }\n    }\n    return s;\n  }\n\n  add(t: Time, element: T): void {\n    if (t == undefined) {\n      return;\n    }\n\n    if (!(this.serie as any)[t._id]) (this.serie as any)[t._id] = [];\n    (this.serie as any)[t._id].push(element);\n  }\n\n  get(t: Time): T[] {\n    return (this.serie as any)[t._id];\n  }\n\n  toArray(): T[][] {\n    const a: T[][] = [];\n    for (const prop in this.serie) {\n      a.push((this.serie as any)[prop]);\n    }\n    return a;\n  }\n\n  toFlatArray(removeDuplicates?: boolean): T[] {\n    if (removeDuplicates == undefined) removeDuplicates = false;\n    const a: T[] = [];\n    for (const prop in this.serie) {\n      for (let i = 0; i < (this.serie as any)[prop].length; i++) {\n        if (\n          !removeDuplicates ||\n          (removeDuplicates && a.indexOf((this.serie as any)[prop]) == -1)\n        ) {\n          a.push((this.serie as any)[prop][i]);\n        }\n      }\n    }\n    return a;\n  }\n}\n\nexport class TimeQuery extends GraphElementQuery {\n  //elementType = 'time';\n\n  constructor(elements: any[], g: DynamicGraph) {\n    super(elements, g, \"time\");\n    //this.elementType = 'time';\n    if (elements.length > 0 && elements[0] instanceof Time) {\n      this._elements = [];\n      for (let i = 0; i < elements.length; i++) {\n        this._elements.push(elements[i].id());\n      }\n    }\n    if (elements.length > 0 && typeof elements[0] == \"number\") {\n      this._elements = [];\n      for (let i = 0; i < elements.length; i++) {\n        this._elements.push(elements[i]);\n      }\n    }\n  }\n\n  contains(t: Time): boolean {\n    return this._elements.indexOf(t.id()) > -1;\n  }\n\n  highlighted(): TimeQuery {\n    return new TimeQuery(super.generic_highlighted(), this.g);\n  }\n\n  visible(): TimeQuery {\n    return new TimeQuery(super.generic_visible(), this.g);\n  }\n\n  selected(): TimeQuery {\n    return new TimeQuery(super.generic_selected(), this.g);\n  }\n\n  filter(filter: (d: any) => boolean): TimeQuery {\n    return new TimeQuery(super.generic_filter(filter), this.g);\n  }\n\n  presentIn(t1: Time, t2: Time): TimeQuery {\n    return new TimeQuery(super.generic_presentIn(t1, t2), this.g);\n  }\n\n  sort(attributeName: string): TimeQuery {\n    return <TimeQuery>super.generic_sort(attributeName);\n  }\n\n  links(): LinkQuery {\n    let links: number[] = [];\n    // var allLinks = this.g.links().toArray();\n    // var allTimes = this.g.times().toArray();\n    // for(var i=0 ; i<allLinks.length ; i++){\n    // for(var j=0 ; j<allTimes.length ; j++){\n    //     if(allLinks[i].presentIn(allTimes[j])){\n    //         links.push(allLinks[i].id());\n    //         break\n    //     }\n    // }\n    // }\n    for (let i = 0; i < this._elements.length; i++) {\n      links = links.concat(this.g.attr(\"links\", this._elements[i], \"time\"));\n    }\n    return new LinkQuery(links, this.g);\n  }\n\n  // returns the i-th element in this query\n  get(i: number): Time {\n    return this.g._times[this._elements[i]];\n  }\n\n  last(): Time {\n    return this.g._times[this._elements[this._elements.length - 1]];\n  }\n\n  // return array of times\n  toArray(): Time[] {\n    const a: Time[] = [];\n    const allTimes = this.g._times;\n    for (let i = 0; i < this._elements.length; i++) {\n      a.push(allTimes[this._elements[i]]);\n    }\n    return a;\n  }\n\n  createAttribute(attrName: string, f: (t: Time) => void): TimeQuery {\n    // create and init new attribute array if necessary\n    if ((this.g.timeArrays as any)[attrName] == undefined) {\n      (this.g.timeArrays as any)[attrName] = [];\n      for (let i = 0; i < this.g._times.length; i++) {\n        (this.g.timeArrays as any)[attrName].push();\n      }\n    }\n    for (let i = 0; i < this._elements.length; i++) {\n      (this.g.timeArrays as any)[attrName][this._elements[i]] = f(\n        this.g._times[this._elements[i]]\n      );\n    }\n    return this;\n  }\n\n  unixTimes(): number[] {\n    const unixTimes: number[] = [];\n    for (let i = 0; i < this._elements.length; i++) {\n      const time = this.g.time(this._elements[i]); // UNDEFINED ??\n      if (time != undefined) {\n        unixTimes.push(time.unixTime());\n      }\n    }\n    return unixTimes;\n  }\n\n  intersection(q: TimeQuery): TimeQuery {\n    return new TimeQuery(this.generic_intersection(q)._elements, this.g);\n  }\n\n  forEach(f: (t: Time | undefined, i: number) => void): TimeQuery {\n    for (let i = 0; i < this._elements.length; i++) {\n      f(this.g.time(this._elements[i]), i);\n    }\n    return this;\n  }\n}\n\n/**\n * Represents a Time object\n */\nexport class Time extends BasicElement {\n  constructor(id: number, dynamicGraph: DynamicGraph) {\n    super(id, \"time\", dynamicGraph);\n  }\n\n  // SPECIFIC ATTRIBUTE QUERIES\n\n  /** @returns the Date object associated to this time object. */\n  time(): Date {\n    return this.attr(\"momentTime\");\n  }\n\n  moment(): Date {\n    return this.attr(\"momentTime\");\n  }\n\n  label(): string {\n    return this.attr(\"label\");\n  }\n\n  /** @returns the unix time for this time object. */\n  unixTime(): number {\n    return this.attr(\"unixTime\");\n  }\n\n  /** @returns a string label for this object. */\n  // label(): String { return this.attr('label') + ''; }\n\n  links(): LinkQuery {\n    // var links:number[] = [];\n    // for(var i=0 ; i<allLinks.length ; i++){\n    //     if(allLinks[i].presentIn(this))\n    //         links.push(allLinks[i].id());\n    // }\n    return new LinkQuery(this.attr(\"links\"), this.g);\n  }\n\n  // wrapper to moment.js\n  year(): number {\n    return this.time().getUTCFullYear();\n  }\n\n  month(): number {\n    return this.time().getUTCMonth();\n  }\n\n  getWeek = timeFormat(\"%V\");\n\n  week(): number {\n    return parseInt(this.getWeek(this.time()));\n  }\n\n  day(): number {\n    return this.time().getUTCDay();\n  }\n\n  hour(): number {\n    return this.time().getUTCHours();\n  }\n\n  minute(): number {\n    return this.time().getUTCMinutes();\n  }\n\n  second(): number {\n    return this.time().getUTCSeconds();\n  }\n\n  millisecond(): number {\n    return this.time().getMilliseconds();\n  }\n\n  format(format: string): string {\n    const formatDate = timeFormat(format);\n    return formatDate(this.time());\n  }\n}\n\nexport class LocationQuery extends GraphElementQuery {\n  // elementType = 'location';\n\n  constructor(elements: any[], g: DynamicGraph) {\n    super(elements, g, \"location\");\n    // this.elementType = 'location';\n    if (elements.length > 0 && elements[0] instanceof Location) {\n      this._elements = [];\n      for (let i = 0; i < elements.length; i++) {\n        this._elements = elements[i].id();\n      }\n    }\n    if (elements.length > 0 && typeof elements[0] == \"number\") {\n      this._elements = [];\n      for (let i = 0; i < elements.length; i++) {\n        this._elements.push(elements[i]);\n      }\n    }\n  }\n\n  contains(l: Location): boolean {\n    return this._elements.indexOf(l.id()) > -1;\n  }\n\n  highlighted(): LocationQuery {\n    return new LocationQuery(super.generic_highlighted(), this.g);\n  }\n\n  visible(): LocationQuery {\n    return new LocationQuery(super.generic_visible(), this.g);\n  }\n\n  selected(): LocationQuery {\n    return new LocationQuery(super.generic_selected(), this.g);\n  }\n\n  filter(filter: (d: any) => boolean): LocationQuery {\n    return new LocationQuery(super.generic_filter(filter), this.g);\n  }\n\n  presentIn(t1: Time, t2: Time): LocationQuery {\n    return new LocationQuery(super.generic_presentIn(t1, t2), this.g);\n  }\n\n  sort(attributeName: string): LocationQuery {\n    return <LocationQuery>super.generic_sort(attributeName);\n  }\n\n  // returns the i-th element in this query\n  get(i: number): Location {\n    return this.g._locations[this._elements[i]];\n  }\n\n  last(): Location {\n    return this.g._locations[this._elements[this._elements.length - 1]];\n  }\n\n  // return array of locations\n  toArray(): Location[] {\n    const a: Location[] = [];\n    for (let i = 0; i < this._elements.length; i++) {\n      a.push(this.g._locations[this._elements[i]]);\n    }\n    return a;\n  }\n\n  createAttribute(attrName: string, f: (l: Location) => void): LocationQuery {\n    // create and init new attribute array if necessary\n    if ((this.g.locationArrays as any)[attrName] == undefined) {\n      (this.g.locationArrays as any)[attrName] = [];\n      for (let i = 0; i < this.g._locations.length; i++) {\n        (this.g.locationArrays as any)[attrName].push();\n      }\n    }\n    for (let i = 0; i < this._elements.length; i++) {\n      (this.g.locationArrays as any)[attrName][this._elements[i]] = f(\n        this.g._locations[this._elements[i]]\n      );\n    }\n    return this;\n  }\n\n  intersection(q: LocationQuery): LocationQuery {\n    return new LocationQuery(this.generic_intersection(q)._elements, this.g);\n  }\n\n  removeDuplicates(): LocationQuery {\n    return new LocationQuery(this.generic_removeDuplicates()._elements, this.g);\n  }\n\n  forEach(f: (l: Location | undefined, i: number) => any): LocationQuery {\n    for (let i = 0; i < this._elements.length; i++) {\n      f(this.g.location(this._elements[i]), i);\n    }\n    return this;\n  }\n}\n\n/**\n * Represents a simple array of numbers that can be used to calculate\n * max, mean, min values etc..\n */\nexport class NumberQuery extends Query {\n  clone(): number[] {\n    return this._elements.slice(0);\n  }\n\n  min(): number {\n    this._elements = this.makeNumbers(this._elements);\n    let min: number = parseInt(this._elements[0] + \"\");\n    for (let i = 1; i < this._elements.length; i++) {\n      if (this._elements[i] != undefined)\n        min = Math.min(min, parseInt(this._elements[i] + \"\"));\n    }\n    return min;\n  }\n\n  max(): number {\n    let max: number = parseInt(this._elements[0] + \"\");\n    for (let i = 1; i < this._elements.length; i++) {\n      if (this._elements[i] != undefined)\n        max = Math.max(max, parseInt(this._elements[i] + \"\"));\n    }\n    return max;\n  }\n\n  mean(): number {\n    this._elements = this.makeNumbers(this._elements);\n    let v = 0;\n    let count = 0;\n    for (let i = 0; i < this._elements.length; i++) {\n      if (typeof this._elements[i] == \"number\") {\n        v += parseInt(this._elements[i] + \"\");\n        count++;\n      }\n    }\n    return v / count;\n  }\n\n  sum(): number {\n    let sum = 0;\n    for (let i = 0; i < this._elements.length; i++) {\n      if (typeof this._elements[i] == \"number\") {\n        sum += parseInt(this._elements[i] + \"\");\n      }\n    }\n    return sum;\n  }\n\n  toArray(): number[] {\n    return this._elements.slice(0);\n  }\n\n  get(index: number): number {\n    return this._elements[index];\n  }\n\n  forEach(f: (n: number, i: number) => any): NumberQuery {\n    for (let i = 0; i < this._elements.length; i++) {\n      f(this._elements[i], i);\n    }\n    return this;\n  }\n\n  makeNumbers(elements: number[]): number[] {\n    if (elements && elements.length > 0) {\n      const first = elements[0];\n      if (typeof first == \"string\") {\n        const numberElements: number[] = [];\n        for (let i = 0; i < elements.length; i++) {\n          numberElements.push(parseFloat(elements[i] + \"\"));\n        }\n        console.log(\"string array converted\", numberElements);\n        return numberElements;\n      }\n    }\n\n    return elements;\n  }\n}\n\nexport class Location extends BasicElement {\n  constructor(id: number, graph: DynamicGraph) {\n    super(id, \"location\", graph);\n  }\n\n  // SPECIFIC ATTRIBUTE QUERIES\n\n  label(): string {\n    return this.attr(\"label\") + \"\";\n  }\n\n  longitude(): number {\n    return this.attr(\"longitude\");\n  }\n\n  latitude(): number {\n    return this.attr(\"latitude\");\n  }\n\n  x(): number {\n    return this.attr(\"x\");\n  }\n\n  y(): number {\n    return this.attr(\"y\");\n  }\n\n  z(): number {\n    return this.attr(\"z\");\n  }\n\n  radius(): number {\n    return this.attr(\"radius\");\n  }\n}\n\nexport class NodePairQuery extends GraphElementQuery {\n  //elementType = 'nodePair';\n\n  constructor(elements: any[], g: DynamicGraph) {\n    super(elements, g, \"nodePair\");\n    //this.elementType = 'nodePair';\n    if (elements.length > 0 && elements[0] instanceof NodePair) {\n      this._elements = [];\n      for (let i = 0; i < elements.length; i++) {\n        this._elements.push(elements[i].id());\n      }\n    }\n    if (elements.length > 0 && typeof elements[0] == \"number\") {\n      this._elements = [];\n      for (let i = 0; i < elements.length; i++) {\n        this._elements.push(elements[i]);\n      }\n    }\n  }\n\n  contains(n: NodePair): boolean {\n    return this._elements.indexOf(n.id()) > -1;\n  }\n\n  highlighted(): NodePairQuery {\n    return new NodePairQuery(super.generic_highlighted(), this.g);\n  }\n\n  visible(): NodePairQuery {\n    return new NodePairQuery(super.generic_visible(), this.g);\n  }\n\n  selected(): NodePairQuery {\n    return new NodePairQuery(super.generic_selected(), this.g);\n  }\n\n  filter(filter: (d: any) => boolean): NodePairQuery {\n    return new NodePairQuery(super.generic_filter(filter), this.g);\n  }\n\n  presentIn(t1: Time, t2: Time): NodePairQuery {\n    return new NodePairQuery(super.generic_presentIn(t1, t2), this.g);\n  }\n\n  sort(attributeName: string): NodePairQuery {\n    return <NodePairQuery>super.generic_sort(attributeName);\n  }\n\n  // returns the i-th element in this query\n  get(i: number): NodePair {\n    return this.g._nodePairs[this._elements[i]];\n  }\n\n  last(): Link {\n    return this.g._links[this._elements[this._elements.length - 1]];\n  }\n\n  // returns array of NodePair\n  toArray(): NodePair[] {\n    const a: NodePair[] = [];\n    for (let i = 0; i < this._elements.length; i++) {\n      a.push(this.g._nodePairs[this._elements[i]]);\n    }\n    return a;\n  }\n\n  createAttribute(attrName: string, f: (np: NodePair) => void): NodePairQuery {\n    // create and init new attribute array if necessary\n    if ((this.g.nodePairArrays as any)[attrName] == undefined) {\n      (this.g.nodePairArrays as any)[attrName] = [];\n      for (let i = 0; i < this.g._nodePairs.length; i++) {\n        (this.g.nodePairArrays as any)[attrName].push();\n      }\n    }\n    for (let i = 0; i < this._elements.length; i++) {\n      (this.g.nodePairArrays as any)[attrName][this._elements[i]] = f(\n        this.g._nodePairs[this._elements[i]]\n      );\n    }\n    return this;\n  }\n\n  intersection(q: NodePairQuery): NodePairQuery {\n    return new NodePairQuery(this.generic_intersection(q)._elements, this.g);\n  }\n\n  removeDuplicates(): NodePairQuery {\n    return new NodePairQuery(this.generic_removeDuplicates()._elements, this.g);\n  }\n\n  forEach(f: (np: NodePair | undefined, i: number) => any): NodePairQuery {\n    for (let i = 0; i < this._elements.length; i++) {\n      f(this.g.nodePair(this._elements[i]), i);\n    }\n    return this;\n  }\n}\n\nexport class NodePair extends BasicElement {\n  constructor(id: number, graph: DynamicGraph) {\n    super(id, \"nodePair\", graph);\n  }\n\n  // SPECIFIC ATTRIBUTE QUERIES\n\n  get source(): Node {\n    return this.g._nodes[this.attr(\"source\")];\n  }\n\n  get target(): Node {\n    return this.g._nodes[this.attr(\"target\")];\n  }\n\n  links(): LinkQuery {\n    return new LinkQuery(this.attr(\"links\"), this.g);\n  }\n\n  nodeType(): string {\n    return this.attr(\"nodeType\");\n  }\n\n  presentIn(start: Time, end?: Time): boolean {\n    for (let i = 0; i < this.links.length; i++) {\n      if ((this.links as any)[i].presentIn(start, end)) return true;\n    }\n    return false;\n  }\n}\n\nexport class StringQuery {\n  _elements: string[];\n\n  constructor(elements?: string[]) {\n    if (elements) this._elements = elements.slice(0);\n    else this._elements = []; // INIT WHEN ELEMENTS DOESN'T EXIST\n  }\n\n  contains(element: string): boolean {\n    return this._elements.indexOf(element) > -1;\n  }\n\n  addUnique(element: string): void {\n    if (this._elements.indexOf(element) == -1) this._elements.push(element);\n  }\n\n  add(element: string): void {\n    this._elements.push(element);\n  }\n\n  addAll(elements: string[]): void {\n    for (let i = 0; i < elements.length; i++) {\n      if (elements[i] != undefined) this._elements.push(elements[i]);\n    }\n  }\n\n  addAllUnique(elements: string[]): void {\n    for (let i = 0; i < elements.length; i++) {\n      this.addUnique(elements[i]);\n    }\n  }\n\n  get length(): number {\n    return this._elements.length;\n  }\n\n  size(): number {\n    return this._elements.length;\n  }\n\n  toArray(): string[] {\n    return this._elements.slice(0);\n  }\n\n  forEach(f: (s: string, i: number) => void): StringQuery {\n    for (let i = 0; i < this._elements.length; i++) {\n      f(this._elements[i], i);\n    }\n    return this;\n  }\n}\n\nfunction getBulkAttributes(\n  attrName: string,\n  ids: number[],\n  type: string,\n  g: DynamicGraph,\n  t1?: Time,\n  t2?: Time\n): any[] {\n  let a: any[] = [];\n  let temp: any[];\n  for (let i = 0; i < ids.length; i++) {\n    if (t2 != undefined && t1 != undefined) {\n      temp = (<ScalarTimeSeries<number>>g.attr(attrName, ids[i], type))\n        .period(t1, t2)\n        .toArray();\n    } else if (t1 != undefined) {\n      temp = [\n        (<ScalarTimeSeries<number>>g.attr(attrName, ids[i], type)).get(t1),\n      ];\n    } else {\n      temp = (<ScalarTimeSeries<number>>(\n        g.attr(attrName, ids[i], type)\n      )).toArray();\n    }\n    for (let j = 0; j < temp.length; j++) {\n      if (temp[j] instanceof Array) {\n        a = a.concat(temp[j]);\n      } else {\n        if (a.indexOf(temp[j]) == -1) a.push(temp[j]);\n      }\n    }\n  }\n  return a;\n}\n\nexport class NodeQuery extends GraphElementQuery {\n  // elementType = 'node';\n\n  constructor(elements: any[], g: DynamicGraph) {\n    super(elements, g, \"node\");\n    if (elements.length > 0 && elements[0] instanceof Node) {\n      this._elements = [];\n      for (let i = 0; i < elements.length; i++) {\n        this._elements.push(elements[i].id());\n      }\n    } else if (elements.length > 0 && typeof elements[0] == \"number\") {\n      this._elements = [];\n      for (let i = 0; i < elements.length; i++) {\n        this._elements.push(elements[i]);\n      }\n    }\n    // this.elementType = 'node';\n  }\n\n  contains(n: Node): boolean {\n    return this._elements.indexOf(n.id()) > -1;\n  }\n\n  // WRAPPERS TO GENERIC FUNCTIONS IN GRAPH_ELEMENT_QUERY\n  highlighted(): NodeQuery {\n    return new NodeQuery(super.generic_highlighted(), this.g);\n  }\n\n  visible(): NodeQuery {\n    return new NodeQuery(super.generic_visible(), this.g);\n  }\n\n  selected(): NodeQuery {\n    return new NodeQuery(super.generic_selected(), this.g);\n  }\n\n  filter(filter: (d: any) => boolean): NodeQuery {\n    return new NodeQuery(super.generic_filter(filter), this.g);\n  }\n\n  presentIn(t1: Time, t2: Time): NodeQuery {\n    return new NodeQuery(super.generic_presentIn(t1, t2), this.g);\n  }\n\n  sort(attributeName: string, asc?: boolean): NodeQuery {\n    return <NodeQuery>super.generic_sort(attributeName, asc);\n  }\n\n  // proper functions\n\n  label(): StringQuery {\n    const q: StringQuery = new StringQuery();\n    for (let i = 0; i < this._elements.length; i++) {\n      q.add(\"\" + this.g.attr(\"label\", this._elements[i], \"node\"));\n    }\n    return q;\n  }\n\n  neighbors(t1?: Time, t2?: Time): NodeQuery {\n    return new NodeQuery(\n      getBulkAttributes(\"neighbors\", this._elements, \"node\", this.g, t1, t2),\n      this.g\n    );\n  }\n\n  links(t1?: Time, t2?: Time): LinkQuery {\n    return new LinkQuery(\n      getBulkAttributes(\"links\", this._elements, \"node\", this.g, t1, t2),\n      this.g\n    );\n  }\n\n  locations(t1?: Time, t2?: Time): LocationQuery {\n    return new LocationQuery(\n      getBulkAttributes(\"locations\", this._elements, \"node\", this.g, t1, t2),\n      this.g\n    );\n  }\n\n  nodeTypes(): StringQuery {\n    const q: StringQuery = new StringQuery();\n    for (let i = 0; i < this._elements.length; i++) {\n      q.add(this.g.attr(\"nodeType\", this._elements[i], \"node\"));\n    }\n    return q;\n  }\n\n  // returns the i-th element in this query\n  get(i: number): Node {\n    return this.g._nodes[this._elements[i]];\n  }\n\n  last(): Node {\n    return this.g._nodes[this._elements[this._elements.length - 1]];\n  }\n\n  // returns array of nodes\n  toArray(): Node[] {\n    const a: Node[] = [];\n    for (let i = 0; i < this._elements.length; i++) {\n      a.push(this.g._nodes[this._elements[i]]);\n    }\n    return a;\n  }\n\n  createAttribute(attrName: string, f: (n: Node) => any): NodeQuery {\n    // create and init news attribute array if necessary\n    if ((this.g.nodeArrays as any)[attrName] == undefined) {\n      (this.g.nodeArrays as any)[attrName] = [];\n      for (let i = 0; i < this.g._nodes.length; i++) {\n        (this.g.nodeArrays as any)[attrName].push();\n      }\n    }\n    for (let i = 0; i < this._elements.length; i++) {\n      (this.g.nodeArrays as any)[attrName][this._elements[i]] = f(\n        this.g._nodes[this._elements[i]]\n      );\n    }\n    return this;\n  }\n\n  intersection(q: NodeQuery): NodeQuery {\n    return new NodeQuery(this.generic_intersection(q)._elements, this.g);\n  }\n\n  removeDuplicates(): NodeQuery {\n    return new NodeQuery(this.generic_removeDuplicates()._elements, this.g);\n  }\n\n  forEach(f: (n: Node | undefined, i: number) => void): NodeQuery {\n    for (let i = 0; i < this._elements.length; i++) {\n      f(this.g.node(this._elements[i]), i);\n    }\n    return this;\n  }\n}\n\n/**\n * Represents a node object\n */\nexport class Node extends BasicElement {\n  constructor(id: number, graph: DynamicGraph) {\n    super(id, \"node\", graph);\n  }\n\n  // SPECIFIC ATTRIBUTE QUERIES\n\n  /** @returns this node's label, specified by the user.\n   * If no string value was delivered by the user, returns the ID as string.\n   */\n  label(): string {\n    return \"\" + this.attr(\"label\");\n  }\n\n  shape(): string {\n    return \"\" + this.attr(\"shape\");\n  }\n\n  color(): string {\n    return \"\" + this.attr(\"color\");\n  }\n\n  nodeType(): string {\n    return this.attr(\"nodeType\");\n  }\n\n  /** Returns this nodes neighbors in a NodeQuery. No duplicates.\n   * If no parameter is supplied, returns *all* neighbors of this\n   * node over all time steps.\n   * @param t1 - start time. If only this parameter is specified, returns\n   * neighbors in this time step only.\n   * @param t2 - end time. If this parameter is specified, returns\n   * neighbors between t1 and t2.\n   */\n  neighbors(t1?: Time, t2?: Time): NodeQuery {\n    if (t2 != undefined && t1 != undefined) {\n      return new NodeQuery(\n        (<ArrayTimeSeries<number>>this.attr(\"neighbors\"))\n          .period(t1, t2)\n          .toFlatArray(true),\n        this.g\n      );\n    }\n    if (t1 != undefined) {\n      return new NodeQuery(\n        (<ArrayTimeSeries<number>>this.attr(\"neighbors\")).get(t1),\n        this.g\n      );\n    }\n    return new NodeQuery(\n      (<ArrayTimeSeries<number>>this.attr(\"neighbors\")).toFlatArray(),\n      this.g\n    );\n  }\n\n  inNeighbors(t1?: Time, t2?: Time): NodeQuery {\n    if (t2 != undefined && t1 != undefined) {\n      return new NodeQuery(\n        (<ArrayTimeSeries<number>>this.attr(\"inNeighbors\"))\n          .period(t1, t2)\n          .toFlatArray(true),\n        this.g\n      );\n    }\n    if (t1 != undefined) {\n      return new NodeQuery(\n        (<ArrayTimeSeries<number>>this.attr(\"inNeighbors\")).get(t1),\n        this.g\n      );\n    }\n    return new NodeQuery(\n      (<ArrayTimeSeries<number>>this.attr(\"inNeighbors\")).toFlatArray(true),\n      this.g\n    );\n  }\n\n  outNeighbors(t1?: Time, t2?: Time): NodeQuery {\n    if (t2 != undefined && t1 != undefined) {\n      return new NodeQuery(\n        (<ArrayTimeSeries<number>>this.attr(\"outNeighbors\"))\n          .period(t1, t2)\n          .toFlatArray(true),\n        this.g\n      );\n    }\n    if (t1 != undefined) {\n      return new NodeQuery(\n        (<ArrayTimeSeries<number>>this.attr(\"outNeighbors\")).get(t1),\n        this.g\n      );\n    }\n    return new NodeQuery(\n      (<ArrayTimeSeries<number>>this.attr(\"outNeighbors\")).toFlatArray(),\n      this.g\n    );\n  }\n\n  links(t1?: Time, t2?: Time): LinkQuery {\n    if (t2 != undefined && t1 != undefined) {\n      return new LinkQuery(\n        (<ArrayTimeSeries<number>>this.attr(\"links\"))\n          .period(t1, t2)\n          .toFlatArray(true),\n        this.g\n      );\n    }\n    if (t1 != undefined) {\n      return new LinkQuery(\n        (<ArrayTimeSeries<number>>this.attr(\"links\")).get(t1),\n        this.g\n      );\n    }\n    return new LinkQuery(\n      (<ArrayTimeSeries<number>>this.attr(\"links\")).toFlatArray(true),\n      this.g\n    );\n  }\n\n  inLinks(t1?: Time, t2?: Time): LinkQuery {\n    if (t2 != undefined && t1 != undefined) {\n      return new LinkQuery(\n        (<ArrayTimeSeries<number>>this.attr(\"inLinks\"))\n          .period(t1, t2)\n          .toFlatArray(true),\n        this.g\n      );\n    }\n    if (t1 != undefined) {\n      return new LinkQuery(\n        (<ArrayTimeSeries<number>>this.attr(\"inLinks\")).get(t1),\n        this.g\n      );\n    }\n    return new LinkQuery(\n      (<ArrayTimeSeries<number>>this.attr(\"inLinks\")).toFlatArray(true),\n      this.g\n    );\n  }\n\n  outLinks(t1?: Time, t2?: Time): LinkQuery {\n    if (t2 != undefined && t1 != undefined) {\n      return new LinkQuery(\n        (<ArrayTimeSeries<number>>this.attr(\"outLinks\"))\n          .period(t1, t2)\n          .toFlatArray(true),\n        this.g\n      );\n    }\n    if (t1 != undefined) {\n      return new LinkQuery(\n        (<ArrayTimeSeries<number>>this.attr(\"outLinks\")).get(t1),\n        this.g\n      );\n    }\n    return new LinkQuery(\n      (<ArrayTimeSeries<number>>this.attr(\"outLinks\")).toFlatArray(true),\n      this.g\n    );\n  }\n\n  locations(t1?: Time, t2?: Time): LocationQuery {\n    if (t2 != undefined && t1 != undefined) {\n      return new LocationQuery(\n        (<ScalarTimeSeries<number>>this.attr(\"locations\"))\n          .period(t1, t2)\n          .toArray(),\n        this.g\n      );\n    }\n    if (t1 != undefined) {\n      return new LocationQuery(\n        [(<ScalarTimeSeries<number>>this.attr(\"locations\")).get(t1)],\n        this.g\n      );\n    }\n    return new LocationQuery(\n      (<ScalarTimeSeries<number>>this.attr(\"locations\")).toArray(),\n      this.g\n    );\n  }\n\n  locationSerie(t1?: Time, t2?: Time): ScalarTimeSeries<Location> {\n    let serie: ScalarTimeSeries<number>;\n    if (t2 != undefined && t1 != undefined)\n      serie = (<ScalarTimeSeries<number>>this.attr(\"locations\")).period(t1, t2);\n    // return this.attr('locations').period(t1, t2);\n    else if (t1 != undefined)\n      serie = <ScalarTimeSeries<number>>this.attr(\"locations\").get(t1);\n    // return this.attr('locations').get(t1);\n    else serie = <ScalarTimeSeries<number>>this.attr(\"locations\");\n    // return this.attr('locations');\n\n    const serie2 = serie.getSerie();\n    // replace numbers by locations\n    const serie3 = new ScalarTimeSeries<Location>();\n    for (const t in serie2) {\n      const time = this.g.time(parseInt(t));\n      const location = this.g.location((serie2 as any)[t]);\n      if (time != undefined && location != undefined) {\n        serie3.set(time, location);\n      }\n    }\n    return serie3;\n  }\n\n  linksBetween(n: Node): LinkQuery {\n    const links = this.links().toArray();\n    const finalLinks = [];\n    let l;\n    for (let i = 0; i < links.length; i++) {\n      l = links[i];\n      if (l.source == n || l.target == n) finalLinks.push(l);\n    }\n    return new LinkQuery(finalLinks, this.g);\n  }\n\n  // TODO\n  // presentIn(start: Time, end?: Time): boolean {\n  //     // TODO, consider present times for nodes.\n  //     return true;\n  // }\n}\n\nexport class LinkQuery extends GraphElementQuery {\n  //elementType = 'link';\n\n  constructor(elements: any[], g: DynamicGraph) {\n    super(elements, g, \"link\");\n    if (elements.length > 0 && elements[0] instanceof Link) {\n      this._elements = [];\n      for (let i = 0; i < elements.length; i++) {\n        this._elements.push(elements[i].id());\n      }\n    }\n    if (elements.length > 0 && typeof elements[0] == \"number\") {\n      this._elements = [];\n      for (let i = 0; i < elements.length; i++) {\n        this._elements.push(elements[i]);\n      }\n    }\n  }\n\n  contains(l: Link): boolean {\n    return this._elements.indexOf(l.id()) > -1;\n  }\n\n  highlighted(): LinkQuery {\n    return new LinkQuery(super.generic_highlighted(), this.g);\n  }\n\n  visible(): LinkQuery {\n    return new LinkQuery(super.generic_visible(), this.g);\n  }\n\n  selected(): LinkQuery {\n    return new LinkQuery(super.generic_selected(), this.g);\n  }\n\n  filter(filter: (d: any) => boolean): LinkQuery {\n    return new LinkQuery(super.generic_filter(filter), this.g);\n  }\n\n  presentIn(t1: Time, t2?: Time): LinkQuery {\n    return new LinkQuery(super.generic_presentIn(t1, t2), this.g);\n  }\n\n  sort(attributeName: string): LinkQuery {\n    return <LinkQuery>super.generic_sort(attributeName);\n  }\n\n  // returns the i-th element in this query\n  get(i: number): Link {\n    return this.g._links[this._elements[i]];\n  }\n\n  last(): Link {\n    return this.g._links[this._elements[this._elements.length - 1]];\n  }\n\n  // returns array of links\n  toArray(): Link[] {\n    const a: Link[] = [];\n    for (let i = 0; i < this._elements.length; i++) {\n      a.push(this.g._links[this._elements[i]]);\n    }\n    return a;\n  }\n\n  weights(start?: Time, end?: Time): NumberQuery {\n    const s: NumberQuery = new NumberQuery();\n    for (let i = 0; i < this._elements.length; i++) {\n      const gLink = this.g.link(i);\n      if (gLink != undefined) s.addAll(gLink.weights(start, end).toArray());\n      // ELSE ???\n    }\n    return s;\n  }\n\n  createAttribute(attrName: string, f: (link: Link) => any): LinkQuery {\n    // create and init new attribute array if necessary\n    if ((this.g.linkArrays as any)[attrName] == undefined) {\n      (this.g.linkArrays as any)[attrName] = [];\n      for (let i = 0; i < this.g._links.length; i++) {\n        (this.g.linkArrays as any)[attrName].push();\n      }\n    }\n    for (let i = 0; i < this._elements.length; i++) {\n      (this.g.linkArrays as any)[attrName][this._elements[i]] = f(\n        this.g._links[this._elements[i]]\n      );\n    }\n    return this;\n  }\n\n  linkTypes(): string[] {\n    const linkTypes: string[] = [];\n    let s;\n    for (let i = 0; i < this._elements.length; i++) {\n      const gLink = this.g.link(this._elements[i]);\n      if (gLink != undefined) {\n        s = gLink.linkType();\n        if (linkTypes.indexOf(s) == -1) linkTypes.push(s);\n      }\n      // ELSE ??\n    }\n    return linkTypes;\n  }\n\n  sources(): NodeQuery {\n    const nodes: number[] = [];\n    let link;\n    for (let i = 0; i < this._elements.length; i++) {\n      link = this.g.link(this._elements[i]);\n      if (link != undefined) {\n        // UNDEFINED??\n        if (nodes.indexOf(link.source.id()) == -1)\n          // ID??\n          nodes.push(link.source.id());\n      }\n    }\n    return new NodeQuery(nodes, this.g);\n  }\n\n  targets(): NodeQuery {\n    const nodes: number[] = [];\n    let link;\n    for (let i = 0; i < this._elements.length; i++) {\n      link = this.g.link(this._elements[i]);\n      if (link != undefined) {\n        // UNDEFINED??\n        if (nodes.indexOf(link.target.id()) == -1)\n          // ID??\n          nodes.push(link.target.id());\n      }\n    }\n    return new NodeQuery(nodes, this.g);\n  }\n\n  intersection(q: LinkQuery): LinkQuery {\n    return new LinkQuery(this.generic_intersection(q)._elements, this.g);\n  }\n\n  removeDuplicates(): LinkQuery {\n    return new LinkQuery(this.generic_removeDuplicates()._elements, this.g);\n  }\n\n  forEach(f: (link: Link | undefined, i: number) => void): LinkQuery {\n    for (let i = 0; i < this._elements.length; i++) {\n      f(this.g.link(this._elements[i]), i);\n    }\n    return this;\n  }\n}\n\n/**\n * Represents a link object on a WindowGraph\n */\nexport class Link extends BasicElement {\n  targetNPO: any = undefined;\n  sourceNPO: any = undefined;\n\n  constructor(id: number, graph: DynamicGraph) {\n    super(id, \"link\", graph);\n  }\n\n  // SPECIFIC ATTRIBUTE QUERIES\n\n  linkType(): string {\n    return this.attr(\"linkType\");\n  }\n\n  get source(): Node {\n    return this.g._nodes[this.attr(\"source\")];\n  }\n\n  get target(): Node {\n    return this.g._nodes[this.attr(\"target\")];\n  }\n\n  nodePair(): NodePair {\n    return this.g._nodePairs[this.attr(\"nodePair\")];\n  }\n\n  directed(): boolean {\n    return this.attr(\"directed\");\n  }\n\n  other(n: Node): Node {\n    return this.source == n ? this.target : this.source;\n  }\n\n  /** Returns this link's weights over time as NumberQuery\n   * If no time parameter is supplied, returns *all* weights of this\n   * link over all time steps.\n   * @param t1 - start time. If only this parameter is specified, returns\n   * only the value for t1.\n   * @param t2 - end time. If this parameter is specified, returns\n   * weights between t1 and t2.\n   */\n  weights(start?: Time, end?: Time): NumberQuery {\n    if (start == undefined)\n      return new NumberQuery(\n        (<ScalarTimeSeries<number>>this.attr(\"weights\")).toArray()\n      );\n    if (end == undefined)\n      return new NumberQuery([\n        (<ScalarTimeSeries<number>>this.attr(\"weights\")).get(start),\n      ]);\n    return new NumberQuery(\n      (<ScalarTimeSeries<number>>this.attr(\"weights\"))\n        .period(start, end)\n        .toArray()\n    );\n  }\n\n  presentIn(start: Time, end?: Time): boolean {\n    const presence: number[] = this.weights(start, end).toArray();\n    return presence.length > 0;\n  }\n\n  /** Returns all times in which this link's weight != 0  */\n  times(): TimeQuery {\n    // var weights:ScalarTimeSeries<number> = <ScalarTimeSeries<number>>this.attr('weights');\n    // var times = []\n    // var allTimes = this.g.times().toArray();\n    // for(var t in weights.serie){\n    //     times.push(allTimes[parseInt(t)]);\n    // }\n    return new TimeQuery(this.attr(\"presence\"), this.g);\n  }\n}\n\nexport class LinkType implements LegendElement {\n  id: number;\n  name: string;\n  color: string;\n\n  constructor(id: number, name: string, color: string) {\n    this.id = id;\n    this.name = name;\n    this.color = color;\n  }\n}\n\n/* Moved from utils to dynamicgraph to eliminate circular dependency */\n\n/* used by dynamicgraph, but not used none of utils*/\n\nexport function attributeSort(\n  a: BasicElement,\n  b: BasicElement,\n  attributeName: string,\n  asc?: boolean\n): number {\n  const value = a.attr(attributeName);\n  let result;\n  if (typeof value == \"string\") {\n    result = a.attr(attributeName).localeCompare(b.attr(attributeName));\n  } else if (typeof value == \"number\") {\n    result = b.attr(attributeName) - a.attr(attributeName);\n  } else {\n    result = 0;\n  }\n\n  if (asc == false) {\n    result = -result;\n  }\n  return result;\n}\n\n/* moved from utils to dynamicgraph */\nexport class IDCompound {\n  nodeIds: number[] = [];\n  linkIds: number[] = [];\n  timeIds: number[] = [];\n  nodePairIds: number[] = [];\n  locationIds: number[] = [];\n}\n\nexport interface LegendElement {\n  name: string;\n  color: string;\n}\n\n/******** MOVED FROM UTILS TO DYNAMICGRAPH *********/\n\nexport function copyPropsShallow(source: any, target: any): any {\n  for (const p in source) {\n    if (Object.prototype.hasOwnProperty.call(source, p)) target[p] = source[p];\n  }\n  return target;\n}\n\nexport function copyTimeseriesPropsShallow(source: any, target: any): any {\n  for (const q in source) {\n    if (Object.prototype.hasOwnProperty.call(source, q)) {\n      for (const p in source[q]) {\n        if (Object.prototype.hasOwnProperty.call(source[q], p)) {\n          target[q][p] = source[q][p];\n        }\n      }\n    }\n  }\n  return target;\n}\n\nexport function copyTimeSeries<TElement>(\n  arr: any[],\n  ctorFunc: () => TElement\n): TElement[] {\n  const arrayClone: TElement[] = [];\n  for (const elem in arr) {\n    arrayClone.push(copyTimeseriesPropsShallow(arr[elem], ctorFunc()));\n  }\n  return arrayClone;\n}\n\nexport function compareTypesDeep(a: any, b: any, depth: number): boolean {\n  let result = true;\n  if (a == null || b == null) return a == b;\n  if (typeof a != typeof b) return false;\n  else if (typeof a != \"object\") return true;\n  else if (a.constructor !== b.constructor) return false;\n  else {\n    if (depth > 0) {\n      for (const key in a) {\n        if (\n          key in b &&\n          Object.prototype.hasOwnProperty.call(a, key) &&\n          Object.prototype.hasOwnProperty.call(b, key) &&\n          !compareTypesDeep(a[key], b[key], depth - 1)\n        ) {\n          console.log(\"compareFailed for key\", key, a[key], b[key]);\n          result = false;\n        }\n      }\n    }\n    return result;\n  }\n}\n\nexport function sortNumber(a: number, b: number): number {\n  return a - b;\n}\n\nexport function array(value: any, size: number): any[] {\n  const array: any[] = [];\n  while (size--) array[size] = value;\n  return array;\n}\n\nexport function doubleArray(size1: number, size2?: number, value?: any): any[] {\n  const array: any[] = [];\n  if (value == undefined) value = [];\n  const a: any[] = [];\n\n  if (size2) {\n    while (size2--) a[size2] = value;\n  }\n  while (size1--) array[size1] = a.slice(0);\n\n  return array;\n}\n","import * as d3 from \"d3\";\n\nimport {\n  BasicElement,\n  Time,\n  IDCompound,\n  DynamicGraph,\n  NodePair,\n  Node,\n  Link,\n  LinkType,\n  copyPropsShallow,\n} from \"./dynamicgraph\";\n\n// TODO: refactor imports to import from dates directly...\nexport { formatAtGranularity, formatTimeAtGranularity } from \"./dates\";\nimport { Selection } from \"./dynamicgraphutils\";\n\n/* moved from utils to queries */\n\nexport function getType(elements: any[]): string | undefined {\n  // before was only string\n\n  let type = \"\"; // before only string, without init\n  if (elements.length == 0) return;\n  if (elements[0] instanceof Node) type = \"node\";\n  else if (elements[0] instanceof Link) {\n    type = \"link\";\n  } else if (elements[0] instanceof Time) {\n    type = \"time\";\n  } else if (elements[0] instanceof NodePair) {\n    type = \"nodePair\";\n  } else if (elements[0] instanceof LinkType) {\n    type = \"linkType\";\n  } else if (typeof elements[0] == \"number\") {\n    type = \"number\";\n  }\n\n  return type;\n}\n\n/* moved from utils to queries */\n\nexport function makeElementCompound(\n  elements: IDCompound,\n  g: DynamicGraph\n): ElementCompound {\n  const result: ElementCompound = new ElementCompound();\n  if (elements != undefined) {\n    if (elements.nodeIds) {\n      result.nodes = <Node[]>elements.nodeIds.map((id) => g.node(id)); // ?? WITH OR WITHOUT ?? .filter((element) => { return (element != undefined) });\n    }\n    if (elements.linkIds) {\n      result.links = <Link[]>elements.linkIds.map((id) => g.link(id));\n    }\n    if (elements.timeIds) {\n      result.times = <Time[]>elements.timeIds.map((id) => g.time(id));\n    }\n    if (elements.nodePairIds) {\n      result.nodePairs = <NodePair[]>(\n        elements.nodePairIds.map((id) => g.nodePair(id))\n      );\n    }\n  }\n  return result;\n}\n\n/* moved from utils to queries */\nexport class ElementCompound {\n  nodes: Node[] = [];\n  links: Link[] = [];\n  times: Time[] = [];\n  nodePairs: NodePair[] = [];\n  locations: Location[] = [];\n}\n\nexport function getPriorityColor(element: BasicElement): string | undefined {\n  // before: return string\n\n  let j = 0;\n  const selections = element.getSelections();\n  while (!selections[j].showColor) {\n    j++;\n    if (j == selections.length) {\n      j = -1;\n      return;\n    }\n  }\n  return element.getSelections()[j].color;\n}\n\nexport function sortByPriority(s1: Selection, s2: Selection): number {\n  return s1.priority - s2.priority;\n}\n\nexport function getUrlVars(): Record<string, any> {\n  const vars: Record<string, any> = {};\n  const params = window.location.search.replace(\"?\", \"\").split(\"&\");\n  let tmp: any;\n  let value: any;\n  params.forEach(function (item) {\n    tmp = item.split(\"=\");\n    value = decodeURIComponent(tmp[1]);\n    (vars as any)[tmp[0]] = value;\n  });\n  return vars;\n}\n\nexport function capitalizeFirstLetter(string: string): string {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nexport function isBefore(t1: Time, t2: Time): boolean {\n  return t1.time < t2.time;\n}\n\nexport function isAfter(t1: Time, t2: Time): boolean {\n  return t1.time > t2.time;\n}\n\nexport function hex2Rgb(hex: string): number[] {\n  return [hexToR(hex), hexToG(hex), hexToB(hex)];\n}\n\nfunction hexToR(h: string) {\n  return parseInt(cutHex(h).substring(0, 2), 16);\n}\n\nfunction hexToG(h: string) {\n  return parseInt(cutHex(h).substring(2, 4), 16);\n}\n\nfunction hexToB(h: string) {\n  return parseInt(cutHex(h).substring(4, 6), 16);\n}\n\nfunction cutHex(h: string) {\n  return h.charAt(0) == \"#\" ? h.substring(1, 7) : h;\n}\n\nexport function hex2web(v: string): string {\n  v = v + \"\";\n  return v.replace(\"0x\", \"#\");\n}\n\nexport function hex2RgbNormalized(hex: string): number[] {\n  return [hexToR(hex) / 255, hexToG(hex) / 255, hexToB(hex) / 255];\n}\n\nexport function areEqualShallow(a: any, b: any): boolean {\n  for (const key in a) {\n    if (!(key in b) || a[key] !== b[key]) {\n      return false;\n    }\n  }\n  for (const key in b) {\n    if (!(key in a) || a[key] !== b[key]) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function compareTypesShallow(a: any, b: any): boolean {\n  if (a == null || b == null) return a == b;\n  if (typeof a != typeof b) return false;\n  else if (typeof a != \"object\") return true;\n  else if (a.constructor !== b.constructor) return false;\n  else {\n    return true;\n  }\n}\n\nexport function copyArray<TElement>(\n  arr: any[],\n  ctorFunc: () => TElement\n): TElement[] {\n  const arrayClone: TElement[] = [];\n  for (const elem in arr) {\n    arrayClone.push(copyPropsShallow(arr[elem], ctorFunc()));\n  }\n  return arrayClone;\n}\n\nexport class Box {\n  x1: number;\n  x2: number;\n  y1: number;\n  y2: number;\n\n  constructor(x1: number, y1: number, x2: number, y2: number) {\n    this.x1 = Math.min(x1, x2);\n    this.x2 = Math.max(x1, x2);\n    this.y1 = Math.min(y1, y2);\n    this.y2 = Math.max(y1, y2);\n  }\n\n  get width(): number {\n    return this.x2 - this.x1;\n  }\n\n  get height(): number {\n    return this.y2 - this.y1;\n  }\n\n  isPoint(): boolean {\n    return this.width == 0 && this.height == 0;\n  }\n}\n\nexport function inBox(x: number, y: number, box: Box): boolean {\n  return x > box.x1 && x < box.x2 && y > box.y1 && y < box.y2;\n}\n\nexport function isSame(a: any[], b: any[]): boolean {\n  if (a.length != b.length) return false;\n  let found = true;\n  for (let i = 0; i < a.length; i++) {\n    found = false;\n    for (let j = 0; j < b.length; j++) {\n      if (a[i] == b[j]) found = true;\n    }\n    if (!found) return false;\n  }\n  return true;\n}\n\nexport function cloneCompound(compound: IDCompound): IDCompound {\n  const result: IDCompound = new IDCompound();\n  if (compound.nodeIds) {\n    result.nodeIds = [];\n    for (let i = 0; i < compound.nodeIds.length; i++) {\n      result.nodeIds.push(compound.nodeIds[i]);\n    }\n  }\n  if (compound.linkIds) {\n    result.linkIds = [];\n    for (let i = 0; i < compound.linkIds.length; i++) {\n      result.linkIds.push(compound.linkIds[i]);\n    }\n  }\n  if (compound.nodePairIds) {\n    result.nodePairIds = [];\n    for (let i = 0; i < compound.nodePairIds.length; i++) {\n      result.nodePairIds.push(compound.nodePairIds[i]);\n    }\n  }\n  if (compound.timeIds) {\n    result.timeIds = [];\n    for (let i = 0; i < compound.timeIds.length; i++) {\n      result.timeIds.push(compound.timeIds[i]);\n    }\n  }\n  return result;\n}\n\nexport function makeIdCompound(\n  elements: ElementCompound | undefined\n): IDCompound {\n  const result: IDCompound = new IDCompound();\n  if (elements != undefined) {\n    if (elements.nodes) {\n      result.nodeIds = elements.nodes.map((n: Node) => n.id());\n    }\n    if (elements.links) {\n      result.linkIds = elements.links.map((n: Link) => n.id());\n    }\n    if (elements.times) {\n      result.timeIds = elements.times.map((n: Time) => n.id());\n    }\n    if (elements.nodePairs) {\n      result.nodePairIds = elements.nodePairs.map((n: NodePair) => n.id());\n    }\n  }\n  return result;\n}\n\nexport function arraysEqual(a: any, b: any): boolean {\n  if (a === b) return true;\n  if (a == null || b == null) return false;\n  if (a.length != b.length) return false;\n\n  // If you don't care about the order of the elements inside\n  // the array, you should sort both arrays here.\n\n  for (let i = 0; i < a.length; ++i) {\n    if (a[i] !== b[i]) return false;\n  }\n  return true;\n}\n\nexport function encapsulate(\n  array: any[],\n  attrName?: string\n): Record<string, any>[] {\n  if (attrName == undefined) {\n    attrName = \"element\";\n  }\n  const a = [];\n  let o: Record<string, any>;\n  for (let i = 0; i < array.length; i++) {\n    o = {\n      index: i,\n    };\n    (o as any)[attrName] = array[i];\n    a.push(o);\n  }\n  return a;\n}\n\nexport function isPointInPolyArray(poly: number[][], pt: number[]): boolean {\n  const l = poly.length;\n\n  let c = false;\n  let i = -1;\n  let j = l - 1;\n\n  for (; ++i < l; j = i)\n    ((poly[i][1] <= pt[1] && pt[1] < poly[j][1]) ||\n      (poly[j][1] <= pt[1] && pt[1] < poly[i][1])) &&\n      pt[0] <\n        ((poly[j][0] - poly[i][0]) * (pt[1] - poly[i][1])) /\n          (poly[j][1] - poly[i][1]) +\n          poly[i][0] &&\n      (c = !c);\n  return c;\n}\n\n////////////////////////////\n/// SCREENSHOT FUNCTIONS ///\n////////////////////////////\n\n///////////\n/// PNG ///\n///////////\n\n// Downloads the content of the openGL canvas to the\n// desktop.\nexport function downloadPNGFromCanvas(name: string): void {\n  const blob = getBlobFromCanvas(document.getElementsByTagName(\"canvas\")[0]);\n  const fileNameToSaveAs = name + \"_\" + new Date().toUTCString() + \".png\";\n  const downloadLink = document.createElement(\"a\");\n  downloadLink.download = fileNameToSaveAs;\n  downloadLink.href = window.URL.createObjectURL(blob);\n  downloadLink.click();\n}\n\n// Returns a blob from the passed canvas.\nfunction getBlobFromCanvas(canvas: any): Blob {\n  const dataURL = canvas.toDataURL(\"image/png\");\n  return dataURItoBlob(dataURL);\n}\n\n///////////\n/// SVG ///\n///////////\n\n// creates an image blob from the passed svg and calls the\n// callback function with the blob as parameter\nexport function getBlobFromSVG(\n  name: string,\n  svgId: string,\n  callback?: (blob: any, name: string) => void\n): void {\n  //  const width = $(\"#\" + svgId).width();\n  const svg = document.querySelector(\"#\" + svgId);\n  if (!svg) {\n    return;\n  }\n  const width = svg.scrollWidth;\n  const height = svg.scrollHeight;\n  if (callback != undefined)\n    // UNDEFINED ??\n    getBlobFromSVGString(\n      name,\n      getSVGString(d3.select(\"#\" + svgId).node()),\n      width,\n      height,\n      callback\n    ); // what happend if callback undefinied (example above)\n}\n\nexport function getBlobFromSVGNode(\n  name: string,\n  svgNode: any,\n  callback: (blob: any, name: string) => void,\n  backgroundColor?: string\n): void {\n  const string = getSVGString(svgNode);\n  let width = svgNode.getAttribute(\"width\");\n  let height = svgNode.getAttribute(\"height\");\n  if (width == null) {\n    width = window.innerWidth + 1000;\n  }\n  if (height == null) {\n    height = window.innerHeight + 1000;\n  }\n  getBlobFromSVGString(name, string, width, height, callback, backgroundColor);\n}\n\nexport function getBlobFromSVGString(\n  name: string,\n  svgString: string,\n  width: number,\n  height: number,\n  callback: (blob: Blob, name: string) => void,\n  backgroundColor?: string\n): void {\n  const imgsrc: string =\n    \"data:image/svg+xml;base64,\" +\n    btoa(unescape(encodeURIComponent(svgString))); // Convert SVG string to data URL\n\n  // Prepare canvas\n  const canvas: any = document.createElement(\"canvas\");\n  canvas.width = width;\n  canvas.height = height;\n\n  const context: any = canvas.getContext(\"2d\");\n  const image: any = new Image();\n  image.src = imgsrc;\n\n  image.onload = function () {\n    context.clearRect(0, 0, width, height);\n    if (backgroundColor) {\n      context.fillStyle = backgroundColor;\n      context.fillRect(0, 0, canvas.width, canvas.height);\n    }\n    context.drawImage(image, 0, 0, width, height);\n\n    canvas.toBlob(function (blob: any) {\n      callback(blob, name);\n    });\n  };\n}\n\nexport function getSVGString(svgNode: any): string {\n  svgNode.setAttribute(\"xlink\", \"http://www.w3.org/1999/xlink\");\n  const cssStyleText = getCSSStyles(svgNode);\n  appendCSS(cssStyleText, svgNode);\n\n  const serializer = new XMLSerializer();\n  let svgString = serializer.serializeToString(svgNode);\n  svgString = svgString.replace(/(\\w+)?:?xlink=/g, \"xmlns:xlink=\"); // Fix root xlink without namespace\n  svgString = svgString.replace(/NS\\d+:href/g, \"xlink:href\"); // Safari NS namespace fix\n\n  return svgString;\n\n  function getCSSStyles(parentElement: any) {\n    const selectorTextArr = [];\n\n    // Add Parent element Id and Classes to the list\n    selectorTextArr.push(\"#\" + parentElement.id);\n    for (let c = 0; c < parentElement.classList.length; c++)\n      if (!contains(\".\" + parentElement.classList[c], selectorTextArr))\n        selectorTextArr.push(\".\" + parentElement.classList[c]);\n\n    // Add Children element Ids and Classes to the list\n    const nodes = parentElement.getElementsByTagName(\"*\");\n    for (let i = 0; i < nodes.length; i++) {\n      const id = nodes[i].id;\n      if (!contains(\"#\" + id, selectorTextArr)) selectorTextArr.push(\"#\" + id);\n\n      const classes = nodes[i].classList;\n      for (let c = 0; c < classes.length; c++)\n        if (!contains(\".\" + classes[c], selectorTextArr))\n          selectorTextArr.push(\".\" + classes[c]);\n    }\n\n    // Extract CSS Rules\n    let extractedCSSText = \"\";\n    for (let i = 0; i < document.styleSheets.length; i++) {\n      const s = <CSSStyleSheet>document.styleSheets[i];\n\n      try {\n        if (!s.cssRules) continue;\n      } catch (e) {\n        if (e.name !== \"SecurityError\") throw e; // for Firefox\n        continue;\n      }\n\n      const cssRules = s.cssRules;\n      for (let r = 0; r < cssRules.length; r++) {\n        const rule = <CSSStyleRule>cssRules[r];\n        if (contains(rule.selectorText, selectorTextArr))\n          extractedCSSText += rule.cssText;\n      }\n    }\n\n    return extractedCSSText;\n\n    function contains(str: string, arr: any) {\n      return arr.includes(str);\n    }\n  }\n\n  function appendCSS(cssText: string, element: any) {\n    const styleElement = document.createElement(\"style\");\n    styleElement.setAttribute(\"type\", \"text/css\");\n    styleElement.innerHTML = cssText;\n    const refNode = element.hasChildNodes() ? element.children[0] : null;\n    element.insertBefore(styleElement, refNode);\n  }\n}\n\nexport function exportPNG(canvas: HTMLCanvasElement, name: string): void {\n  const dataURL: string = canvas.toDataURL(\"image/jpg\", 1);\n  const blob: Blob = dataURItoBlob(dataURL);\n  // window.open(dataURL);\n\n  const fileNameToSaveAs: string =\n    name + \"_\" + new Date().toUTCString() + \".png\";\n  const downloadLink: HTMLAnchorElement = document.createElement(\"a\");\n  downloadLink.download = fileNameToSaveAs;\n  downloadLink.href = (window as any).webkitURL.createObjectURL(blob);\n  downloadLink.click();\n}\n\n// returns a blob from a URL/URI\nfunction dataURItoBlob(dataURI: string): Blob {\n  // convert base64/URLEncoded data component to raw binary data held in a string\n  let byteString;\n  if (dataURI.split(\",\")[0].indexOf(\"base64\") >= 0)\n    byteString = atob(dataURI.split(\",\")[1]);\n  else byteString = unescape(dataURI.split(\",\")[1]);\n\n  // separate out the mime component\n  const mimeString = dataURI.split(\",\")[0].split(\":\")[1].split(\";\")[0];\n  console.log(\"mimeString\", mimeString);\n\n  // write the bytes of the string to a typed array\n  const ia = new Uint8Array(byteString.length);\n  for (let i = 0; i < byteString.length; i++) {\n    ia[i] = byteString.charCodeAt(i);\n  }\n\n  return new Blob([ia], { type: mimeString });\n}\n\nexport function showMessage(message: string, timeout: number): void {\n  const removeMessageBox = () => {\n    const messageBox = document.querySelector(\".messageBox\");\n    if (messageBox) {\n      messageBox.outerHTML = \"\";\n    }\n  };\n\n  removeMessageBox();\n\n  const el = document.createElement(\"div\");\n  el.innerHTML = `\n  <div id=\"div\" class=\"messageBox\" style=\"\n                    width: 100%;\n                    height: 100%;\n                    background-color: #ffffff;\n                    opacity: .9;\n                    position: absolute;\n                    top: 0;\n                    left: 0;\">\n  <div id=\"div\" style=\"\n        font-size: 20pt;\n        font-weight: bold;\n        font-family: 'Helvetica Neue', Helvetica, sans-serif;\n        width: 500px;\n        padding-top: 300px;\n        text-align: center;\n        margin:auto;\">\n          <p>${message}</p>\n   </div>             \n</div>\n  `;\n\n  const fadeOutEffect = () => {\n    const fadeTarget = document.getElementById(\".messageBox\");\n    if (!fadeTarget) {\n      return;\n    }\n    const fadeEffect = setInterval(function () {\n      if (!fadeTarget.style.opacity) {\n        fadeTarget.style.opacity = \"1\";\n      }\n      if (+fadeTarget.style.opacity > 0) {\n        fadeTarget.style.opacity = (+fadeTarget.style.opacity - 0.1).toString();\n      } else {\n        clearInterval(fadeEffect);\n      }\n    }, 200);\n  };\n\n  document.querySelector(\"body\")?.appendChild(el);\n  el.onclick = removeMessageBox;\n\n  if (timeout) {\n    // Automatically disappear\n    window.setTimeout(fadeOutEffect, timeout);\n  }\n}\n","import { Node, Link, Time, DynamicGraph } from \"./dynamicgraph\";\nimport * as reorder from \"reorder.js\";\n\n/**\n * Calculates an ordering for the passed graph and time span\n * @param  {DynamicGraph} graph [description]\n * @param  {OrderingConfiguration} config  [description]\n */\nexport function orderNodes(\n  graph: DynamicGraph,\n  config?: OrderingConfiguration\n): number[] {\n  const similarityMatrix: number[][] = [];\n  const order: number[] = graph.nodes().ids();\n  let distance: any;\n  let nodes: Node[];\n  let links: Link[];\n  let start: Time;\n  let end: Time;\n\n  if (config != undefined) {\n    distance = config.distance ? config.distance : distance.manhattan;\n    nodes = config.nodes ? config.nodes : graph.nodes().toArray();\n    links = config.links ? config.links : graph.links().toArray();\n    start = config.start ? config.start : graph.startTime;\n    end = config.end ? config.end : graph.endTime;\n  } else {\n    distance = distance.manhattan;\n    nodes = graph.nodes().toArray();\n    links = graph.links().toArray();\n    start = graph.startTime;\n    end = graph.endTime;\n  }\n\n  // init similarity matrix with all 0.\n  let arr: number[];\n  for (let i = 0; i < nodes.length; i++) {\n    arr = [];\n    similarityMatrix.push(arr);\n    for (let j = 0; j < nodes.length; j++) {\n      similarityMatrix[i].push(0);\n    }\n  }\n  // fill matrix\n  let weight = 0;\n  let s: number;\n  let t: number;\n  for (let i = 0; i < links.length; i++) {\n    weight = 0;\n    // check if nodes are in allowed nodes\n    s = nodes.indexOf(links[i].source);\n    t = nodes.indexOf(links[i].target);\n    if (s == -1 || t == -1) continue;\n\n    // get weight in allowed time span\n    weight += links[i].weights(start, end).mean();\n    if (weight) {\n      similarityMatrix[s][t] = weight;\n      similarityMatrix[t][s] = weight;\n    } else {\n      console.log(\"weight\", weight);\n    }\n  }\n\n  // Reorder\n  const leafOrder = reorder\n    .optimal_leaf_order()\n    //.distance(distance)\n    .reorder(similarityMatrix);\n\n  leafOrder.forEach(function (lo: any, i: number) {\n    order[nodes[lo].id()] = i;\n  });\n\n  return order;\n}\n\nexport class OrderingConfiguration {\n  start: Time;\n  end: Time;\n  nodes: Node[] = [];\n  links: Link[] = [];\n  algorithm: string[] = [];\n  distance: string[] = [];\n\n  constructor(start: Time, end: Time) {\n    this.start = start;\n    this.end = end;\n  }\n}\n","// import swiftSet from 'swiftset';\nimport { DynamicGraph, Link, Node, Time } from \"./dynamicgraph\";\nimport netClustering from \"netclustering\";\n\nexport class Motif {\n  nodes: Node[] = [];\n  links: Link[] = [];\n  times: Time[] = [];\n\n  constructor(nodes: Node[], links: Link[]) {\n    this.nodes = nodes.slice(0);\n    this.links = links.slice(0);\n  }\n\n  print(): void {\n    console.log(\"nodes:\", this.nodes.length, \"links:\", this.links.length);\n  }\n}\n\nexport class MotifTemplate {\n  nodes: number[] = [];\n  links: number[][] = [];\n\n  constructor(nodes: number[], links: number[][]) {\n    this.nodes = nodes.slice(0);\n    this.links = links.slice(0);\n  }\n}\n\nexport class MotifSequence {\n  motifs: Motif[] = [];\n\n  push(m: Motif): void {\n    this.motifs.push(m);\n  }\n}\n\nexport function findTemplate(\n  nodes: Node[],\n  template: MotifTemplate,\n  config?: Record<string, any>\n): void {\n  const nodeCount = template.nodes.length;\n  const linkCount = template.links.length;\n  // test every node if it matches one of the nodes in the motif\n  let n;\n  let links;\n  const candidateNodes = [];\n  for (let i = 0; i < nodes.length; i++) {\n    links = nodes[i].links().toArray();\n    for (let j = 0; j < nodeCount; j++) {\n      for (let k = 0; k < linkCount; k++) {\n        if (template.links[k][0] == template.nodes[j])\n          for (let l = 0; l < linkCount; l++) {\n            // TOOD: this is unfinished\n          }\n      }\n    }\n  }\n}\n\nexport function findClusters(\n  nodes: Node[],\n  config?: Record<string, any>\n): Record<string, any> {\n  if (nodes.length == 0) return [];\n\n  const g: DynamicGraph = nodes[0].g;\n  const links: any[] = nodes[0].g.links().toArray();\n  for (let i = 0; i < links.length; i++) {\n    links[i].value = links[i].weights().sum(); // VALUE ???\n  }\n  const clusters = netClustering.cluster(nodes, links);\n\n  const motifs = [];\n  const clusterArray = [];\n  // replace ids with nodes\n\n  let clusterLinks: any[] = [];\n  let cl;\n  let s, t;\n  for (let c = 0; c < clusters.length; c++) {\n    clusterLinks = [];\n    cl = clusters[c];\n    // exclude clusters with less than 4 nodes\n    if (cl.length < 4) continue;\n\n    for (let j = 0; j < cl.length; j++) {\n      cl[j] = g.node(parseInt(cl[j]));\n    }\n    for (let i = 0; i < cl.length; i++) {\n      for (let j = i + 1; j < cl.length; j++) {\n        clusterLinks = clusterLinks.concat(cl[i].linksBetween(cl[j]).toArray());\n      }\n    }\n    motifs.push({ nodes: cl, links: clusterLinks });\n  }\n\n  return motifs;\n}\n\n/*\nexport function findCliques(nodes: Node[], config?: any) {\n    var cliques = [];\n    // var p=[];\n    var p = nodes.slice();\n    // for(var i = 0 ; i <nodes.length ; i++){\n    //     p.push(nodes[i].id());\n    // }\n    var r = [];\n    var x = [];\n\n    if (!config)\n        var config: any = {}\n\n    if (config.links == undefined)\n        config.links = nodes[0].g.links().toArray();\n\n    cliques = bronKerboschIterative(nodes, config);\n\n    // create motifs\n    var motifs = []\n    var cliqueLinks = []\n    for (var c = 0; c < cliques.length; c++) {\n        // do not consider triangles and dyads as cliques\n        if (cliques[c].length < 4)\n            continue;\n\n        cliqueLinks = []\n        for (var i = 0; i < cliques[c].length; i++) {\n            for (var j = i + 1; j < cliques[c].length; j++) {\n                cliqueLinks.push(cliques[c][i].linksBetween(cliques[c][j]).get(0))\n            }\n        }\n        motifs.push({ nodes: cliques[c], links: cliqueLinks })\n    }\n\n    return motifs;\n};\n*/\n\nfunction bronKerbosch(\n  nodes: Node[],\n  r: any[],\n  p: any[],\n  x: any[],\n  cliques: any[],\n  config: Record<string, any>\n) {\n  if (p.length === 0 && x.length === 0) {\n    cliques.push(r);\n    return;\n  }\n\n  p.forEach(function (v) {\n    const tempR = r.splice(0);\n    tempR.push(v);\n    bronKerbosch(\n      nodes,\n      tempR,\n      p.filter(function (temp) {\n        return v.neighbors().contains(temp);\n      }),\n      x.filter(function (temp) {\n        return v.neighbors().contains(temp);\n      }),\n      cliques,\n      config\n    );\n\n    p.splice(p.indexOf(v), 1);\n    if (x.indexOf(v) == -1) x.push(v);\n  });\n}\n\n/*\nfunction bronKerboschIterative(nodes: Node[], config: Object): any[] {\n    var cliques: any[] = []\n\n    var stack: any[] = [];\n    var R: number = 0\n    var P: number = 1\n    var X: number = 2\n    stack.push([[], nodes, []])\n\n    var r: Node[];\n    var p: Node[];\n    var x: Node[];\n    var p2: Node[];\n    var x2: Node[];\n    var step: any[];\n    var newStep: any[];\n    var v: Node;\n    var count: number = 0;\n    while (stack.length > 0) {\n        count++;\n        step = stack.pop();\n        r = [].concat(step[R]);\n        p = [].concat(step[P]);\n        x = [].concat(step[X]);\n        if (p.length == 0\n            && x.length == 0) {\n            cliques.push(r.slice())\n        }\n        if (p.length > 0) {\n            v = p[0] // 'some vertex in P'\n\n            // P \\ v\n            p2 = p.slice()\n            p2.splice(p2.indexOf(v), 1)\n\n            // X u v                \n            x2 = x.slice()\n            if (x2.indexOf(v) == -1)\n                x2.push(v);\n\n            // R, P\\v, X u v                    \n            stack.push([r.slice(), p2, x2])\n\n            // R u v\n            if (r.indexOf(v) == -1)\n                r.push(v)\n\n            newStep = [r]\n\n            p = swiftSet.intersection(p2, v.neighbors().toArray())\n            p2 = []\n            for (var i = 0; i < p.length; i++) {\n                if (p2.indexOf(p[i]) == -1)\n                    p2.push(p[i])\n            }\n            newStep.push(p2)\n\n            x = swiftSet.intersection(x2, v.neighbors().toArray())\n            x2 = []\n            for (var i = 0; i < x.length; i++) {\n                if (x2.indexOf(x[i]) == -1)\n                    x2.push(x[i])\n            }\n            newStep.push(x2)\n\n            stack.push(newStep)\n        }\n    }\n\n\n    return cliques;\n}\n*/\n\nexport function findFullEgoNetwork(\n  nodes: Node[],\n  config?: Record<string, any>\n): Motif[] {\n  const motifs: Motif[] = [];\n  let ns;\n  let ls;\n  let finalLinks;\n  let n;\n  for (let i = 0; i < nodes.length; i++) {\n    n = nodes[i];\n    finalLinks = [];\n    ns = n.neighbors().removeDuplicates();\n    ls = ns.links().removeDuplicates().toArray();\n    ns = ns.toArray().concat(n);\n    for (let j = 0; j < ls.length; j++) {\n      if (ls[j] == undefined) continue;\n      if (ns.indexOf(ls[j].source) > -1 && ns.indexOf(ls[j].target) > -1) {\n        finalLinks.push(ls[j]);\n      }\n    }\n    motifs.push(new Motif(ns, finalLinks));\n  }\n  return motifs;\n}\n\n/*\nexport function findStars(nodes: Node[], config?: any) {\n    if (!config)\n        var config: any = {}\n\n    if (config.minLinkCount == undefined)\n        config.minLinkCount = 5;\n\n    if (config.minNeighborCount == undefined) {\n        config.minNeighborCount = 5;\n        config.minLinkCount = 5;\n    }\n\n    if (config.links == undefined)\n        config.links = nodes[0].g.links().toArray();\n\n    var motifs: Motif[] = [];\n    var n: Node;\n    var lls: Link[]\n    var m: Motif;\n    var neighbors;\n    for (var i = 0; i < nodes.length; i++) {\n        n = nodes[i];\n        lls = n.links().toArray();\n        lls = swiftSet.intersection(lls, config.links);\n        if (lls.length <= config.minLinkCount)\n            continue\n\n        // count real neighbors\n        neighbors = []\n        for (var j = 0; j < lls.length; j++) {\n            if (neighbors.indexOf(lls[j].other(n)) == -1)\n                neighbors.push(lls[j].other(n))\n        }\n        if (neighbors.length <= config.minNeighborCount)\n            continue;\n\n        // create motif\n        m = new Motif([n], [])\n        for (var j = 0; j < lls.length; j++) {\n            m.links.push(lls[j])\n            m.nodes.push(lls[j].other(n))\n        }\n        motifs.push(m);\n    }\n    return motifs;\n}\n*/\n\n/*\n// returns triangles\nexport function findTriangles(nodes: Node[], config?: any): Motif[] {\n\n    if (!config)\n        var config: any = {}\n\n    if (config.links == undefined)\n        config.links = nodes[0].g.links().toArray();\n\n\n\n    var motifs: Motif[] = [];\n    var g: DynamicGraph = nodes[0].g;\n\n    var l: Link;\n    var s: Node, t: Node\n    var ns: Node[], nt: Node[];\n    var common: Node[]\n    var n: Node;\n    var ll1: Link[], ll2: Link[];\n    var found;\n    var m: Motif;\n    for (var i = 0; i < config.links.length; i++) {\n        s = config.links[i].source;\n        ns = s.neighbors().toArray();\n        ns = swiftSet.intersection(ns, nodes);\n        if (ns.length == 0)\n            continue;\n        t = config.links[i].target;\n        nt = t.neighbors().toArray();\n        nt = swiftSet.intersection(nt, nodes);\n        if (nt.length == 0)\n            continue;\n        common = swiftSet.intersection(ns, nt);\n        // remove s and t from common neighbors\n        common = swiftSet.difference(common, [s, t])\n        if (common.length == 0)\n            continue;\n\n        // create triangle motifs\n        for (var j = 0; j < common.length; j++) {\n            n = common[j];\n            ll1 = swiftSet.intersection(g.linksBetween(s, n).toArray(), config.links);\n            if (ll1.length == 0) continue;\n            ll2 = swiftSet.intersection(g.linksBetween(t, n).toArray(), config.links);\n            if (ll2.length == 0) continue;\n\n            ll1 = ll1.concat(ll2);\n            ll1.push(config.links[i]);\n            motifs.push(new Motif(\n                [s, t, n],\n                ll1\n            ))\n        }\n    }\n\n    return motifs;\n}\n*/\n\n//}\n","// Copyright (c) 2013 Pieroxy <pieroxy@pieroxy.net>\n// This work is free. You can redistribute it and/or modify it\n// under the terms of the WTFPL, Version 2\n// For more information see LICENSE.txt or http://www.wtfpl.net/\n//\n// For more information, the home page:\n// http://pieroxy.net/blog/pages/lz-string/testing.html\n//\n// LZ-based compression algorithm, version 1.4.4\nvar LZString = (function() {\n\n// private property\nvar f = String.fromCharCode;\nvar keyStrBase64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\nvar keyStrUriSafe = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$\";\nvar baseReverseDic = {};\n\nfunction getBaseValue(alphabet, character) {\n  if (!baseReverseDic[alphabet]) {\n    baseReverseDic[alphabet] = {};\n    for (var i=0 ; i<alphabet.length ; i++) {\n      baseReverseDic[alphabet][alphabet.charAt(i)] = i;\n    }\n  }\n  return baseReverseDic[alphabet][character];\n}\n\nvar LZString = {\n  compressToBase64 : function (input) {\n    if (input == null) return \"\";\n    var res = LZString._compress(input, 6, function(a){return keyStrBase64.charAt(a);});\n    switch (res.length % 4) { // To produce valid Base64\n    default: // When could this happen ?\n    case 0 : return res;\n    case 1 : return res+\"===\";\n    case 2 : return res+\"==\";\n    case 3 : return res+\"=\";\n    }\n  },\n\n  decompressFromBase64 : function (input) {\n    if (input == null) return \"\";\n    if (input == \"\") return null;\n    return LZString._decompress(input.length, 32, function(index) { return getBaseValue(keyStrBase64, input.charAt(index)); });\n  },\n\n  compressToUTF16 : function (input) {\n    if (input == null) return \"\";\n    return LZString._compress(input, 15, function(a){return f(a+32);}) + \" \";\n  },\n\n  decompressFromUTF16: function (compressed) {\n    if (compressed == null) return \"\";\n    if (compressed == \"\") return null;\n    return LZString._decompress(compressed.length, 16384, function(index) { return compressed.charCodeAt(index) - 32; });\n  },\n\n  //compress into uint8array (UCS-2 big endian format)\n  compressToUint8Array: function (uncompressed) {\n    var compressed = LZString.compress(uncompressed);\n    var buf=new Uint8Array(compressed.length*2); // 2 bytes per character\n\n    for (var i=0, TotalLen=compressed.length; i<TotalLen; i++) {\n      var current_value = compressed.charCodeAt(i);\n      buf[i*2] = current_value >>> 8;\n      buf[i*2+1] = current_value % 256;\n    }\n    return buf;\n  },\n\n  //decompress from uint8array (UCS-2 big endian format)\n  decompressFromUint8Array:function (compressed) {\n    if (compressed===null || compressed===undefined){\n        return LZString.decompress(compressed);\n    } else {\n        var buf=new Array(compressed.length/2); // 2 bytes per character\n        for (var i=0, TotalLen=buf.length; i<TotalLen; i++) {\n          buf[i]=compressed[i*2]*256+compressed[i*2+1];\n        }\n\n        var result = [];\n        buf.forEach(function (c) {\n          result.push(f(c));\n        });\n        return LZString.decompress(result.join(''));\n\n    }\n\n  },\n\n\n  //compress into a string that is already URI encoded\n  compressToEncodedURIComponent: function (input) {\n    if (input == null) return \"\";\n    return LZString._compress(input, 6, function(a){return keyStrUriSafe.charAt(a);});\n  },\n\n  //decompress from an output of compressToEncodedURIComponent\n  decompressFromEncodedURIComponent:function (input) {\n    if (input == null) return \"\";\n    if (input == \"\") return null;\n    input = input.replace(/ /g, \"+\");\n    return LZString._decompress(input.length, 32, function(index) { return getBaseValue(keyStrUriSafe, input.charAt(index)); });\n  },\n\n  compress: function (uncompressed) {\n    return LZString._compress(uncompressed, 16, function(a){return f(a);});\n  },\n  _compress: function (uncompressed, bitsPerChar, getCharFromInt) {\n    if (uncompressed == null) return \"\";\n    var i, value,\n        context_dictionary= {},\n        context_dictionaryToCreate= {},\n        context_c=\"\",\n        context_wc=\"\",\n        context_w=\"\",\n        context_enlargeIn= 2, // Compensate for the first entry which should not count\n        context_dictSize= 3,\n        context_numBits= 2,\n        context_data=[],\n        context_data_val=0,\n        context_data_position=0,\n        ii;\n\n    for (ii = 0; ii < uncompressed.length; ii += 1) {\n      context_c = uncompressed.charAt(ii);\n      if (!Object.prototype.hasOwnProperty.call(context_dictionary,context_c)) {\n        context_dictionary[context_c] = context_dictSize++;\n        context_dictionaryToCreate[context_c] = true;\n      }\n\n      context_wc = context_w + context_c;\n      if (Object.prototype.hasOwnProperty.call(context_dictionary,context_wc)) {\n        context_w = context_wc;\n      } else {\n        if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)) {\n          if (context_w.charCodeAt(0)<256) {\n            for (i=0 ; i<context_numBits ; i++) {\n              context_data_val = (context_data_val << 1);\n              if (context_data_position == bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n            }\n            value = context_w.charCodeAt(0);\n            for (i=0 ; i<8 ; i++) {\n              context_data_val = (context_data_val << 1) | (value&1);\n              if (context_data_position == bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = value >> 1;\n            }\n          } else {\n            value = 1;\n            for (i=0 ; i<context_numBits ; i++) {\n              context_data_val = (context_data_val << 1) | value;\n              if (context_data_position ==bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = 0;\n            }\n            value = context_w.charCodeAt(0);\n            for (i=0 ; i<16 ; i++) {\n              context_data_val = (context_data_val << 1) | (value&1);\n              if (context_data_position == bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = value >> 1;\n            }\n          }\n          context_enlargeIn--;\n          if (context_enlargeIn == 0) {\n            context_enlargeIn = Math.pow(2, context_numBits);\n            context_numBits++;\n          }\n          delete context_dictionaryToCreate[context_w];\n        } else {\n          value = context_dictionary[context_w];\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n\n\n        }\n        context_enlargeIn--;\n        if (context_enlargeIn == 0) {\n          context_enlargeIn = Math.pow(2, context_numBits);\n          context_numBits++;\n        }\n        // Add wc to the dictionary.\n        context_dictionary[context_wc] = context_dictSize++;\n        context_w = String(context_c);\n      }\n    }\n\n    // Output the code for w.\n    if (context_w !== \"\") {\n      if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)) {\n        if (context_w.charCodeAt(0)<256) {\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n          }\n          value = context_w.charCodeAt(0);\n          for (i=0 ; i<8 ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n        } else {\n          value = 1;\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1) | value;\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = 0;\n          }\n          value = context_w.charCodeAt(0);\n          for (i=0 ; i<16 ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n        }\n        context_enlargeIn--;\n        if (context_enlargeIn == 0) {\n          context_enlargeIn = Math.pow(2, context_numBits);\n          context_numBits++;\n        }\n        delete context_dictionaryToCreate[context_w];\n      } else {\n        value = context_dictionary[context_w];\n        for (i=0 ; i<context_numBits ; i++) {\n          context_data_val = (context_data_val << 1) | (value&1);\n          if (context_data_position == bitsPerChar-1) {\n            context_data_position = 0;\n            context_data.push(getCharFromInt(context_data_val));\n            context_data_val = 0;\n          } else {\n            context_data_position++;\n          }\n          value = value >> 1;\n        }\n\n\n      }\n      context_enlargeIn--;\n      if (context_enlargeIn == 0) {\n        context_enlargeIn = Math.pow(2, context_numBits);\n        context_numBits++;\n      }\n    }\n\n    // Mark the end of the stream\n    value = 2;\n    for (i=0 ; i<context_numBits ; i++) {\n      context_data_val = (context_data_val << 1) | (value&1);\n      if (context_data_position == bitsPerChar-1) {\n        context_data_position = 0;\n        context_data.push(getCharFromInt(context_data_val));\n        context_data_val = 0;\n      } else {\n        context_data_position++;\n      }\n      value = value >> 1;\n    }\n\n    // Flush the last char\n    while (true) {\n      context_data_val = (context_data_val << 1);\n      if (context_data_position == bitsPerChar-1) {\n        context_data.push(getCharFromInt(context_data_val));\n        break;\n      }\n      else context_data_position++;\n    }\n    return context_data.join('');\n  },\n\n  decompress: function (compressed) {\n    if (compressed == null) return \"\";\n    if (compressed == \"\") return null;\n    return LZString._decompress(compressed.length, 32768, function(index) { return compressed.charCodeAt(index); });\n  },\n\n  _decompress: function (length, resetValue, getNextValue) {\n    var dictionary = [],\n        next,\n        enlargeIn = 4,\n        dictSize = 4,\n        numBits = 3,\n        entry = \"\",\n        result = [],\n        i,\n        w,\n        bits, resb, maxpower, power,\n        c,\n        data = {val:getNextValue(0), position:resetValue, index:1};\n\n    for (i = 0; i < 3; i += 1) {\n      dictionary[i] = i;\n    }\n\n    bits = 0;\n    maxpower = Math.pow(2,2);\n    power=1;\n    while (power!=maxpower) {\n      resb = data.val & data.position;\n      data.position >>= 1;\n      if (data.position == 0) {\n        data.position = resetValue;\n        data.val = getNextValue(data.index++);\n      }\n      bits |= (resb>0 ? 1 : 0) * power;\n      power <<= 1;\n    }\n\n    switch (next = bits) {\n      case 0:\n          bits = 0;\n          maxpower = Math.pow(2,8);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n        c = f(bits);\n        break;\n      case 1:\n          bits = 0;\n          maxpower = Math.pow(2,16);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n        c = f(bits);\n        break;\n      case 2:\n        return \"\";\n    }\n    dictionary[3] = c;\n    w = c;\n    result.push(c);\n    while (true) {\n      if (data.index > length) {\n        return \"\";\n      }\n\n      bits = 0;\n      maxpower = Math.pow(2,numBits);\n      power=1;\n      while (power!=maxpower) {\n        resb = data.val & data.position;\n        data.position >>= 1;\n        if (data.position == 0) {\n          data.position = resetValue;\n          data.val = getNextValue(data.index++);\n        }\n        bits |= (resb>0 ? 1 : 0) * power;\n        power <<= 1;\n      }\n\n      switch (c = bits) {\n        case 0:\n          bits = 0;\n          maxpower = Math.pow(2,8);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n\n          dictionary[dictSize++] = f(bits);\n          c = dictSize-1;\n          enlargeIn--;\n          break;\n        case 1:\n          bits = 0;\n          maxpower = Math.pow(2,16);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n          dictionary[dictSize++] = f(bits);\n          c = dictSize-1;\n          enlargeIn--;\n          break;\n        case 2:\n          return result.join('');\n      }\n\n      if (enlargeIn == 0) {\n        enlargeIn = Math.pow(2, numBits);\n        numBits++;\n      }\n\n      if (dictionary[c]) {\n        entry = dictionary[c];\n      } else {\n        if (c === dictSize) {\n          entry = w + w.charAt(0);\n        } else {\n          return null;\n        }\n      }\n      result.push(entry);\n\n      // Add w+entry[0] to the dictionary.\n      dictionary[dictSize++] = w + entry.charAt(0);\n      enlargeIn--;\n\n      w = entry;\n\n      if (enlargeIn == 0) {\n        enlargeIn = Math.pow(2, numBits);\n        numBits++;\n      }\n\n    }\n  }\n};\n  return LZString;\n})();\n\nif (typeof define === 'function' && define.amd) {\n  define(function () { return LZString; });\n} else if( typeof module !== 'undefined' && module != null ) {\n  module.exports = LZString\n}\n","import { DataSet, isValidIndex } from \"./dynamicgraphutils\";\nimport { DynamicGraph } from \"./dynamicgraph\";\nimport * as LZString from \"lz-string\";\n\n/********* MOVED FROM DATAMANAGER TO DYNAMICGRAPH **********/\n\nexport interface DataManagerOptions {\n  keepOnlyOneSession: boolean;\n}\n\nexport class DataManager {\n  constructor(options?: DataManagerOptions) {\n    if (options) {\n      // initialize stuff differently here\n      if (options.keepOnlyOneSession) this.setOptions(options);\n    } else {\n      this.keepOnlyOneSession = false;\n    }\n  }\n\n  setOptions(options: DataManagerOptions): void {\n    this.keepOnlyOneSession = options.keepOnlyOneSession;\n  }\n\n  // current dynamic graph of the visualization.\n  // The first time the getGraph() function is called\n  // that graph object is created and populated.\n  // The second time, it's just retrieved.\n  dynamicGraph?: DynamicGraph;\n\n  keepOnlyOneSession = false;\n  session = \"\";\n\n  sessionDataPrefix = \"ncubesession\";\n\n  // sessionDataPrefix: string = \"\";\n\n  clearSessionData(session: string): void {\n    const searchPrefix = this.sessionDataPrefix + this.SEP + session;\n    // var searchPrefix = session;\n    const keysToClear: string[] = [];\n    for (let i = 0; i < localStorage.length; i++) {\n      const key = localStorage.key(i);\n      if (!key) continue;\n      if (key.indexOf(searchPrefix) == 0) keysToClear.push(key);\n      // these are the old keys that we used to store before we\n      // added support for multiple sessions\n      else if (key.indexOf(\"connectoscope1\") == 0) keysToClear.push(key);\n    }\n    for (let i = 0; i < keysToClear.length; i++) {\n      const k = keysToClear[i];\n      localStorage.removeItem(k);\n    }\n  }\n\n  clearAllSessionData(): void {\n    this.clearSessionData(\"\");\n  }\n\n  isSessionCached(session: string, dataSetName: string): boolean {\n    const prefix =\n      this.sessionDataPrefix + this.SEP + session + this.SEP + dataSetName;\n    //var firstSessionKey: string = null;\n    for (let i = 0; i < localStorage.length; i++) {\n      const key = localStorage.key(i);\n      if (key && key.indexOf(prefix) == 0) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Import a data set into networkcube's local storage.\n   * @param  {string}  session - current session id\n   * @param  {DataSet} data    - a networkcube.DataSet\n   */\n  importData(session: string, data: DataSet): void {\n    this.session = session;\n\n    // check if all data (tables + schemas) are there\n    if (!data.nodeTable && !data.linkTable) {\n      console.log(\"Empty tables. No data imported.\");\n      return;\n    }\n\n    if (!data.nodeTable) {\n      console.log(\"[n3] Node table missing!\");\n    }\n    if (!data.linkTable) {\n      console.log(\"[n3] Link table missing!\");\n    }\n    if (!data.nodeSchema) {\n      console.log(\"[n3] Node schema missing!\");\n    }\n    if (!data.linkSchema) {\n      console.log(\"[n3] Link schema missing!\");\n    }\n\n    // format data\n    for (let i = 0; i < data.nodeTable.length; i++) {\n      for (let j = 0; j < data.nodeTable[i].length; j++) {\n        if (typeof data.nodeTable[i][j] == \"string\")\n          data.nodeTable[i][j] = data.nodeTable[i][j].trim();\n      }\n    }\n    for (let i = 0; i < data.linkTable.length; i++) {\n      for (let j = 0; j < data.linkTable[i].length; j++) {\n        if (typeof data.linkTable[i][j] == \"string\")\n          data.linkTable[i][j] = data.linkTable[i][j].trim();\n      }\n    }\n\n    // this.saveToStorage(data.name, this.NODE_TABLE, data.nodeTable);\n    // this.saveToStorage(data.name, this.NODE_SCHEMA, data.nodeSchema);\n    // this.saveToStorage(data.name, this.LINK_SCHEMA, data.linkSchema);\n    // this.saveToStorage(data.name, this.LINK_TABLE, data.linkTable);\n    // // if(data.locationTable){\n    // this.saveToStorage(data.name, this.LOCATION_TABLE, data.locationTable);\n    // this.saveToStorage(data.name, this.LOCATION_SCHEMA, data.locationSchema);\n    // }\n\n    // In order to initialize the dynamic graph, our schema must be sufficiently well-defined\n    if (this.isSchemaWellDefined(data)) {\n      console.log(\"data is well-schematized, caching dynamicGraph\");\n      // in order to ensure that we have enough quota, we only keep one session\n      // cached at a time.\n      if (this.keepOnlyOneSession) this.clearAllSessionData();\n\n      const graphForCaching: DynamicGraph = new DynamicGraph();\n      graphForCaching.initDynamicGraph(data);\n      // CACHEGRAPH store DynamicGraph in localstorage\n      graphForCaching.saveDynamicGraph(this);\n\n      // CACHEGRAPH : this code is strictly for diagnostics;\n      const doubleCheckSave = false;\n      if (doubleCheckSave) {\n        const testGraph: DynamicGraph = new DynamicGraph();\n        testGraph.loadDynamicGraph(this, data.name);\n        testGraph.debugCompareTo(graphForCaching);\n      }\n    } else {\n      console.log(\"data is not well-schematized, so not caching dynamicGraph\");\n    }\n  }\n\n  // Strings used to access local storage\n  SEP = \"_\";\n  // NODE_TABLE: string = 'networkcube.nodetable';\n  // LINK_TABLE: string = 'networkcube.linktable';\n  // NODE_SCHEMA: string = 'networkcube.nodeschema';\n  // LINK_SCHEMA: string = 'networkcube.linkschema';\n  // LOCATION_TABLE: string = 'networkcube.locationtable';\n  // LOCATION_SCHEMA: string = 'networkcube.locationschema';\n  // GRAPH: string = 'networkcube.graph';\n\n  // storage primitives /////////////////////////////////////\n  //\n  saveToStorage<T>(\n    dataName: string,\n    valueName: string,\n    value: T,\n    replacer?: (key: string, value: any) => any\n  ): void {\n    if (value == undefined) {\n      console.log(\n        \"attempting to save undefined value. aborting\",\n        dataName,\n        valueName\n      );\n      return;\n    }\n    const stringifyResult = JSON.stringify(value, replacer);\n\n    let stringToSave;\n    if (stringifyResult.length > 1024 * 1024 * 4)\n      stringToSave = LZString.compress(stringifyResult);\n    else stringToSave = stringifyResult;\n\n    localStorage[\n      this.sessionDataPrefix +\n        this.SEP +\n        this.session +\n        this.SEP +\n        dataName +\n        this.SEP +\n        valueName\n    ] = stringToSave;\n  }\n\n  // TODO: I think the state argument is unused and can be removed\n  getFromStorage<TResult>(\n    dataName: string,\n    valueName: string,\n    reviver?: (key: any, value: any, state: any) => any,\n    state?: any\n  ): TResult | undefined {\n    // : TResult\n\n    console.assert(this.session != \"\");\n\n    let statefulReviver;\n    if (reviver)\n      statefulReviver = function (key: any, value: any): any {\n        return reviver(key, value, state);\n      };\n    else statefulReviver = undefined;\n\n    const storedResult =\n      localStorage[\n        this.sessionDataPrefix +\n          this.SEP +\n          this.session +\n          this.SEP +\n          dataName +\n          this.SEP +\n          valueName\n      ];\n\n    if (storedResult && storedResult != \"undefined\") {\n      // we try to detect whether the string was compressed or not. Given that it is\n      // JSON, we would expect it to begin with either a quote, a bracket, or a curly-brace\n      let parseText;\n      if (storedResult == \"true\") {\n        parseText = true;\n      } else if (storedResult == \"false\") {\n        parseText = false;\n      } else if (\"\\\"'[{0123456789\".indexOf(storedResult[0]) >= 0)\n        parseText = storedResult;\n      else parseText = LZString.decompress(storedResult);\n\n      return <TResult>JSON.parse(parseText, statefulReviver);\n    } else {\n      return undefined;\n    }\n  }\n\n  removeFromStorage(dataName: string, valueName: string): void {\n    localStorage.removeItem(\n      this.sessionDataPrefix +\n        this.SEP +\n        this.session +\n        this.SEP +\n        dataName +\n        this.SEP +\n        valueName\n    );\n  }\n\n  //\n  // end storage primitives //////////////////////////////\n\n  // GRAPH\n\n  getGraph(session: string, dataname: string): DynamicGraph {\n    this.session = session;\n    if (!this.dynamicGraph || this.dynamicGraph.name != dataname) {\n      this.dynamicGraph = new DynamicGraph();\n      this.dynamicGraph.loadDynamicGraph(this, dataname);\n    }\n    return this.dynamicGraph;\n  }\n\n  isSchemaWellDefined(data: DataSet): boolean {\n    console.log(\"isSchemaWellDefined\");\n    if (data.locationTable && !isValidIndex(data.locationSchema.id))\n      return false;\n    if (data.nodeTable.length > 0 && !isValidIndex(data.nodeSchema.id))\n      return false;\n    if (\n      data.linkTable.length > 0 &&\n      !(\n        isValidIndex(data.linkSchema.id) &&\n        isValidIndex(data.linkSchema.source) &&\n        isValidIndex(data.linkSchema.target)\n      )\n    )\n      return false;\n\n    return true;\n  }\n}\n","import { getUrlVars } from \"./utils\";\nimport { DataSet } from \"./dynamicgraphutils\";\nimport { DynamicGraph } from \"./dynamicgraph\";\nimport { DataManager, DataManagerOptions } from \"./datamanager\";\n\nimport { TIME_FORMAT } from \"./dates\";\n\n/** A collection of Networkcube's  global function availeble\n * through networkcube.myFunc()\n * */\n\n/**\n * Returns the networkcube standard time format\n * @return {[type]} [description]\n */\nexport function timeFormat(): string {\n  return TIME_FORMAT;\n}\n\n// GLOBAL VARIABLES\ndeclare global {\n  interface Window {\n    dataManager: DataManager;\n  }\n}\n\nlet dataManager: DataManager;\nif (typeof window !== \"undefined\") {\n  if (!window.dataManager) {\n    window.dataManager = new DataManager();\n  }\n  dataManager = window.dataManager;\n}\n\nlet session: string;\n\nexport function getSessionId(): string {\n  return session;\n}\n\nexport function setDataManagerOptions(options: DataManagerOptions): void {\n  dataManager.setOptions(options);\n}\n\nexport function isSessionCached(session: string, dataSetName: string): boolean {\n  return dataManager.isSessionCached(session, dataSetName);\n}\n\n// DATA\n/**\n * Imports a data set into network cube.\n * @param  {string}  sessionName [description]\n * @param  {DataSet} data    [description]\n */\nexport function importData(sessionName: string, data: DataSet): void {\n  console.log(\"[n3] Import data\", data.name);\n  session = sessionName;\n  dataManager.importData(sessionName, data);\n}\n\nexport function clearAllDataManagerSessionCaches(): void {\n  dataManager.clearAllSessionData();\n}\n\nexport function getDynamicGraph(\n  dataName?: string,\n  sessionName?: string\n): DynamicGraph {\n  const vars = getUrlVars();\n  if (!dataName) dataName = (vars as any)[\"datasetName\"];\n  if (!sessionName) session = (vars as any)[\"session\"];\n  else session = sessionName;\n\n  return dataManager.getGraph(session, dataName as string);\n}\n\n// VIEWS + VISUALIZATIONS\n\n// opens a new window and loads a visualization of type vistype,\n// // with the data set dataname\nexport function openVisualizationWindow(\n  session: string,\n  visUri: string,\n  dataName: string\n): void {\n  openView(session, visUri, dataName, false);\n}\n\n// opens a new tab and loads a visualization of type vistype,\n// // with the data set dataname\nexport function openVisualizationTab(\n  session: string,\n  visUri: string,\n  dataName: string\n): void {\n  openView(session, visUri, dataName, true);\n}\n\n// create a tab that shows one of the specified visualizations at a time\nexport function createTabVisualizations(\n  parentId: string,\n  visSpec: any[],\n  session: string,\n  dataName: string,\n  width: number,\n  height: number,\n  visParams?: any\n): void {\n  const parent = document.querySelector(\"#\" + parentId);\n  if (!parent) {\n    return;\n  }\n\n  const tabDiv = document.createElement(\"div\");\n  parent.appendChild(tabDiv);\n\n  const visDiv = document.createElement(\"div\");\n  parent.appendChild(visDiv);\n\n  const ul = document.createElement(\"ul\");\n  tabDiv.appendChild(ul);\n  ul.outerHTML =\n    '<ul class=\"networkcube-tabs\"\\\n                    style=\"\\\n                        list-style-type: none;\\\n                        margin: 0;\\\n                        padding:2px;\\\n                        overflow: hidden;\\\n                        border: none;\\\n                        background-color: #f1f1f1;\"\\\n                    ></ul>';\n\n  // create tabs and divs\n  for (let i = 0; i < visSpec.length; i++) {\n    visSpec[i].name = visSpec[i].name.replace(\" \", \"-\");\n\n    const li = document.createElement(\"li\");\n    ul.appendChild(li);\n    li.outerHTML = `\n<li style=\"float: left;\">\n  <a style=\"\\\n      display: inline-block;\\\n      color: black;\\\n      margin-right: 8px;\\\n      margin-left: 8px;\\\n      padding: 5px;\\\n      text-align: left;\\\n      text-decoration: none;\\\n      transition: 0.3s;\\\n      font-weight: 800;\\\n      border: #fff 1px solid;\\\n      border-radius: 5px;\\\n      font-size: 13px;\" href=\"#\" class=\"networkcube-tablinks\" onclick=\"networkcube.switchVisTab(event, '${visSpec[i].name}')\">\n          ${visSpec[i].name}\n  </a>\n</li>`;\n\n    const div = document.createElement(\"div\");\n    visDiv.appendChild(div);\n    div.outerHTML = `<div id=\"networkcube-visTab-${\n      visSpec[i].name\n    }\" style=\"display:${\n      i == 0 ? \"block\" : \"none\"\n    };\" class=\"networkcube-visTabContent\"></div>`;\n\n    createVisualizationIFrame(\n      \"networkcube-visTab-\" + visSpec[i].name,\n      visSpec[i].url,\n      session,\n      dataName,\n      width,\n      height,\n      visParams\n    );\n  }\n}\n\nexport function switchVisTab(evt: any, visName: string): void {\n  // Get all elements with class=\"tabcontent\" and hide them\n  const tabcontent = document.getElementsByClassName(\n    \"networkcube-visTabContent\"\n  ) as HTMLCollectionOf<HTMLElement>;\n  for (let i = 0; i < tabcontent.length; i++) {\n    tabcontent[i].style.display = \"none\";\n  }\n\n  // Get all elements with class=\"tablinks\" and remove the class \"active\"\n  const tablinks = document.getElementsByClassName(\"networkcube-tablinks\");\n  for (let i = 0; i < tablinks.length; i++) {\n    tablinks[i].className = tablinks[i].className.replace(\" active\", \"\");\n  }\n\n  // Show the current tab, and add an \"active\" class to the link that opened the tab\n  // ADD IF GETELEMENT IS NULL\n  const element = document.getElementById(\"networkcube-visTab-\" + visName);\n  if (element) {\n    element.style.display = \"block\";\n  }\n  evt.currentTarget.className += \" active\";\n}\n\n// returns an iframe that loads a visualization of type vistype,\n// with the data set dataname\nexport function createVisualizationIFrame(\n  parentId: string,\n  visUri: string,\n  session: string,\n  dataName: string,\n  width: number,\n  height: number,\n  visParams?: any\n): HTMLIFrameElement | undefined {\n  const iframe = document.createElement(\"iframe\");\n  iframe.style.width = width.toString();\n  iframe.style.height = height.toString();\n\n  const parent = document.getElementById(parentId);\n  if (!parent) {\n    return;\n  }\n  parent.appendChild(iframe);\n\n  let visParamString = \"\";\n  for (const prop in visParams) {\n    visParamString += \"&\" + prop + \"=\" + visParams[prop];\n  }\n\n  if (!visUri.startsWith(\"http\")) {\n    let server;\n    if (window.location.port)\n      server =\n        location.protocol +\n        \"//\" +\n        window.location.hostname +\n        \":\" +\n        window.location.port +\n        \"\" +\n        window.location.pathname;\n    else\n      server =\n        location.protocol +\n        \"//\" +\n        window.location.hostname +\n        \"\" +\n        window.location.pathname;\n    visUri = server + \"/node_modules/vistorian-\" + visUri + \"/web/index.html\";\n  }\n\n  iframe.src = `${visUri}?session=${session}&datasetName=${dataName}${visParamString}`;\n\n  if (width) iframe.width = width.toString();\n  if (height) iframe.height = height.toString();\n\n  if (\n    visParams != undefined &&\n    Object.prototype.hasOwnProperty.call(visParams, \"scrolling\")\n  ) {\n    iframe.scrolling = visParams.scrolling;\n  }\n\n  return iframe;\n}\n\n//\n// // Internal convenient function to open a window\nfunction openView(\n  session: string,\n  visUri: string,\n  dataname: string,\n  tab: boolean\n) {\n  if (!visUri.startsWith(\"http\")) {\n    let server;\n    if (window.location.port)\n      server =\n        location.protocol +\n        \"//\" +\n        window.location.hostname +\n        \":\" +\n        window.location.port +\n        \"\" +\n        window.location.pathname;\n    else\n      server =\n        location.protocol +\n        \"//\" +\n        window.location.hostname +\n        \"\" +\n        window.location.pathname;\n    visUri = server + \"/node_modules/vistorian-\" + visUri + \"/web/index.html\";\n  }\n\n  const url = visUri + \"?session=\" + session + \"&datasetName=\" + dataname;\n\n  if (tab) window.open(url, \"_blank\");\n  else window.open(url);\n}\n\nexport function getURLString(dataName: string): string {\n  return \"?session=\" + session + \"&datasetName=\" + dataName;\n}\n\n/// UTILITY FUNCTIONS\nexport enum OrderType {\n  Local,\n  Global,\n  Data,\n}\n\nexport function isTrackingEnabled(): boolean {\n  const value = localStorage.getItem(\"NETWORKCUBE_IS_TRACKING_ENABLED\");\n  return value == \"true\";\n}\n\nexport function isTrackingSet(): boolean {\n  const value = localStorage.getItem(\"NETWORKCUBE_IS_TRACKING_ENABLED\");\n  return value !== null;\n}\n\nexport function deleteData(dataSetName: string): void {\n  // deletes a network\n  getDynamicGraph(dataSetName).delete(dataManager);\n}\n","import * as d3 from \"d3\";\n\nimport { DataSet, LinkSchema, NodeSchema } from \"./dynamicgraphutils\";\nimport { DynamicGraph } from \"./dynamicgraph\";\nimport * as main from \"./main\";\nimport { addDate, formatStandardTime } from \"./dates\";\n\nexport function loadFromURL(\n  format: string,\n  url: string,\n  callback: (dataset: DataSet) => void,\n  name?: string\n) {\n  name = name ? name : url.split(\"=\")[0];\n  const datasetName: string = name ? name : \"UNNAMED\";\n\n  const textFormats: Map<string, (url: string, data: any) => DataSet> = new Map(\n    [\n      [\"pajek\", parsePajek],\n      [\"mat\", parseMat],\n      [\"gedcom\", parseGEDCOM],\n      [\"linkList\", parseLinkList],\n      [\"matrix\", parseMatrix],\n    ]\n  );\n\n  if (textFormats.has(format)) {\n    d3.text(url).then((data: any) => {\n      const parser = jsonFormats.get(format);\n      parser && callback(parser(datasetName, data));\n    });\n  }\n\n  const jsonFormats: Map<string, (url: string, data: any) => DataSet> = new Map(\n    [\n      [\"dyson\", parseDyson],\n      [\"json\", parseJSON],\n      [\"jsonList\", parseJSONList],\n      [\"NCube\", parseNCube],\n    ]\n  );\n\n  if (jsonFormats.has(format)) {\n    d3.json(url).then((data: any) => {\n      if (!data) {\n        return;\n      }\n\n      const parser = jsonFormats.get(format);\n      parser && callback(parser(datasetName, data));\n    });\n  }\n\n  if (format === \"XML\") {\n    d3.xml(url).then((data: any) => {\n      if (!data) {\n        return;\n      }\n\n      const parser = parseXML;\n      parser && callback(parser(datasetName, data));\n    });\n  }\n}\n\nexport function parseDyson(name: string, data: any): DataSet {\n  // create node table\n  const nodeTable = [];\n  const nodeSchema = { id: 0, label: 1 };\n  const nodes = data.nodes;\n  for (let i = 0; i < nodes.length; i++) {\n    nodeTable.push([i, nodes[i].name]);\n  }\n  const linkTable = [];\n  const linkSchema = { id: 0, source: 1, target: 2, weight: 3, time: 4 };\n  const times = data.times;\n  let m;\n  for (let i = 0; i < times.length; i++) {\n    m = times[i].matrix;\n    for (let s = 0; s < m.length; s++) {\n      for (let t = 0; t < m.length; t++) {\n        linkTable.push([s * m.length + t, s, t, m[s][t], i]);\n      }\n    }\n  }\n  return new DataSet({\n    nodeTable: nodeTable,\n    linkTable: linkTable,\n    linkSchema: linkSchema,\n    nodeSchema: nodeSchema,\n    name: name,\n  });\n}\n\n/** Loads a .csv file from the indicated url*/\nexport function loadLinkTable(\n  url: string,\n  callBack: (dataset: DataSet) => void,\n  linkSchema: LinkSchema,\n  delimiter: string,\n  timeFormat?: string\n): void {\n  if (timeFormat == undefined) timeFormat = \"%Q\";\n\n  // Check if linkSchema is well defined:\n  if (linkSchema.source == undefined) {\n    console.error(\n      \"[n3] Link Schema does not have -source- attribute. Import aborted.\"\n    );\n    return;\n  }\n  if (linkSchema.target == undefined) {\n    console.error(\n      \"[n3] Link Schema does not have -target- attribute. Import aborted.\"\n    );\n    return;\n  }\n\n  fetch(url)\n    .then((response) => response.text())\n    .then((text) => {\n      const array = [];\n      const rows = text.split(\"\\r\\n\");\n      for (let i = 1; i < rows.length; i++) {\n        array.push(rows[i].split(delimiter));\n      }\n      const linkData = array;\n      // get references to tables\n      const nodeTable: any[] = [];\n\n      // var nodeIds: number[] = [];\n      const names: string[] = [];\n\n      const nodeSchema: NodeSchema = new NodeSchema(0);\n      nodeSchema.label = 1;\n      let id_source: number;\n      let id_target: number;\n      let name: string;\n\n      const linkTable: any[] = [];\n      const newLinkSchema: LinkSchema = new LinkSchema(0, 1, 2);\n      // fill new link schema\n      let colCount = 3;\n      for (const prop in linkSchema) {\n        if (prop != \"source\" && prop != \"target\")\n          (newLinkSchema as any)[prop] = colCount++;\n      }\n\n      // Create node table\n      // skip first row, as 1st row contains header information\n      linkData.shift();\n\n      let linkRow;\n      const parseTime = d3.timeParse(timeFormat || \"%Q\");\n      const formatTime = d3.timeFormat(main.timeFormat());\n\n      for (let i = 0; i < linkData.length; i++) {\n        if (linkData[i].length == 0 || linkData[i][0].length == 0) {\n          continue;\n        }\n        linkRow = new Array(colCount);\n        if (linkSchema.id == undefined) linkRow[0] = linkTable.length;\n        else linkRow[0] = linkData[i][linkSchema.id];\n\n        // remove whitespace in table entries\n\n        for (let j = 0; j < linkData[i].length; j++) {\n          linkData[i][j] = linkData[i][j].trim();\n        }\n\n        // sources\n        name = linkData[i][linkSchema.source];\n        if (names.indexOf(name) == -1) {\n          names.push(name);\n        }\n        id_source = names.indexOf(name);\n\n        // targets\n        name = linkData[i][linkSchema.target];\n        if (names.indexOf(name) == -1) {\n          names.push(name);\n        }\n        id_target = names.indexOf(name);\n\n        // replace node names by node indices\n        linkRow[newLinkSchema.source] = id_source;\n        linkRow[newLinkSchema.target] = id_target;\n\n        // format weight\n        if (linkSchema.weight != undefined) {\n          linkRow[newLinkSchema.weight] = Number(\n            linkData[i][linkSchema.weight]\n          );\n        }\n        // format time\n        if (linkSchema.time != undefined) {\n          const timeString = linkData[i][linkSchema.time];\n          const parsedTime = parseTime(timeString);\n          linkRow[newLinkSchema.time] = parsedTime\n            ? formatTime(parsedTime)\n            : undefined;\n        }\n        // copy remaining attributes (linkType, weight, etc..)\n        for (const prop in linkSchema) {\n          if (\n            prop != \"source\" &&\n            prop != \"target\" &&\n            prop != \"time\" &&\n            prop != \"weight\"\n          ) {\n            linkRow[(newLinkSchema as any)[prop]] =\n              linkData[i][(linkSchema as any)[prop]];\n          }\n        }\n        linkTable.push(linkRow);\n      }\n\n      // create node table from node name list\n      for (let i = 0; i < names.length; i++) {\n        nodeTable.push([i, names[i]]);\n      }\n\n      const dataSet = new DataSet({\n        nodeTable: nodeTable,\n        linkTable: linkTable,\n        linkSchema: newLinkSchema,\n        nodeSchema: nodeSchema,\n        name: url,\n      });\n      if (linkSchema.time != undefined) {\n        dataSet.timeFormat = main.timeFormat();\n      }\n\n      callBack(dataSet);\n    });\n}\n\nexport function parseXML(name: string, dataString: string): DataSet {\n  const parser = new DOMParser();\n  const data = parser.parseFromString(dataString, \"text/xml\");\n\n  const nodes = data.documentElement.getElementsByTagName(\"node\");\n  const nodeTable = [];\n  const nodeIds = [];\n  const nodeSchema = { id: 0, label: 1, nodeType: 2 };\n  for (let i = 0; i < nodes.length; i++) {\n    nodeTable.push([\n      nodeTable.length,\n      nodes[i].getAttribute(\"name\") || nodes[i].getAttribute(\"id\"),\n      nodes[i].getAttribute(\"type\"),\n    ]);\n    nodeIds.push(nodes[i].id);\n  }\n  const linkTable = [];\n  const linkSchema = new LinkSchema(0, 1, 2);\n  const links = data.documentElement.getElementsByTagName(\"edge\");\n  let s, t;\n  let sPrev, tPrev;\n  for (let i = 0; i < links.length; i++) {\n    s = nodeIds.indexOf(links[i].getAttribute(\"source\") || \"\");\n    t = nodeIds.indexOf(links[i].getAttribute(\"target\") || \"\");\n    if (sPrev == s && tPrev == t) {\n      continue;\n    }\n    sPrev = s;\n    tPrev = t;\n    linkTable.push([linkTable.length, s, t]);\n  }\n  return new DataSet({\n    name: name,\n    nodeTable: nodeTable,\n    linkTable: linkTable,\n    nodeSchema: nodeSchema,\n    linkSchema: linkSchema,\n  });\n}\n\nexport function parseJSON(name: string, data: any): DataSet {\n  // The json must have a 'nodes/vertices' and a 'links/edge/connections/relations' array.\n\n  // fill edge table\n  let links = data.links;\n  if (!links) links = data.edges;\n  if (!links) links = data.connections;\n  if (!links) links = data.relations;\n\n  const linkTable = [];\n  let line: any[] = [];\n  let link;\n  const linkSchema = { id: 0, source: 1, target: 2, weight: 3 };\n  let weight;\n  const linkUserProps = [];\n  let prop;\n\n  // check for user-properties to complete schema\n  for (let i = 0; i < links.length; i++) {\n    link = links[i];\n    for (prop in link) {\n      if (\n        Object.prototype.hasOwnProperty.call(link, prop) &&\n        prop != \"id\" &&\n        prop != \"linkType\" &&\n        prop != \"time\" &&\n        prop != \"name\" &&\n        prop != \"source\" &&\n        prop != \"target\" &&\n        prop != \"weight\" &&\n        prop != \"directed\"\n      ) {\n        if ((linkSchema as any)[prop] == undefined) {\n          linkUserProps.push(prop);\n          (linkSchema as any)[prop] = 3 + linkUserProps.length;\n        }\n      }\n    }\n  }\n  // collect data from links\n  for (let i = 0; i < links.length; i++) {\n    link = links[i];\n    weight = 1;\n    if (link.weight != undefined) weight = link.weight;\n\n    line = [i, link.source, link.target, weight];\n    for (let p = 0; p < linkUserProps.length; p++) {\n      prop = linkUserProps[p];\n      if (link[prop] == undefined) {\n        line.push(undefined);\n      } else {\n        line.push(link[prop]);\n      }\n    }\n    linkTable.push(line);\n  }\n\n  // fill node table\n  let nodes = data.nodes;\n  if (!nodes) nodes = data.vertices;\n\n  let node;\n  const nodeTable = [];\n  const locationTable: any[] = []; // location table in case there are locations\n  const locationSchema = { id: 0, longitude: 1, latitude: 2 }; // location table in case there are locations\n  const nodeSchema = { id: 0, label: 1 };\n  const nodeUserProperties = [];\n  for (let i = 0; i < nodes.length; i++) {\n    node = nodes[i];\n    for (prop in node) {\n      if (\n        Object.prototype.hasOwnProperty.call(node, prop) &&\n        prop != \"id\" &&\n        prop != \"label\" &&\n        prop != \"time\" &&\n        prop != \"name\" &&\n        prop != \"nodeType\" &&\n        prop != \"location\" &&\n        prop != \"constructor\"\n      ) {\n        if ((nodeSchema as any)[prop] == undefined) {\n          nodeUserProperties.push(prop);\n          (nodeSchema as any)[prop] = 1 + nodeUserProperties.length;\n        }\n      }\n    }\n  }\n  for (let i = 0; i < nodes.length; i++) {\n    node = nodes[i];\n    line = [i];\n    if (node.name) {\n      line.push(node.name);\n    } else if (node.label) {\n      line.push(node.label);\n    } else {\n      line.push(\"\" + i);\n    }\n    // if(node.group){\n    //     line.push(node.group)\n    // }else{\n    //     line.push('0')\n    // }\n\n    // check for user-properties\n    for (let p = 0; p < nodeUserProperties.length; p++) {\n      prop = nodeUserProperties[p];\n      if (node[prop] == undefined) {\n        line.push(undefined);\n      } else {\n        line.push(node[prop]);\n      }\n    }\n    nodeTable.push(line);\n  }\n\n  return new DataSet({\n    name: name,\n    nodeTable: nodeTable,\n    locationTable: locationTable,\n    linkTable: linkTable,\n    nodeSchema: nodeSchema,\n    locationSchema: locationSchema,\n    linkSchema: linkSchema,\n  });\n}\n\nexport function parseJSONList(name: string, data: any): DataSet {\n  // fill node and link table\n  const linkTable = [];\n  let line = [];\n  const linkSchema = new LinkSchema(0, 1, 2);\n  const nodes = data;\n  let node;\n  const nodeTable = [];\n  const nodeSchema = new NodeSchema(0);\n  const nodeNames = [];\n  for (let i = 0; i < nodes.length; i++) {\n    node = nodes[i];\n    line = [i];\n    if (node.name) {\n      line.push(node.name);\n      nodeSchema.label = 1;\n    }\n    if (node.label) {\n      line.push(node.name);\n      nodeSchema.label = 1;\n    }\n    nodeNames.push(node.name);\n    nodeTable.push(line);\n  }\n  // links\n  let s, t;\n  for (let i = 0; i < nodes.length; i++) {\n    for (let j = 0; j < nodes[i].imports.length; j++) {\n      s = nodeNames.indexOf(nodes[i].name);\n      t = nodeNames.indexOf(nodes[i].imports[j]);\n      if (s == -1 || t == -1) console.error(\"---\");\n      else linkTable.push([linkTable.length, s, t]);\n    }\n  }\n\n  return new DataSet({\n    name: name,\n    nodeTable: nodeTable,\n    linkTable: linkTable,\n    nodeSchema: nodeSchema,\n    linkSchema: linkSchema,\n  });\n}\n\nexport function parseNCube(name: string, data: any): DataSet {\n  const nodeTable: any[][] = [];\n  const linkTable: any[][] = [];\n\n  const nodeSchema: NodeSchema = new NodeSchema(0);\n  nodeSchema.id = 0;\n  nodeSchema.label = 1;\n  nodeSchema.nodeType = 2;\n\n  // create node table:\n  for (let i = 0; i < data.nodes.length; i++) {\n    console.log(\n      \"data.nodes[i].name.substring(0,3)\",\n      data.nodes[i].name.substring(0, 3)\n    );\n    nodeTable.push([\n      data.nodes[i].nodeId,\n      data.nodes[i].name,\n      data.nodes[i].name.substring(0, 3), // create node type for brain regions\n    ]);\n  }\n\n  const linkSchema: LinkSchema = new LinkSchema(0, 1, 2);\n  linkSchema.id = 0;\n  linkSchema.source = 1;\n  linkSchema.target = 2;\n  linkSchema.time = 3;\n  linkSchema.weight = 4;\n\n  // create link table\n  // data.edges = data.edges.slice(0,20000);\n  for (let i = 0; i < data.edges.length; i++) {\n    const d = addDate(new Date(), data.edges[i].timeIndex, \"second\");\n\n    linkTable.push([\n      data.edges[i].edgeId,\n      data.edges[i].sourceNodeId,\n      data.edges[i].targetNodeId,\n      formatStandardTime(d),\n      data.edges[i].weight,\n    ]);\n  }\n\n  return new DataSet({\n    name: name,\n    nodeTable: nodeTable,\n    linkTable: linkTable,\n    nodeSchema: nodeSchema,\n    linkSchema: linkSchema,\n  });\n}\n\nexport function parsePajek(name: string, data: any): DataSet {\n  const lines = data.split(\"\\n\");\n  const nodeTable = [];\n  const nodeSchema = { id: 0, label: 1 };\n  const linkTable = [];\n  const linkSchema = { id: 0, source: 1, target: 2, directed: 3 };\n  let parseType = \"\";\n  let line;\n  for (let i = 0; i < lines.length; i++) {\n    line = lines[i];\n\n    // define data type\n    if (line.indexOf(\"*Vertices\") > -1) {\n      parseType = \"nodes\";\n      continue;\n    } else if (line.indexOf(\"*Arcs\") > -1) {\n      parseType = \"undirectedLinks\";\n      continue;\n    } else if (line.indexOf(\"*Edges\") > -1) {\n      parseType = \"directedLinks\";\n      continue;\n    }\n\n    // prepare and clean line\n    line = line.trim();\n    line = line.split(\" \");\n    for (let j = 0; j < line.length; j) {\n      if (line[j].length == 0) {\n        line.splice(j, 1);\n      } else {\n        j++;\n      }\n    }\n    if (line.length == 0) continue;\n\n    // parse data\n    if (parseType.indexOf(\"nodes\") > -1) {\n      nodeTable.push([nodeTable.length, line[1]]);\n    } else if (parseType.indexOf(\"undirectedLinks\") > -1) {\n      linkTable.push([\n        linkTable.length,\n        parseInt(line[0]) - 1,\n        parseInt(line[1]) - 1,\n        false,\n      ]);\n    } else if (parseType.indexOf(\"directedLinks\") > -1) {\n      linkTable.push([\n        linkTable.length,\n        parseInt(line[0]) - 1,\n        parseInt(line[1]) - 1,\n        true,\n      ]);\n    }\n  }\n\n  return new DataSet({\n    name: name,\n    nodeTable: nodeTable,\n    linkTable: linkTable,\n    nodeSchema: nodeSchema,\n    linkSchema: linkSchema,\n  });\n}\n\nexport function parseMat(name: string, text: string): DataSet {\n  const lines = text.split(\"\\n\");\n  const nodeTable = [];\n  const nodeSchema = { id: 0, label: 1 };\n  const linkTable = [];\n  const linkSchema = { id: 0, source: 1, target: 2 };\n  let parseType = \"\";\n  let line;\n  let rowCount = 0;\n  let currRow = 0;\n  for (let i = 0; i < lines.length; i++) {\n    line = lines[i];\n\n    // define data type\n    if (line.indexOf(\"ROW LABELS\") > -1) {\n      parseType = \"rows\";\n      continue;\n    } else if (line.indexOf(\"COLUMN LABELS\") > -1) {\n      parseType = \"cols\";\n      continue;\n    } else if (line.indexOf(\"DATA:\") > -1) {\n      parseType = \"links\";\n      continue;\n    }\n    if (parseType.length == 0) continue;\n\n    line = line.trim();\n    line = line.split(\" \");\n    if (parseType.indexOf(\"rows\") > -1) {\n      nodeTable.push([nodeTable.length, line[0]]);\n      rowCount++;\n    } else if (parseType.indexOf(\"cols\") > -1) {\n      if (line[0].includes(nodeTable[0][1].toString())) {\n        parseType = \"\";\n        rowCount = 0;\n        continue;\n      }\n      nodeTable.push([nodeTable.length, line[0]]);\n    } else if (parseType.indexOf(\"links\") > -1) {\n      for (let j = 0; j < line.length; j++) {\n        if (parseInt(line[j]) == 1) {\n          linkTable.push([linkTable.length, currRow, rowCount + 1]);\n        }\n      }\n      currRow++;\n    }\n  }\n  return new DataSet({\n    name: name,\n    nodeTable: nodeTable,\n    linkTable: linkTable,\n    nodeSchema: nodeSchema,\n    linkSchema: linkSchema,\n  });\n}\n\nexport function parseGEDCOM(name: string, text: string) {\n  const nodeTable: any[] = [];\n  const nodeSchema = { id: 0, label: 1, nodeType: 2 };\n  const linkTable: any[] = [];\n  const linkSchema = { id: 0, source: 1, target: 2 };\n\n  const data = text.split(\"\\n\");\n  let singleLine: any;\n  let line: any[];\n  const personIds = [];\n  const personSex = [];\n  const familiyIds: any[] = [];\n  const familiyChildren: any[][] = [];\n  const familiyHusband: any[] = [];\n  const familiyWife: any[] = [];\n  for (let i = 0; i < data.length; i++) {\n    singleLine = data[i].replace(/@/g, \"\");\n    line = singleLine.split(\" \");\n    // parsing persons\n    if (line.length < 3) continue;\n\n    if (parseInt(line[0]) == 0 && line[2].indexOf(\"INDI\") > -1) {\n      personIds.push(line[1].trim());\n      personSex.push(\"\");\n    } else if (parseInt(line[0]) == 1 && line[1].indexOf(\"SEX\") > -1) {\n      personSex[personSex.length - 1] = line[2].trim();\n    } else if (parseInt(line[0]) == 0 && line[2].indexOf(\"FAM\") > -1) {\n      familiyIds.push(line[1].trim());\n      familiyChildren.push([]);\n      familiyHusband.push(undefined);\n      familiyWife.push(undefined);\n    } else if (parseInt(line[0]) == 1 && line[1].indexOf(\"CHIL\") > -1) {\n      familiyChildren[familiyChildren.length - 1].push(line[2].trim());\n    } else if (parseInt(line[0]) == 1 && line[1].indexOf(\"HUSB\") > -1) {\n      familiyHusband[familiyChildren.length - 1] = line[2].trim();\n    } else if (parseInt(line[0]) == 1 && line[1].indexOf(\"WIFE\") > -1) {\n      familiyWife[familiyChildren.length - 1] = line[2].trim();\n    }\n  }\n\n  for (let fi = 0; fi < personIds.length; fi++) {\n    nodeTable.push([fi, personIds[fi], personSex[fi]]);\n  }\n\n  let hi, wi, ci;\n  for (let fi = 0; fi < familiyIds.length; fi++) {\n    hi = personIds.indexOf(familiyHusband[fi]);\n    wi = personIds.indexOf(familiyWife[fi]);\n    console.log(\"-->\", hi, wi, familiyHusband[fi], familiyWife[fi]);\n    for (let i = 0; i < familiyChildren[fi].length; i++) {\n      ci = personIds.indexOf(familiyChildren[fi][i]);\n      if (ci == undefined || ci == -1) continue;\n      if (hi != undefined && hi > -1)\n        linkTable.push([linkTable.length, hi, ci]);\n      if (wi != undefined && wi > -1)\n        linkTable.push([linkTable.length, wi, ci]);\n    }\n  }\n\n  return new DataSet({\n    name: name,\n    nodeTable: nodeTable,\n    linkTable: linkTable,\n    nodeSchema: nodeSchema,\n    linkSchema: linkSchema,\n  });\n}\n\nexport function parseLinkList(name: string, text: string) {\n  const lines = text.split(\"\\n\");\n  const nodeTable = [];\n  const nodeSchema = { id: 0, label: 1 };\n  const linkTable = [];\n  const linkSchema = { id: 0, source: 1, target: 2, weight: 3 };\n  let line;\n  let s, t;\n  let i = 0;\n  for (i; i < lines.length; i++) {\n    line = lines[i];\n    if (line.indexOf(\"#\") == -1) {\n      break;\n    }\n  }\n  let DEL = \" \";\n  if (lines[i].indexOf(\",\") > -1) DEL = \",\";\n  else if (lines[i].indexOf(\"\\t\") > -1) DEL = \"\\t\";\n\n  const nodeLabels = [];\n  let weight;\n  for (i; i < lines.length; i++) {\n    line = lines[i];\n    line = line.split(DEL);\n    for (let j = 0; j < line.length; j) {\n      if (line[j].length == 0) {\n        line.splice(j, 1);\n      } else {\n        j++;\n      }\n    }\n    if (line.length < 2) continue;\n\n    s = line[0].toLowerCase();\n    if (s == undefined || s == \"\") continue;\n\n    let si = nodeLabels.indexOf(s);\n    if (si == -1) {\n      si = nodeLabels.length;\n      nodeLabels.push(s);\n    }\n\n    t = line[1].toLowerCase();\n    if (t == undefined) continue;\n    t = t.trim();\n    let ti = nodeLabels.indexOf(t);\n    if (ti == -1) {\n      ti = nodeLabels.length;\n      nodeLabels.push(t);\n    }\n\n    weight = 1;\n    linkTable.push([linkTable.length, si, ti, weight]);\n  }\n  for (i = 0; i <= nodeLabels.length; i++) {\n    nodeTable.push([i, nodeLabels[i] + \"\"]);\n  }\n\n  return new DataSet({\n    name: name,\n    nodeTable: nodeTable,\n    linkTable: linkTable,\n    nodeSchema: nodeSchema,\n    linkSchema: linkSchema,\n  });\n}\n\nexport function parseMatrix(name: string, text: string) {\n  const lines = text.split(\"\\n\");\n  const nodeTable = [];\n  const nodeSchema = { id: 0, label: 1 };\n  const linkTable = [];\n  const linkSchema = { id: 0, source: 1, target: 2 };\n\n  const nodeNames = [];\n  let label;\n  // get nodes from rows\n  const initialCol = lines[0].trim().split(\",\");\n  for (let i = 0; i < initialCol.length; i++) {\n    label = initialCol[i].trim();\n    nodeTable.push([nodeTable.length, label]);\n    nodeNames.push(label);\n  }\n  let t, line;\n  for (let i = 1; i < lines.length; i++) {\n    line = lines[i];\n    line = line.trim();\n    line = line.split(\",\");\n    t = nodeNames.indexOf(line[0].trim());\n    if (t == -1) {\n      console.error(\"Node\", line[0], \"not defined\");\n      continue;\n    }\n    for (let j = 1; j < line.length; j++) {\n      if (line[j].length > 0 && parseInt(line[j].replace(/\\s/g, \"\")) > 300000) {\n        linkTable.push([linkTable.length, t, j - 1]);\n      }\n    }\n  }\n  console.log(\"---->nodes found:\", nodeTable.length);\n  console.log(\"---->links found:\", linkTable.length);\n  return new DataSet({\n    name: name,\n    nodeTable: nodeTable,\n    linkTable: linkTable,\n    nodeSchema: nodeSchema,\n    linkSchema: linkSchema,\n  });\n}\n\n/// EXPORTERS\n\n/** Returns a csv table representation of this graph. It should be the same as\n * the input table format (fix!)\n * Currently: returns simple list of node index pairs.\n */\nexport function exportCSV(graph: DynamicGraph): string {\n  let csv = \"\";\n  const DEL = \",\";\n  const ST = \"\";\n  const BR = \"\\n\";\n  for (let i = 0; i < graph.links().length; i++) {\n    const graph_link = graph.link(i);\n    if (graph_link != undefined) {\n      csv +=\n        ST +\n        graph_link.source.id() +\n        ST +\n        DEL +\n        ST +\n        graph_link.target.id() +\n        ST +\n        BR;\n    }\n  }\n  return csv;\n}\n\n/// HELPER FUNCTIONS\n\n/** Downloads a string as file.*/\nexport function downloadText(text: string, filename: string): void {\n  const textFileAsBlob = new Blob([text], { type: \"text/text\" });\n  const fileNameToSaveAs = filename;\n  const downloadLink = document.createElement(\"a\");\n  downloadLink.download = fileNameToSaveAs;\n  downloadLink.href = (window as any).webkitURL.createObjectURL(textFileAsBlob);\n  downloadLink.click();\n}\n","import { DynamicGraph, Link, Node, Location, IDCompound } from \"./dynamicgraph\";\n\nexport function searchForTerm(\n  term: string,\n  dgraph: DynamicGraph,\n  type?: string\n): IDCompound {\n  const terms = term.toLowerCase().split(\",\");\n\n  const result: IDCompound = new IDCompound();\n\n  for (let i = 0; i < terms.length; i++) {\n    term = terms[i].trim();\n    if (!type || type == \"node\")\n      result.nodeIds = result.nodeIds.concat(\n        dgraph\n          .nodes()\n          .filter(\n            (e: Node) =>\n              e.label().toLowerCase().indexOf(term) > -1 ||\n              e.nodeType().toLowerCase().indexOf(term) > -1\n          )\n          .ids()\n      );\n    if (!type || type == \"link\")\n      result.linkIds = result.linkIds.concat(\n        dgraph\n          .links()\n          .filter(\n            (e: Link) =>\n              e.source.label().toLowerCase().indexOf(term) > -1 ||\n              e.target.label().toLowerCase().indexOf(term) > -1 ||\n              e.linkType().indexOf(term) > -1\n          )\n          .ids()\n      );\n    if (!type || type == \"locations\")\n      result.locationIds = result.locationIds.concat(\n        dgraph\n          .locations()\n          .filter((e: Location) => e.label().toLowerCase().indexOf(term) > -1)\n          .ids()\n      );\n  }\n  return result;\n}\n","import { makeIdCompound, sortByPriority, ElementCompound } from \"./utils\";\nimport { Selection } from \"./dynamicgraphutils\";\nimport {\n  Time,\n  DynamicGraph,\n  dgraphReplacer,\n  dgraphReviver,\n  IDCompound,\n} from \"./dynamicgraph\";\nimport { getDynamicGraph } from \"./main\";\nimport { searchForTerm } from \"./search\";\n\nexport const MESSAGE_HIGHLIGHT = \"highlight\";\nexport const MESSAGE_SELECTION = \"selection\";\nexport const MESSAGE_TIME_RANGE = \"timeRange\";\nexport const MESSAGE_SELECTION_CREATE = \"createSelection\";\nexport const MESSAGE_SELECTION_DELETE = \"deleteSelection\";\nexport const MESSAGE_SELECTION_SET_CURRENT = \"setCurrentSelectionId\";\nexport const MESSAGE_SELECTION_COLORING = \"setSelectionColor\";\nexport const MESSAGE_SELECTION_SET_COLORING_VISIBILITY = \"selectionColoring\";\nexport const MESSAGE_SELECTION_FILTER = \"selectionFilter\";\nexport const MESSAGE_SELECTION_PRIORITY = \"selectionPriority\";\nexport const MESSAGE_SEARCH_RESULT = \"searchResult\";\nexport const MESSAGE_SET_STATE = \"SET_STATE\";\nexport const MESSAGE_GET_STATE = \"GET_STATE\";\nexport const MESSAGE_STATE_CREATED = \"STATE_CREATED\";\nexport const MESSAGE_ZOOM_INTERACTION = \"ZOOM_INTERACTION\";\nexport const MESSAGE_CENTER_VIEW_ON_SELECTION = \"CENTER_VIEW\";\n\nconst MESSENGER_PROPAGATE = true;\n\nconst MESSAGE_HANDLERS: string[] = [\n  MESSAGE_HIGHLIGHT,\n  MESSAGE_SELECTION,\n  MESSAGE_TIME_RANGE,\n  MESSAGE_SELECTION_CREATE,\n  MESSAGE_SELECTION_DELETE,\n  MESSAGE_SELECTION_SET_CURRENT,\n  MESSAGE_SELECTION_SET_COLORING_VISIBILITY,\n  MESSAGE_SELECTION_FILTER,\n  MESSAGE_SELECTION_PRIORITY,\n  MESSAGE_SEARCH_RESULT,\n  MESSAGE_SELECTION_COLORING,\n  MESSAGE_SET_STATE,\n  MESSAGE_GET_STATE,\n  MESSAGE_STATE_CREATED,\n  MESSAGE_ZOOM_INTERACTION,\n];\n\n// contains handlers for passing messages to the\n// visualization.\nclass MessageHandler {}\n\nconst messageHandler: MessageHandler = new MessageHandler();\n\nlet previousMessageId = -1;\n\n// register an event handler\nexport function addEventListener(\n  messageType: string,\n  handler: (m: any) => any\n): void {\n  (messageHandler as any)[messageType] = handler;\n}\n\nexport function setDefaultEventListener(handler: (m: any) => any): void {\n  for (let i = 0; i < MESSAGE_HANDLERS.length; i++) {\n    (messageHandler as any)[MESSAGE_HANDLERS[i]] = handler;\n  }\n}\n\n// create internal listener to storage events\nwindow.addEventListener(\"storage\", receiveMessage, false);\n\nexport class Message {\n  id: number;\n  type: string;\n  body: any;\n\n  constructor(type: string) {\n    this.id = Math.random();\n    this.type = type;\n    this.body = null;\n  }\n}\n\n/////////////////////////////\n/// NON-SPECIFIC MESSAGES ///\n/////////////////////////////\n\nexport function sendMessage(type: string, body: any): void {\n  const m = new Message(type);\n  m.body = body;\n  distributeMessage(m, true);\n}\n\n/////////////////////////\n/// SPECIFIC MESSAGES ///\n/////////////////////////\n\nfunction isEmpty(obj: any) {\n  for (const key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) return false;\n  }\n  return true;\n}\n\n// HIGHLIGHT\nexport function highlight(\n  action: string,\n  elementCompound?: ElementCompound,\n  msg?: string\n): void {\n  const g: DynamicGraph = getDynamicGraph();\n  const idCompound: IDCompound = makeIdCompound(elementCompound);\n\n  let highlightAnyElement = false;\n  if (elementCompound != null && !isEmpty(elementCompound)) {\n    highlightAnyElement = true;\n  }\n\n  if (!elementCompound == undefined) action = \"reset\";\n\n  // create message\n  const m: HighlightMessage = new HighlightMessage(action, idCompound, msg);\n  distributeMessage(m);\n\n  let cursor = \"auto\";\n  if (elementCompound && g.currentSelection_id > 0) {\n    cursor = \"url(/networkcube/icons/brush.png),auto\";\n  }\n  const body = document.querySelector(\"body\");\n  if (body) {\n    body.style.cursor = cursor;\n  }\n}\n\nexport class HighlightMessage extends Message {\n  action: string;\n  idCompound: IDCompound;\n  msg: string;\n\n  constructor(action: string, idCompound?: IDCompound, msg?: string) {\n    super(MESSAGE_HIGHLIGHT);\n    this.action = action;\n    this.idCompound = idCompound != undefined ? idCompound : new IDCompound(); // WHAT HAPPEND IF IT IS UNDEFINED??\n    this.msg = msg ?? \"\";\n  }\n}\n\n// SELECTION MESSAGES\n\nexport function selection(\n  action: string,\n  compound: ElementCompound,\n  selectionId?: number\n): void {\n  const g: DynamicGraph = getDynamicGraph();\n  if (!selectionId) selectionId = g.currentSelection_id;\n\n  const idCompound: IDCompound = makeIdCompound(compound);\n\n  const m: SelectionMessage = new SelectionMessage(\n    action,\n    idCompound,\n    selectionId\n  );\n\n  distributeMessage(m);\n}\n\nexport class SelectionMessage extends Message {\n  action: string;\n  selectionId: number;\n  idCompound: IDCompound;\n\n  constructor(action: string, idCompound: IDCompound, selectionId?: number) {\n    super(MESSAGE_SELECTION);\n    this.action = action;\n    this.idCompound = idCompound;\n    this.selectionId = selectionId != undefined ? selectionId : 0; // WHAT HAPPEND IF IT IS UNDEFINED?\n  }\n}\n\n// TIME CHANGE MESSAGES\n\nexport function timeRange(\n  startUnix: number,\n  endUnix: number,\n  single: Time,\n  propagate?: boolean\n): void {\n  const m: TimeRangeMessage = new TimeRangeMessage(startUnix, endUnix);\n  if (propagate == undefined) propagate = false;\n\n  if (propagate) distributeMessage(m);\n  // notifies all views, including this\n  else processMessage(m);\n}\n\nexport class TimeRangeMessage extends Message {\n  startUnix: number;\n  endUnix: number;\n\n  constructor(start: number, end: number) {\n    super(MESSAGE_TIME_RANGE);\n    this.startUnix = start;\n    this.endUnix = end;\n  }\n}\n\n/// CREATE NEW SELECTION\n\nexport function createSelection(type: string, name: string): Selection {\n  const g: DynamicGraph = getDynamicGraph();\n  const b = g.createSelection(type);\n  b.name = name;\n  const m = new CreateSelectionMessage(b);\n  distributeMessage(m, false);\n\n  return b;\n}\n\nexport class CreateSelectionMessage extends Message {\n  selection: Selection;\n\n  constructor(b: Selection) {\n    super(MESSAGE_SELECTION_CREATE);\n    this.selection = b;\n  }\n}\n\n// SET CURRENT SELECTION\n\nexport function setCurrentSelection(b: Selection): void {\n  getDynamicGraph(); // TODO: check if this has necessary side-effects or can  be removed\n  const m = new SetCurrentSelectionIdMessage(b);\n  distributeMessage(m);\n}\n\nexport class SetCurrentSelectionIdMessage extends Message {\n  selectionId: number;\n\n  constructor(b: Selection) {\n    super(MESSAGE_SELECTION_SET_CURRENT);\n    this.selectionId = b.id;\n  }\n}\n\n// CHANGE SELECTION COLOR\n\nexport function showSelectionColor(\n  selection: Selection,\n  showColor: boolean\n): void {\n  const m = new ShowSelectionColorMessage(selection, showColor);\n  distributeMessage(m);\n}\n\nexport class ShowSelectionColorMessage extends Message {\n  selectionId: number;\n  showColor: boolean;\n\n  constructor(selection: Selection, showColor: boolean) {\n    super(MESSAGE_SELECTION_SET_COLORING_VISIBILITY);\n    this.selectionId = selection.id;\n    this.showColor = showColor;\n  }\n}\n\n/// FILTER SELECTION\n\nexport function filterSelection(selection: Selection, filter: boolean): void {\n  const m = new FilterSelectionMessage(selection, filter);\n  distributeMessage(m);\n}\n\nexport class FilterSelectionMessage extends Message {\n  selectionId: number;\n  filter: boolean;\n\n  constructor(selection: Selection, filter: boolean) {\n    super(MESSAGE_SELECTION_FILTER);\n    this.selectionId = selection.id;\n    this.filter = filter;\n  }\n}\n\n/// SWAP PRIORITY\n\nexport function swapPriority(s1: Selection, s2: Selection): void {\n  const m = new SelectionPriorityMessage(s1, s2, s2.priority, s1.priority);\n  distributeMessage(m);\n}\n\nexport class SelectionPriorityMessage extends Message {\n  selectionId1: number;\n  selectionId2: number;\n  priority1: number;\n  priority2: number;\n\n  constructor(s1: Selection, s2: Selection, p1: number, p2: number) {\n    super(MESSAGE_SELECTION_PRIORITY);\n    this.selectionId1 = s1.id;\n    this.selectionId2 = s2.id;\n    this.priority1 = p1;\n    this.priority2 = p2;\n  }\n}\n\n/// DELETE SELECTION\n\nexport function deleteSelection(selection: Selection): void {\n  const m = new DeleteSelectionMessage(selection);\n  distributeMessage(m);\n}\n\nexport class DeleteSelectionMessage extends Message {\n  selectionId: number;\n\n  constructor(selection: Selection) {\n    super(MESSAGE_SELECTION_DELETE);\n    this.selectionId = selection.id;\n  }\n}\n\n/// SET SELECTION COLOR\n\nexport function setSelectionColor(s: Selection, color: string): void {\n  distributeMessage(new SelectionColorMessage(s, color));\n}\n\nclass SelectionColorMessage extends Message {\n  selectionId: number;\n  color: string;\n\n  constructor(selection: Selection, color: string) {\n    super(MESSAGE_SELECTION_COLORING);\n    this.selectionId = selection.id;\n    this.color = color;\n  }\n}\n\nexport function centerViewOnSelection(selection: Selection): void {\n  distributeMessage(new CenterViewMessage(selection));\n}\nexport class CenterViewMessage extends Message {\n  selectionId: number;\n\n  constructor(selection: Selection) {\n    super(MESSAGE_CENTER_VIEW_ON_SELECTION);\n    this.selectionId = selection.id;\n  }\n}\n\n/// SEARCH SELECTION\n\nexport function search(term: string, type?: string): void {\n  const idCompound: IDCompound = searchForTerm(term, getDynamicGraph(), type);\n  distributeMessage(new SearchResultMessage(term, idCompound));\n}\n\nexport class SearchResultMessage extends Message {\n  idCompound: IDCompound;\n  searchTerm: string;\n\n  constructor(searchTerm: string, idCompound: IDCompound) {\n    super(MESSAGE_SEARCH_RESULT);\n    this.idCompound = idCompound;\n    this.searchTerm = searchTerm;\n  }\n}\n\nexport class NetworkControls {\n  networkType: string;\n  timeSliderStart: number;\n  timeSliderEnd: number;\n\n  constructor(networkType: string, startTime: number, endTime: number) {\n    this.networkType = networkType;\n    this.timeSliderStart = startTime;\n    this.timeSliderEnd = endTime;\n  }\n}\n\nexport class NodeLinkControls extends NetworkControls {\n  globalZoom: number;\n  panOffsetLocal: number[];\n  panOffsetGlobal: number[];\n  linkOpacity: number;\n  nodeOpacity: number;\n  nodeSize: number;\n  edgeGap: number;\n  linkWidth: number;\n  labellingType: number;\n\n  constructor(\n    networkType: string,\n    startTime: number,\n    endTime: number,\n    globalZoom: number,\n    panOffsetLocal: number[],\n    panOffsetGlobal: number[],\n    linkOpacity: number,\n    nodeOpacity: number,\n    nodeSize: number,\n    edgeGap: number,\n    linkWidth: number,\n    labellingType: number\n  ) {\n    super(networkType, startTime, endTime);\n    this.globalZoom = globalZoom;\n    this.panOffsetGlobal = panOffsetGlobal;\n    this.panOffsetLocal = panOffsetLocal;\n    this.linkOpacity = linkOpacity;\n    this.nodeOpacity = nodeOpacity;\n    this.nodeSize = nodeSize;\n    this.edgeGap = edgeGap;\n    this.linkWidth = linkWidth;\n    this.labellingType = labellingType;\n  }\n}\n\nexport class MatrixControls extends NetworkControls {\n  labellingType: string;\n  zoom: number;\n\n  constructor(\n    networkType: string,\n    startTime: number,\n    endTime: number,\n    zoom: number,\n    labellingType: string\n  ) {\n    super(networkType, startTime, endTime);\n    this.zoom = zoom;\n    this.labellingType = labellingType;\n  }\n}\n\nexport class TimeArchsControls extends NetworkControls {\n  labellingType: string;\n\n  /* webglState:any;\n      camera_position_x:number;\n      camera_position_y:number;\n      camera_position_z:number; */\n\n  constructor(\n    networkType: string,\n    startTime: number,\n    endTime: number,\n    labellingType: string\n  ) {\n    //,webglState:any,camera_position_x:number,camera_position_y:number,camera_position_z:number){\n    super(networkType, startTime, endTime);\n    this.labellingType = labellingType;\n    /*  this.webglState=webglState;\n            this.camera_position_x=camera_position_x;\n            this.camera_position_y=camera_position_z;\n            this.camera_position_z=camera_position_z;\n     */\n  }\n}\n\nexport class MapControls extends NetworkControls {\n  nodeOverlap: number;\n  linkOpacity: number;\n  opacityOfPositionlessNodes: number;\n\n  constructor(\n    networkType: string,\n    startTime: number,\n    endTime: number,\n    nodeOverlap: number,\n    linkOpacity: number,\n    opacityOfPositionlessNodes: number\n  ) {\n    super(networkType, startTime, endTime);\n    this.nodeOverlap = nodeOverlap;\n    this.linkOpacity = linkOpacity;\n    this.opacityOfPositionlessNodes = opacityOfPositionlessNodes;\n  }\n}\n\n// SET STATE MESSAGE\n\nexport class SetStateMessage extends Message {\n  state: NetworkControls; // this is the state with all the parameters to set the view to.\n  viewType: string;\n\n  constructor(state: NetworkControls, viewType: string) {\n    super(MESSAGE_SET_STATE);\n    this.state = state;\n    this.viewType = viewType;\n  }\n}\n\nexport function setState(state: NetworkControls, viewType: string): void {\n  // is called from anywhere in vistorian by calling\n  // window.vc.messenger.setState(myState);\n  distributeMessage(new SetStateMessage(state, viewType), true);\n}\n\n// GET STATE MESSAGE\n\nexport class GetStateMessage extends Message {\n  bookmarkIndex: number;\n  viewType: string;\n  isNewBookmark: boolean;\n  typeOfMultiView: string;\n\n  constructor(\n    bookmarkIndex: number,\n    viewType: string,\n    isNewBookmark: boolean,\n    typeOfMultiView: string\n  ) {\n    super(MESSAGE_GET_STATE);\n    this.bookmarkIndex = bookmarkIndex;\n    this.viewType = viewType;\n    this.isNewBookmark = isNewBookmark;\n    this.typeOfMultiView = typeOfMultiView;\n  }\n}\n\nexport function getState(\n  bookmarkIndex: number,\n  viewType: string,\n  isNewBookmark: boolean,\n  typeOfMultiView: string\n): void {\n  // is called from anywhere in vistorian by calling\n  // window.vc.messenger.getState(bookmarkIndex);\n\n  distributeMessage(\n    new GetStateMessage(\n      bookmarkIndex,\n      viewType,\n      isNewBookmark,\n      typeOfMultiView\n    ),\n    true\n  );\n}\n\nexport class StateCreatedMessage extends Message {\n  state: NetworkControls;\n  bookmarkIndex: number;\n  viewType: string;\n  isNewBookmark: boolean;\n  typeOfMultiView: string;\n\n  constructor(\n    state: NetworkControls,\n    bookmarkIndex: number,\n    viewType: string,\n    isNewBookmark: boolean,\n    typeOfMultiView: string\n  ) {\n    super(MESSAGE_STATE_CREATED);\n    this.state = state;\n    this.bookmarkIndex = bookmarkIndex;\n    this.viewType = viewType;\n    this.isNewBookmark = isNewBookmark;\n    this.typeOfMultiView = typeOfMultiView;\n  }\n}\n\nexport function stateCreated(\n  state: NetworkControls,\n  bookmarkIndex: number,\n  viewType: string,\n  isNewBookmark: boolean,\n  typeOfMultiView: string\n): void {\n  // State created : to set the state after getting it from the selected network\n\n  distributeMessage(\n    new StateCreatedMessage(\n      state,\n      bookmarkIndex,\n      viewType,\n      isNewBookmark,\n      typeOfMultiView\n    ),\n    true\n  );\n}\n\nexport class ZoomInteractionMessage extends Message {\n  visType: string;\n  ineractionType: string;\n\n  constructor(visType: string, ineractionType: string) {\n    super(MESSAGE_ZOOM_INTERACTION);\n    this.visType = visType;\n    this.ineractionType = ineractionType;\n  }\n}\n\nexport function zoomInteraction(visType: string, ineractionType: string): void {\n  // log zoom interactions\n  distributeMessage(new ZoomInteractionMessage(visType, ineractionType), true);\n}\n\n////////////////////////\n// INTERNAL FUNCTIONS //\n////////////////////////\n\nconst MESSAGE_KEY = \"networkcube_message\";\nlocalStorage[MESSAGE_KEY] = undefined;\n\nexport function distributeMessage(message: Message, ownView?: boolean): void {\n  //VS: Link Function Use\n  // trace.event(null, 'LinkFunctionUse', message.type, );\n\n  if (ownView == undefined || ownView) processMessage(message);\n\n  // other views\n  if (MESSENGER_PROPAGATE) {\n    localStorage[MESSAGE_KEY] = JSON.stringify(message, function (k, v) {\n      return dgraphReplacer(k, v);\n    });\n  }\n}\n\nfunction receiveMessage() {\n  // read message from local storage\n  const s = localStorage[MESSAGE_KEY];\n  if (s == undefined || s == \"undefined\") return;\n  const dgraph: DynamicGraph = getDynamicGraph();\n  const m: Message = <Message>JSON.parse(s, function (k, v) {\n    return dgraphReviver(dgraph, k, v);\n  });\n\n  if (!m || m.id == previousMessageId) {\n    return;\n  }\n  previousMessageId = m.id;\n  processMessage(m);\n}\n\nfunction processMessage(m: Message) {\n  const graph = getDynamicGraph();\n\n  if ((messageHandler as any)[m.type]) {\n    // for messages with handlers\n    if (m.type == MESSAGE_HIGHLIGHT) {\n      const m2: HighlightMessage = <HighlightMessage>m;\n      graph.highlight(m2.action, m2.idCompound);\n    } else if (m.type == MESSAGE_SELECTION) {\n      const m3: SelectionMessage = <SelectionMessage>m;\n      graph.selection(m3.action, m3.idCompound, m3.selectionId);\n    } else if (m.type == MESSAGE_TIME_RANGE) {\n      // this type is a view message. no adjustments on the graph necessary.\n    } else if (m.type == MESSAGE_SELECTION_SET_COLORING_VISIBILITY) {\n      const m4: ShowSelectionColorMessage = <ShowSelectionColorMessage>m;\n      const m4Selection = graph.getSelection(m4.selectionId);\n      if (m4Selection != undefined) {\n        m4Selection.showColor = m4.showColor;\n      }\n    } else if (m.type == MESSAGE_SELECTION_PRIORITY) {\n      const m5: SelectionPriorityMessage = <SelectionPriorityMessage>m;\n      const m5SelectionId1 = graph.getSelection(m5.selectionId1);\n      const m5SelectionId2 = graph.getSelection(m5.selectionId2);\n      if (m5SelectionId1 != undefined) {\n        m5SelectionId1.priority = m5.priority1;\n      } // ELSE?\n      if (m5SelectionId2 != undefined) {\n        m5SelectionId2.priority = m5.priority2;\n      } // ELSE?\n\n      const linkElements = graph.links().selected().toArray();\n      for (let i = 0; i < linkElements.length; i++) {\n        linkElements[i].getSelections().sort(sortByPriority);\n      }\n      const nodeElements = graph.nodes().selected().toArray();\n      for (let i = 0; i < nodeElements.length; i++) {\n        nodeElements[i].getSelections().sort(sortByPriority);\n      }\n      const nodePairElements = graph.nodePairs().selected().toArray();\n      for (let i = 0; i < nodePairElements.length; i++) {\n        nodePairElements[i].getSelections().sort(sortByPriority);\n      }\n    } else if (m.type == MESSAGE_SELECTION_FILTER) {\n      const m6: FilterSelectionMessage = <FilterSelectionMessage>m;\n      graph.filterSelection(m6.selectionId, m6.filter);\n    }\n    // test messages that don't require a message handler\n    else if (m.type == MESSAGE_SELECTION_CREATE) {\n      const m7: CreateSelectionMessage = <CreateSelectionMessage>m;\n      graph.addSelection(\n        m7.selection.id,\n        m7.selection.color,\n        m7.selection.acceptedType,\n        m7.selection.priority\n      );\n    } else if (m.type == MESSAGE_SELECTION_SET_CURRENT) {\n      const m8: SetCurrentSelectionIdMessage = <SetCurrentSelectionIdMessage>m;\n      graph.setCurrentSelection(m8.selectionId);\n    } else if (m.type == MESSAGE_SELECTION_DELETE) {\n      const m10: DeleteSelectionMessage = <DeleteSelectionMessage>m;\n      graph.deleteSelection(m10.selectionId);\n    } else if (m.type == MESSAGE_SEARCH_RESULT) {\n      const m11: SearchResultMessage = <SearchResultMessage>m;\n      graph.highlight(\"set\", m11.idCompound);\n    } else if (m.type == MESSAGE_SELECTION_COLORING) {\n      const m12: SelectionColorMessage = <SelectionColorMessage>m;\n      const m12Selection = graph.getSelection(m12.selectionId);\n      if (m12Selection != undefined) {\n        m12Selection.color = m12.color;\n      } // ELSE ??\n    } else if (\n      m.type == MESSAGE_GET_STATE ||\n      m.type == MESSAGE_SET_STATE ||\n      m.type == MESSAGE_STATE_CREATED ||\n      m.type == MESSAGE_ZOOM_INTERACTION\n    ) {\n      // this type is a state message. no adjustments on the graph necessary.\n    }\n\n    callHandler(m);\n  }\n}\n\n// calls the handler for the passed message\nfunction callHandler(message: Message) {\n  if (\n    (messageHandler as any)[message.type] &&\n    (messageHandler as any)[message.type] != undefined\n  ) {\n    (messageHandler as any)[message.type](message);\n  }\n}\n","import { Node } from \"./dynamicgraph\";\nimport { Motif } from \"./motifs\";\n\nexport function findDegree(nodes: Node[]): Motif[] {\n  const motifs: Motif[] = [];\n  for (const n of nodes) {\n    const ns = n.neighbors().removeDuplicates().toArray().concat(n);\n    const ls = n.links().removeDuplicates().toArray();\n    motifs.push(new Motif(ns, ls));\n  }\n  return motifs;\n}\n","// namespace colorSchemes{\n// create more color pallets on\n// http://www.palettefx.com/\n\nexport const schema1 = [\n  \"#775566\",\n  \"#6688bb\",\n  \"#556677\",\n  \"#88aa88\",\n  \"#88bb33\",\n  \"#cc7744\",\n  \"#003366\",\n  \"#994422\",\n  \"#331111\",\n];\n\nexport const schema2 = [\n  \"#44B3C2\",\n  \"#F1A94E\",\n  \"#E45641\",\n  \"#5D4C46\",\n  \"#7B8D8E\",\n  \"#2ca02c\",\n  \"#003366\",\n  \"#9467bd\",\n  \"#bcbd22\",\n  \"#e377c2\",\n];\n\nexport const schema3 = [\n  \"#001166\",\n  \"#0055aa\",\n  \"#1199cc\",\n  \"#99ccdd\",\n  \"#002222\",\n  \"#ddffff\",\n  \"#446655\",\n  \"#779988\",\n  \"#115522\",\n];\n\nexport const schema4 = [\n  \"#1f77b4\",\n  \"#ff7f0e\",\n  \"#2ca02c\",\n  \"#d62728\",\n  \"#9467bd\",\n  \"#8c564b\",\n  \"#e377c2\",\n  \"#7f7f7f\",\n  \"#bcbd22\",\n  \"#17becf\",\n];\n\nexport const schema5 = [\n  \"#1f77b4\",\n  \"#aec7e8\",\n  \"#ff7f0e\",\n  \"#ffbb78\",\n  \"#2ca02c\",\n  \"#98df8a\",\n  \"#d62728\",\n  \"#ff9896\",\n  \"#9467bd\",\n  \"#c5b0d5\",\n  \"#8c564b\",\n  \"#c49c94\",\n  \"#e377c2\",\n  \"#f7b6d2\",\n  \"#7f7f7f\",\n  \"#c7c7c7\",\n  \"#bcbd22\",\n  \"#dbdb8d\",\n  \"#17becf\",\n  \"#9edae5\",\n];\n\n// colorbrewer categorical 12\nexport const schema6 = [\n  \"#a6cee3\",\n  \"#1f78b4\",\n  \"#b2df8a\",\n  \"#33a02c\",\n  \"#fb9a99\",\n  \"#e31a1c\",\n  \"#fdbf6f\",\n  \"#ff7f00\",\n  \"#cab2d6\",\n  \"#6a3d9a\",\n  \"#ffff99\",\n  \"#b15928\",\n];\n// }\n","export class BSpline {\n  points: number[][] = [];\n  degree: number;\n  dimension: number;\n  baseFunc: (x: number) => number = () => 0;\n  baseFuncRangeInt = 0; // INIT??\n\n  constructor(points: number[][], degree: number, copy?: boolean) {\n    if (copy) {\n      this.points = [];\n      for (let i = 0; i < points.length; i++) {\n        this.points.push(points[i]);\n      }\n    } else {\n      this.points = points;\n    }\n    this.degree = degree;\n    this.dimension = points[0].length;\n    if (degree == 2) {\n      this.baseFunc = this.basisDeg2;\n      this.baseFuncRangeInt = 2;\n    } else if (degree == 3) {\n      this.baseFunc = this.basisDeg3;\n      this.baseFuncRangeInt = 2;\n    } else if (degree == 4) {\n      this.baseFunc = this.basisDeg4;\n      this.baseFuncRangeInt = 3;\n    } else if (degree == 5) {\n      this.baseFunc = this.basisDeg5;\n      this.baseFuncRangeInt = 3;\n    }\n  }\n\n  //BSpline.prototype.seqAt = function(dim: any): any{\n  seqAt(dim: number): (n: number) => number {\n    const points: number[][] = this.points;\n    const margin: number = this.degree + 1;\n    return function (n: number) {\n      if (n < margin) {\n        return points[0][dim];\n      } else if (points.length + margin <= n) {\n        return points[points.length - 1][dim];\n      } else {\n        return points[n - margin][dim];\n      }\n    };\n  }\n\n  //BSpline.prototype.basisDeg2 = function(x: any): number{\n  basisDeg2(x: number): number {\n    if (-0.5 <= x && x < 0.5) {\n      return 0.75 - x * x;\n    } else if (0.5 <= x && x <= 1.5) {\n      return 1.125 + (-1.5 + x / 2.0) * x;\n    } else if (-1.5 <= x && x < -0.5) {\n      return 1.125 + (1.5 + x / 2.0) * x;\n    } else {\n      return 0;\n    }\n  }\n\n  //BSpline.prototype.basisDeg3 = function(x: any): number{\n  basisDeg3(x: number): number {\n    if (-1 <= x && x < 0) {\n      return 2.0 / 3.0 + (-1.0 - x / 2.0) * x * x;\n    } else if (1 <= x && x <= 2) {\n      return 4.0 / 3.0 + x * (-2.0 + (1.0 - x / 6.0) * x);\n    } else if (-2 <= x && x < -1) {\n      return 4.0 / 3.0 + x * (2.0 + (1.0 + x / 6.0) * x);\n    } else if (0 <= x && x < 1) {\n      return 2.0 / 3.0 + (-1.0 + x / 2.0) * x * x;\n    } else {\n      return 0;\n    }\n  }\n\n  //BSpline.prototype.basisDeg4 = function(x: any): number{\n  basisDeg4(x: number): number {\n    if (-1.5 <= x && x < -0.5) {\n      return (\n        55.0 / 96.0 +\n        x * (-(5.0 / 24.0) + x * (-(5.0 / 4.0) + (-(5.0 / 6.0) - x / 6.0) * x))\n      );\n    } else if (0.5 <= x && x < 1.5) {\n      return (\n        55.0 / 96.0 +\n        x * (5.0 / 24.0 + x * (-(5.0 / 4.0) + (5.0 / 6.0 - x / 6.0) * x))\n      );\n    } else if (1.5 <= x && x <= 2.5) {\n      return (\n        625.0 / 384.0 +\n        x *\n          (-(125.0 / 48.0) + x * (25.0 / 16.0 + (-(5.0 / 12.0) + x / 24.0) * x))\n      );\n    } else if (-2.5 <= x && x <= -1.5) {\n      return (\n        625.0 / 384.0 +\n        x * (125.0 / 48.0 + x * (25.0 / 16.0 + (5.0 / 12.0 + x / 24.0) * x))\n      );\n    } else if (-1.5 <= x && x < 1.5) {\n      return 115.0 / 192.0 + x * x * (-(5.0 / 8.0) + (x * x) / 4.0);\n    } else {\n      return 0;\n    }\n  }\n\n  //BSpline.prototype.basisDeg5 = function(x: any): number{\n  basisDeg5(x: number): number {\n    if (-2 <= x && x < -1) {\n      return (\n        17.0 / 40.0 +\n        x *\n          (-(5.0 / 8.0) +\n            x *\n              (-(7.0 / 4.0) +\n                x * (-(5.0 / 4.0) + (-(3.0 / 8.0) - x / 24.0) * x)))\n      );\n    } else if (0 <= x && x < 1) {\n      return (\n        11.0 / 20.0 + x * x * (-(1.0 / 2.0) + (1.0 / 4.0 - x / 12.0) * x * x)\n      );\n    } else if (2 <= x && x <= 3) {\n      return (\n        81.0 / 40.0 +\n        x *\n          (-(27.0 / 8.0) +\n            x * (9.0 / 4.0 + x * (-(3.0 / 4.0) + (1.0 / 8.0 - x / 120.0) * x)))\n      );\n    } else if (-3 <= x && x < -2) {\n      return (\n        81.0 / 40.0 +\n        x *\n          (27.0 / 8.0 +\n            x * (9.0 / 4.0 + x * (3.0 / 4.0 + (1.0 / 8.0 + x / 120.0) * x)))\n      );\n    } else if (1 <= x && x < 2) {\n      return (\n        17.0 / 40.0 +\n        x *\n          (5.0 / 8.0 +\n            x *\n              (-(7.0 / 4.0) + x * (5.0 / 4.0 + (-(3.0 / 8.0) + x / 24.0) * x)))\n      );\n    } else if (-1 <= x && x < 0) {\n      return (\n        11.0 / 20.0 + x * x * (-(1.0 / 2.0) + (1.0 / 4.0 + x / 12.0) * x * x)\n      );\n    } else {\n      return 0;\n    }\n  }\n\n  //BSpline.prototype.getInterpol = function(seq: any, t: any): number{\n  getInterpol(seq: (x: number) => number, t: number): number {\n    const f: (x: number) => number = this.baseFunc;\n    const rangeInt: number = this.baseFuncRangeInt;\n    const tInt: number = Math.floor(t);\n    let result = 0;\n    for (let i = tInt - rangeInt; i <= tInt + rangeInt; i++) {\n      result += seq(i) * f(t - i);\n    }\n    return result;\n  }\n\n  //BSpline.prototype.calcAt = function(t: any): any{\n  calcAt(t: number): number[] {\n    t = t * ((this.degree + 1) * 2 + this.points.length); //t must be in [0,1]\n    if (this.dimension == 2) {\n      return [\n        this.getInterpol(this.seqAt(0), t),\n        this.getInterpol(this.seqAt(1), t),\n      ];\n    } else if (this.dimension == 3) {\n      return [\n        this.getInterpol(this.seqAt(0), t),\n        this.getInterpol(this.seqAt(1), t),\n        this.getInterpol(this.seqAt(2), t),\n      ];\n    } else {\n      const res = [];\n      for (let i = 0; i < this.dimension; i++) {\n        res.push(this.getInterpol(this.seqAt(i), t));\n      }\n      return res;\n    }\n  }\n}\n\n/*\nvar BSpline = function(points: any, degree: any, copy: any){\n    if(copy){\n        this.points = []\n        for(var i = 0;i<points.length;i++){\n            this.points.push(points[i]);\n        }\n    }else{\n        this.points = points;\n    }\n    this.degree = degree;\n    this.dimension = points[0].length;\n    if(degree == 2){\n        this.baseFunc = this.basisDeg2;\n        this.baseFuncRangeInt = 2;\n    }else if(degree == 3){\n        this.baseFunc = this.basisDeg3;\n        this.baseFuncRangeInt = 2;\n    }else if(degree == 4){\n        this.baseFunc = this.basisDeg4;\n        this.baseFuncRangeInt = 3;\n    }else if(degree == 5){\n        this.baseFunc = this.basisDeg5;\n        this.baseFuncRangeInt = 3;\n    }\n};\n*/\n","import * as THREE from \"three\";\nimport { BSpline } from \"./BSpline\";\n\n//module glutils {\n\nexport function makeAlphaBuffer(\n  array: number[],\n  stretch: number\n): Float32Array {\n  const buffer: Float32Array = new Float32Array(array.length * stretch); // three components per vertex\n  for (let i = 0; i < array.length; i++) {\n    for (let j = 0; j < stretch; j++) {\n      buffer[i * stretch + j] = array[i];\n    }\n  }\n  return buffer;\n}\n\nexport function addBufferedHatchedRect(\n  vertexArray: number[][],\n  x: number,\n  y: number,\n  z: number,\n  width: number,\n  height: number,\n  colorArray: number[][],\n  c: number[]\n): void {\n  const HATCH_NUM = 3;\n  const LINE_WIDTH = 1;\n  const hatchWidth = width / HATCH_NUM;\n  width = width / 2;\n  height = height / 2;\n  const startX: number = x + width;\n  const startY: number = y - height;\n  for (let i = 1; i <= HATCH_NUM; i++) {\n    vertexArray.push(\n      [startX - hatchWidth * i, startY, z],\n      [startX - hatchWidth * i + LINE_WIDTH, startY, z],\n      [startX, startY + hatchWidth * i + LINE_WIDTH, z],\n      [startX, startY + hatchWidth * i + LINE_WIDTH, z],\n      [startX, startY + hatchWidth * i, z],\n      [startX - hatchWidth * i, startY, z]\n    );\n    colorArray.push(\n      [c[0], c[1], c[2], c[3]],\n      [c[0], c[1], c[2], c[3]],\n      [c[0], c[1], c[2], c[3]],\n      [c[0], c[1], c[2], c[3]],\n      [c[0], c[1], c[2], c[3]],\n      [c[0], c[1], c[2], c[3]]\n    );\n  }\n}\n\nexport function addBufferedRect(\n  vertexArray: number[][],\n  x: number,\n  y: number,\n  z: number,\n  width: number,\n  height: number,\n  colorArray: number[][],\n  c: number[]\n): void {\n  width = width / 2;\n  height = height / 2;\n  vertexArray.push(\n    [x - width, y - height, z],\n    [x + width, y - height, z],\n    [x + width, y + height, z],\n    [x + width, y + height, z],\n    [x - width, y + height, z],\n    [x - width, y - height, z]\n  );\n  colorArray.push(\n    [c[0], c[1], c[2], c[3]],\n    [c[0], c[1], c[2], c[3]],\n    [c[0], c[1], c[2], c[3]],\n    [c[0], c[1], c[2], c[3]],\n    [c[0], c[1], c[2], c[3]],\n    [c[0], c[1], c[2], c[3]]\n  );\n}\n\nexport function addBufferedCirlce(\n  vertexArray: number[][],\n  x: number,\n  y: number,\n  z: number,\n  radius: number,\n  colorArray: number[][],\n  c: number[]\n): void {\n  const segments = 11;\n  const angle: number = Math.PI / (segments / 2);\n  for (let i = 0; i < segments; i++) {\n    vertexArray.push(\n      [x + Math.cos(i * angle) * radius, y + Math.sin(i * angle) * radius, z],\n      [\n        x + Math.cos((i + 1) * angle) * radius,\n        y + Math.sin((i + 1) * angle) * radius,\n        z,\n      ],\n      [x, y, z]\n    );\n    colorArray.push(\n      [c[0], c[1], c[2], c[3]],\n      [c[0], c[1], c[2], c[3]],\n      [c[0], c[1], c[2], c[3]]\n    );\n  }\n}\n\nexport function addBufferedDiamond(\n  vertexArray: number[][],\n  x: number,\n  y: number,\n  z: number,\n  width: number,\n  height: number,\n  colorArray: number[][],\n  c: number[]\n): void {\n  width = width / 2;\n  height = height / 2;\n  vertexArray.push(\n    [x - width, y, z],\n    [x, y - height, z],\n    [x + width, y, z],\n    [x + width, y, z],\n    [x, y + height, z],\n    [x - width, y, z]\n  );\n  colorArray.push(\n    [c[0], c[1], c[2], c[3]],\n    [c[0], c[1], c[2], c[3]],\n    [c[0], c[1], c[2], c[3]],\n    [c[0], c[1], c[2], c[3]],\n    [c[0], c[1], c[2], c[3]],\n    [c[0], c[1], c[2], c[3]]\n  );\n}\n\nexport function createRectFrame(\n  w: number,\n  h: number,\n  color: number,\n  lineThickness: number\n): THREE.Line {\n  w = w / 2;\n  h = h / 2;\n  const geom: THREE.Geometry = new THREE.Geometry();\n  geom.vertices = [\n    new THREE.Vector3(-w, -h, 0),\n    new THREE.Vector3(-w, h, 0),\n    new THREE.Vector3(w, h, 0),\n    new THREE.Vector3(w, -h, 0),\n    new THREE.Vector3(-w, -h, 0),\n  ];\n\n  const material: THREE.LineBasicMaterial = new THREE.LineBasicMaterial({\n    color: color,\n    // linewidth: lineThickness,\n  });\n\n  return new THREE.Line(geom, material);\n}\n\nexport function createDiagonalCross(\n  w: number,\n  h: number,\n  color: number,\n  lineThickness: number\n): THREE.Line {\n  w = w / 2;\n  h = h / 2;\n  const geom: THREE.Geometry = new THREE.Geometry();\n  geom.vertices = [\n    new THREE.Vector3(-w, -h, 0),\n    new THREE.Vector3(-w, h, 0),\n    new THREE.Vector3(w, h, 0),\n    new THREE.Vector3(w, -h, 0),\n    new THREE.Vector3(-w, -h, 0),\n    new THREE.Vector3(w, h, 0),\n    new THREE.Vector3(0, 0, 0),\n    new THREE.Vector3(-w, h, 0),\n    new THREE.Vector3(w, -h, 0),\n  ];\n\n  const material: THREE.LineBasicMaterial = new THREE.LineBasicMaterial({\n    color: color,\n    linewidth: lineThickness,\n  });\n\n  return new THREE.Line(geom, material);\n}\n\nexport function makeBuffer3f(array: number[][]): Float32Array {\n  const buffer: Float32Array = new Float32Array(array.length * 3); // three components per vertex\n  for (let i = 0; i < array.length; i++) {\n    buffer[i * 3 + 0] = array[i][0];\n    buffer[i * 3 + 1] = array[i][1];\n    buffer[i * 3 + 2] = array[i][2];\n  }\n  return buffer;\n}\nexport function makeBuffer4f(array: number[][]): Float32Array {\n  const buffer: Float32Array = new Float32Array(array.length * 4); // three components per vertex\n  for (let i = 0; i < array.length; i++) {\n    buffer[i * 4 + 0] = array[i][0];\n    buffer[i * 4 + 1] = array[i][1];\n    buffer[i * 4 + 2] = array[i][2];\n    buffer[i * 4 + 3] = array[i][3];\n  }\n  return buffer;\n}\n\nexport function updateBuffer(\n  buffer: number[],\n  array: number[][],\n  size: number\n): void {\n  for (let i = 0; i < array.length; i++) {\n    for (let j = 0; j < size; j++) {\n      buffer[i * size + j] = array[i][j];\n    }\n  }\n}\n\nexport function createText(\n  string: string,\n  x: number,\n  y: number,\n  z: number,\n  size: number,\n  color: string,\n  weight = \"normal\",\n  align = \"left\"\n): THREE.Mesh {\n  const textGeom: THREE.TextGeometry = new THREE.TextGeometry(string, {\n    // font: 'helvetiker', // IT'S NOT CORRECT FORMAT\n    size: size,\n    height: 1,\n    curveSegments: 1,\n  });\n  const textMaterial: THREE.MeshBasicMaterial = new THREE.MeshBasicMaterial({\n    color: color,\n  });\n  const label: THREE.Mesh = new THREE.Mesh(textGeom, textMaterial);\n\n  if (align == \"right\") {\n    label.geometry.computeBoundingBox();\n    const bounds: THREE.Box3 = label.geometry.boundingBox;\n    x -= bounds.max.x - bounds.min.x;\n  }\n\n  label.position.set(x, y, z);\n  return label;\n}\n\nexport function getMousePos(\n  canvas: any,\n  x: any,\n  y: any\n): Record<\"x\" | \"y\", number> {\n  const rect = canvas.getBoundingClientRect();\n  return {\n    x: x - rect.left,\n    y: y - rect.top,\n  };\n}\n\n/////////////////////////////\n/// QUERY LAYER FOR WEBGL ///\n/////////////////////////////\n\n// SETUP\n\nlet txtCanvas = document.createElement(\"canvas\");\n\nexport class WebGL {\n  /* INIT ?????? */\n  scene: THREE.Scene = new THREE.Scene();\n  camera: THREE.OrthographicCamera = new THREE.OrthographicCamera(0, 0, 0, 0);\n  renderer: THREE.WebGLRenderer = new THREE.WebGLRenderer();\n  canvas: any;\n  geometry: THREE.BufferGeometry = new THREE.BufferGeometry();\n  interactor: any; // BEFORE WebGLInteractor;\n\n  elementQueries: WebGLElementQuery[] = [];\n\n  constructor(params?: Record<string, any>) {\n    txtCanvas = document.createElement(\"canvas\");\n    txtCanvas.setAttribute(\"id\", \"textCanvas\");\n  }\n\n  render(): void {\n    // var d = new Date();\n    // var begin = d.getTime()\n\n    // check which webgl groups must be updated\n    for (let i = 0; i < this.elementQueries.length; i++) {\n      if (\n        this.elementQueries[i].updateAttributes ||\n        this.elementQueries[i].updateStyle\n      ) {\n        this.elementQueries[i].set();\n      }\n    }\n\n    this.renderer.render(this.scene, this.camera);\n  }\n\n  selectAll(): WebGLElementQuery {\n    return selectAll();\n  }\n\n  ///////////////////////\n  // RENDER PARAMETERS //\n  ///////////////////////\n\n  enableZoom(b?: boolean): void {\n    function mouseWheel(event: any) {\n      event.preventDefault();\n\n      webgl.camera.zoom += event.wheelDelta / 1000;\n      webgl.camera.zoom = Math.max(0.1, webgl.camera.zoom);\n      webgl.camera.updateProjectionMatrix();\n      webgl.render();\n    }\n    if (b) {\n      window.addEventListener(\"mousewheel\", mouseWheel, false);\n    } else {\n      window.addEventListener(\"mousewheel\", mouseWheel, false);\n    }\n  }\n  enablePanning(b: boolean): void {\n    this.interactor.isPanEnabled = b;\n  }\n  enableHorizontalPanning(b: boolean): void {\n    this.interactor.isHorizontalPanEnabled = b;\n  }\n\n  ////////////////////\n  /// IMAGE EXPORT ///\n  ////////////////////\n}\n\nlet webgl: WebGL;\n\nexport function initWebGL(\n  parentId: string,\n  width: number,\n  height: number,\n  params?: Record<string, any>\n): WebGL {\n  webgl = new WebGL(params);\n\n  webgl.camera = new THREE.OrthographicCamera(\n    width / -2,\n    width / 2,\n    height / 2,\n    height / -2,\n    0,\n    1000\n  );\n\n  webgl.scene = new THREE.Scene();\n  webgl.scene.add(webgl.camera);\n  webgl.camera.position.z = 100;\n\n  // renderer\n  webgl.renderer = new THREE.WebGLRenderer({\n    antialias: true,\n    preserveDrawingBuffer: true,\n  });\n  webgl.renderer.setSize(width, height);\n  webgl.renderer.setClearColor(0xffffff, 1);\n\n  // position canvas element containing cells\n  webgl.canvas = webgl.renderer.domElement;\n  document.getElementById(parentId)?.append(webgl.canvas);\n\n  webgl.interactor = new WebGLInteractor(\n    webgl.scene,\n    webgl.canvas,\n    webgl.camera\n  );\n\n  const light: THREE.PointLight = new THREE.PointLight(0x000000, 1, 100);\n  light.position.set(0, 0, 1000);\n  webgl.scene.add(light);\n\n  return webgl;\n}\n\n// camera BEFORE THREE.Camera, renderer BEFORE THREE.Renderer\nexport function setWebGL(\n  scene: THREE.Scene,\n  camera: THREE.OrthographicCamera,\n  renderer: THREE.WebGLRenderer,\n  canvas: any\n): void {\n  webgl = new WebGL();\n  webgl.camera = camera;\n  webgl.scene = scene;\n  webgl.renderer = renderer;\n}\n\n// INTERACTION\n\n/// SELECTIONS in the style of D3\n\nexport function selectAll(): WebGLElementQuery {\n  const q: WebGLElementQuery = new WebGLElementQuery();\n  webgl.elementQueries.push(q);\n  return q;\n}\n\nexport class WebGLElementQuery {\n  dataElements: any[] = [];\n  visualElements: any[] = [];\n  mesh: THREE.Mesh = new THREE.Mesh();\n  children: any[] = [];\n  scene: THREE.Scene = new THREE.Scene();\n  mouseOverHandler: any; // BEFORE Function;\n  mouseMoveHandler: any; // BEFORE Function;\n  mouseOutHandler: any; // BEFORE Function;\n  mouseDownHandler: any; // BEFORE Function;\n  mouseUpHandler: any; // BEFORE Function;\n  clickHandler: any; // BEFORE Function;\n\n  // attribute arrays\n  x: number[] = [];\n  y: number[] = [];\n  z: number[] = [];\n  r: number[] = [];\n\n  // style arrays\n  fill: string[] = []; // BEFORE number\n  stroke: string[] = []; // BEFORE number\n  strokewidth: number[] = [];\n  opacity: number[] = [];\n\n  shape = \"\"; // INIT ??\n\n  updateAttributes = false;\n  updateStyle = false;\n\n  IS_SHADER = false;\n\n  constructor() {\n    this.scene = webgl.scene;\n  }\n\n  data(arr: any[]): WebGLElementQuery {\n    this.dataElements = arr.slice(0);\n    return this;\n  }\n\n  append(shape: string): WebGLElementQuery {\n    let elements: any[] = [];\n    switch (shape) {\n      // case 'circle': elements = createCirclesNoShader(this.dataElements, this.scene); break\n      case \"circle\":\n        createCirclesWithBuffers(this, this.scene);\n        break;\n      // case 'circle': elements = createCircles(this.dataElements, this.scene); break\n      // case 'g': elements = createG(this.dataElements, this.scene); break\n      case \"path\":\n        elements = createPaths(this.dataElements, this.scene);\n        break;\n      case \"line\":\n        elements = createLines(this.dataElements, this.scene);\n        break;\n      case \"rect\":\n        elements = createRectangles(this.dataElements, this.scene);\n        break;\n      case \"text\":\n        elements = createWebGLText(this.dataElements, this.scene);\n        break;\n      case \"polygon\":\n        elements = createPolygons(this.dataElements, this.scene);\n        break;\n      default:\n        console.error(\"Shape\", shape, \"does not exist.\");\n    }\n\n    // init position arrays\n    if (!this.IS_SHADER) {\n      for (let i = 0; i < elements.length; i++) {\n        this.x.push(0);\n        this.y.push(0);\n        this.z.push(0);\n      }\n    }\n\n    this.shape = shape;\n    this.visualElements = elements;\n    return this;\n  }\n\n  push(e: any): WebGLElementQuery {\n    this.dataElements.push(e);\n    return this;\n  }\n  getData(i: any): any {\n    return this.dataElements[this.visualElements.indexOf(i)];\n  }\n  getVisual(i: any): any {\n    return this.visualElements[this.dataElements.indexOf(i)];\n  }\n\n  get length(): number {\n    return this.dataElements.length;\n  }\n\n  filter(\n    f: (obj: Record<string, any>, n: number) => boolean\n  ): WebGLElementQuery {\n    const arr: any[] = [];\n    const visArr: any[] = [];\n    for (let i = 0; i < this.dataElements.length; i++) {\n      if (f(this.dataElements[i], i)) {\n        arr.push(this.dataElements[i]);\n        visArr.push(this.visualElements[i]);\n      }\n    }\n    const q: WebGLElementQuery = new WebGLElementQuery().data(arr);\n    q.visualElements = visArr;\n    return q;\n  }\n\n  // geometric attributes\n  attr(name: string, v: any): WebGLElementQuery {\n    const l = this.visualElements.length;\n    if (this.IS_SHADER) {\n      for (let i = 0; i < this.dataElements.length; i++) {\n        (this as any)[name][i] =\n          v instanceof Function ? v(this.dataElements[i], i) : v;\n      }\n    } else {\n      for (let i = 0; i < l; i++) {\n        this.setAttr(\n          this.visualElements[i],\n          name,\n          v instanceof Function ? v(this.dataElements[i], i) : v,\n          i\n        );\n        if (\n          Object.prototype.hasOwnProperty.call(\n            this.visualElements[i],\n            \"wireframe\"\n          )\n        ) {\n          this.setAttr(\n            this.visualElements[i].wireframe,\n            name,\n            v instanceof Function ? v(this.dataElements[i], i) : v,\n            i\n          );\n        }\n      }\n    }\n    this.updateAttributes = true;\n    return this;\n  }\n\n  // style attributes\n  style(name: string, v: any): WebGLElementQuery {\n    const l = this.visualElements.length;\n    if (this.IS_SHADER) {\n      name = name.replace(\"-\", \"\");\n      for (let i = 0; i < this.dataElements.length; i++) {\n        (this as any)[name][i] =\n          v instanceof Function ? v(this.dataElements[i], i) : v;\n      }\n    } else {\n      for (let i = 0; i < l; i++) {\n        setStyle(\n          this.visualElements[i],\n          name,\n          v instanceof Function ? v(this.dataElements[i], i) : v,\n          this\n        );\n      }\n    }\n    this.updateStyle = true;\n    return this;\n  }\n\n  // called after all visual attributes have been set\n  // method that passes updated values to the shaders\n  set(): WebGLElementQuery {\n    if (!this.IS_SHADER) return this;\n\n    const l = this.visualElements.length;\n    const vertexPositionBuffer: any[] = [];\n    const vertexColorBuffer: any[] = [];\n    let c;\n    if (this.shape == \"circle\") {\n      for (let i = 0; i < this.dataElements.length; i++) {\n        c = new THREE.Color(this.fill[i]);\n        addBufferedCirlce(\n          vertexPositionBuffer,\n          this.x[i],\n          this.y[i],\n          this.z[i],\n          this.r[i],\n          vertexColorBuffer,\n          [c.r, c.g, c.b, this.opacity[i]]\n        );\n      }\n    }\n    const geometry: any = this.mesh.geometry;\n    geometry.addAttribute(\n      \"position\",\n      new THREE.BufferAttribute(makeBuffer3f(vertexPositionBuffer), 3)\n    );\n    geometry.addAttribute(\n      \"customColor\",\n      new THREE.BufferAttribute(makeBuffer4f(vertexColorBuffer), 4)\n    );\n    geometry.needsUpdate = true;\n    geometry.verticesNeedUpdate = true;\n    (this.mesh.material as THREE.Material).needsUpdate = true;\n\n    this.updateAttributes = false;\n    this.updateStyle = false;\n\n    return this;\n  }\n\n  text(v: any): WebGLElementQuery {\n    const l = this.visualElements.length;\n    for (let i = 0; i < l; i++) {\n      this.visualElements[i][\"text\"] =\n        v instanceof Function ? v(this.dataElements[i], i) : v;\n      if (this.visualElements[i][\"text\"] == undefined) continue;\n      setText(this.visualElements[i], this.visualElements[i][\"text\"]);\n    }\n    return this;\n  }\n\n  // interaction\n  on(\n    event: string,\n    f: (this: any, event: any, d: any) => void\n  ): WebGLElementQuery {\n    switch (event) {\n      case \"mouseover\":\n        this.mouseOverHandler = f;\n        break;\n      case \"mousemove\":\n        this.mouseMoveHandler = f;\n        break;\n      case \"mouseout\":\n        this.mouseOutHandler = f;\n        break;\n      case \"mousedown\":\n        this.mouseDownHandler = f;\n        break;\n      case \"mouseup\":\n        this.mouseUpHandler = f;\n        break;\n      case \"click\":\n        this.clickHandler = f;\n        break;\n    }\n    webgl.interactor.register(this, event);\n    return this;\n  }\n\n  call(method: string, dataElement: any, event: any): WebGLElementQuery {\n    const i = this.dataElements.indexOf(dataElement);\n    switch (method) {\n      case \"mouseover\":\n        this.mouseOverHandler(dataElement, i, event);\n        break;\n      case \"mousemove\":\n        this.mouseMoveHandler(dataElement, i, event);\n        break;\n      case \"mouseout\":\n        this.mouseOutHandler(dataElement, i, event);\n        break;\n      case \"mousedown\":\n        this.mouseDownHandler(dataElement, i, event);\n        break;\n      case \"mouseup\":\n        this.mouseUpHandler(dataElement, i, event);\n        break;\n      case \"click\":\n        this.clickHandler(dataElement, i, event);\n        break;\n    }\n    return this;\n  }\n\n  setAttr(element: THREE.Mesh, attr: string, v: any, index: number): void {\n    switch (attr) {\n      case \"x\":\n        element.position.x = v;\n        this.x[index] = v;\n        break;\n      case \"y\":\n        element.position.y = v;\n        this.y[index] = v;\n        break;\n      case \"z\":\n        element.position.z = v;\n        this.z[index] = v;\n        break;\n      case \"x1\":\n        setX1(element, v);\n        break; // lines only\n      case \"y1\":\n        setY1(element, v);\n        break; // lines only\n      case \"x2\":\n        setX2(element, v);\n        break; // lines only\n      case \"y2\":\n        setY2(element, v);\n        break; // lines only\n      case \"r\":\n        element.scale.set(v, v, v);\n        break; // circles only\n      case \"width\":\n        element.scale.setX(v);\n        break;\n      case \"height\":\n        element.scale.setY(v);\n        break;\n      case \"depth\":\n        element.scale.setZ(v);\n        break;\n      case \"d\":\n        createPath(element, v);\n        break;\n      case \"points\":\n        createPolygon(element, v);\n        break;\n      case \"rotation\":\n        element.rotation.z = (v * Math.PI) / 180;\n        break;\n      case \"scaleX\":\n        element.scale.x = v;\n        break;\n      case \"scaleY\":\n        element.scale.y = v;\n        break;\n      default:\n        console.error(\"Attribute\", attr, \"does not exist.\");\n    }\n    (element.geometry as THREE.Geometry).verticesNeedUpdate = true;\n    (element.geometry as THREE.Geometry).elementsNeedUpdate = true;\n    (element.geometry as THREE.Geometry).lineDistancesNeedUpdate = true;\n  }\n\n  removeAll(): void {\n    for (let i = 0; i < this.visualElements.length; i++) {\n      if (this.visualElements[i].wireframe)\n        this.scene.remove(this.visualElements[i].wireframe);\n      this.scene.remove(this.visualElements[i]);\n    }\n  }\n}\n\n///////////////\n/// METHODS ///\n///////////////\n\nexport function setStyle(\n  element: any,\n  attr: string,\n  v: any,\n  query: WebGLElementQuery\n): void {\n  switch (attr) {\n    case \"fill\":\n      if (query.shape == \"text\")\n        setText(element, element[\"text\"], { color: v });\n      else element.material.color = new THREE.Color(v);\n      break;\n    case \"stroke\":\n      if (Object.prototype.hasOwnProperty.call(element, \"wireframe\")) {\n        element.wireframe.material.color = new THREE.Color(v);\n      } else {\n        element.material.color = new THREE.Color(v);\n      }\n      break;\n    case \"opacity\":\n      element.material.opacity = v;\n      if (Object.prototype.hasOwnProperty.call(element, \"wireframe\"))\n        element.wireframe.material.opacity = v;\n      break;\n    case \"stroke-width\":\n      if (Object.prototype.hasOwnProperty.call(element, \"wireframe\"))\n        element.wireframe.material.linewidth = v;\n      else element.material.linewidth = v;\n      break;\n    case \"font-size\":\n      element.scale.x = v / 30;\n      element.scale.y = v / 30;\n      element.geometry.verticesNeedUpdate = true;\n      break;\n    default:\n      console.error(\"Style\", attr, \"does not exist.\");\n  }\n  element.material.needsUpdate = true;\n  if (Object.prototype.hasOwnProperty.call(element, \"wireframe\"))\n    element.wireframe.material.needsUpdate = true;\n}\n\n// var textCtx\nexport function setText(mesh: any, text: string, parConfig?: any): void {\n  let config = parConfig;\n  if (config == undefined) {\n    config = {};\n  }\n  if (config.color == undefined) config.color = \"#000000\";\n\n  mesh[\"text\"] = text;\n  const backgroundMargin = 10;\n  const txtCanvas = document.createElement(\"canvas\");\n\n  const context = txtCanvas.getContext(\"2d\");\n\n  const SIZE = 30;\n  let WIDTH = 0; // ????????\n  if (context) {\n    context.font = SIZE + \"pt Helvetica\";\n    WIDTH = context.measureText(text).width;\n    txtCanvas.width = WIDTH;\n    txtCanvas.height = SIZE;\n\n    context.textAlign = \"left\";\n    context.textBaseline = \"middle\";\n    context.fillStyle = config.color;\n    context.font = SIZE + \"pt Helvetica\";\n    // context.clearColor(1.0, 1.0, 0.0, 1.0)\n    // context.clear(gl.COLOR_BUFFER_BIT)\n    context.fillText(text, 0, txtCanvas.height / 2);\n  }\n\n  const tex = new THREE.Texture(txtCanvas);\n  tex.minFilter = THREE.LinearFilter;\n  tex.flipY = true;\n  tex.needsUpdate = true;\n\n  mesh.material.map = tex;\n  mesh.material.transparent = true;\n  mesh.material.needsUpdate = true;\n\n  // adjust mesh geometry\n  mesh.geometry = new THREE.PlaneGeometry(WIDTH, SIZE);\n  mesh.geometry.needsUpdate = true;\n  mesh.geometry.verticesNeedUpdate = true;\n  mesh.needsUpdate = true;\n}\n\n// function setText(mesh:any, text:string, parConfig?:Object){\n//     var SIZE = 10\n//     var MARGIN = 2\n\n//     var config = parConfig;\n//     if(config == undefined){\n//         config = {};\n//     }\n//     if(config.color == undefined)\n//        config.color = '#000000'\n\n//     var canvas = document.createElement(\"canvas\");\n//     var context = canvas.getContext(\"2d\");\n//     context.font = SIZE + \"pt Arial\";\n//     var textWidth = context.measureText(text).width;\n//     canvas.width = textWidth + MARGIN;\n//     canvas.height = SIZE + MARGIN;\n//     context = canvas.getContext(\"2d\");\n//     context.font = SIZE + \"pt Arial\";\n//     // if(backGroundColor) {\n//     //     context.fillStyle = backGroundColor;\n//     //     context.fillRect(canvas.width / 2 - textWidth / 2 - backgroundMargin / 2, canvas.height / 2 - size / 2 - +backgroundMargin / 2, textWidth + backgroundMargin, size + backgroundMargin);\n//     // }\n//     context.textAlign = \"left\";\n//     context.textBaseline = \"middle\";\n//     context.fillStyle = config.color;;\n//     context.fillText(text, canvas.width / 2, canvas.height / 2);\n//     // context.strokeStyle = \"black\";\n//     // context.strokeRect(0, 0, canvas.width, canvas.height);\n//     var texture = new THREE.Texture(canvas);\n//     texture.needsUpdate = true;\n//     var material = new THREE.MeshBasicMaterial({\n//         map : texture\n//     });\n//     // tex.minFilter = THREE.LinearFilter\n//     // tex.flipY = true;\n//     // tex.needsUpdate = true;\n\n//     mesh.material.map = texture;\n//     mesh.material.transparent = true;\n//     mesh.material.needsUpdate = true;\n\n//     // adjust mesh geometry\n//     mesh.geometry = new THREE.PlaneGeometry(WIDTH, SIZE);\n//     mesh.geometry.needsUpdate = true;\n//     mesh.geometry.verticesNeedUpdate = true;\n//     mesh.needsUpdate = true;\n//     return mesh;\n\n//     // var mesh = new THREE.Mesh(new THREE.PlaneGeometry(canvas.width, canvas.height), material);\n//     // // mesh.overdraw = true;\n//     // mesh.doubleSided = true;\n//     // mesh.position.x = x - canvas.width;\n//     // mesh.position.y = y - canvas.height;\n//     // mesh.position.z = z;\n//     // return mesh;\n// }\n\nexport function setX1(mesh: THREE.Mesh, v: any): void {\n  (mesh.geometry as THREE.Geometry).vertices[0].x = v;\n}\nexport function setY1(mesh: THREE.Mesh, v: any): void {\n  (mesh.geometry as THREE.Geometry).vertices[0].y = v;\n}\nexport function setX2(mesh: THREE.Mesh, v: any): void {\n  (mesh.geometry as THREE.Geometry).vertices[1].x = v;\n}\nexport function setY2(mesh: THREE.Mesh, v: any): void {\n  (mesh.geometry as THREE.Geometry).vertices[1].y = v;\n}\n\n/////////////////////\n/// CREATE SHAPES ///\n/////////////////////\n\n// function fillCurve(color){\n//     var shape = new THREE.Shape(line.getSpacedPoints(100));\n//     var geometry = new THREE.ShapeGeometry( shape );\n//     var mesh = THREE.SceneUtils.createMultiMaterialObject( geometry, [ new THREE.MeshLambertMaterial( { color: 0xeeeeee } )] );\n//     for(var i=0 ; i < this.visualElements.length ; i++){\n\n//     }\n\n// }\n\nexport function createG(\n  dataElements: any[],\n  scene: THREE.Scene\n): GroupElement[] {\n  const visualElements = [];\n  // create group element for every data element\n  for (let i = 0; i < dataElements.length; i++) {\n    visualElements.push(new GroupElement());\n  }\n  return visualElements;\n}\n\nexport class GroupElement {\n  position = { x: 0, y: 0, z: 0 };\n  children: any = [];\n}\n\nexport function createCirclesNoShader(\n  dataElements: any[],\n  scene: THREE.Scene\n): any[] {\n  let material: any;\n  let geometry: any;\n  const visualElements: any[] = [];\n  let c: any;\n  for (let i = 0; i < dataElements.length; i++) {\n    material = new THREE.MeshBasicMaterial({\n      color: 0x000000,\n      transparent: true,\n    });\n    geometry = new THREE.CircleGeometry(1, 10);\n    geometry.dynamic = true;\n    c = new THREE.Mesh(geometry, material);\n    visualElements.push(c);\n    c.position.set(0, 0, 1);\n    c.scale.set(10, 10, 1);\n    scene.add(c);\n  }\n  return visualElements;\n}\n\n// SHADERS\nconst vertexShaderProgram =\n  \"\\\n        attribute vec4 customColor;\\\n        varying vec4 vColor;\\\n        void main() {\\\n            vColor = customColor;\\\n            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1 );\\\n        }\";\n\nconst fragmentShaderProgram =\n  \"\\\n        varying vec4 vColor;\\\n        void main() {\\\n            gl_FragColor = vec4(vColor[0], vColor[1], vColor[2], vColor[3]);\\\n        }\";\n\nexport function createCirclesWithBuffers(\n  query: WebGLElementQuery,\n  scene: THREE.Scene\n): WebGLElementQuery {\n  const dataElements: Record<string, any>[] = query.dataElements;\n  query.IS_SHADER = true;\n  const attributes: any = {\n    customColor: { type: \"c\", value: [] },\n  };\n  const shaderMaterial: THREE.ShaderMaterial = new THREE.ShaderMaterial({\n    // attributes: attributes, // attributes doesn't exists\n    vertexShader: vertexShaderProgram,\n    fragmentShader: fragmentShaderProgram,\n    // lineWidth: 2\n  });\n  shaderMaterial.blending = THREE.NormalBlending;\n  shaderMaterial.depthTest = true;\n  shaderMaterial.transparent = true;\n  shaderMaterial.side = THREE.DoubleSide;\n\n  const visualElements: any[] = [];\n  let c: any;\n  const vertexPositionBuffer: any[] = [];\n  const vertexColorBuffer: any[] = [];\n  const geometry: THREE.BufferGeometry = new THREE.BufferGeometry();\n  // geometry.vertices.push(new THREE.Vector3(10, -10,0))\n  addBufferedRect([], 0, 0, 0, 10, 10, [], [0, 0, 1, 0.5]);\n\n  for (let i = 0; i < dataElements.length; i++) {\n    // addBufferedCirlce(vertexPositionBuffer, Math.random()*10,Math.random()*10,0,2, vertexColorBuffer, [0,0,1,.5] )\n    query.x.push(0);\n    query.y.push(0);\n    query.z.push(0);\n    query.r.push(0);\n    query.fill.push(\"0x000000\");\n    query.stroke.push(\"0x000000\");\n    query.strokewidth.push(1);\n    query.opacity.push(1);\n  }\n  // geometry = new THREE.BufferGeometry();\n\n  // CREATE + ADD MESH\n  geometry.addAttribute(\n    \"position\",\n    new THREE.BufferAttribute(makeBuffer3f([]), 3)\n  );\n\n  geometry.addAttribute(\n    \"customColor\",\n    new THREE.BufferAttribute(makeBuffer4f([]), 4)\n  );\n  query.mesh = new THREE.Mesh(geometry, shaderMaterial);\n  query.mesh.position.set(0, 0, 1);\n\n  scene.add(query.mesh);\n  return query;\n}\n\nexport function createRectangles(\n  dataElements: any[],\n  scene: THREE.Scene\n): any[] {\n  let material: any;\n  let geometry: any;\n  const visualElements: any[] = [];\n  let c: any;\n  for (let i = 0; i < dataElements.length; i++) {\n    const rectShape = new THREE.Shape();\n    rectShape.moveTo(0, 0);\n    rectShape.lineTo(0, -1);\n    rectShape.lineTo(1, -1);\n    rectShape.lineTo(1, 0);\n    rectShape.lineTo(0, 0);\n\n    geometry = new THREE.ShapeGeometry(rectShape);\n    c = new THREE.Mesh(\n      geometry,\n      new THREE.MeshBasicMaterial({ color: 0x000000, transparent: true })\n    );\n    c.position.set(0, 0, 1);\n    visualElements.push(c);\n    scene.add(c);\n\n    geometry = new THREE.Geometry();\n    geometry.vertices.push(\n      new THREE.Vector3(0, 0, 0),\n      new THREE.Vector3(0, -1, 0),\n      new THREE.Vector3(1, -1, 0),\n      new THREE.Vector3(1, 0, 0),\n      new THREE.Vector3(0, 0, 0)\n    );\n    const wireframe = new THREE.Line(\n      geometry,\n      new THREE.LineBasicMaterial({\n        color: 0x000000,\n        transparent: true,\n        linewidth: 1,\n      })\n    );\n    (c as any)[\"wireframe\"] = wireframe;\n    wireframe.position.set(0, 0, 1.1);\n    scene.add(wireframe);\n  }\n  return visualElements;\n}\n\nexport function createPaths(dataElements: any[], scene: THREE.Scene): any[] {\n  let material: any;\n  let geometry: any;\n  const visualElements: any[] = [];\n  let c: any, p: any;\n  for (let i = 0; i < dataElements.length; i++) {\n    geometry = new THREE.Geometry();\n    c = new THREE.Line(\n      geometry,\n      new THREE.LineBasicMaterial({ color: 0x000000, transparent: true })\n    );\n    c.position.set(0, 0, 0);\n    visualElements.push(c);\n    scene.add(c);\n  }\n  return visualElements;\n}\n\nexport function createPolygons(dataElements: any[], scene: THREE.Scene): any[] {\n  let material: any;\n  let geometry: any;\n  const visualElements: any[] = [];\n  let c: any, p: any;\n  for (let i = 0; i < dataElements.length; i++) {\n    geometry = new THREE.Geometry();\n    // geometry.vertices.push(\n    //     new THREE.Vector3(5, 0, 0 ),\n    //     new THREE.Vector3( 15, 3, 0 ),\n    //     new THREE.Vector3( 15, -3, 0 )\n    // );\n    // geometry.faces.push(new THREE.Face3(0, 1, 2));\n    c = new THREE.Mesh(\n      geometry,\n      new THREE.MeshBasicMaterial({\n        color: 0x000000,\n        transparent: true,\n        side: THREE.DoubleSide,\n      })\n    );\n    c.doubleSided = true;\n    c.position.set(0, 0, 0);\n    visualElements.push(c);\n    scene.add(c);\n  }\n  return visualElements;\n}\n\nexport function createLines(dataElements: any[], scene: THREE.Scene): any[] {\n  let material: any;\n  let geometry: any;\n  const visualElements: any[] = [];\n  let c: any, p: any;\n  for (let i = 0; i < dataElements.length; i++) {\n    geometry = new THREE.Geometry();\n    geometry.vertices.push(\n      new THREE.Vector3(-10, 0, 0),\n      new THREE.Vector3(0, 10, 0)\n    );\n    c = new THREE.Line(\n      geometry,\n      new THREE.LineBasicMaterial({ color: 0x000000, transparent: true })\n    );\n    c.position.set(0, 0, 0);\n    visualElements.push(c);\n    scene.add(c);\n  }\n  return visualElements;\n}\n\nexport function createWebGLText(\n  dataElements: any[],\n  scene: THREE.Scene\n): any[] {\n  const visualElements = [];\n  let mesh: any;\n  for (let i = 0; i < dataElements.length; i++) {\n    mesh = new THREE.Mesh(\n      new THREE.PlaneGeometry(1000, 100),\n      new THREE.MeshBasicMaterial()\n    );\n    mesh.doubleSided = true;\n    visualElements.push(mesh);\n    scene.add(mesh);\n  }\n  return visualElements;\n}\n\nexport function createPath(mesh: THREE.Mesh, points: any[]): void {\n  (mesh.geometry as THREE.Geometry).vertices = [];\n  for (let i = 0; i < points.length; i++) {\n    (mesh.geometry as THREE.Geometry).vertices.push(\n      new THREE.Vector3(points[i].x, points[i].y, 0)\n    );\n  }\n  (mesh.geometry as THREE.Geometry).verticesNeedUpdate = true;\n}\n\nexport function createPolygon(mesh: THREE.Mesh, points: THREE.Vector2[]): void {\n  const vectors = [];\n  const shape = new THREE.Shape(points);\n  mesh.geometry = new THREE.ShapeGeometry(shape);\n  mesh.geometry.verticesNeedUpdate = true;\n}\n\n///////////////////\n/// INTERACTION ///\n///////////////////\n\nexport class WebGLInteractor {\n  scene: any;\n  canvas: any;\n  camera: any;\n  raycaster: any;\n  mouse: any[] = [];\n  mouseStart: any[] = [];\n  mouseDown = false;\n  cameraStart: any[] = [];\n  panOffset: any[] = [];\n  lastIntersectedSelections: any[] = [];\n  lastIntersectedElements: any[] = [];\n  isPanEnabled = true;\n  isHorizontalPanEnabled = true;\n\n  isLassoEnabled = true;\n  lassoPoints: any[] = [];\n  lassoStartHandler: any; // BEFORE Function;\n  lassoMoveHandler: any; // BEFORE Function;\n  lassoEndHandler: any; // BEFORE Function;\n\n  mouseOverSelections: WebGLElementQuery[] = [];\n  mouseMoveSelections: WebGLElementQuery[] = [];\n  mouseOutSelections: WebGLElementQuery[] = [];\n  mouseDownSelections: WebGLElementQuery[] = [];\n  mouseUpSelections: WebGLElementQuery[] = [];\n  clickSelections: WebGLElementQuery[] = [];\n\n  constructor(\n    scene: THREE.Scene,\n    canvas: HTMLCanvasElement,\n    camera: THREE.Camera\n  ) {\n    this.scene = scene;\n    this.canvas = canvas;\n    this.camera = camera;\n    this.mouse = [0, 0];\n    canvas.addEventListener(\"mousemove\", (e) => {\n      this.mouseMoveHandler(e);\n    });\n    canvas.addEventListener(\"mousedown\", (e) => {\n      this.mouseDownHandler(e);\n    });\n    canvas.addEventListener(\"mouseup\", (e) => {\n      this.mouseUpHandler(e);\n    });\n    canvas.addEventListener(\"click\", (e) => {\n      this.clickHandler(e);\n    });\n\n    // not really working in iFrames..\n    // window.addEventListener('keyDown', (e)=>{\n    //     this.keyDownHandler(e);\n    // })\n    // window.addEventListener('keyUp', (e)=>{\n    //     this.keyUpHandler(e);\n    // })\n  }\n\n  register(selection: WebGLElementQuery, method: string): void {\n    switch (method) {\n      case \"mouseover\":\n        this.mouseOverSelections.push(selection);\n        break;\n      case \"mousemove\":\n        this.mouseMoveSelections.push(selection);\n        break;\n      case \"mouseout\":\n        this.mouseOutSelections.push(selection);\n        break;\n      case \"mousedown\":\n        this.mouseDownSelections.push(selection);\n        break;\n      case \"mouseup\":\n        this.mouseUpSelections.push(selection);\n        break;\n      case \"click\":\n        this.clickSelections.push(selection);\n        break;\n    }\n  }\n\n  addEventListener(eventName: string, f: (points: any[]) => void): void {\n    if (eventName == \"lassoStart\") this.lassoStartHandler = f;\n    if (eventName == \"lassoEnd\") this.lassoEndHandler = f;\n    if (eventName == \"lassoMove\") this.lassoMoveHandler = f;\n  }\n\n  // Event handlers\n  mouseMoveHandler(e: any): void {\n    this.mouse = mouseToWorldCoordinates(e.clientX, e.clientY);\n\n    if (this.isLassoEnabled && e.which == 2) {\n      this.lassoPoints.push(this.mouse);\n      if (this.lassoMoveHandler) this.lassoMoveHandler(this.lassoPoints);\n    } else {\n      let intersectedVisualElements: any[] = [];\n\n      // remove previous highlighting\n      for (let i = 0; i < this.lastIntersectedSelections.length; i++) {\n        for (let j = 0; j < this.lastIntersectedElements[i].length; j++) {\n          this.lastIntersectedSelections[i].call(\n            \"mouseout\",\n            this.lastIntersectedElements[i][j]\n          );\n        }\n      }\n\n      this.lastIntersectedSelections = [];\n      this.lastIntersectedElements = [];\n\n      let nothingIntersected = true;\n\n      // call mouseover on all elements with a mouse over handler\n      for (let i = 0; i < this.mouseOverSelections.length; i++) {\n        // If selecton is SHADER, check manually\n        intersectedVisualElements = this.intersect(\n          this.mouseOverSelections[i],\n          this.mouse[0],\n          this.mouse[1]\n        );\n        if (intersectedVisualElements.length > 0) {\n          this.lastIntersectedElements.push(intersectedVisualElements);\n          this.lastIntersectedSelections.push(this.mouseOverSelections[i]);\n        }\n        for (let j = 0; j < intersectedVisualElements.length; j++) {\n          this.mouseOverSelections[i].call(\n            \"mouseover\",\n            intersectedVisualElements[j],\n            e\n          );\n        }\n        if (intersectedVisualElements.length > 0) nothingIntersected = false;\n      }\n\n      // call mousemove on all elements with a mouse move handler\n      for (let i = 0; i < this.mouseMoveSelections.length; i++) {\n        intersectedVisualElements = this.intersect(\n          this.mouseMoveSelections[i],\n          this.mouse[0],\n          this.mouse[1]\n        );\n        for (let j = 0; j < intersectedVisualElements.length; j++) {\n          this.mouseMoveSelections[i].call(\n            \"mousemove\",\n            intersectedVisualElements[j],\n            e\n          );\n        }\n        if (intersectedVisualElements.length > 0) nothingIntersected = false;\n      }\n\n      // if nothing intersected pan:\n      if (nothingIntersected && this.mouseDown) {\n        if (this.isPanEnabled) {\n          this.panOffset = [\n            e.clientX - this.mouseStart[0],\n            e.clientY - this.mouseStart[1],\n          ];\n          if (this.isHorizontalPanEnabled)\n            webgl.camera.position.x =\n              this.cameraStart[0] - this.panOffset[0] / webgl.camera.zoom;\n          webgl.camera.position.y =\n            this.cameraStart[1] + this.panOffset[1] / webgl.camera.zoom;\n          webgl.render();\n        }\n      }\n    }\n  }\n  clickHandler(e: any): void {\n    this.mouse = mouseToWorldCoordinates(e.clientX, e.clientY);\n\n    let intersectedVisualElements: any[] = [];\n\n    // call mouseclick on all elements with a mouse over handler\n    for (let i = 0; i < this.clickSelections.length; i++) {\n      intersectedVisualElements = this.intersect(\n        this.clickSelections[i],\n        this.mouse[0],\n        this.mouse[1]\n      );\n      for (let j = 0; j < intersectedVisualElements.length; j++) {\n        this.clickSelections[i].call(\"click\", intersectedVisualElements[j], e);\n      }\n    }\n    this.mouseDown = false;\n  }\n\n  mouseDownHandler(e: any): void {\n    this.mouse = mouseToWorldCoordinates(e.clientX, e.clientY);\n    this.mouseStart = [e.clientX, e.clientY];\n    this.cameraStart = [webgl.camera.position.x, webgl.camera.position.y];\n    this.mouseDown = true;\n    let intersectedVisualElements: any[] = [];\n    for (let i = 0; i < this.mouseDownSelections.length; i++) {\n      intersectedVisualElements = this.intersect(\n        this.mouseDownSelections[i],\n        this.mouse[0],\n        this.mouse[1]\n      );\n      for (let j = 0; j < intersectedVisualElements.length; j++) {\n        this.mouseDownSelections[i].call(\n          \"mousedown\",\n          intersectedVisualElements[j],\n          e\n        );\n      }\n    }\n    this.lassoPoints = [];\n    this.lassoPoints.push(this.mouse);\n    if (this.lassoStartHandler && e.which == 2) {\n      this.lassoStartHandler(this.lassoPoints);\n    }\n  }\n  mouseUpHandler(e: any): void {\n    this.mouse = mouseToWorldCoordinates(e.clientX, e.clientY);\n    let intersectedVisualElements: any[] = [];\n    for (let i = 0; i < this.mouseUpSelections.length; i++) {\n      intersectedVisualElements = this.intersect(\n        this.mouseUpSelections[i],\n        this.mouse[0],\n        this.mouse[1]\n      );\n      for (let j = 0; j < intersectedVisualElements.length; j++) {\n        this.mouseUpSelections[i].call(\n          \"mouseup\",\n          intersectedVisualElements[j],\n          e\n        );\n      }\n    }\n    this.mouseDown = false;\n    if (this.lassoEndHandler && e.which == 2) {\n      this.lassoEndHandler(this.lassoPoints);\n    }\n  }\n\n  intersect(selection: WebGLElementQuery, mousex?: any, mousey?: any): any[] {\n    switch (selection.shape) {\n      case \"circle\":\n        return this.intersectCircles(selection);\n        break;\n      case \"rect\":\n        return this.intersectRects(selection);\n        break;\n      case \"path\":\n        return this.intersectPaths(selection);\n        break;\n      case \"text\":\n        return this.intersectRects(selection);\n        break;\n    }\n    return [];\n  }\n\n  // returns list of data elements\n\n  intersectCircles(selection: WebGLElementQuery): any[] {\n    const intersectedElements = [];\n    let d;\n    for (let i = 0; i < selection.dataElements.length; i++) {\n      d = Math.sqrt(\n        Math.pow(this.mouse[0] - selection.x[i], 2) +\n          Math.pow(this.mouse[1] - selection.y[i], 2)\n      );\n      if (d <= selection.r[i])\n        intersectedElements.push(selection.dataElements[i]);\n    }\n\n    return intersectedElements;\n  }\n  intersectRects(selection: WebGLElementQuery): any[] {\n    const intersectedElements = [];\n    let d;\n    let e;\n    for (let i = 0; i < selection.visualElements.length; i++) {\n      e = selection.visualElements[i];\n      if (\n        this.mouse[0] >= e.position.x &&\n        this.mouse[0] <= e.position.x + e.geometry.vertices[0].x * e.scale.x &&\n        this.mouse[1] <= e.position.y &&\n        this.mouse[1] >= e.position.y + e.geometry.vertices[1].y * e.scale.y\n      )\n        intersectedElements.push(selection.dataElements[i]);\n    }\n    return intersectedElements;\n  }\n  intersectPaths(selection: WebGLElementQuery): any[] {\n    const intersectedElements = [];\n    let e;\n    let v1, v2;\n    let x, y;\n    let found = false;\n    for (let i = 0; i < selection.visualElements.length; i++) {\n      e = selection.visualElements[i];\n      for (let j = 1; j < e.geometry.vertices.length; j++) {\n        v1 = e.geometry.vertices[j - 1];\n        v1 = {\n          x: v1.x + selection.x[i],\n          y: v1.y + selection.y[i],\n        };\n        v2 = e.geometry.vertices[j];\n        v2 = {\n          x: v2.x + selection.x[i],\n          y: v2.y + selection.y[i],\n        };\n        if (\n          distToSegmentSquared({ x: this.mouse[0], y: this.mouse[1] }, v1, v2) <\n          3\n        ) {\n          intersectedElements.push(selection.dataElements[i]);\n          found = true;\n          break;\n        }\n      }\n      if (found) break;\n    }\n\n    return intersectedElements;\n\n    function sqr(x: number) {\n      return x * x;\n    }\n    function dist2(v: any, w: any) {\n      return sqr(v.x - w.x) + sqr(v.y - w.y);\n    }\n    function distToSegmentSquared(p: any, v: any, w: any) {\n      const l2 = dist2(v, w);\n\n      if (l2 == 0) return dist2(p, v);\n\n      const t = ((p.x - v.x) * (w.x - v.x) + (p.y - v.y) * (w.y - v.y)) / l2;\n\n      if (t < 0) return dist2(p, v);\n      if (t > 1) return dist2(p, w);\n\n      return dist2(p, { x: v.x + t * (w.x - v.x), y: v.y + t * (w.y - v.y) });\n    }\n\n    function distToSegment(p: any, v: any, w: any): number {\n      return Math.sqrt(distToSegmentSquared(p, v, w));\n    }\n  }\n}\n\n// Calculate intersection\nexport function mouseToWorldCoordinates(mouseX: any, mouseY: any): number[] {\n  const rect = webgl.canvas.getBoundingClientRect();\n  const x =\n    webgl.camera.position.x +\n    webgl.camera.left / webgl.camera.zoom +\n    (mouseX - rect.left) / webgl.camera.zoom;\n  const y =\n    webgl.camera.position.y +\n    webgl.camera.top / webgl.camera.zoom -\n    (mouseY - rect.top) / webgl.camera.zoom; // this.mouse[1] *= -1\n  return [x, y];\n}\n\nexport function curve(points: any[]): any[] {\n  const arrayPoints: any[] = [];\n  for (let i = 0; i < points.length; i++) {\n    if (!isNaN(points[i].x)) arrayPoints.push([points[i].x, points[i].y]);\n  }\n\n  const spline = new BSpline(arrayPoints, 3); //making BSpline\n  const curvePoints = [];\n  for (let t = 0; t <= 1; t += 0.01) {\n    const p = spline.calcAt(t);\n    curvePoints.push({ x: p[0], y: p[1] });\n  }\n  return curvePoints;\n}\n\n///////////////////\n/// UI ELEMENTS ///\n///////////////////\n\nexport class CheckBox {\n  selected = false;\n  changeCallBack: () => void = () => null; // BEFORE Function;\n  circle: any;\n  frame: any;\n\n  constructor() {\n    this.frame = selectAll()\n      .data([0])\n      .append(\"circle\")\n      .attr(\"r\", 5)\n      .style(\"fill\", \"#fff\")\n      .style(\"stroke\", \"#000000\")\n      .on(\"click\", () => {\n        this.selected = !this.selected;\n        this.circle.style(\"opacity\", this.selected ? 1 : 0);\n        if (this.changeCallBack != undefined) this.changeCallBack();\n      });\n    this.circle = selectAll().data([0]);\n    // .append('circle')\n    //     .attr('r', 3)\n    //     .attr('z', 1)\n    //     .style('fill', '#000000')\n    //     .style('opacity', 0);\n  }\n\n  attr(attrName: string, value: any): CheckBox | undefined {\n    switch (attrName) {\n      case \"x\":\n        this.frame.attr(\"x\", value);\n        // this.circle.attr('x', value);\n        return this;\n      case \"y\":\n        this.frame.attr(\"y\", value);\n        // this.circle.attr('y', value);\n        return this;\n    }\n  }\n\n  on(eventType: string, fn: () => void): void {\n    switch (eventType) {\n      case \"change\":\n        this.changeCallBack = fn;\n    }\n  }\n}\n\n// }\n\nexport class THREEx {\n  canvas: any;\n  context: any;\n  texture: any;\n\n  /**\n   * create a dynamic texture with a underlying canvas\n   *\n   * @param {Number} width  width of the canvas\n   * @param {Number} height height of the canvas\n   */\n  constructor(width: number, height: number) {\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = width;\n    canvas.height = height;\n    this.canvas = canvas;\n\n    const context = canvas.getContext(\"2d\");\n    this.context = context;\n\n    const texture = new THREE.Texture(canvas);\n    this.texture = texture;\n  }\n\n  /**\n   * clear the canvas\n   *\n   * @param  {String*} fillStyle \t\tthe fillStyle to clear with, if not provided, fallback on .clearRect\n   * @return {THREEx.DynamicTexture}      the object itself, for chained texture\n   */\n\n  clear(fillStyle?: any): THREEx {\n    // depends on fillStyle\n    if (fillStyle !== undefined) {\n      this.context.fillStyle = fillStyle;\n      this.context.fillRect(0, 0, this.canvas.width, this.canvas.height);\n    } else {\n      this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    }\n    // make the texture as .needsUpdate\n    this.texture.needsUpdate = true;\n    // for chained API\n    return this;\n  }\n\n  /**\n   * draw text\n   *\n   * @param  {String}\t\ttext\tthe text to display\n   * @param  {Number|undefined}\tx\tif provided, it is the x where to draw, if not, the text is centered\n   * @param  {Number}\t\ty\tthe y where to draw the text\n   * @param  {String*} \t\tfillStyle the fillStyle to clear with, if not provided, fallback on .clearRect\n   * @param  {String*} \t\tcontextFont the font to use\n   * @return {THREEx.DynamicTexture}\tthe object itself, for chained texture\n   */\n\n  drawText(\n    text: string,\n    x: number | undefined,\n    y: number,\n    fillStyle?: string,\n    contextFont?: string\n  ): THREEx {\n    // set font if needed\n    if (contextFont !== undefined) this.context.font = contextFont;\n    // if x isnt provided\n    if (x === undefined || x === null) {\n      const textSize = this.context.measureText(text);\n      x = (this.canvas.width - textSize.width) / 2;\n    }\n    // actually draw the text\n    this.context.fillStyle = fillStyle;\n    this.context.fillText(text, x, y);\n    // make the texture as .needsUpdate\n    this.texture.needsUpdate = true;\n    // for chained API\n    return this;\n  }\n\n  drawTextCooked(text: string, options: any): THREEx {\n    const context = this.context;\n    const canvas = this.canvas;\n    options = options || {};\n    const params = {\n      margin: options.margin !== undefined ? options.margin : 0.1,\n      lineHeight: options.lineHeight !== undefined ? options.lineHeight : 0.1,\n      align: options.align !== undefined ? options.align : \"left\",\n      fillStyle: options.fillStyle !== undefined ? options.fillStyle : \"black\",\n    };\n    context.save();\n    context.fillStyle = params.fillStyle;\n\n    let y = (params.lineHeight + params.margin) * canvas.height;\n    while (text.length > 0) {\n      // compute the text for specifically this line\n      const maxText = computeMaxTextLength(text);\n      // update the remaining text\n      text = text.substr(maxText.length);\n\n      // compute x based on params.align\n      const textSize = context.measureText(maxText);\n\n      // new variable to recognize if x exists or not\n      let computeX = true;\n      let x = 0;\n      if (params.align === \"left\") {\n        x = params.margin * canvas.width;\n      } else if (params.align === \"right\") {\n        x = (1 - params.margin) * canvas.width - textSize.width;\n      } else if (params.align === \"center\") {\n        x = (canvas.width - textSize.width) / 2;\n      } else {\n        computeX = false;\n        console.assert(false);\n      }\n\n      if (computeX) {\n        // actually draw the text at the proper position\n        this.context.fillText(maxText, x, y);\n      }\n\n      // goto the next line\n      y += params.lineHeight * canvas.height;\n    }\n    context.restore();\n\n    // make the texture as .needsUpdate\n    this.texture.needsUpdate = true;\n    // for chained API\n    return this;\n\n    function computeMaxTextLength(text: string) {\n      let maxText = \"\";\n      const maxWidth = (1 - params.margin * 2) * canvas.width;\n      while (maxText.length !== text.length) {\n        const textSize = context.measureText(maxText);\n        if (textSize.width > maxWidth) break;\n        maxText += text.substr(maxText.length, 1);\n      }\n      return maxText;\n    }\n  }\n\n  /**\n   * execute the drawImage on the internal context\n   * the arguments are the same the official context2d.drawImage\n   */\n  drawImage(...args: any /* same params as context2d.drawImage */): THREEx {\n    // call the drawImage\n    this.context.drawImage.apply(...args);\n    // make the texture as .needsUpdate\n    this.texture.needsUpdate = true;\n    // for chained API\n    return this;\n  }\n}\n\n/*\nvar THREEx: any = THREEx || {}\n\n//////////////////////////////////////////////////////////////////////////////////\n//\t\tConstructor\t\t\t\t\t\t\t//\n//////////////////////////////////////////////////////////////////////////////////\n\n/**\n * create a dynamic texture with a underlying canvas\n * \n * @param {Number} width  width of the canvas\n * @param {Number} height height of the canvas\n */\n/*\nTHREEx.DynamicTexture = function (width: number, height: number) {\n    var canvas = document.createElement('canvas')\n    canvas.width = width\n    canvas.height = height\n    this.canvas = canvas\n\n    var context = canvas.getContext('2d')\n    this.context = context\n\n    var texture = new THREE.Texture(canvas)\n    this.texture = texture\n}\n\n//////////////////////////////////////////////////////////////////////////////////\n//\t\tmethods\t\t\t\t\t\t\t\t//\n//////////////////////////////////////////////////////////////////////////////////\n\n/**\n * clear the canvas\n * \n * @param  {String*} fillStyle \t\tthe fillStyle to clear with, if not provided, fallback on .clearRect\n * @return {THREEx.DynamicTexture}      the object itself, for chained texture\n */\n/*\nTHREEx.DynamicTexture.prototype.clear = function (fillStyle: any) {\n    // depends on fillStyle\n    if (fillStyle !== undefined) {\n        this.context.fillStyle = fillStyle\n        this.context.fillRect(0, 0, this.canvas.width, this.canvas.height)\n    } else {\n        this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)\n    }\n    // make the texture as .needsUpdate\n    this.texture.needsUpdate = true;\n    // for chained API \n    return this;\n}\n\n/**\n * draw text\n * \n * @param  {String}\t\ttext\tthe text to display\n * @param  {Number|undefined}\tx\tif provided, it is the x where to draw, if not, the text is centered\n * @param  {Number}\t\ty\tthe y where to draw the text\n * @param  {String*} \t\tfillStyle the fillStyle to clear with, if not provided, fallback on .clearRect\n * @param  {String*} \t\tcontextFont the font to use\n * @return {THREEx.DynamicTexture}\tthe object itself, for chained texture\n */\n/*\nTHREEx.DynamicTexture.prototype.drawText = function (text, x, y, fillStyle, contextFont) {\n    // set font if needed\n    if (contextFont !== undefined) this.context.font = contextFont;\n    // if x isnt provided \n    if (x === undefined || x === null) {\n        var textSize = this.context.measureText(text);\n        x = (this.canvas.width - textSize.width) / 2;\n    }\n    // actually draw the text\n    this.context.fillStyle = fillStyle;\n    this.context.fillText(text, x, y);\n    // make the texture as .needsUpdate\n    this.texture.needsUpdate = true;\n    // for chained API \n    return this;\n};\n\nTHREEx.DynamicTexture.prototype.drawTextCooked = function (text, options) {\n    var context = this.context\n    var canvas = this.canvas\n    options = options || {}\n    var params = {\n        margin: options.margin !== undefined ? options.margin : 0.1,\n        lineHeight: options.lineHeight !== undefined ? options.lineHeight : 0.1,\n        align: options.align !== undefined ? options.align : 'left',\n        fillStyle: options.fillStyle !== undefined ? options.fillStyle : 'black',\n    }\n    context.save()\n    context.fillStyle = params.fillStyle;\n\n    var y = (params.lineHeight + params.margin) * canvas.height\n    while (text.length > 0) {\n        // compute the text for specifically this line\n        var maxText = computeMaxTextLength(text)\n        // update the remaining text\n        text = text.substr(maxText.length)\n\n\n        // compute x based on params.align\n        var textSize = context.measureText(maxText);\n        if (params.align === 'left') {\n            var x = params.margin * canvas.width\n        } else if (params.align === 'right') {\n            var x = (1 - params.margin) * canvas.width - textSize.width\n        } else if (params.align === 'center') {\n            var x = (canvas.width - textSize.width) / 2;\n        } else console.assert(false)\n\n        // actually draw the text at the proper position\n        this.context.fillText(maxText, x, y);\n\n        // goto the next line\n        y += params.lineHeight * canvas.height\n    }\n    context.restore()\n\n    // make the texture as .needsUpdate\n    this.texture.needsUpdate = true;\n    // for chained API\n    return this;\n\n    function computeMaxTextLength(text) {\n        var maxText = ''\n        var maxWidth = (1 - params.margin * 2) * canvas.width\n        while (maxText.length !== text.length) {\n            var textSize = context.measureText(maxText);\n            if (textSize.width > maxWidth) break;\n            maxText += text.substr(maxText.length, 1)\n        }\n        return maxText\n    }\n}\n\n/**\n * execute the drawImage on the internal context\n * the arguments are the same the official context2d.drawImage\n */\n/*\nTHREEx.DynamicTexture.prototype.drawImage = function () {\n    // call the drawImage\n    this.context.drawImage.apply(this.context, arguments)\n    // make the texture as .needsUpdate\n    this.texture.needsUpdate = true;\n    // for chained API \n    return this;\n}\n*/\n\n//////////////////\n/// VECTOR OPS ///\n//////////////////\n\n//module geometry {\n\nexport function length(v1: any[]): number {\n  return Math.sqrt(v1[0] * v1[0] + v1[1] * v1[1]);\n}\n\nexport function normalize(v: number[]): number[] {\n  const l = length(v);\n  return [v[0] / l, v[1] / l];\n}\n\nexport function setLength(v: number[], l: number): number[] {\n  const len = length(v);\n  return [(l * v[0]) / len, (l * v[1]) / len];\n}\n\n//}\n","import * as d3 from \"d3\";\n\nexport class RangeSlider {\n  /* VISUALIZATION PARAMETERS */\n  BAR_WIDTH = 5;\n  RADIUS_HANDLE = 4;\n\n  LEFT: number = this.RADIUS_HANDLE;\n  RIGHT: number = this.RADIUS_HANDLE;\n  HEIGHT = 10;\n  TOP = 0;\n\n  max: number;\n  min: number;\n  stepWidth: number;\n  hasTickmarks: boolean;\n  isInverted = false;\n\n  svg: any; // BEFORE d3.Selection<d3.BaseType, {}, HTMLElement, any>; // ???????????????\n  x: number;\n  y: number;\n  width: number;\n  g: any; // BEFORE d3.Selection<d3.BaseType, {}, HTMLElement, any>; // ???????????????\n\n  dragEndCallBackFn: (min: number, max: number) => void = () => null; // BEFORE Function;\n\n  constructor(\n    x: number,\n    y: number,\n    width: number,\n    minValue: number,\n    maxValue: number,\n    stepWidth: number,\n    tickMarks?: boolean\n  ) {\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.min = minValue;\n    this.max = maxValue;\n    this.stepWidth = stepWidth;\n\n    if (tickMarks != undefined) this.hasTickmarks = tickMarks;\n    else this.hasTickmarks = false;\n  }\n\n  setDragEndCallBack(fn: (min: number, max: number) => void): void {\n    this.dragEndCallBackFn = fn;\n  }\n\n  valueRange: any; // BEFORE d3.ScaleLinear<number, number>;\n  val2spaceScale: any; // BEFORE d3.ScaleLinear<number, number>;\n\n  drag: any; // BEFORE d3.DragBehavior<Element, {}, {} | d3.SubjectPosition>;\n  bar0: any; // BEFORE d3.Selection<d3.BaseType, {}, HTMLElement, any>;\n  bar1: any; // BEFORE d3.Selection<d3.BaseType, {}, HTMLElement, any>;\n  circleMin: any;\n  circleMax: any;\n  rect: any;\n\n  appendTo(svg: d3.Selection<any, any, any, any>) {\n    this.svg = svg;\n\n    this.rect = this.svg[\"_groups\"][0][0].getBoundingClientRect();\n\n    this.valueRange = d3\n      .scaleLinear()\n      .domain([0, this.width])\n      .range([this.min, this.max]);\n\n    this.drag = d3\n      .drag()\n      //.origin(Object)  // ???\n      .on(\"start\", (ev) => {\n        this.dragStart(ev.sourceEvent);\n      })\n      .on(\"drag\", (ev) => {\n        this.dragMove(ev.sourceEvent);\n      });\n\n    this.svg = svg;\n\n    this.g = svg\n      .append(\"g\")\n      .attr(\"height\", this.HEIGHT)\n      .attr(\"width\", this.width)\n      .attr(\"transform\", \"translate(\" + this.x + \",\" + this.y + \")\");\n\n    this.g\n      .append(\"line\")\n      .attr(\"x1\", this.LEFT)\n      .attr(\"y1\", this.TOP)\n      .attr(\"x2\", this.width - this.RIGHT - this.LEFT)\n      .attr(\"y2\", this.TOP)\n      .style(\"stroke\", \"#aaa\");\n\n    if (this.hasTickmarks) {\n      this.val2spaceScale = d3\n        .scaleLinear()\n        .domain([this.min, this.max])\n        .range([this.LEFT, this.width - this.RIGHT - this.LEFT]);\n\n      for (let i = this.min; i <= this.max; i += this.stepWidth) {\n        const x = this.val2spaceScale(i);\n        this.g\n          .append(\"line\")\n          .attr(\"class\", \"rangeTick\")\n          .attr(\"x1\", x)\n          .attr(\"y1\", this.TOP)\n          .attr(\"x2\", x)\n          .attr(\"y2\", this.TOP + 20)\n          .style(\"stroke\", \"#bbb\");\n\n        this.g\n          .append(\"text\")\n          .attr(\"class\", \"rangeTickText\")\n          .attr(\"x\", x)\n          .attr(\"y\", this.TOP + 20)\n          .text(i.toFixed(1))\n          .style(\"opacity\", 0.5)\n          .style(\"font-family\", \"Helvetica\")\n          .style(\"font-weigth\", \"100\")\n          .style(\"font-size\", \"7pt\");\n      }\n    }\n\n    if (this.isInverted) {\n      this.bar0 = this.g\n        .append(\"rect\")\n        .attr(\"x\", this.LEFT)\n        .attr(\"y\", this.TOP)\n        .attr(\"height\", this.BAR_WIDTH)\n        .attr(\"width\", 0)\n        .style(\"fill\", \"#bbb\")\n        .call(this.drag)\n        .attr(\"id\", \"bar0\");\n      this.bar1 = this.g\n        .append(\"rect\")\n        .attr(\"x\", this.RIGHT)\n        .attr(\"y\", this.TOP)\n        .attr(\"height\", this.BAR_WIDTH)\n        .attr(\"width\", 0)\n        .style(\"fill\", \"#bbb\")\n        .call(this.drag)\n        .attr(\"id\", \"bar1\");\n    } else {\n      this.bar0 = this.g\n        .append(\"rect\")\n        .attr(\"x\", this.LEFT)\n        .attr(\"y\", this.TOP)\n        .attr(\"height\", this.BAR_WIDTH)\n        .attr(\"width\", this.width - this.RIGHT - this.LEFT)\n        .style(\"fill\", \"#bbb\")\n        .call(this.drag)\n        .attr(\"id\", \"bar0\");\n      this.bar1 = null;\n    }\n\n    this.circleMin = this.g\n      .append(\"circle\")\n      .attr(\"id\", \"sliderKnobMin\")\n      .attr(\"r\", this.RADIUS_HANDLE)\n      .attr(\"cx\", this.LEFT)\n      .attr(\"cy\", this.TOP + this.BAR_WIDTH)\n      .attr(\"fill\", \"#777\")\n      .attr(\n        \"onchange\",\n        \"trace.event('vis_27',document.location.pathname,'Time Sliden Min','cx' + this.getAttribute('cx'))\"\n      )\n      .attr(\n        \"onmouseup\",\n        \"trace.event('vis_27',document.location.pathname,'Time Sliden Min','cx' + this.getAttribute('cx'))\"\n      )\n      .call(this.drag);\n\n    this.circleMax = this.g\n      .append(\"circle\")\n      .attr(\"id\", \"sliderKnobMax\")\n      .attr(\"r\", this.RADIUS_HANDLE)\n      .attr(\"cx\", this.width - this.RIGHT)\n      .attr(\"cy\", this.TOP + this.BAR_WIDTH)\n      .attr(\"fill\", \"#777\")\n      .attr(\n        \"onchange\",\n        \"trace.event('vis_28',document.location.pathname,'Time Sliden Max','cx' + this.getAttribute('cx'))\"\n      )\n      .attr(\n        \"onmouseup\",\n        \"trace.event('vis_28',document.location.pathname,'Time Sliden Max','cx' + this.getAttribute('cx'))\"\n      )\n      .call(this.drag);\n  }\n\n  dragStartXMouse = 0; // BEFORE number;\n  dragStartXBar = 0; // BEFORE number;\n  dragObj: any;\n  currentBarLength = 0; // BEFORE number;\n\n  dragStart(ev: MouseEvent): void {\n    this.dragStartXMouse = Math.max(\n      this.LEFT,\n      Math.min(this.width - this.RIGHT, this.getRelX(ev))\n    );\n    const sourceEvent = ev; //(ev).sourceEvent; //(d3.event as D3.BaseEvent)\n    this.dragObj = sourceEvent ? sourceEvent.target : undefined;\n    if (this.isInverted) {\n      // determine whether we are left of min, in between, or right of max\n      // the startxbar is the left end of whichever segment we are in,\n      // and the barlength is same\n      const minPos: number = parseInt(this.circleMin.attr(\"cx\"));\n      const maxPos: number = parseInt(this.circleMax.attr(\"cx\"));\n      if (this.dragStartXMouse < minPos) {\n        this.dragStartXBar = this.LEFT;\n        this.currentBarLength = minPos - this.LEFT;\n      } else if (this.dragStartXMouse < maxPos) {\n        this.dragStartXBar = minPos;\n        this.currentBarLength = maxPos - minPos;\n      } else {\n        this.dragStartXBar = maxPos;\n        this.currentBarLength = this.width - this.RIGHT - maxPos;\n      }\n    } else {\n      this.dragStartXBar = parseInt(this.bar0.attr(\"x\"));\n      this.currentBarLength = parseInt(this.bar0.attr(\"width\"));\n    }\n  }\n\n  dragMove(ev: MouseEvent): void {\n    // if we are dragging the entire bar\n    if (!this.isInverted && this.dragObj.id == this.bar0.attr(\"id\")) {\n      const xOffset =\n        Math.max(\n          this.LEFT,\n          Math.min(this.width - this.RIGHT, this.getRelX(ev))\n        ) - this.dragStartXMouse;\n      const x1 = Math.max(\n        this.LEFT,\n        Math.min(\n          this.width - this.RIGHT - this.currentBarLength,\n          this.dragStartXBar + xOffset\n        )\n      );\n      this.bar0.attr(\"x\", x1);\n      this.circleMin.attr(\"cx\", x1);\n      this.circleMax.attr(\"cx\", x1 + this.currentBarLength);\n      // or else we are dragging one of the circles.\n    } else if (\n      this.isInverted &&\n      (this.dragObj.id == this.bar0.attr(\"id\") ||\n        this.dragObj.id == this.bar1.attr(\"id\"))\n    ) {\n      // when inverted, dragging bars does nothing\n      return;\n    } else {\n      d3.select(this.dragObj).attr(\n        \"cx\",\n        Math.max(this.LEFT, Math.min(this.width - this.RIGHT, this.getRelX(ev)))\n      );\n      if (this.isInverted) {\n        this.bar0\n          .attr(\"x\", this.LEFT)\n          .attr(\"width\", this.circleMin.attr(\"cx\") - this.LEFT);\n        this.bar1\n          .attr(\"x\", this.circleMax.attr(\"cx\"))\n          .attr(\n            \"width\",\n            this.width - this.RIGHT * 2 - this.circleMax.attr(\"cx\")\n          );\n      } else {\n        this.bar0\n          .attr(\"x\", this.circleMin.attr(\"cx\"))\n          .attr(\"width\", this.circleMax.attr(\"cx\") - this.circleMin.attr(\"cx\"));\n      }\n    }\n    this.dragEnd();\n  }\n\n  dragEnd(): void {\n    this.min = this.valueRange(this.circleMin.attr(\"cx\"));\n    this.max = this.valueRange(this.circleMax.attr(\"cx\"));\n    this.dragEndCallBackFn(this.min, this.max);\n  }\n\n  getRelX(ev: MouseEvent): number {\n    const pageX = ev ? ev.pageX : 0;\n    return pageX - this.LEFT - this.x - this.rect.left;\n  }\n\n  set(min: number, max: number): void {\n    // seems like this would make sense,\n    // this.min = min;\n    // this.max = max;\n    this.circleMin.attr(\"cx\", this.valueRange.invert(min));\n    this.circleMax.attr(\"cx\", this.valueRange.invert(max));\n    // inverted support\n    if (this.isInverted) {\n      this.bar0.attr(\"x\", this.LEFT).attr(\"width\", this.circleMin.attr(\"cx\"));\n      this.bar1\n        .attr(\"x\", this.circleMax.attr(\"cx\"))\n        .attr(\"width\", this.width - this.RIGHT * 2 - this.circleMax.attr(\"cx\"));\n    } else {\n      this.bar0\n        .attr(\"x\", this.circleMin.attr(\"cx\"))\n        .attr(\"width\", this.circleMax.attr(\"cx\") - this.circleMin.attr(\"cx\"));\n    }\n  }\n\n  setIsInverted(inv: boolean): void {\n    if (inv == this.isInverted) return;\n\n    this.isInverted = inv;\n\n    if (this.isInverted) {\n      // create bar1, set positions of both\n      this.bar1 = this.g\n        .insert(\"rect\", \"#bar0\")\n        .attr(\"x\", this.RIGHT)\n        .attr(\"y\", this.TOP)\n        .attr(\"height\", this.BAR_WIDTH)\n        .attr(\"width\", 0)\n        .style(\"fill\", \"#bbb\")\n        .call(this.drag)\n        .attr(\"id\", \"bar1\");\n    } else {\n      this.bar1.remove();\n    }\n    this.set(this.min, this.max);\n  }\n}\n","import * as d3 from \"d3\";\n\nexport class Slider {\n  /* VISUALIZATION PARAMETERS */\n  BAR_WIDTH = 5;\n  RADIUS_HANDLE = 5;\n\n  LEFT: number = this.RADIUS_HANDLE;\n  RIGHT: number = this.RADIUS_HANDLE;\n  HEIGHT = 10;\n  TOP = 0;\n\n  max: number;\n  min: number;\n  value: number;\n  stepWidth: number;\n\n  svg: any; // BEFORE d3.Selection<d3.BaseType, {}, HTMLElement, any>; // ?????????????\n  x: number;\n  y: number;\n  width: number;\n  g: any; // BEFORE d3.Selection<SVGElement, {}, HTMLElement, any>; // ?????????????\n\n  dragEndCallBackFn: (value: number) => void = (value) => null;\n\n  constructor(\n    x: number,\n    y: number,\n    width: number,\n    minValue: number,\n    maxValue: number,\n    stepWidth: number\n  ) {\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.min = minValue;\n    this.max = maxValue;\n    this.value = this.min;\n    this.stepWidth = stepWidth;\n  }\n\n  setDragEndCallBack(fn: (value: number) => void): void {\n    this.dragEndCallBackFn = fn;\n  }\n\n  valueRange: any; // BEFORE d3.ScaleLinear<number, number> ;\n  drag: any; // BEFORE d3.DragBehavior<Element, {}, {} | d3.SubjectPosition>;\n  bar: any;\n  knob: any;\n  rect: any;\n  appendTo(svg: d3.Selection<any, any, any, any>) {\n    this.svg = svg;\n\n    this.rect = (this.svg as any)[\"_groups\"][0][0].getBoundingClientRect();\n\n    this.valueRange = d3\n      .scaleLinear()\n      .domain([0, this.width])\n      .range([this.min, this.max]);\n\n    this.drag = d3\n      .drag()\n      //.origin(Object) //???\n      .on(\"start\", (ev) => {\n        this.dragStart(ev.sourceEvent);\n      })\n      .on(\"drag\", (ev) => {\n        this.dragMove(ev.sourceEvent);\n      });\n\n    this.svg = svg;\n\n    this.g = svg\n      .append(\"g\")\n      .attr(\"height\", this.HEIGHT)\n      .attr(\"width\", this.width)\n      .attr(\"transform\", \"translate(\" + this.x + \",\" + this.y + \")\");\n\n    this.g\n      .append(\"line\")\n      .attr(\"x1\", this.LEFT)\n      .attr(\"y1\", this.TOP)\n      .attr(\"x2\", this.width - this.RIGHT - this.LEFT)\n      .attr(\"y2\", this.TOP)\n      .style(\"stroke\", \"#aaa\");\n\n    this.knob = this.g\n      .append(\"circle\")\n      .attr(\"id\", \"#sliderKnob\")\n      .attr(\"r\", this.RADIUS_HANDLE)\n      .attr(\"cx\", this.LEFT)\n      .attr(\"cy\", this.TOP)\n      .attr(\"fill\", \"#777\")\n      .attr(\n        \"onchange\",\n        \"trace.event('vis_4',document.location.pathname,this.parentElement.previousElementSibling.innerHTML ,'cx' + this.getAttribute('cx'))\"\n      )\n      .attr(\n        \"onmouseup\",\n        \"trace.event('vis_4',document.location.pathname,this.parentElement.previousElementSibling.innerHTML ,'cx' + this.getAttribute('cx'))\"\n      )\n      .call(this.drag);\n  }\n\n  dragStartXMouse: any;\n  dragStartXBar: any;\n  dragObj: any;\n  currentBarLength: any;\n  dragStart(ev: MouseEvent): void {\n    this.dragStartXMouse = Math.max(\n      this.LEFT,\n      Math.min(this.width - this.RIGHT, this.getRelX(ev))\n    );\n    // var sourceEvent = d3.event.sourceEvent; // (d3.event as d3.BaseEvent)\n    this.dragObj = ev ? ev.target : undefined;\n  }\n\n  dragMove(ev: MouseEvent): void {\n    d3.select(this.dragObj).attr(\n      \"cx\",\n      Math.max(this.LEFT, Math.min(this.width - this.RIGHT, this.getRelX(ev)))\n    );\n    this.dragEnd();\n  }\n\n  dragEnd(): void {\n    this.value = this.valueRange(this.knob.attr(\"cx\"));\n    this.dragEndCallBackFn(this.value);\n  }\n\n  getRelX(ev: MouseEvent): number {\n    const pageX = ev ? ev.pageX : 0; // <MouseEvent>\n    return pageX - this.LEFT - this.x - this.rect.left;\n  }\n\n  set(value: number): void {\n    this.knob.attr(\"cx\", this.valueRange.invert(value));\n  }\n}\n","import * as d3 from \"d3\";\n\nexport class SmartSlider {\n  /* VISUALIZATION PARAMETERS */\n  BAR_WIDTH = 15;\n  RADIUS_HANDLE = 5;\n\n  // LEFT: number = this.RADIUS_HANDLE;\n  // RIGHT: number = this.RADIUS_HANDLE;\n  LEFT = 0;\n  RIGHT = 0;\n  HEIGHT = 10;\n  TOP = 0;\n\n  max: number;\n  min: number;\n  stepWidth: number;\n  hasTickmarks: boolean;\n  isInverted = false;\n\n  svg: any; // BEFORE d3.Selection<d3.BaseType, {}, HTMLElement, any>;\n  x: number;\n  y: number;\n  width: number;\n  g: any; // BEFORE d3.Selection<d3.BaseType, {}, HTMLElement, any>;\n\n  dragEndCallBackFn: (min: number, max: number, valueRange: any) => void = () =>\n    null; // BEFORE Function;\n\n  constructor(\n    x: number,\n    y: number,\n    width: number,\n    minValue: number,\n    maxValue: number,\n    stepWidth: number,\n    tickMarks?: boolean\n  ) {\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.min = minValue;\n    this.max = maxValue;\n    this.stepWidth = stepWidth;\n\n    if (tickMarks != undefined) this.hasTickmarks = tickMarks;\n    else this.hasTickmarks = false;\n  }\n\n  setDragEndCallBack(\n    fn: (min: number, max: number, valueRange: any) => void\n  ): void {\n    this.dragEndCallBackFn = fn;\n  }\n\n  valueRange: any; // BEFORE d3.ScaleLinear<number, number>;\n  val2spaceScale: any; // BEFORE d3.ScaleLinear<number, number>;\n\n  drag: any; // BEFORE d3.DragBehavior<Element, {}, {} | d3.SubjectPosition>;\n  bar0: any; // BEFORE d3.Selection<d3.BaseType, {}, HTMLElement, any>;\n  bar1: any; // BEFORE d3.Selection<d3.BaseType, {}, HTMLElement, any>;\n  circleMin: any;\n  circleMax: any;\n  circleSingle: any;\n  rect: any;\n  singleTimeStepX = 0;\n\n  appendTo(svg: d3.Selection<any, any, any, any>): void {\n    this.svg = svg;\n\n    this.rect = this.svg[\"_groups\"][0][0].getBoundingClientRect();\n\n    this.valueRange = d3\n      .scaleLinear()\n      .domain([0, this.width])\n      .range([this.min, this.max]);\n\n    this.svg = svg;\n\n    this.g = svg\n      .append(\"g\")\n      .attr(\"height\", this.HEIGHT)\n      .attr(\"width\", this.width)\n      .attr(\"transform\", \"translate(\" + this.x + \",\" + this.y + \")\");\n\n    this.drag = d3\n      .drag()\n      //.origin(Object) // ???\n      .on(\"start\", (ev) => {\n        this.dragStart(ev.sourceEvent);\n      })\n      .on(\"drag\", (ev) => {\n        this.dragMove(ev.sourceEvent);\n      });\n\n    this.g\n      .append(\"line\")\n      .attr(\"x1\", this.LEFT)\n      .attr(\"y1\", this.TOP)\n      .attr(\"x2\", this.width - this.RIGHT - this.LEFT)\n      .attr(\"y2\", this.TOP)\n      .style(\"stroke\", \"#aaa\");\n\n    if (this.hasTickmarks) {\n      this.val2spaceScale = d3\n        .scaleLinear()\n        .domain([this.min, this.max])\n        .range([this.LEFT, this.width - this.RIGHT - this.LEFT]);\n\n      for (let i = this.min; i <= this.max; i += this.stepWidth) {\n        const x = this.val2spaceScale(i);\n        this.g\n          .append(\"line\")\n          .attr(\"class\", \"rangeTick\")\n          .attr(\"x1\", x)\n          .attr(\"y1\", this.TOP)\n          .attr(\"x2\", x)\n          .attr(\"y2\", this.TOP + 20)\n          .style(\"stroke\", \"#bbb\");\n\n        this.g\n          .append(\"text\")\n          .attr(\"class\", \"rangeTickText\")\n          .attr(\"x\", x)\n          .attr(\"y\", this.TOP + 20)\n          .text(i.toFixed(1))\n          .style(\"opacity\", 0.5)\n          .style(\"font-family\", \"Helvetica\")\n          .style(\"font-weigth\", \"100\")\n          .style(\"font-size\", \"7pt\");\n      }\n    }\n\n    if (this.isInverted) {\n      this.bar0 = this.g\n        .append(\"rect\")\n        .attr(\"x\", this.LEFT)\n        .attr(\"y\", this.TOP)\n        .attr(\"height\", this.BAR_WIDTH)\n        .attr(\"width\", 0)\n        .style(\"fill\", \"#bbb\")\n        .call(this.drag)\n        .attr(\"id\", \"bar0\")\n        .attr(\n          \"onmouseup\",\n          \"trace.event('vis_43',document.location.pathname,'Time Slider','x' + this.getAttribute('x') + 'width' + this.getAttribute('width'))\"\n        )\n        .attr(\n          \"oninput\",\n          \"trace.event('vis_43',document.location.pathname,'Time Slider','x' + this.getAttribute('x') + 'width' + this.getAttribute('width'))\"\n        );\n\n      this.bar1 = this.g\n        .append(\"rect\")\n        .attr(\"x\", this.RIGHT)\n        .attr(\"y\", this.TOP)\n        .attr(\"height\", this.BAR_WIDTH)\n        .attr(\"width\", 0)\n        .style(\"fill\", \"#bbb\")\n        .call(this.drag)\n        .attr(\"id\", \"bar1\")\n        .attr(\n          \"onmouseup\",\n          \"trace.event('vis_43',document.location.pathname,'Time Slider','x' + this.getAttribute('x') + 'width' + this.getAttribute('width'))\"\n        )\n        .attr(\n          \"oninput\",\n          \"trace.event('vis_43',document.location.pathname,'Time Slider','x' + this.getAttribute('x') + 'width' + this.getAttribute('width'))\"\n        );\n    } else {\n      this.bar0 = this.g\n        .append(\"rect\")\n        .attr(\"x\", this.LEFT)\n        .attr(\"y\", this.TOP)\n        .attr(\"height\", this.BAR_WIDTH)\n        .attr(\"width\", this.width - this.RIGHT - this.LEFT)\n        .style(\"fill\", \"#bbb\")\n        .call(this.drag)\n        .attr(\"id\", \"bar0\")\n        .attr(\n          \"onmouseup\",\n          \"trace.event('vis_43',document.location.pathname,'Time Slider','x' + this.getAttribute('x') + 'width' + this.getAttribute('width'))\"\n        )\n        .attr(\n          \"oninput\",\n          \"trace.event('vis_43',document.location.pathname,'Time Slider','x' + this.getAttribute('x') + 'width' + this.getAttribute('width'))\"\n        );\n\n      this.bar1 = null;\n    }\n\n    this.circleMin = this.g\n      .append(\"circle\")\n      .attr(\"id\", \"sliderKnobMin\")\n      .attr(\"r\", this.RADIUS_HANDLE)\n      .attr(\"cx\", this.LEFT)\n      .attr(\"cy\", this.TOP + this.BAR_WIDTH)\n      .attr(\"fill\", \"#777\")\n      .attr(\n        \"onchange\",\n        \"trace.event('vis_27',document.location.pathname,'Time Sliden Min','cx' + this.getAttribute('cx'))\"\n      )\n      .attr(\n        \"onmouseup\",\n        \"trace.event('vis_27',document.location.pathname,'Time Sliden Min','cx' + this.getAttribute('cx'))\"\n      )\n      .attr(\n        \"oninput\",\n        \"trace.event('vis_27',document.location.pathname,'Time Sliden Min','cx' + this.getAttribute('cx'))\"\n      )\n      .call(this.drag);\n\n    this.circleMax = this.g\n      .append(\"circle\")\n      .attr(\"id\", \"sliderKnobMax\")\n      .attr(\"r\", this.RADIUS_HANDLE)\n      .attr(\"cx\", this.width - this.RIGHT)\n      .attr(\"cy\", this.TOP + this.BAR_WIDTH)\n      .attr(\"fill\", \"#777\")\n      .attr(\n        \"onchange\",\n        \"trace.event('vis_28',document.location.pathname,'Time Sliden Max','cx' + this.getAttribute('cx'))\"\n      )\n      .attr(\n        \"onmouseup\",\n        \"trace.event('vis_28',document.location.pathname,'Time Sliden Max','cx' + this.getAttribute('cx'))\"\n      )\n      .attr(\n        \"oninput\",\n        \"trace.event('vis_28',document.location.pathname,'Time Sliden Max','cx' + this.getAttribute('cx'))\"\n      )\n      .call(this.drag);\n\n    // this.circleSingle = this.g\n    //     .append('svg:path')\n    //     .attr('d', 'M0,0L4,4L4,15L-4,15L-4,4L0,0')\n    //     .attr('fill', '#777')\n    //     .attr(\"id\", \"sliderKnobSingle\")\n    //     .call(this.drag);\n  }\n\n  dragStartXMouse = 0; // BEFORE number;\n  dragStartXBar = 0; // BEFORE number;\n  dragObj: any;\n  currentBarLength = 0; // BEFORE number;\n\n  dragStart(ev: MouseEvent): void {\n    this.dragStartXMouse = Math.max(\n      this.LEFT,\n      Math.min(this.width - this.RIGHT, this.getRelX(ev))\n    );\n    //var sourceEvent = (ev).sourceEvent; // d3.BaseEvent\n    this.dragObj = ev ? ev.target : undefined;\n    if (this.isInverted) {\n      // determine whether we are left of min, in between, or right of max\n      // the startxbar is the left end of whichever segment we are in,\n      // and the barlength is same\n      const minPos: number = parseInt(this.circleMin.attr(\"cx\"));\n      const maxPos: number = parseInt(this.circleMax.attr(\"cx\"));\n      if (this.dragStartXMouse < minPos) {\n        this.dragStartXBar = this.LEFT;\n        this.currentBarLength = minPos - this.LEFT;\n      } else if (this.dragStartXMouse < maxPos) {\n        this.dragStartXBar = minPos;\n        this.currentBarLength = maxPos - minPos;\n      } else {\n        this.dragStartXBar = maxPos;\n        this.currentBarLength = this.width - this.RIGHT - maxPos;\n      }\n    } else {\n      this.dragStartXBar = parseInt(this.bar0.attr(\"x\"));\n      this.currentBarLength = parseInt(this.bar0.attr(\"width\"));\n    }\n  }\n\n  dragMove(ev: MouseEvent): void {\n    // if we are dragging the entire bar\n    if (!this.isInverted && this.dragObj.id == this.bar0.attr(\"id\")) {\n      const xOffset =\n        Math.max(\n          this.LEFT,\n          Math.min(this.width - this.RIGHT, this.getRelX(ev))\n        ) - this.dragStartXMouse;\n      const x1 = Math.max(\n        this.LEFT,\n        Math.min(\n          this.width - this.RIGHT - this.currentBarLength,\n          this.dragStartXBar + xOffset\n        )\n      );\n      this.bar0.attr(\"x\", x1);\n      this.circleMin.attr(\"cx\", x1);\n      this.circleMax.attr(\"cx\", x1 + this.currentBarLength);\n      // or else we are dragging one of the circles.\n    } else if (\n      this.isInverted &&\n      (this.dragObj.id == this.bar0.attr(\"id\") ||\n        this.dragObj.id == this.bar1.attr(\"id\"))\n    ) {\n      // when inverted, dragging bars does nothing\n      return;\n    } else if (this.dragObj == this.circleSingle) {\n      // move the one time steper\n      this.singleTimeStepX = Math.max(\n        this.LEFT,\n        Math.min(this.width - this.RIGHT, this.getRelX(ev))\n      );\n      d3.select(this.dragObj).attr(\n        \"transform\",\n        \"translate(\" + this.singleTimeStepX + \", 0)\"\n      );\n    } else {\n      d3.select(this.dragObj).attr(\n        \"cx\",\n        Math.max(this.LEFT, Math.min(this.width - this.RIGHT, this.getRelX(ev)))\n      );\n      if (this.isInverted) {\n        this.bar0\n          .attr(\"x\", this.LEFT)\n          .attr(\"width\", this.circleMin.attr(\"cx\") - this.LEFT);\n        this.bar1\n          .attr(\"x\", this.circleMax.attr(\"cx\"))\n          .attr(\n            \"width\",\n            this.width - this.RIGHT * 2 - this.circleMax.attr(\"cx\")\n          );\n      } else {\n        this.bar0\n          .attr(\"x\", this.circleMin.attr(\"cx\"))\n          .attr(\"width\", this.circleMax.attr(\"cx\") - this.circleMin.attr(\"cx\"));\n      }\n    }\n    this.dragEnd();\n  }\n\n  dragEnd(): void {\n    this.min = this.valueRange(this.circleMin.attr(\"cx\"));\n    this.max = this.valueRange(this.circleMax.attr(\"cx\"));\n    this.dragEndCallBackFn(\n      this.min,\n      this.max,\n      this.valueRange(this.singleTimeStepX)\n    );\n  }\n\n  getRelX(ev: MouseEvent): number {\n    //var sourceEvent = (d3.event).sourceEvent;\n    const pageX = ev ? ev.pageX : 0;\n    return pageX - this.LEFT - this.x - this.rect.left;\n  }\n\n  set(min: number, max: number): void {\n    // seems like this would make sense,\n    // this.min = min;\n    // this.max = max;\n    this.circleMin.attr(\"cx\", this.valueRange.invert(min));\n    this.circleMax.attr(\"cx\", this.valueRange.invert(max));\n    // inverted support\n    if (this.isInverted) {\n      this.bar0.attr(\"x\", this.LEFT).attr(\"width\", this.circleMin.attr(\"cx\"));\n      this.bar1\n        .attr(\"x\", this.circleMax.attr(\"cx\"))\n        .attr(\"width\", this.width - this.RIGHT * 2 - this.circleMax.attr(\"cx\"));\n    } else {\n      this.bar0\n        .attr(\"x\", this.circleMin.attr(\"cx\"))\n        .attr(\"width\", this.circleMax.attr(\"cx\") - this.circleMin.attr(\"cx\"));\n    }\n  }\n\n  setIsInverted(inv: boolean): void {\n    if (inv == this.isInverted) return;\n\n    this.isInverted = inv;\n\n    if (this.isInverted) {\n      // create bar1, set positions of both\n      this.bar1 = this.g\n        .insert(\"rect\", \"#bar0\")\n        .attr(\"x\", this.RIGHT)\n        .attr(\"y\", this.TOP)\n        .attr(\"height\", this.BAR_WIDTH)\n        .attr(\"width\", 0)\n        .style(\"fill\", \"#bbb\")\n        .call(this.drag)\n        .attr(\"id\", \"bar1\");\n    } else {\n      this.bar1.remove();\n    }\n    this.set(this.min, this.max);\n  }\n}\n","import * as d3 from \"d3\";\n\nimport * as dynamicgraph from \"../data/dynamicgraph\";\nimport * as utils from \"../data/utils\";\n\nimport { WebGL, WebGLElementQuery } from \"./glutils\";\nimport { timeFormat } from \"d3\";\n\nimport {\n  offsetInMilliseconds,\n  addDate,\n  startOf,\n  formatAsDDMMYYYY,\n} from \"../data/dates\";\n\nexport class Timeline {\n  TICK_MIN_DIST = 13;\n  LABEL_MIN_DIST = 13;\n\n  WIDTH: number;\n  HEIGHT: number;\n  webgl: WebGL;\n  network: dynamicgraph.DynamicGraph;\n  x: number;\n  y: number;\n\n  position_x: any;\n  position_y: any;\n  label_opacity: any;\n\n  minTimeId: any;\n  maxTimeId: any;\n\n  timeObjects: Date[] = []; // INIT\n  highlightPointer: any;\n  highlightLabel: any;\n\n  minGran: number; // INIT\n  maxGran: number; // INIT\n\n  granules: string[];\n\n  tickmarks: WebGLElementQuery = new WebGLElementQuery(); // INIT\n  timeLabels: WebGLElementQuery = new WebGLElementQuery(); // INIT\n\n  tick_minGran_visible: any;\n  tick_minGran_visible_prev: any = -1; // INIT\n\n  label_minGran_visible: any;\n\n  dayOfWeek = timeFormat(\"%w\"); // \"Sunday-based weekday as a decimal number [0,6].\"\n\n  constructor(\n    webgl: WebGL,\n    network: dynamicgraph.DynamicGraph,\n    x: number,\n    y: number,\n    width: number,\n    height: number\n  ) {\n    this.x = x;\n    this.y = y;\n    this.WIDTH = width;\n    this.HEIGHT = height;\n    this.webgl = webgl;\n    this.network = network;\n    this.granules = dynamicgraph.GRANULARITY;\n    this.minGran = this.network.getMinGranularity();\n    this.maxGran = this.granules.length - 1;\n    this.visualize();\n  }\n\n  timeGranularities: any;\n  visualize(): void {\n    /* MOVE TO CONSTRUCTOR */\n    const times = this.network.times().toArray();\n\n    // create non-indexed times\n    const unix_start = times[0] ? times[0].unixTime() : 0;\n    const unix_end = times[times.length - 1]\n      ? times[times.length - 1].unixTime()\n      : 0;\n\n    const start = startOf(new Date(unix_start), this.granules[this.minGran]);\n    const end = startOf(new Date(unix_end), this.granules[this.minGran]);\n    const numTimes = Math.ceil(\n      Math.abs(\n        (end.getTime() - start.getTime()) /\n          offsetInMilliseconds[this.granules[this.minGran]]\n      )\n    ); // WITHOUT 's'\n    this.maxGran = Math.min(this.maxGran, this.granules.length - 1);\n    const granularity_levels = this.maxGran - this.minGran + 1;\n    const granularity_height = this.HEIGHT / granularity_levels;\n\n    // create all timeObjects (UTC)\n    let prev = new Date(unix_start);\n    const prevprev = new Date(unix_start - 86400000); // subtract one day\n    // bb: check why 'subtract' is not working:\n    // prevprev.substract(1, this.granules[this.minGran] + 's');\n    this.timeObjects.push(prev);\n    for (let i = 1; i < numTimes; i++) {\n      //prev = new Date(prev); // ???\n      prev = addDate(prev, 1, this.granules[this.minGran]);\n      this.timeObjects.push(prev);\n    }\n\n    this.timeGranularities = [];\n    // set granularity for first time step:\n\n    let granularitySet: boolean;\n    let y1: any, y2: any;\n    let to1: Date, to2: Date;\n    for (let i = 0; i < this.timeObjects.length; i++) {\n      granularitySet = false;\n      if (i == 0) to1 = prevprev;\n      else to1 = this.timeObjects[i - 1];\n      to2 = this.timeObjects[i];\n      for (\n        let gran = this.maxGran;\n        gran >= this.minGran && !granularitySet;\n        gran--\n      ) {\n        if (gran > 7) {\n          y1 = utils.formatAtGranularity(to1, 7);\n          y2 = utils.formatAtGranularity(to2, 7);\n\n          // test for millenia\n          if (y1[y1.length - 4] != y2[y2.length - 4]) {\n            this.timeGranularities.push(10);\n            granularitySet = true;\n          }\n          // test for centuries\n          else if (y1[y1.length - 3] != y2[y2.length - 3]) {\n            this.timeGranularities.push(9);\n            granularitySet = true;\n          }\n          // test for decades\n          else if (y1[y1.length - 2] != y2[y2.length - 2]) {\n            this.timeGranularities.push(8);\n            granularitySet = true;\n          }\n        } else if (\n          utils.formatAtGranularity(to1, gran) !=\n          utils.formatAtGranularity(to2, gran)\n        ) {\n          this.timeGranularities.push(gran);\n          granularitySet = true;\n        }\n      }\n    }\n\n    // create mapping functions\n    this.position_x = d3\n      .scaleLinear()\n      .domain([0, this.timeGranularities.length - 1])\n      .range([this.x + 1, this.x + this.WIDTH - 1]);\n    this.position_y = d3\n      .scaleLinear()\n      .domain([this.minGran - 1, this.maxGran])\n      .range([-this.HEIGHT, 0]);\n    this.label_opacity = d3\n      .scaleLinear()\n      .domain([this.minGran - 1, this.maxGran])\n      .range([0.2, 1]);\n\n    // Draw tickmarks\n    this.tickmarks = this.webgl\n      .selectAll()\n      .data(this.timeGranularities)\n      .append(\"line\")\n      .attr(\"x1\", (d: any, i: any) => this.position_x(i))\n      .attr(\"x2\", (d: any, i: any) => this.position_x(i))\n      .attr(\"y1\", (d: any, i: any) => this.position_y(d))\n      .attr(\"y2\", (d: any, i: any) => -this.HEIGHT)\n      .style(\"stroke\", \"#000\")\n      .style(\"opacity\", 0.1);\n\n    // create highlight pointer\n    this.highlightPointer = this.webgl\n      .selectAll()\n      .data([0])\n      .append(\"line\")\n      .attr(\"x1\", 0)\n      .attr(\"x2\", 0)\n      .attr(\"y1\", 0)\n      .attr(\"y2\", -this.HEIGHT)\n      .style(\"stroke\", \"#f00\")\n      .style(\"opacity\", 0);\n    this.highlightLabel = this.webgl\n      .selectAll()\n      .data([0])\n      .append(\"text\")\n      .attr(\"x\", 0)\n      .attr(\"y\", -6)\n      .style(\"fill\", \"#f00\")\n      .style(\"font-size\", 10)\n      .style(\"opacity\", 0);\n\n    this.updateWithIds(0, this.timeObjects.length - 1);\n  }\n\n  update(startUnix: any, endUnix: any): void {\n    // search for start:\n    let startId: any, endId: any;\n    let i = 0;\n    for (i; i < this.timeObjects.length; i++) {\n      if (this.timeObjects[i].getTime() > startUnix) {\n        startId = i - 1;\n        break;\n      }\n    }\n    for (i = startId; i < this.timeObjects.length; i++) {\n      if (this.timeObjects[i].getTime() > endUnix) {\n        endId = i;\n        break;\n      }\n    }\n    if (endId == undefined) {\n      endId = this.timeObjects.length - 1;\n    }\n    this.updateWithIds(startId, endId);\n  }\n\n  updateWithIds(minTimeId: any, maxTimeId: any): void {\n    this.minTimeId = minTimeId;\n    this.maxTimeId = maxTimeId;\n    // set range function domain\n    this.position_x.domain([minTimeId, maxTimeId]);\n\n    const ticksFitting = Math.floor(this.WIDTH / this.TICK_MIN_DIST);\n    const minTime = this.timeObjects[this.minTimeId];\n    const maxTime = this.timeObjects[this.maxTimeId];\n    let requiredTicks: number = Number.MAX_VALUE; // INIT?\n    let t1: any, t2: any;\n    this.tick_minGran_visible = undefined;\n    for (\n      let g = this.minGran;\n      g < this.maxGran && this.tick_minGran_visible == undefined;\n      g++\n    ) {\n      // calculate how many times of this granularity can fit.\n\n      t1 = startOf(new Date(minTime), this.granules[g]);\n      t2 = startOf(new Date(maxTime), this.granules[g]);\n\n      const ticks = (granularityIndex: number) =>\n        (t2.getTime() - t1.getTime()) /\n        offsetInMilliseconds[this.granules[granularityIndex]];\n\n      if (g <= 7) {\n        requiredTicks = ticks(g);\n      } else {\n        if (g == 8) requiredTicks = ticks(7) / 10;\n        if (g == 9) requiredTicks = ticks(7) / 100;\n        if (g == 10) requiredTicks = ticks(7) / 1000;\n      }\n\n      if (requiredTicks <= ticksFitting) {\n        this.tick_minGran_visible = g;\n      }\n    }\n\n    this.label_minGran_visible = this.tick_minGran_visible;\n\n    this.label_opacity.domain([this.tick_minGran_visible - 1, this.maxGran]);\n\n    if (this.tick_minGran_visible_prev != this.tick_minGran_visible) {\n      console.log(\"re-create time labels\");\n      // re-create labels\n      if (this.timeLabels != undefined) this.timeLabels.removeAll();\n\n      this.timeLabels = this.webgl\n        .selectAll()\n        .data(this.timeObjects)\n        .filter((d: any, i: number) => {\n          const visible =\n            this.timeGranularities[i] >= this.tick_minGran_visible;\n          return visible;\n        })\n        .append(\"text\")\n        .attr(\n          \"x\",\n          (d: any, i: number) =>\n            this.position_x(this.timeObjects.indexOf(d)) + 8\n        )\n        .attr(\"y\", (d: any, i: number) => -this.HEIGHT + 17)\n        .text((d: any, i: number) =>\n          this.formatTime(this.timeObjects.indexOf(d))\n        )\n        .attr(\"z\", 1)\n        .style(\"fill\", \"#000\")\n        .attr(\"rotation\", 90)\n        .style(\"font-size\", 10)\n        .style(\"opacity\", 0.1);\n\n      console.log(\"time labels created:\", this.timeLabels.length);\n    }\n    this.tick_minGran_visible_prev = this.tick_minGran_visible;\n\n    this.tickmarks\n      .style(\"opacity\", (d: any, i: number) => {\n        const visible =\n          i == 0 ||\n          (i >= this.minTimeId &&\n            i <= this.maxTimeId &&\n            this.timeGranularities[i] >= this.tick_minGran_visible)\n            ? this.label_opacity(this.timeGranularities[i])\n            : 0;\n        return visible;\n      })\n      .attr(\"x1\", (d: any, i: number) => this.position_x(i))\n      .attr(\"x2\", (d: any, i: number) => this.position_x(i))\n      .style(\n        \"stroke-width\",\n        (d: any, i: number) => this.label_opacity(this.timeGranularities[i]) * 4\n      );\n\n    // update labels\n    this.timeLabels\n      .style(\"opacity\", (d: any, i: number) => {\n        const globalId = this.timeObjects.indexOf(d);\n        const visible =\n          globalId >= this.minTimeId &&\n          globalId <= this.maxTimeId &&\n          this.timeGranularities[globalId] >= this.label_minGran_visible;\n        return visible ? 1 : 0;\n      })\n      .attr(\"x\", (d: any, i: number) => {\n        const globalId = this.timeObjects.indexOf(d);\n        return this.position_x(globalId) + 8;\n      });\n\n    // update highlightPointer\n    if (this.highlightId != undefined) {\n      this.highlightPointer\n        .attr(\"x1\", this.position_x(this.highlightId))\n        .attr(\"x2\", this.position_x(this.highlightId));\n\n      this.highlightLabel.attr(\"x\", this.position_x(this.highlightId) + 37);\n    }\n  }\n\n  formatTime(index: number): number | undefined {\n    const t = this.timeObjects[index];\n    const g = Math.min(\n      Math.max(this.tick_minGran_visible, this.timeGranularities[index]),\n      7\n    );\n\n    return utils.formatTimeAtGranularity(t, g);\n  }\n\n  highlightId: any; // INIT ???\n\n  highlight(unixTime?: number): void {\n    if (unixTime == undefined) {\n      this.highlightPointer.style(\"opacity\", 0);\n      this.highlightId = undefined;\n    }\n\n    for (let i = 0; i < this.timeObjects.length; i++) {\n      if (!unixTime || this.timeObjects[i].getTime() > unixTime) {\n        // IS CORRECT !unixTime ??\n        this.highlightId = i - 1;\n        break;\n      }\n    }\n    if (this.highlightId == undefined) {\n      this.highlightId = this.timeObjects.length - 1;\n    }\n\n    this.highlightPointer\n      .attr(\"x1\", this.position_x(this.highlightId))\n      .attr(\"x2\", this.position_x(this.highlightId))\n      .style(\"opacity\", 1);\n\n    this.highlightLabel\n      .style(\"opacity\", 1)\n      .attr(\"x\", this.position_x(this.highlightId) + 37)\n      .text(formatAsDDMMYYYY(this.timeObjects[this.highlightId]));\n  }\n}\n","import * as d3 from \"d3\";\n\nimport { Slider } from \"./slider\";\n\nexport function makeSlider(\n  d3parent: any, // BEFORE d3.Selection<d3.BaseType, {}, HTMLElement, any>,\n  label: string,\n  width: number,\n  height: number,\n  value: number,\n  min: number,\n  max: number,\n  handler: (value: number) => void\n): void {\n  const slider: Slider = new Slider(5, height - 5, width, min, max, 0.01);\n  const svg = d3parent\n    .append(\"svg\")\n    .attr(\"width\", width + 20)\n    .attr(\"height\", height);\n\n  svg\n    .append(\"text\")\n    .attr(\"x\", 10)\n    .attr(\"y\", height - 15)\n    .text(label)\n    .style(\"user-select\", \"none\")\n    .attr(\"class\", \"sliderLabel\");\n\n  slider.appendTo(svg);\n  slider.set(value);\n  slider.setDragEndCallBack(handler);\n}\n\nexport class RadioButton {\n  private checked = false;\n\n  circle: any; // BEFORE d3.Selection<d3.BaseType, {}, HTMLElement, any>;\n  label: any; // BEFORE d3.Selection<d3.BaseType, {}, HTMLElement, any>;\n\n  color: string;\n  text = \"\";\n\n  RADIUS = 7;\n\n  clickHandler: () => void = () => null; // BEFORE Function;\n\n  constructor(color: string, text?: string) {\n    this.color = color;\n    if (text) this.text = text;\n  }\n\n  appendTo(x: number, y: number, svg: d3.Selection<any, any, any, any>): void {\n    const g = svg\n      .append(\"g\")\n      .attr(\"transform\", \"translate(\" + x + \",\" + y + \")\");\n\n    this.circle = g\n      .append(\"circle\")\n      .attr(\"r\", this.RADIUS)\n      .attr(\"fill\", \"#ffffff\")\n      .attr(\"stroke\", this.color)\n      .attr(\"stroke-width\", 1)\n      .attr(\"cx\", this.RADIUS * 2)\n      .attr(\"cy\", 0)\n      .attr(\n        \"oninput\",\n        \"trace.event('vis_4',document.location.pathname,this.parentElement.previousElementSibling.innerHTML ,'cx' + this.getAttribute('cx'))\"\n      )\n      .attr(\n        \"onmouseup\",\n        \"trace.event('vis_4',document.location.pathname,this.parentElement.previousElementSibling.innerHTML ,'cx' + this.getAttribute('cx'))\"\n      );\n\n    if (this.text) {\n      this.label = g\n        .append(\"text\")\n        .attr(\"x\", this.RADIUS * 1.4)\n        .attr(\"y\", 5)\n        .style(\"font-family\", \"Helvetica\")\n        .style(\"font-size\", \"9pt\")\n        .style(\"user-select\", \"none\")\n        .text(this.text[0])\n        .on(\"click\", () => {\n          this.checked = !this.checked;\n          if (this.checked) {\n            this.circle.attr(\"fill\", this.color);\n            this.label.attr(\"fill\", \"#ffffff\");\n          } else {\n            this.circle.attr(\"fill\", \"#ffffff\");\n            this.label.attr(\"fill\", this.color);\n          }\n          if (this.clickHandler) {\n            this.clickHandler();\n          }\n        });\n    }\n  }\n\n  isChecked(): boolean {\n    return this.checked;\n  }\n\n  addClickHandler(f: () => void): void {\n    this.clickHandler = f;\n  }\n}\n\nexport function makeCheckBox(\n  d3parent: any,\n  label: string,\n  callback: (this: any, event: any, d: any) => void\n): void {\n  d3parent.append(\"input\").attr(\"type\", \"checkbox\").on(\"change\", callback);\n  d3parent\n    .append(\"b\")\n    .attr(\"class\", \"sliderLabel\")\n    .style(\"user-select\", \"none\")\n    .html(label);\n}\n\nexport function makeButton(\n  d3parent: any,\n  label: string,\n  callback: (this: any, event: any, d: any) => void\n): void {\n  d3parent\n    .append(\"input\")\n    .attr(\"type\", \"button\")\n    .attr(\"value\", label)\n    .on(\"click\", callback);\n}\n","import * as d3 from \"d3\";\n\nimport * as dynamicgraph from \"../data/dynamicgraph\";\nimport * as messenger from \"../data/messenger\";\n\nimport { SmartSlider } from \"./smartslider\";\n\nimport { RadioButton } from \"./ui\";\n\nimport {\n  addDate,\n  formatTimeAtGranularity,\n  getGranularityFormattingString,\n  getGranularityName,\n} from \"../data/dates\";\n\nexport class TimeSlider {\n  /** VISUALIZATION  PARAMETERS */\n\n  MARGIN_SLIDER_RIGHT = 30;\n  MARGIN_SLIDER_LEFT = 10;\n  TICK_GAP = 2;\n  TICK_LABEL_GAP = 40;\n  SLIDER_TOP = 25;\n  HEIGHT = 200;\n\n  /** GLOBAL VARIABLES */\n\n  dgraph: dynamicgraph.DynamicGraph;\n  slider: SmartSlider;\n  times: dynamicgraph.Time[];\n  sliderWidth: number;\n  widgetWidth: number;\n  callBack: ((min: any, max: any, single: any) => void) | undefined = undefined;\n\n  // function that is called when this time slider's time is changed\n  propagateButton: RadioButton = new RadioButton(\"#000000\");\n\n  labelStart: any; // BEFORE d3.Selection<d3.BaseType, {}, HTMLElement, any>;\n  labelEnd: any; // BEFORE d3.Selection<d3.BaseType, {}, HTMLElement, any>;\n\n  tickScale: any;\n  tickHeightFunction: (x: number) => number;\n\n  constructor(\n    dgraph: dynamicgraph.DynamicGraph,\n    width: number,\n    callBack?: (min: any, max: any, single: any) => void\n  ) {\n    this.dgraph = dgraph;\n    this.times = dgraph.times().toArray();\n    this.widgetWidth = width;\n\n    const timesDummy = new dynamicgraph.Time(0, this.dgraph);\n    this.sliderWidth =\n      width - this.MARGIN_SLIDER_RIGHT + 5 - this.MARGIN_SLIDER_LEFT - 5;\n    let lastDummyYear: Date =\n      this.times.length != 0\n        ? this.times[this.times.length - 1].moment()\n        : timesDummy.moment(); // WHAT HAPPEND??\n    const minGran: number = dgraph.gran_min;\n    const minGranName: string = getGranularityName(minGran);\n\n    if (!lastDummyYear) {\n      lastDummyYear = new Date(0);\n    }\n\n    lastDummyYear = addDate(lastDummyYear, 1, minGranName);\n\n    const unixTimeSlider =\n      this.times.length != 0 ? this.times[0].unixTime() : 0; // IS IT OK??\n    this.slider = new SmartSlider(\n      this.MARGIN_SLIDER_LEFT,\n      this.SLIDER_TOP,\n      this.sliderWidth,\n      unixTimeSlider,\n      lastDummyYear.valueOf(),\n      1\n    );\n\n    if (callBack) this.callBack = callBack;\n\n    this.tickScale = d3\n      .scaleUtc()\n      .range([\n        this.MARGIN_SLIDER_LEFT,\n        this.MARGIN_SLIDER_LEFT + this.sliderWidth,\n      ])\n      .domain([unixTimeSlider, lastDummyYear.valueOf()]);\n\n    this.tickHeightFunction = d3\n      .scaleLinear()\n      .range([4, this.SLIDER_TOP - 10])\n      .domain([dgraph.gran_min, dgraph.gran_max]);\n  }\n\n  appendTo(\n    svg: d3.Selection<any, any, any, any>,\n    x?: number,\n    y?: number\n  ): void {\n    if (!x) x = 0;\n    if (!y) y = 0;\n\n    const g: any = svg\n      .append(\"g\")\n      .attr(\"transform\", \"translate(\" + x + \",\" + y + \")\");\n\n    g.append(\"g\")\n      .attr(\"transform\", \"translate(0,\" + this.SLIDER_TOP + \")\")\n      .attr(\"class\", \"x axis\")\n      .call(d3.axisTop(this.tickScale));\n\n    this.labelStart = g\n      .append(\"text\")\n      .attr(\"y\", this.SLIDER_TOP + 20)\n      .style(\"opacity\", 0)\n      .style(\"font-family\", \"Helvetica\")\n      .style(\"font-weigth\", \"100\")\n      .style(\"font-size\", \"8pt\")\n      .style(\"text-anchor\", \"end\")\n      .text(\"\")\n      .style(\"user-select\", \"none\")\n      .style(\"-webkit-user-select\", \"none\")\n      .style(\"-khtml-user-select\", \"none\")\n      .style(\"-moz-user-select\", \"none\")\n      .style(\"-o-user-select\", \"none\")\n      .style(\"user-select\", \"none\");\n\n    this.labelEnd = g\n      .append(\"text\")\n      .style(\"opacity\", 0)\n      .attr(\"y\", this.SLIDER_TOP + 20)\n      .style(\"font-family\", \"Helvetica\")\n      .style(\"font-weigth\", \"100\")\n      .style(\"font-size\", \"8pt\")\n      .style(\"text-anchor\", \"start\")\n      .text(\"\")\n      .style(\"user-select\", \"none\")\n      .style(\"-webkit-user-select\", \"none\")\n      .style(\"-khtml-user-select\", \"none\")\n      .style(\"-moz-user-select\", \"none\")\n      .style(\"-o-user-select\", \"none\")\n      .style(\"user-select\", \"none\");\n\n    this.slider.appendTo(g);\n    this.slider.setDragEndCallBack((min: any, max: any, single: any) =>\n      this.updateTime(min, max, single)\n    );\n\n    this.propagateButton = new RadioButton(\"#000000\", \"Syncronize Time\");\n    this.propagateButton.appendTo(\n      this.sliderWidth + 15,\n      this.SLIDER_TOP + 8,\n      g\n    );\n  }\n\n  drawTickmarks(\n    granularity: number,\n    tickTimes: dynamicgraph.Time[],\n    svg: d3.Selection<any, any, any, any>\n  ): void {\n    let time: dynamicgraph.Time;\n    let displayLabelSpacing = 1; // display every label\n    while (\n      Math.floor(this.sliderWidth / this.TICK_LABEL_GAP) <\n        tickTimes.length / displayLabelSpacing &&\n      displayLabelSpacing < 100\n    ) {\n      displayLabelSpacing++;\n    }\n\n    for (let i = 0; i < tickTimes.length; i++) {\n      if (i % displayLabelSpacing == 0) {\n        svg\n          .append(\"text\")\n          .attr(\"x\", this.tickScale(tickTimes[i].unixTime()))\n          .attr(\"y\", this.SLIDER_TOP - this.tickHeightFunction(granularity))\n          .text(formatTimeAtGranularity(tickTimes[i].time(), granularity))\n          .attr(\"id\", \"timelabel_\" + granularity + \"_\" + i)\n          .attr(\"class\", \"timelabel\")\n          .style(\"opacity\", 0.5)\n          .style(\"font-family\", \"Helvetica\")\n          .style(\"font-weigth\", \"100\")\n          .style(\"font-size\", \"7pt\");\n\n        svg\n          .append(\"line\")\n          .attr(\"x1\", this.tickScale(tickTimes[i].unixTime()))\n          .attr(\"x2\", this.tickScale(tickTimes[i].unixTime()))\n          .attr(\"y1\", this.SLIDER_TOP)\n          .attr(\"y2\", this.SLIDER_TOP - this.tickHeightFunction(granularity))\n          .style(\"stroke\", \"#bbb\");\n      }\n    }\n  }\n\n  formatForGranularities(\n    time: dynamicgraph.Time,\n    gran_min: number,\n    gran_max: number\n  ): string {\n    let formatString = \"\";\n    while (gran_max >= gran_min) {\n      formatString += getGranularityFormattingString(\n        gran_max,\n        gran_max > gran_min\n      );\n      gran_max--;\n    }\n    return time.format(formatString.trim());\n  }\n\n  updateTime(minUnix: number, maxUnix: number, single: number): void {\n    // times are still correct here?\n\n    const format = function (d: any) {\n      return d.toDateString();\n    };\n\n    single = Math.round(single);\n\n    this.labelStart\n      .attr(\"x\", this.slider.valueRange.invert(minUnix) + 10)\n      .style(\"opacity\", 1)\n      .text(format(new Date(minUnix)));\n\n    this.labelEnd\n      .attr(\"x\", this.slider.valueRange.invert(maxUnix) + 10)\n      .style(\"opacity\", 1)\n      .text(format(new Date(maxUnix)));\n\n    if (this.callBack != undefined)\n      this.callBack(minUnix, maxUnix, this.propagateButton.isChecked());\n    else\n      messenger.timeRange(\n        minUnix,\n        maxUnix,\n        this.times[single],\n        this.propagateButton.isChecked()\n      );\n  }\n\n  set(startUnix: number, endUnix: number) {\n    this.slider.set(startUnix, endUnix);\n  }\n}\n","import {utcYear, utcMonth, utcWeek, utcDay, utcHour, utcMinute, utcSecond, utcTicks, utcTickInterval} from \"d3-time\";\nimport {utcFormat} from \"d3-time-format\";\nimport {calendar} from \"./time.js\";\nimport {initRange} from \"./init.js\";\n\nexport default function utcTime() {\n  return initRange.apply(calendar(utcTicks, utcTickInterval, utcYear, utcMonth, utcWeek, utcDay, utcHour, utcMinute, utcSecond, utcFormat).domain([Date.UTC(2000, 0, 1), Date.UTC(2000, 0, 2)]), arguments);\n}\n"],"names":["isValidIndex","v","undefined","Selection","constructor","id","acceptedType","this","name","elementIds","priority","acceptsType","type","DataSet","params","nodeTable","linkTable","directed","nodeSchema","getDefaultNodeSchema","linkSchema","getDefaultLinkSchema","locationTable","locationSchema","getDefaultLocationSchema","console","log","NodeSchema","LinkSchema","LocationSchema","TableSchema","super","source","target","label","geoname","longitude","latitude","x","y","z","radius","t0","Date","t1","newInterval","floori","offseti","count","field","interval","date","arguments","length","floor","ceil","round","d0","d1","offset","step","Math","range","start","stop","previous","push","filter","test","setTime","end","every","isFinite","d","millisecond","k","durationSecond","durationMinute","durationHour","durationDay","durationWeek","durationMonth","durationYear","second","getMilliseconds","getUTCSeconds","minute","getSeconds","getMinutes","hour","getHours","day","setHours","setDate","getDate","getTimezoneOffset","weekday","i","getDay","sunday","monday","thursday","month","setMonth","getMonth","getFullYear","year","setFullYear","utcMinute","setUTCSeconds","getUTCMinutes","utcHour","setUTCMinutes","getUTCHours","utcDay","setUTCHours","setUTCDate","getUTCDate","utcWeekday","getUTCDay","utcSunday","utcMonday","utcThursday","utcMonth","setUTCMonth","getUTCMonth","getUTCFullYear","utcYear","setUTCFullYear","ascending","a","b","NaN","bisector","f","delta","compare1","compare2","left","lo","hi","mid","center","right","bisectRight","e10","sqrt","e5","e2","tickIncrement","max","power","LN10","error","pow","tickStep","step0","abs","step1","ticker","week","tickIntervals","tickInterval","t","reverse","ticks","utcTicks","utcTickInterval","utcWeek","localDate","m","H","M","S","L","utcDate","UTC","newDate","locale","timeFormat","timeParse","utcFormat","pads","_","numberRe","percentRe","requoteRe","pad","value","fill","width","sign","string","Array","join","requote","s","replace","formatRe","names","RegExp","map","formatLookup","Map","toLowerCase","parseWeekdayNumberSunday","n","exec","slice","w","parseWeekdayNumberMonday","u","parseWeekNumberSunday","U","parseWeekNumberISO","V","parseWeekNumberMonday","W","parseFullYear","parseYear","parseZone","Z","parseQuarter","q","parseMonthNumber","parseDayOfMonth","parseDayOfYear","parseHour24","parseMinutes","parseSeconds","parseMilliseconds","parseMicroseconds","parseLiteralPercent","parseUnixTimestamp","Q","parseUnixTimestampSeconds","formatDayOfMonth","p","formatHour24","formatHour12","formatDayOfYear","timeDay","timeYear","formatMilliseconds","formatMicroseconds","formatMonthNumber","formatMinutes","formatSeconds","formatWeekdayNumberMonday","formatWeekNumberSunday","timeSunday","dISO","timeThursday","formatWeekNumberISO","formatWeekdayNumberSunday","formatWeekNumberMonday","timeMonday","formatYear","formatYearISO","formatFullYear","formatFullYearISO","formatZone","formatUTCDayOfMonth","formatUTCHour24","formatUTCHour12","formatUTCDayOfYear","formatUTCMilliseconds","getUTCMilliseconds","formatUTCMicroseconds","formatUTCMonthNumber","formatUTCMinutes","formatUTCSeconds","formatUTCWeekdayNumberMonday","dow","formatUTCWeekNumberSunday","UTCdISO","formatUTCWeekNumberISO","formatUTCWeekdayNumberSunday","formatUTCWeekNumberMonday","formatUTCYear","formatUTCYearISO","formatUTCFullYear","formatUTCFullYearISO","formatUTCZone","formatLiteralPercent","formatUnixTimestamp","formatUnixTimestampSeconds","locale_dateTime","dateTime","locale_date","locale_time","time","locale_periods","periods","locale_weekdays","days","locale_shortWeekdays","shortDays","locale_months","months","locale_shortMonths","shortMonths","periodRe","periodLookup","weekdayRe","weekdayLookup","shortWeekdayRe","shortWeekdayLookup","monthRe","monthLookup","shortMonthRe","shortMonthLookup","formats","A","B","c","e","g","G","I","j","X","Y","utcFormats","parses","get","parseSpecifier","newFormat","specifier","format","charCodeAt","charAt","newParse","parse","toString","utcParse","formatLocale","epsilon","translateX","translateY","number","scale","bandwidth","entering","__axis","axis","orient","tickArguments","tickValues","tickFormat","tickSizeInner","tickSizeOuter","tickPadding","window","devicePixelRatio","transform","context","values","apply","domain","identity","spacing","range0","range1","position","copy","selection","path","selectAll","data","tick","order","tickExit","exit","tickEnter","enter","append","attr","line","select","text","merge","insert","transition","getAttribute","parentNode","remove","each","from","tickSize","noop","dispatch","Error","Dispatch","parseTypenames","typenames","types","trim","split","indexOf","hasOwnProperty","set","callback","concat","prototype","on","typename","T","call","that","args","xhtml","svg","xlink","xml","xmlns","prefix","namespaces","space","local","creatorInherit","document","ownerDocument","uri","namespaceURI","documentElement","createElement","createElementNS","creatorFixed","fullname","namespace","none","selector","querySelector","array","isArray","empty","querySelectorAll","matches","childMatcher","node","find","childFirst","firstElementChild","children","update","EnterNode","parent","datum","_next","_parent","__data__","bindIndex","group","groupLength","dataLength","bindKey","key","keyValue","nodeByKeyValue","keyValues","has","delete","arraylike","attrRemove","removeAttribute","attrRemoveNS","removeAttributeNS","attrConstant","setAttribute","attrConstantNS","setAttributeNS","attrFunction","attrFunctionNS","defaultView","styleRemove","style","removeProperty","styleConstant","setProperty","styleFunction","styleValue","getPropertyValue","getComputedStyle","propertyRemove","propertyConstant","propertyFunction","classArray","classList","ClassList","_node","_names","classedAdd","list","add","classedRemove","classedTrue","classedFalse","classedFunction","textRemove","textContent","textConstant","textFunction","htmlRemove","innerHTML","htmlConstant","htmlFunction","raise","nextSibling","appendChild","lower","previousSibling","insertBefore","firstChild","constantNull","removeChild","selection_cloneShallow","clone","cloneNode","selection_cloneDeep","onRemove","__on","o","removeEventListener","listener","options","onAdd","event","contextListener","addEventListener","dispatchEvent","CustomEvent","createEvent","initEvent","bubbles","cancelable","detail","dispatchConstant","dispatchFunction","child","next","splice","contains","root","groups","parents","_groups","_parents","sourceEvent","currentTarget","ownerSVGElement","createSVGPoint","point","clientX","clientY","matrixTransform","getScreenCTM","inverse","getBoundingClientRect","rect","clientLeft","top","clientTop","pageX","pageY","subgroups","subnode","subgroup","arrayAll","selectorAll","selectChild","match","childFind","selectChildren","childrenFilter","matcher","bind","constant","enterGroup","updateGroup","exitGroup","i0","i1","_enter","_exit","sparse","onenter","onupdate","onexit","groups0","groups1","m0","m1","min","merges","group0","group1","compareDocumentPosition","sort","compare","compareNode","sortgroups","sortgroup","nodes","size","getAttributeNS","property","classed","html","create","creator","before","deep","Symbol","iterator","nonpassive","passive","nonpassivecapture","capture","nopropagation","stopImmediatePropagation","preventDefault","DragEvent","subject","identifier","active","dx","dy","Object","defineProperties","enumerable","configurable","defaultFilter","ctrlKey","button","defaultContainer","defaultSubject","defaultTouchable","navigator","maxTouchPoints","mousedownx","mousedowny","mousemoving","touchending","container","touchable","gestures","listeners","clickDistance2","drag","mousedowned","touchstarted","touchmoved","touchended","gesture","beforestart","view","mousemoved","mouseupped","noevent","__noselect","MozUserSelect","nodrag","mouse","noclick","setTimeout","yesdrag","touches","changedTouches","clearTimeout","touch","pointer","p0","clickDistance","factory","extend","definition","Color","darker","brighter","reI","reN","reP","reHex","reRgbInteger","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","color_formatHex","rgb","formatHex","color_formatRgb","formatRgb","color","l","parseInt","rgbn","Rgb","rgba","hsla","r","rgbConvert","opacity","rgb_formatHex","hex","rgb_formatRgb","isNaN","h","Hsl","hslConvert","hsl2rgb","m2","define","channels","assign","displayable","formatHsl","gamma","nogamma","exponential","linear","rgbGamma","colorRgb","genericArray","nb","na","reA","reB","am","bm","bs","bi","lastIndex","index","one","zero","ArrayBuffer","isView","DataView","valueOf","object","numberArray","svgNode","degrees","PI","rotate","skewX","scaleX","scaleY","atan2","atan","interpolateTransform","pxComma","pxParen","degParen","pop","xa","ya","xb","yb","translate","taskHead","taskTail","interpolateTransformCss","DOMMatrix","WebKitCSSMatrix","isIdentity","decompose","interpolateTransformSvg","baseVal","consolidate","matrix","frame","timeout","clockLast","clockNow","clockSkew","clock","performance","now","setFrame","requestAnimationFrame","clearNow","Timer","_call","_time","timer","delay","restart","wake","timerFlush","t2","Infinity","sleep","nap","poke","clearInterval","setInterval","elapsed","TypeError","emptyOn","emptyTween","timing","schedules","__transition","self","tween","schedule","state","duration","ease","init","tweenRemove","tween0","tween1","tweenFunction","tweenValue","_id","interpolateNumber","interpolateRgb","interpolateString","interpolate","value1","string00","interpolate0","string1","string0","string10","attrInterpolate","attrInterpolateNS","attrTweenNS","_value","attrTween","delayFunction","delayConstant","durationFunction","durationConstant","easeConstant","onFunction","on0","on1","sit","styleInterpolate","styleTween","textInterpolate","textTween","Transition","_name","newId","selection_prototype","inherit","id0","id1","styleNull","listener0","styleMaybeRemove","removeFunction","easeVarying","Promise","resolve","reject","cancel","interrupt","defaultTiming","responseText","response","ok","status","statusText","input","fetch","then","responseJson","json","DOMParser","parseFromString","formatDecimalParts","toExponential","coefficient","prefixExponent","re","formatSpecifier","FormatSpecifier","align","symbol","comma","precision","exponent","toFixed","toLocaleString","toPrecision","formatRounded","toUpperCase","formatPrefix","prefixes","grouping","thousands","Number","substring","currencyPrefix","currency","currencySuffix","decimal","numerals","formatNumerals","String","percent","minus","nan","formatTypes","suffix","formatType","maybeSuffix","valuePrefix","valueSuffix","valueNegative","out","formatTrim","padding","initRange","defaultLocale","unit","normalize","bimap","r0","r1","polymap","bisect","clamp","unknown","transformer","untransform","piecewise","output","interpolateValue","rescale","invert","rangeRound","interpolateRound","continuous","precisionPrefix","precisionRound","precisionFixed","linearish","nice","prestep","maxIter","calendar","formatMillisecond","formatSecond","formatMinute","formatHour","formatDay","formatWeek","formatMonth","x0","x1","formatAsDDMMYYYY","d3.timeFormat","TIME_FORMAT","parseStandardTime","formatStandardTime","offsetInMilliseconds","milliseconds","seconds","minutes","hours","weeks","years","addDate","granularity","getTime","dayOfWeek","startOf","setMilliseconds","setSeconds","setMinutes","formatTimeAtGranularity","getWeek","dateObj","formatAtGranularity","getGranularityFormattingString","granualarity","separator","GRANULARITY","DGRAPH_SUB","dgraphReviver","dgraph","dgraphReplacer","DynamicGraph","default_colors","MAX_VALUE","NodeArray","LinkArray","NodePairArray","TimeArray","LinkTypeArray","NodeTypeArray","LocationArray","nodeArrays","link","linkArrays","timeArrays","nodePair","nodePairArrays","linkType","linkTypeArrays","nodeType","nodeTypeArrays","location","locationArrays","IDCompound","createSelection","colors","attributeArrays","standardArrayReplacer","static","copyPropsShallow","Time","copyTimeSeries","ArrayTimeSeries","ScalarTimeSeries","loadDynamicGraph","dataMgr","dataSetName","clearSelections","gran_min_storage","getFromStorage","gran_min_NAME","gran_min","gran_max_storage","gran_max_NAME","gran_max","directed_storage","directed_NAME","minWeight_storage","minWeight_NAME","minWeight","maxWeight_storage","maxWeight_NAME","maxWeight","matrix_storage","matrix_NAME","nodeArrays_storage","nodeArrays_NAME","nodeArrayReviver","linkArrays_storage","linkArrays_NAME","linkArrayReviver","nodePairArrays_storage","nodePairArrays_NAME","nodePairArrayReviver","timeArrays_storage","timeArrays_NAME","timeArrayReviver","ta","linkTypeArrays_storage","linkTypeArrays_NAME","linkTypeArrayReviver","nodeTypeArrays_storage","nodeTypeArrays_NAME","nodeTypeArrayReviver","locationArrays_storage","locationArrays_NAME","locationArrayReviver","createGraphObjects","createSelections","saveDynamicGraph","saveToStorage","removeFromStorage","debugCompareTo","other","result","_nodes","compareTypesDeep","_links","_nodePairs","_locations","_times","nodeOrders","defaultLinkSelection","defaultNodeSelection","selections","initDynamicGraph","timeLabel","unixTimes","unixTime","row","nodeId_data","nodeId_table","typeName","typeId","sortNumber","diff","momentTime","links","timeObjects","assert","nodeUserProperties","prop","outLinks","inLinks","outNeighbors","inNeighbors","neighbors","locations","attributes","shape","toUTCString","timeIdForUnixTime","getTimeIdForUnixTime","locId","timeId","nodePairId","linkId","linkUserProperties","weights","presence","weight","toArray","colorSet","Set","colorMappings","forEach","colorSetAsArray","generatedColor","random","shapeSet","shapeMappings","shapeSetAsArray","generatedShape","shouldCreateArrays","addToAttributeArraysSelection","showColor","selectionColor_pointer","nodeSelections","addElementToSelection","linkSelections","currentSelection_id","shouldCreateTimes","shouldCreateLinkTypes","Location","Node","Link","NodePair","nodeAttr","linkAttr","pairAttr","timeAttr","startTime","endTime","highlight","action","idCompound","highlightFreezeArrays","nodeIds","linkIds","nodePairIds","timeIds","highlightArrays","selectionId","getSelection","addToSelectionByTypeAndId","removeFromSelectionByTypeAndId","elementSelections","removeFromAttributeArraysSelection","arr","removeElementFromSelection","getSelectionsByTypeAndId","filterSelection","isFiltered","isHighlighted","isFrozen","getHighlightedIds","setCurrentSelection","getCurrentSelection","addSelection","BOOKMARK_COLORS","deleteSelection","setSelectionColor","getSelections","addNodeOrdering","Ordering","setNodeOrdering","removeNodeOrdering","getNodeOrder","NodeQuery","LinkQuery","times","TimeQuery","LocationQuery","nodePairs","NodePairQuery","linksBetween","n1","n2","node_pair","getAll","getMinGranularity","getMaxGranularity","AttributeArray","Query","elements","_elements","addUnique","element","addAll","addAllUnique","ids","removeDuplicates","generic_intersection","intersection","GraphElementQuery","elementType","generic_filter","ex","generic_selected","isSelected","generic_visible","isVisible","generic_highlighted","generic_presentIn","presentIn","generic_sort","attrName","asc","e1","e1_get","e2_get","attributeSort","generic_removeDuplicates","uniqueElements","BasicElement","dynamicGraph","addToSelection","removeFromSelection","inSelection","period","t1id","t2id","serie","getSerie","toFlatArray","highlighted","visible","selected","attributeName","last","allTimes","createAttribute","moment","formatDate","NumberQuery","makeNumbers","mean","sum","numberElements","parseFloat","graph","StringQuery","getBulkAttributes","temp","nodeTypes","locationSerie","serie2","serie3","finalLinks","gLink","linkTypes","sources","targets","LinkType","localeCompare","copyTimeseriesPropsShallow","ctorFunc","arrayClone","elem","depth","size1","size2","ElementCompound","sortByPriority","s1","s2","getUrlVars","vars","tmp","search","item","decodeURIComponent","hexToR","cutHex","hexToG","hexToB","makeIdCompound","getBlobFromSVGString","svgString","height","backgroundColor","imgsrc","btoa","unescape","encodeURIComponent","canvas","getContext","image","Image","src","onload","clearRect","fillStyle","fillRect","drawImage","toBlob","blob","getSVGString","cssStyleText","parentElement","selectorTextArr","getElementsByTagName","classes","extractedCSSText","styleSheets","cssRules","rule","selectorText","cssText","str","includes","getCSSStyles","styleElement","refNode","hasChildNodes","appendCSS","XMLSerializer","serializeToString","dataURItoBlob","dataURI","byteString","atob","mimeString","ia","Uint8Array","Blob","y1","x2","y2","isPoint","box","found","compound","poly","pt","toDataURL","fileNameToSaveAs","downloadLink","download","href","URL","createObjectURL","click","svgId","scrollWidth","scrollHeight","d3.select","innerWidth","innerHeight","webkitURL","message","removeMessageBox","messageBox","outerHTML","el","fadeOutEffect","fadeTarget","getElementById","fadeEffect","onclick","config","similarityMatrix","distance","manhattan","reorder","optimal_leaf_order","Motif","print","motifs","template","nodeCount","linkCount","clusters","netClustering","cluster","cl","clusterLinks","ns","ls","LZString","fromCharCode","keyStrBase64","keyStrUriSafe","baseReverseDic","getBaseValue","alphabet","character","compressToBase64","res","_compress","decompressFromBase64","_decompress","compressToUTF16","decompressFromUTF16","compressed","compressToUint8Array","uncompressed","compress","buf","TotalLen","current_value","decompressFromUint8Array","decompress","compressToEncodedURIComponent","decompressFromEncodedURIComponent","bitsPerChar","getCharFromInt","ii","context_dictionary","context_dictionaryToCreate","context_c","context_wc","context_w","context_enlargeIn","context_dictSize","context_numBits","context_data","context_data_val","context_data_position","resetValue","getNextValue","bits","resb","maxpower","dictionary","enlargeIn","dictSize","numBits","entry","val","module","DataManager","keepOnlyOneSession","setOptions","clearSessionData","session","searchPrefix","sessionDataPrefix","SEP","keysToClear","localStorage","removeItem","clearAllSessionData","isSessionCached","importData","isSchemaWellDefined","graphForCaching","dataName","valueName","replacer","stringifyResult","JSON","stringify","stringToSave","LZString.compress","reviver","statefulReviver","storedResult","parseText","LZString.decompress","getGraph","dataname","dataManager","getDynamicGraph","sessionName","createVisualizationIFrame","parentId","visUri","visParams","iframe","visParamString","startsWith","server","port","protocol","hostname","pathname","scrolling","openView","tab","url","open","OrderType","visSpec","tabDiv","visDiv","ul","li","div","evt","visName","tabcontent","getElementsByClassName","display","tablinks","className","getItem","parseDyson","parseXML","dataString","sPrev","tPrev","parseJSON","edges","connections","relations","linkUserProps","vertices","parseJSONList","nodeNames","imports","parseNCube","nodeId","timeIndex","edgeId","sourceNodeId","targetNodeId","parsePajek","lines","parseType","parseMat","rowCount","currRow","parseGEDCOM","singleLine","personIds","personSex","familiyIds","familiyChildren","familiyHusband","familiyWife","fi","wi","ci","parseLinkList","DEL","nodeLabels","si","ti","parseMatrix","initialCol","datasetName","d3.text","parser","jsonFormats","d3.json","d3.xml","callBack","delimiter","rows","linkData","id_source","id_target","newLinkSchema","linkRow","colCount","shift","parseTime","d3.timeParse","formatTime","main.timeFormat","parsedTime","dataSet","csv","graph_link","filename","textFileAsBlob","searchForTerm","term","terms","locationIds","MESSAGE_HIGHLIGHT","MESSAGE_SELECTION","MESSAGE_TIME_RANGE","MESSAGE_SELECTION_CREATE","MESSAGE_SELECTION_DELETE","MESSAGE_SELECTION_SET_CURRENT","MESSAGE_SELECTION_COLORING","MESSAGE_SELECTION_SET_COLORING_VISIBILITY","MESSAGE_SELECTION_FILTER","MESSAGE_SELECTION_PRIORITY","MESSAGE_SEARCH_RESULT","MESSAGE_SET_STATE","MESSAGE_GET_STATE","MESSAGE_STATE_CREATED","MESSAGE_ZOOM_INTERACTION","MESSAGE_CENTER_VIEW_ON_SELECTION","MESSAGE_HANDLERS","messageHandler","previousMessageId","MESSAGE_KEY","processMessage","Message","body","HighlightMessage","msg","SelectionMessage","timeRange","startUnix","endUnix","single","propagate","TimeRangeMessage","distributeMessage","CreateSelectionMessage","SetCurrentSelectionIdMessage","ShowSelectionColorMessage","FilterSelectionMessage","SelectionPriorityMessage","p1","p2","selectionId1","selectionId2","priority1","priority2","DeleteSelectionMessage","SelectionColorMessage","CenterViewMessage","SearchResultMessage","searchTerm","NetworkControls","networkType","timeSliderStart","timeSliderEnd","SetStateMessage","viewType","GetStateMessage","bookmarkIndex","isNewBookmark","typeOfMultiView","StateCreatedMessage","ZoomInteractionMessage","visType","ineractionType","ownView","m3","m4","m4Selection","m5","m5SelectionId1","m5SelectionId2","linkElements","nodeElements","nodePairElements","m6","m7","m8","m10","m11","m12","m12Selection","messageType","handler","elementCompound","obj","isEmpty","cursor","globalZoom","panOffsetLocal","panOffsetGlobal","linkOpacity","nodeOpacity","nodeSize","edgeGap","linkWidth","labellingType","zoom","nodeOverlap","opacityOfPositionlessNodes","BSpline","points","degree","dimension","baseFunc","basisDeg2","baseFuncRangeInt","basisDeg3","basisDeg4","basisDeg5","seqAt","dim","margin","getInterpol","seq","rangeInt","tInt","calcAt","addBufferedRect","vertexArray","colorArray","addBufferedCirlce","angle","cos","sin","makeBuffer3f","buffer","Float32Array","makeBuffer4f","webgl","txtCanvas","WebGL","THREE","Scene","OrthographicCamera","WebGLRenderer","BufferGeometry","render","elementQueries","updateAttributes","updateStyle","renderer","scene","camera","enableZoom","mouseWheel","wheelDelta","updateProjectionMatrix","enablePanning","interactor","isPanEnabled","enableHorizontalPanning","isHorizontalPanEnabled","WebGLElementQuery","Mesh","dataElements","createCirclesWithBuffers","createPaths","createLines","createRectangles","createWebGLText","createPolygons","IS_SHADER","visualElements","getData","getVisual","visArr","Function","setAttr","wireframe","setStyle","vertexPositionBuffer","vertexColorBuffer","geometry","mesh","addAttribute","BufferAttribute","needsUpdate","verticesNeedUpdate","material","setText","mouseOverHandler","mouseMoveHandler","mouseOutHandler","mouseDownHandler","mouseUpHandler","clickHandler","register","method","dataElement","setX1","setY1","setX2","setY2","setX","setY","setZ","createPath","createPolygon","rotation","elementsNeedUpdate","lineDistancesNeedUpdate","removeAll","query","linewidth","parConfig","WIDTH","font","SIZE","measureText","textAlign","textBaseline","fillText","tex","Texture","minFilter","LinearFilter","flipY","transparent","PlaneGeometry","GroupElement","shaderMaterial","ShaderMaterial","vertexShader","fragmentShader","blending","NormalBlending","depthTest","side","DoubleSide","stroke","strokewidth","rectShape","Shape","moveTo","lineTo","ShapeGeometry","MeshBasicMaterial","Geometry","Vector3","Line","LineBasicMaterial","doubleSided","WebGLInteractor","mouseOverSelections","mouseMoveSelections","mouseOutSelections","mouseDownSelections","mouseUpSelections","clickSelections","eventName","lassoStartHandler","lassoEndHandler","lassoMoveHandler","mouseToWorldCoordinates","isLassoEnabled","which","lassoPoints","intersectedVisualElements","lastIntersectedSelections","lastIntersectedElements","nothingIntersected","intersect","mouseDown","panOffset","mouseStart","cameraStart","mousex","mousey","intersectCircles","intersectRects","intersectPaths","intersectedElements","v1","v2","distToSegmentSquared","sqr","dist2","l2","mouseX","mouseY","stretch","hatchWidth","startX","startY","lineThickness","geom","textGeom","TextGeometry","curveSegments","textMaterial","computeBoundingBox","bounds","boundingBox","antialias","preserveDrawingBuffer","setSize","setClearColor","domElement","light","PointLight","CircleGeometry","dynamic","arrayPoints","spline","curvePoints","circle","changeCallBack","eventType","fn","texture","clear","drawText","contextFont","textSize","drawTextCooked","lineHeight","save","maxText","computeMaxTextLength","substr","computeX","restore","maxWidth","len","minValue","maxValue","stepWidth","tickMarks","RADIUS_HANDLE","hasTickmarks","setDragEndCallBack","dragEndCallBackFn","appendTo","valueRange","d3\n            .scaleLinear","d3\n            .drag","ev","dragStart","dragMove","HEIGHT","LEFT","TOP","RIGHT","val2spaceScale","d3\n                .scaleLinear","isInverted","bar0","BAR_WIDTH","bar1","circleMin","circleMax","dragStartXMouse","getRelX","dragObj","minPos","maxPos","dragStartXBar","currentBarLength","xOffset","dragEnd","setIsInverted","inv","Slider","knob","SmartSlider","circleSingle","singleTimeStepX","network","granules","dynamicgraph.GRANULARITY","minGran","maxGran","visualize","unix_start","unix_end","numTimes","prev","prevprev","granularitySet","to1","to2","timeGranularities","gran","utils.formatAtGranularity","position_x","position_y","label_opacity","tickmarks","highlightPointer","highlightLabel","updateWithIds","startId","endId","minTimeId","maxTimeId","ticksFitting","TICK_MIN_DIST","minTime","maxTime","requiredTicks","tick_minGran_visible","granularityIndex","label_minGran_visible","tick_minGran_visible_prev","timeLabels","globalId","highlightId","utils.formatTimeAtGranularity","RadioButton","RADIUS","checked","isChecked","addClickHandler","d3parent","slider","widgetWidth","timesDummy","dynamicgraph.Time","sliderWidth","MARGIN_SLIDER_RIGHT","MARGIN_SLIDER_LEFT","lastDummyYear","minGranName","granularityName","getGranularityName","unixTimeSlider","SLIDER_TOP","tickScale","utcSecond","d3\n            .scaleUtc","tickHeightFunction","labelStart","labelEnd","updateTime","propagateButton","drawTickmarks","tickTimes","displayLabelSpacing","TICK_LABEL_GAP","formatForGranularities","formatString","minUnix","maxUnix","toDateString","messenger.timeRange"],"mappings":"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"}